LavaPack.loadBundle([[1807,{buffer:2970,"ethereum-cryptography/secp256k1":3212},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.MAX_WITHDRAWALS_PER_PAYLOAD=r.RLP_EMPTY_STRING=r.KECCAK256_RLP=r.KECCAK256_RLP_S=r.KECCAK256_RLP_ARRAY=r.KECCAK256_RLP_ARRAY_S=r.KECCAK256_NULL=r.KECCAK256_NULL_S=r.TWO_POW256=r.SECP256K1_ORDER_DIV_2=r.SECP256K1_ORDER=r.MAX_INTEGER_BIGINT=r.MAX_INTEGER=r.MAX_UINT64=void 0;const i=e("buffer"),a=e("ethereum-cryptography/secp256k1");r.MAX_UINT64=BigInt("0xffffffffffffffff"),r.MAX_INTEGER=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),r.MAX_INTEGER_BIGINT=BigInt("115792089237316195423570985008687907853269984665640564039457584007913129639935"),r.SECP256K1_ORDER=a.secp256k1.CURVE.n,r.SECP256K1_ORDER_DIV_2=a.secp256k1.CURVE.n/BigInt(2),r.TWO_POW256=BigInt("0x10000000000000000000000000000000000000000000000000000000000000000"),r.KECCAK256_NULL_S="c5d2460186f7233c927e7db2dcc703c0e500b653ca82273b7bfad8045d85a470",r.KECCAK256_NULL=i.Buffer.from(r.KECCAK256_NULL_S,"hex"),r.KECCAK256_RLP_ARRAY_S="1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347",r.KECCAK256_RLP_ARRAY=i.Buffer.from(r.KECCAK256_RLP_ARRAY_S,"hex"),r.KECCAK256_RLP_S="56e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421",r.KECCAK256_RLP=i.Buffer.from(r.KECCAK256_RLP_S,"hex"),r.RLP_EMPTY_STRING=i.Buffer.from([128]),r.MAX_WITHDRAWALS_PER_PAYLOAD=16}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>@metamask/gas-fee-controller>@metamask/controller-utils>@ethereumjs/util",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/gas-fee-controller/node_modules/@ethereumjs/util/dist/constants.js"}],[1808,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.compactBytesToNibbles=r.bytesToNibbles=r.nibblesToCompactBytes=r.nibblesToBytes=r.hasTerminator=void 0;r.hasTerminator=e=>e.length>0&&16===e[e.length-1];r.nibblesToBytes=(e,t)=>{for(let r=0,i=0;i<e.length;r+=1,i+=2)t[r]=e[i]<<4|e[i+1]};r.nibblesToCompactBytes=e=>{let t=0;(0,r.hasTerminator)(e)&&(t=1,e=e.subarray(0,e.length-1));const i=new Uint8Array(e.length/2+1);return i[0]=t<<5,1&~e.length||(i[0]|=16,i[0]|=e[0],e=e.subarray(1)),(0,r.nibblesToBytes)(e,i.subarray(1)),i};r.bytesToNibbles=e=>{const t=2*e.length+1,r=new Uint8Array(t);for(let t=0;t<e.length;t++){const i=e[t];r[2*t]=i/16,r[2*t+1]=i%16}return r[t-1]=16,r};r.compactBytesToNibbles=e=>{if(0===e.length)return e;let t=(0,r.bytesToNibbles)(e);t[0]<2&&(t=t.subarray(0,t.length-1));const i=2-(1&t[0]);return t.subarray(i)}}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>@metamask/gas-fee-controller>@metamask/controller-utils>@ethereumjs/util",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/gas-fee-controller/node_modules/@ethereumjs/util/dist/encoding.js"}],[1809,{"../../../../../../../../../is-buffer/index.js":3582,"./internal":1811},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.assertIsString=r.assertIsArray=r.assertIsBuffer=r.assertIsHexString=void 0;const i=e("./internal");r.assertIsHexString=function(e){if(!(0,i.isHexString)(e)){throw new Error(`This method only supports 0x-prefixed hex strings but input was: ${e}`)}};r.assertIsBuffer=function(e){if(!t.isBuffer(e)){throw new Error(`This method only supports Buffer but input was: ${e}`)}};r.assertIsArray=function(e){if(!Array.isArray(e)){throw new Error(`This method only supports number arrays but input was: ${e}`)}};r.assertIsString=function(e){if("string"!=typeof e){throw new Error(`This method only supports strings but input was: ${e}`)}}}).call(this)}).call(this,{isBuffer:e("../../../../../../../../../is-buffer/index.js")})}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>@metamask/gas-fee-controller>@metamask/controller-utils>@ethereumjs/util",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/gas-fee-controller/node_modules/@ethereumjs/util/dist/helpers.js"}],[181,{"@metamask/transaction-controller":2187,lodash:3770},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=e("lodash"),a=e("@metamask/transaction-controller");const n="sentEther";r.default={version:64,async migrate(e){const t=(0,i.cloneDeep)(e);t.meta.version=64;const r=function(e){var t;const r=null==e||null===(t=e.TransactionController)||void 0===t?void 0:t.transactions;if((0,i.isPlainObject)(r))for(const e of Object.values(r))e.type===n&&(e.type=a.TransactionType.simpleSend),e.history&&e.history.map((e=>(e.type&&e.type===n&&(e.type=a.TransactionType.simpleSend),e)));return e}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/064.js"}],[1810,{"./account":1803,"./address":1804,"./asyncEventEmitter":1805,"./bytes":1806,"./constants":1807,"./encoding":1808,"./internal":1811,"./lock":1812,"./provider":1813,"./signature":1814,"./types":1815,"./units":1816,"./withdrawal":1817},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var i=this&&this.__createBinding||(Object.create?function(e,t,r,i){i===undefined&&(i=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,a)}:function(e,t,r,i){i===undefined&&(i=r),e[i]=t[r]}),a=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||i(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),r.toAscii=r.stripHexPrefix=r.padToEven=r.isHexString=r.isHexPrefixed=r.getKeys=r.getBinarySize=r.fromUtf8=r.fromAscii=r.arrayContainsArray=void 0,a(e("./constants"),r),a(e("./units"),r),a(e("./account"),r),a(e("./address"),r),a(e("./withdrawal"),r),a(e("./signature"),r),a(e("./bytes"),r),a(e("./types"),r),a(e("./encoding"),r),a(e("./asyncEventEmitter"),r);var n=e("./internal");Object.defineProperty(r,"arrayContainsArray",{enumerable:!0,get:function(){return n.arrayContainsArray}}),Object.defineProperty(r,"fromAscii",{enumerable:!0,get:function(){return n.fromAscii}}),Object.defineProperty(r,"fromUtf8",{enumerable:!0,get:function(){return n.fromUtf8}}),Object.defineProperty(r,"getBinarySize",{enumerable:!0,get:function(){return n.getBinarySize}}),Object.defineProperty(r,"getKeys",{enumerable:!0,get:function(){return n.getKeys}}),Object.defineProperty(r,"isHexPrefixed",{enumerable:!0,get:function(){return n.isHexPrefixed}}),Object.defineProperty(r,"isHexString",{enumerable:!0,get:function(){return n.isHexString}}),Object.defineProperty(r,"padToEven",{enumerable:!0,get:function(){return n.padToEven}}),Object.defineProperty(r,"stripHexPrefix",{enumerable:!0,get:function(){return n.stripHexPrefix}}),Object.defineProperty(r,"toAscii",{enumerable:!0,get:function(){return n.toAscii}}),a(e("./lock"),r),a(e("./provider"),r)}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>@metamask/gas-fee-controller>@metamask/controller-utils>@ethereumjs/util",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/gas-fee-controller/node_modules/@ethereumjs/util/dist/index.js"}],[1811,{buffer:2970},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(e){(function(){function t(e){if("string"!=typeof e)throw new Error("[isHexPrefixed] input must be type 'string', received type "+typeof e);return"0"===e[0]&&"x"===e[1]}Object.defineProperty(r,"__esModule",{value:!0}),r.isHexString=r.getKeys=r.fromAscii=r.fromUtf8=r.toAscii=r.arrayContainsArray=r.getBinarySize=r.padToEven=r.stripHexPrefix=r.isHexPrefixed=void 0,r.isHexPrefixed=t;function i(e){let t=e;if("string"!=typeof t)throw new Error("[padToEven] value must be type 'string', received "+typeof t);return t.length%2&&(t=`0${t}`),t}r.stripHexPrefix=e=>{if("string"!=typeof e)throw new Error("[stripHexPrefix] input must be type 'string', received "+typeof e);return t(e)?e.slice(2):e},r.padToEven=i,r.getBinarySize=function(t){if("string"!=typeof t)throw new Error("[getBinarySize] method requires input type 'string', received "+typeof t);return e.byteLength(t,"utf8")},r.arrayContainsArray=function(e,t,r){if(!0!==Array.isArray(e))throw new Error(`[arrayContainsArray] method requires input 'superset' to be an array, got type '${typeof e}'`);if(!0!==Array.isArray(t))throw new Error(`[arrayContainsArray] method requires input 'subset' to be an array, got type '${typeof t}'`);return t[!0===r?"some":"every"]((t=>e.indexOf(t)>=0))},r.toAscii=function(e){let t="",r=0;const i=e.length;for("0x"===e.substring(0,2)&&(r=2);r<i;r+=2){const i=parseInt(e.substr(r,2),16);t+=String.fromCharCode(i)}return t},r.fromUtf8=function(t){return`0x${i(e.from(t,"utf8").toString("hex")).replace(/^0+|0+$/g,"")}`},r.fromAscii=function(e){let t="";for(let r=0;r<e.length;r++){const i=e.charCodeAt(r).toString(16);t+=i.length<2?`0${i}`:i}return`0x${t}`},r.getKeys=function(e,t,r){if(!Array.isArray(e))throw new Error("[getKeys] method expects input 'params' to be an array, got "+typeof e);if("string"!=typeof t)throw new Error("[getKeys] method expects input 'key' to be type 'string', got "+typeof e);const i=[];for(let a=0;a<e.length;a++){let n=e[a][t];if(!0!==r||n){if("string"!=typeof n)throw new Error("invalid abi - expected type 'string', received "+typeof n)}else n="";i.push(n)}return i},r.isHexString=function(e,t){return!("string"!=typeof e||!e.match(/^0x[0-9A-Fa-f]*$/))&&!(void 0!==t&&t>0&&e.length!==2+2*t)}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>@metamask/gas-fee-controller>@metamask/controller-utils>@ethereumjs/util",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/gas-fee-controller/node_modules/@ethereumjs/util/dist/internal.js"}],[1812,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.Lock=void 0;r.Lock=class{constructor(){this.permits=1,this.promiseResolverQueue=[]}async acquire(){return this.permits>0?(this.permits-=1,Promise.resolve(!0)):new Promise((e=>this.promiseResolverQueue.push(e)))}release(){if(this.permits+=1,this.permits>1&&this.promiseResolverQueue.length>0)console.warn("Lock.permits should never be > 0 when there is someone waiting.");else if(1===this.permits&&this.promiseResolverQueue.length>0){this.permits-=1;const e=this.promiseResolverQueue.shift();e&&e(!0)}}}}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>@metamask/gas-fee-controller>@metamask/controller-utils>@ethereumjs/util",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/gas-fee-controller/node_modules/@ethereumjs/util/dist/lock.js"}],[1813,{"micro-ftch":3813},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getProvider=r.fetchFromProvider=void 0;const i=e("micro-ftch");r.fetchFromProvider=async(e,t)=>(await(0,i.default)(e,{headers:{"content-type":"application/json"},type:"json",data:{method:t.method,params:t.params,jsonrpc:"2.0",id:1}})).result;r.getProvider=e=>{if("string"==typeof e)return e;if(e?.connection?.url!==undefined)return e.connection.url;throw new Error("Must provide valid provider URL or Web3Provider")}}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>@metamask/gas-fee-controller>@metamask/controller-utils>@ethereumjs/util",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/gas-fee-controller/node_modules/@ethereumjs/util/dist/provider.js"}],[1814,{"./bytes":1806,"./constants":1807,"./helpers":1809,buffer:2970,"ethereum-cryptography/keccak":3195,"ethereum-cryptography/secp256k1":3212},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.hashPersonalMessage=r.isValidSignature=r.fromRpcSig=r.toCompactSig=r.toRpcSig=r.ecrecover=r.ecsign=void 0;const i=e("ethereum-cryptography/keccak"),a=e("ethereum-cryptography/secp256k1"),n=e("./bytes"),s=e("./constants"),o=e("./helpers");function l(e,t){return e===BigInt(0)||e===BigInt(1)?e:t===undefined?e-BigInt(27):e-(t*BigInt(2)+BigInt(35))}function c(e){return e===BigInt(0)||e===BigInt(1)}r.ecsign=function(e,r,i){const n=a.secp256k1.sign(e,r),s=n.toCompactRawBytes();return{r:t.from(s.slice(0,32)),s:t.from(s.slice(32,64)),v:i===undefined?BigInt(n.recovery+27):BigInt(n.recovery+35)+BigInt(i)*BigInt(2)}};r.ecrecover=function(e,r,i,s,o){const d=t.concat([(0,n.setLengthLeft)(i,32),(0,n.setLengthLeft)(s,32)],64),u=l(r,o);if(!c(u))throw new Error("Invalid signature v value");const h=a.secp256k1.Signature.fromCompact(d).addRecoveryBit(Number(u)).recoverPublicKey(e);return t.from(h.toRawBytes(!1).slice(1))};r.toRpcSig=function(e,r,i,a){if(!c(l(e,a)))throw new Error("Invalid signature v value");return(0,n.bufferToHex)(t.concat([(0,n.setLengthLeft)(r,32),(0,n.setLengthLeft)(i,32),(0,n.toBuffer)(e)]))};r.toCompactSig=function(e,r,i,a){if(!c(l(e,a)))throw new Error("Invalid signature v value");let s=i;return(e>BigInt(28)&&e%BigInt(2)===BigInt(1)||e===BigInt(1)||e===BigInt(28))&&(s=t.from(i),s[0]|=128),(0,n.bufferToHex)(t.concat([(0,n.setLengthLeft)(r,32),(0,n.setLengthLeft)(s,32)]))};r.fromRpcSig=function(e){const t=(0,n.toBuffer)(e);let r,i,a;if(t.length>=65)r=t.slice(0,32),i=t.slice(32,64),a=(0,n.bufferToBigInt)(t.slice(64));else{if(64!==t.length)throw new Error("Invalid signature length");r=t.slice(0,32),i=t.slice(32,64),a=BigInt((0,n.bufferToInt)(t.slice(32,33))>>7),i[0]&=127}return a<27&&(a+=BigInt(27)),{v:a,r:r,s:i}};r.isValidSignature=function(e,t,r,i=!0,a){if(32!==t.length||32!==r.length)return!1;if(!c(l(e,a)))return!1;const o=(0,n.bufferToBigInt)(t),d=(0,n.bufferToBigInt)(r);return!(o===BigInt(0)||o>=s.SECP256K1_ORDER||d===BigInt(0)||d>=s.SECP256K1_ORDER)&&!(i&&d>=s.SECP256K1_ORDER_DIV_2)};r.hashPersonalMessage=function(e){(0,o.assertIsBuffer)(e);const r=t.from(`Ethereum Signed Message:\n${e.length}`,"utf-8");return t.from((0,i.keccak256)(t.concat([r,e])))}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>@metamask/gas-fee-controller>@metamask/controller-utils>@ethereumjs/util",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/gas-fee-controller/node_modules/@ethereumjs/util/dist/signature.js"}],[1815,{"./bytes":1806,"./internal":1811},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.toType=r.TypeOutput=void 0;const i=e("./bytes"),a=e("./internal");var n;!function(e){e[e.Number=0]="Number",e[e.BigInt=1]="BigInt",e[e.Buffer=2]="Buffer",e[e.PrefixedHexString=3]="PrefixedHexString"}(n=r.TypeOutput||(r.TypeOutput={})),r.toType=function(e,t){if(null===e)return null;if(e===undefined)return undefined;if("string"==typeof e&&!(0,a.isHexString)(e))throw new Error(`A string must be provided with a 0x-prefix, given: ${e}`);if("number"==typeof e&&!Number.isSafeInteger(e))throw new Error("The provided number is greater than MAX_SAFE_INTEGER (please use an alternative input type)");const r=(0,i.toBuffer)(e);switch(t){case n.Buffer:return r;case n.BigInt:return(0,i.bufferToBigInt)(r);case n.Number:{const e=(0,i.bufferToBigInt)(r);if(e>BigInt(Number.MAX_SAFE_INTEGER))throw new Error("The provided number is greater than MAX_SAFE_INTEGER (please use an alternative output type)");return Number(e)}case n.PrefixedHexString:return(0,i.bufferToHex)(r);default:throw new Error("unknown outputType")}}}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>@metamask/gas-fee-controller>@metamask/controller-utils>@ethereumjs/util",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/gas-fee-controller/node_modules/@ethereumjs/util/dist/types.js"}],[1816,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.GWEI_TO_WEI=void 0,r.GWEI_TO_WEI=BigInt(1e9)}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>@metamask/gas-fee-controller>@metamask/controller-utils>@ethereumjs/util",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/gas-fee-controller/node_modules/@ethereumjs/util/dist/units.js"}],[1817,{"./address":1804,"./bytes":1806,"./types":1815,buffer:2970},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.Withdrawal=void 0;const i=e("./address"),a=e("./bytes"),n=e("./types");class s{constructor(e,t,r,i){this.index=e,this.validatorIndex=t,this.address=r,this.amount=i}static fromWithdrawalData(e){const{index:t,validatorIndex:r,address:a,amount:o}=e,l=(0,n.toType)(t,n.TypeOutput.BigInt),c=(0,n.toType)(r,n.TypeOutput.BigInt),d=new i.Address((0,n.toType)(a,n.TypeOutput.Buffer)),u=(0,n.toType)(o,n.TypeOutput.BigInt);return new s(l,c,d,u)}static fromValuesArray(e){if(4!==e.length)throw Error(`Invalid withdrawalArray length expected=4 actual=${e.length}`);const[t,r,i,a]=e;return s.fromWithdrawalData({index:t,validatorIndex:r,address:i,amount:a})}static toBufferArray(e){const{index:r,validatorIndex:a,address:s,amount:o}=e,l=(0,n.toType)(r,n.TypeOutput.BigInt)===BigInt(0)?t.alloc(0):(0,n.toType)(r,n.TypeOutput.Buffer),c=(0,n.toType)(a,n.TypeOutput.BigInt)===BigInt(0)?t.alloc(0):(0,n.toType)(a,n.TypeOutput.Buffer);let d;d=s instanceof i.Address?s.buf:(0,n.toType)(s,n.TypeOutput.Buffer);return[l,c,d,(0,n.toType)(o,n.TypeOutput.BigInt)===BigInt(0)?t.alloc(0):(0,n.toType)(o,n.TypeOutput.Buffer)]}raw(){return s.toBufferArray(this)}toValue(){return{index:this.index,validatorIndex:this.validatorIndex,address:this.address.buf,amount:this.amount}}toJSON(){return{index:(0,a.bigIntToHex)(this.index),validatorIndex:(0,a.bigIntToHex)(this.validatorIndex),address:"0x"+this.address.buf.toString("hex"),amount:(0,a.bigIntToHex)(this.amount)}}}r.Withdrawal=s}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>@metamask/gas-fee-controller>@metamask/controller-utils>@ethereumjs/util",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/gas-fee-controller/node_modules/@ethereumjs/util/dist/withdrawal.js"}],[1818,{"./chunk-UJFCPTF3.js":1820,"./chunk-Z4BLTVTB.js":1821},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var i,a,n,s,o=e("./chunk-UJFCPTF3.js"),l=e("./chunk-Z4BLTVTB.js");i=new WeakMap,a=new WeakMap,n=new WeakMap,s=new WeakMap,r.ControllerMessenger=class{constructor(){l.__privateAdd.call(void 0,this,i,new Map),l.__privateAdd.call(void 0,this,a,new Map),l.__privateAdd.call(void 0,this,n,new Map),l.__privateAdd.call(void 0,this,s,new Map)}registerActionHandler(e,t){if(l.__privateGet.call(void 0,this,i).has(e))throw new Error(`A handler for ${e} has already been registered`);l.__privateGet.call(void 0,this,i).set(e,t)}unregisterActionHandler(e){l.__privateGet.call(void 0,this,i).delete(e)}clearActions(){l.__privateGet.call(void 0,this,i).clear()}call(e,...t){const r=l.__privateGet.call(void 0,this,i).get(e);if(!r)throw new Error(`A handler for ${e} has not been registered`);return r(...t)}registerInitialEventPayload({eventType:e,getPayload:t}){l.__privateGet.call(void 0,this,n).set(e,t)}publish(e,...t){const r=l.__privateGet.call(void 0,this,a).get(e);if(r)for(const[e,i]of r.entries())try{if(i){const r=l.__privateGet.call(void 0,this,s).get(e),a=i(...t);a!==r&&(l.__privateGet.call(void 0,this,s).set(e,a),e(a,r))}else e(...t)}catch(e){setTimeout((()=>{throw e}))}}subscribe(e,t,r){let i=l.__privateGet.call(void 0,this,a).get(e);if(i||(i=new Map,l.__privateGet.call(void 0,this,a).set(e,i)),i.set(t,r),r){const i=l.__privateGet.call(void 0,this,n).get(e);if(i){const e=r(...i());l.__privateGet.call(void 0,this,s).set(t,e)}}}unsubscribe(e,t){const r=l.__privateGet.call(void 0,this,a).get(e);if(!r||!r.has(t))throw new Error(`Subscription not found for event: ${e}`);r.get(t)&&l.__privateGet.call(void 0,this,s).delete(t),r.delete(t)}clearEventSubscriptions(e){l.__privateGet.call(void 0,this,a).delete(e)}clearSubscriptions(){l.__privateGet.call(void 0,this,a).clear()}getRestricted({name:e,allowedActions:t,allowedEvents:r}){return new(0,o.RestrictedControllerMessenger)({controllerMessenger:this,name:e,allowedActions:t,allowedEvents:r})}}}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>@metamask/gas-fee-controller>@metamask/base-controller",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/gas-fee-controller/node_modules/@metamask/base-controller/dist/chunk-G42723LG.js"}],[1819,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var i=class{constructor(e={},t={}){this.defaultConfig={},this.defaultState={},this.disabled=!1,this.name="BaseController",this.internalConfig=this.defaultConfig,this.internalState=this.defaultState,this.internalListeners=[],this.initialState=t,this.initialConfig=e}initialize(){return this.internalState=this.defaultState,this.internalConfig=this.defaultConfig,this.configure(this.initialConfig),this.update(this.initialState),this}get config(){return this.internalConfig}get state(){return this.internalState}configure(e,t=!1,r=!0){if(r){this.internalConfig=t?e:Object.assign(this.internalConfig,e);for(const e of Object.keys(this.internalConfig)){const t=this.internalConfig[e];void 0!==t&&(this[e]=t)}}else for(const t of Object.keys(e))if(void 0!==this.internalConfig[t]){const r=e[t];this.internalConfig[t]=r,this[t]=r}}notify(){this.disabled||this.internalListeners.forEach((e=>{e(this.internalState)}))}subscribe(e){this.internalListeners.push(e)}unsubscribe(e){const t=this.internalListeners.findIndex((t=>e===t));return t>-1&&this.internalListeners.splice(t,1),t>-1}update(e,t=!1){this.internalState=t?Object.assign({},e):Object.assign({},this.internalState,e),this.notify()}},a=i;r.BaseControllerV1=i,r.BaseControllerV1_default=a}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>@metamask/gas-fee-controller>@metamask/base-controller",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/gas-fee-controller/node_modules/@metamask/base-controller/dist/chunk-NINOM2XQ.js"}],[182,{lodash:3770},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=e("lodash");r.default={version:65,async migrate(e){const t=(0,i.cloneDeep)(e);t.meta.version=65;const r=function(e){if(e.PreferencesController){const{completedOnboarding:t,firstTimeFlowType:r}=e.PreferencesController;e.OnboardingController=e.OnboardingController??{},t!==undefined&&(e.OnboardingController.completedOnboarding=t,delete e.PreferencesController.completedOnboarding),r!==undefined&&(e.OnboardingController.firstTimeFlowType=r,delete e.PreferencesController.firstTimeFlowType)}return e}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/065.js"}],[1820,{"./chunk-Z4BLTVTB.js":1821},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var i,a,n,s,o,l,c,d,u,h,p=e("./chunk-Z4BLTVTB.js");i=new WeakMap,a=new WeakMap,n=new WeakMap,s=new WeakMap,o=new WeakSet,l=function(e){const t=p.__privateGet.call(void 0,this,s);return p.__privateMethod.call(void 0,this,u,h).call(this,e)||null!==t&&t.includes(e)},c=new WeakSet,d=function(e){const t=p.__privateGet.call(void 0,this,n);return p.__privateMethod.call(void 0,this,u,h).call(this,e)||null!==t&&t.includes(e)},u=new WeakSet,h=function(e){return e.startsWith(`${p.__privateGet.call(void 0,this,a)}:`)},r.RestrictedControllerMessenger=class{constructor({controllerMessenger:e,name:t,allowedActions:r,allowedEvents:l}){p.__privateAdd.call(void 0,this,o),p.__privateAdd.call(void 0,this,c),p.__privateAdd.call(void 0,this,u),p.__privateAdd.call(void 0,this,i,void 0),p.__privateAdd.call(void 0,this,a,void 0),p.__privateAdd.call(void 0,this,n,void 0),p.__privateAdd.call(void 0,this,s,void 0),p.__privateSet.call(void 0,this,i,e),p.__privateSet.call(void 0,this,a,t),p.__privateSet.call(void 0,this,n,r),p.__privateSet.call(void 0,this,s,l)}registerActionHandler(e,t){if(!p.__privateMethod.call(void 0,this,u,h).call(this,e))throw new Error(`Only allowed registering action handlers prefixed by '${p.__privateGet.call(void 0,this,a)}:'`);p.__privateGet.call(void 0,this,i).registerActionHandler(e,t)}unregisterActionHandler(e){if(!p.__privateMethod.call(void 0,this,u,h).call(this,e))throw new Error(`Only allowed unregistering action handlers prefixed by '${p.__privateGet.call(void 0,this,a)}:'`);p.__privateGet.call(void 0,this,i).unregisterActionHandler(e)}call(e,...t){if(!p.__privateMethod.call(void 0,this,c,d).call(this,e))throw new Error(`Action missing from allow list: ${e}`);return p.__privateGet.call(void 0,this,i).call(e,...t)}registerInitialEventPayload({eventType:e,getPayload:t}){if(!p.__privateMethod.call(void 0,this,u,h).call(this,e))throw new Error(`Only allowed publishing events prefixed by '${p.__privateGet.call(void 0,this,a)}:'`);p.__privateGet.call(void 0,this,i).registerInitialEventPayload({eventType:e,getPayload:t})}publish(e,...t){if(!p.__privateMethod.call(void 0,this,u,h).call(this,e))throw new Error(`Only allowed publishing events prefixed by '${p.__privateGet.call(void 0,this,a)}:'`);p.__privateGet.call(void 0,this,i).publish(e,...t)}subscribe(e,t,r){if(!p.__privateMethod.call(void 0,this,o,l).call(this,e))throw new Error(`Event missing from allow list: ${e}`);return r?p.__privateGet.call(void 0,this,i).subscribe(e,t,r):p.__privateGet.call(void 0,this,i).subscribe(e,t)}unsubscribe(e,t){if(!p.__privateMethod.call(void 0,this,o,l).call(this,e))throw new Error(`Event missing from allow list: ${e}`);p.__privateGet.call(void 0,this,i).unsubscribe(e,t)}clearEventSubscriptions(e){if(!p.__privateMethod.call(void 0,this,u,h).call(this,e))throw new Error(`Only allowed clearing events prefixed by '${p.__privateGet.call(void 0,this,a)}:'`);p.__privateGet.call(void 0,this,i).clearEventSubscriptions(e)}}}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>@metamask/gas-fee-controller>@metamask/base-controller",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/gas-fee-controller/node_modules/@metamask/base-controller/dist/chunk-UJFCPTF3.js"}],[1821,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var i=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)};r.__privateGet=(e,t,r)=>(i(e,t,"read from private field"),r?r.call(e):t.get(e)),r.__privateAdd=(e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)},r.__privateSet=(e,t,r,a)=>(i(e,t,"write to private field"),a?a.call(e,r):t.set(e,r),r),r.__privateMethod=(e,t,r)=>(i(e,t,"access private method"),r)}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>@metamask/gas-fee-controller>@metamask/base-controller",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/gas-fee-controller/node_modules/@metamask/base-controller/dist/chunk-Z4BLTVTB.js"}],[1822,{"./chunk-Z4BLTVTB.js":1821,immer:3574},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var i,a=e("./chunk-Z4BLTVTB.js"),n=e("immer");n.enablePatches.call(void 0);function s(e,t,r){return Object.keys(e).reduce(((i,a)=>{try{const n=t[a];if(!n)throw new Error(`No metadata found for '${String(a)}'`);const s=n[r],o=e[a];return"function"==typeof s?i[a]=s(o):s&&(i[a]=o),i}catch(e){return setTimeout((()=>{throw e})),i}}),{})}i=new WeakMap,r.BaseController=class{constructor({messenger:e,metadata:t,name:r,state:s}){a.__privateAdd.call(void 0,this,i,void 0),this.messagingSystem=e,this.name=r,a.__privateSet.call(void 0,this,i,n.freeze.call(void 0,s,!0)),this.metadata=t,this.messagingSystem.registerActionHandler(`${r}:getState`,(()=>this.state)),this.messagingSystem.registerInitialEventPayload({eventType:`${r}:stateChange`,getPayload:()=>[this.state,[]]})}get state(){return a.__privateGet.call(void 0,this,i)}set state(e){throw new Error("Controller state cannot be directly mutated; use 'update' method instead.")}update(e){const[t,r,s]=n.produceWithPatches.call(void 0,a.__privateGet.call(void 0,this,i),e);return a.__privateSet.call(void 0,this,i,t),this.messagingSystem.publish(`${this.name}:stateChange`,t,r),{nextState:t,patches:r,inversePatches:s}}applyPatches(e){const t=n.applyPatches.call(void 0,a.__privateGet.call(void 0,this,i),e);a.__privateSet.call(void 0,this,i,t),this.messagingSystem.publish(`${this.name}:stateChange`,t,e)}destroy(){this.messagingSystem.clearEventSubscriptions(`${this.name}:stateChange`)}},r.getAnonymizedState=function(e,t){return s(e,t,"anonymous")},r.getPersistentState=function(e,t){return s(e,t,"persist")}}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>@metamask/gas-fee-controller>@metamask/base-controller",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/gas-fee-controller/node_modules/@metamask/base-controller/dist/chunk-ZNOPSWMU.js"}],[1823,{"./chunk-G42723LG.js":1818,"./chunk-NINOM2XQ.js":1819,"./chunk-UJFCPTF3.js":1820,"./chunk-Z4BLTVTB.js":1821,"./chunk-ZNOPSWMU.js":1822},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var i=e("./chunk-NINOM2XQ.js"),a=e("./chunk-ZNOPSWMU.js"),n=e("./chunk-G42723LG.js"),s=e("./chunk-UJFCPTF3.js");e("./chunk-Z4BLTVTB.js"),r.BaseController=a.BaseController,r.BaseControllerV1=i.BaseControllerV1,r.ControllerMessenger=n.ControllerMessenger,r.RestrictedControllerMessenger=s.RestrictedControllerMessenger,r.getAnonymizedState=a.getAnonymizedState,r.getPersistentState=a.getPersistentState}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>@metamask/gas-fee-controller>@metamask/base-controller",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/gas-fee-controller/node_modules/@metamask/base-controller/dist/index.js"}],[1824,{"./chunk-RKVNLW2C.js":1828,"@ethereumjs/util":1810,"@metamask/ethjs-unit":1334,"@metamask/utils":2253,"bn.js":2922,buffer:2970,"eth-ens-namehash":3160,"fast-deep-equal":3291},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var a=e("./chunk-RKVNLW2C.js"),n=e("@ethereumjs/util"),s=e("@metamask/ethjs-unit"),o=e("@metamask/utils"),l=i(e("bn.js")),c=i(e("eth-ens-namehash")),d=i(e("fast-deep-equal")),u=new Error("timeout"),h=["__proto__","constructor","prototype"];function p(e){return e?new(0,l.default)(o.remove0x.call(void 0,e),16):new(0,l.default)(0)}async function m(e,t){const r=await fetch(e,t);if(!r.ok)throw new Error(`Fetch failed with status '${r.status}' for request '${String(e)}'`);return r}async function f(e,t){const r=await m(e,t);return await r.json()}r.PROTOTYPE_POLLUTION_BLOCKLIST=h,r.isSafeDynamicKey=function(e){return"string"==typeof e&&!h.some((t=>e===t))},r.isSafeChainId=function(e){if(!o.isHexString.call(void 0,e))return!1;const t=Number.parseInt(e,o.isStrictHexString.call(void 0,e)?16:10);return Number.isSafeInteger(t)&&t>0&&t<=a.MAX_SAFE_CHAIN_ID},r.BNToHex=function(e){return o.add0x.call(void 0,e.toString(16))},r.fractionBN=function(e,t,r){const i=new(0,l.default)(t),a=new(0,l.default)(r);return e.mul(i).div(a)},r.gweiDecToWEIBN=function(e){if(Number.isNaN(e))return new(0,l.default)(0);const t=e.toString().split("."),r=t[0]||"0";let i=t[1]||"";if(!i)return s.toWei.call(void 0,r,"gwei");if(i.length<=9)return s.toWei.call(void 0,`${r}.${i}`,"gwei");const a=i.slice(9)[0];i=i.slice(0,9);let n=s.toWei.call(void 0,`${r}.${i}`,"gwei");return Number(a)>=5&&(n=n.add(new(0,l.default)(1))),n},r.weiHexToGweiDec=function(e){const t=new(0,l.default)(o.remove0x.call(void 0,e),16);return s.fromWei.call(void 0,t,"gwei")},r.getBuyURL=function(e="1",t,r=5){switch(e){case"1":return`https://buy.coinbase.com/?code=9ec56d01-7e81-5017-930c-513daa27bb6a&amount=${r}&address=${t}&crypto_currency=ETH`;case"5":return"https://goerli-faucet.slock.it/";case"11155111":return"https://sepoliafaucet.net/";default:return}},r.hexToBN=p,r.hexToText=function(e){try{const r=o.remove0x.call(void 0,e);return t.from(r,"hex").toString("utf8")}catch(t){return e}},r.fromHex=function(e){return l.default.isBN(e)?e:new(0,l.default)(p(e).toString(10))},r.toHex=function(e){return"string"==typeof e&&o.isStrictHexString.call(void 0,e)?e:`0x${l.default.isBN(e)?e.toString(16):new(0,l.default)(e.toString(),10).toString(16)}`},r.safelyExecute=async function(e,t=!1){try{return await e()}catch(e){return void(t&&console.error(e))}},r.safelyExecuteWithTimeout=async function(e,t=!1,r=500){try{return await Promise.race([e(),new Promise(((e,t)=>setTimeout((()=>{t(u)}),r)))])}catch(e){return void(t&&console.error(e))}},r.toChecksumHexAddress=function(e){if("string"!=typeof e)return e;const t=o.add0x.call(void 0,e);return o.isHexString.call(void 0,t)?n.toChecksumAddress.call(void 0,t):t},r.isValidHexAddress=function(e,{allowNonPrefixed:t=!0}={}){const r=t?o.add0x.call(void 0,e):e;return!!o.isStrictHexString.call(void 0,r)&&n.isValidAddress.call(void 0,r)},r.isSmartContractCode=function(e){return!!e&&("0x"!==e&&"0x0"!==e)},r.successfulFetch=m,r.handleFetch=f,r.fetchWithErrorHandling=async function({url:e,options:t,timeout:r,errorCodesToCatch:i}){let a;try{a=r?Promise.race([await f(e,t),new Promise(((e,t)=>setTimeout((()=>{t(u)}),r)))]):await f(e,t)}catch(e){!function(e,t=[]){if(!e)return;if(!(e instanceof Error))throw e;if(!t.some((t=>e.message.includes(`Fetch failed with status '${t}'`)))&&!e.message.includes("Failed to fetch")&&e!==u)throw e;console.error(e)}(e,i)}return a},r.timeoutFetch=async function(e,t,r=500){return Promise.race([m(e,t),new Promise(((e,t)=>setTimeout((()=>{t(u)}),r)))])},r.normalizeEnsName=function(e){if("."===e)return e;if(e&&"string"==typeof e)try{const t=c.default.normalize(e.trim());if(t.match(/^(([\w\d-]+)\.)*[\w\d-]{7,}\.(eth|test)$/u))return t}catch(e){}return null},r.query=function(e,t,r=[]){return new Promise(((i,a)=>{const n=(e,t)=>{e?a(e):i(t)};t in e&&"function"==typeof e[t]?e[t](...r,n):e.sendAsync({method:t,params:r},n)}))},r.convertHexToDecimal=(e="0x0")=>o.isStrictHexString.call(void 0,e)?parseInt(e,16):Number(e)?Number(e):0,r.isPlainObject=function(e){return Boolean(e)&&"object"==typeof e&&!Array.isArray(e)},r.isNonEmptyArray=function(e){return Array.isArray(e)&&e.length>0},r.isValidJson=function(e){try{return d.default.call(void 0,e,JSON.parse(JSON.stringify(e)))}catch(e){return!1}}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>@metamask/gas-fee-controller>@metamask/controller-utils",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/gas-fee-controller/node_modules/@metamask/controller-utils/dist/chunk-7C4YHS6A.js"}],[1825,{"@metamask/utils":2253},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var i=e("@metamask/utils"),a=i.createProjectLogger.call(void 0,"controller-utils");r.createModuleLogger=i.createModuleLogger,r.projectLogger=a}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>@metamask/gas-fee-controller>@metamask/controller-utils",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/gas-fee-controller/node_modules/@metamask/controller-utils/dist/chunk-DBJSLKNR.js"}],[1826,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var i={mainnet:"mainnet",goerli:"goerli",sepolia:"sepolia","linea-goerli":"linea-goerli","linea-sepolia":"linea-sepolia","linea-mainnet":"linea-mainnet"},a={...i,rpc:"rpc"};var n=(e=>(e.Mainnet="mainnet",e.Goerli="goerli",e.Sepolia="sepolia",e.LineaGoerli="linea-goerli",e.LineaSepolia="linea-sepolia",e.LineaMainnet="linea-mainnet",e.Aurora="aurora",e))(n||{}),s={mainnet:"0x1",goerli:"0x5",sepolia:"0xaa36a7",aurora:"0x4e454152","linea-goerli":"0xe704","linea-sepolia":"0xe705","linea-mainnet":"0xe708"},o=(e=>(e.mainnet="ETH",e.goerli="GoerliETH",e.sepolia="SepoliaETH",e["linea-goerli"]="LineaETH",e["linea-sepolia"]="LineaETH",e["linea-mainnet"]="ETH",e.rpc="",e))(o||{});r.InfuraNetworkType=i,r.NetworkType=a,r.isNetworkType=function(e){return Object.values(a).includes(e)},r.isInfuraNetworkType=function(e){return Object.keys(i).includes(e)},r.BuiltInNetworkName=n,r.ChainId=s,r.NetworksTicker=o}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>@metamask/gas-fee-controller>@metamask/controller-utils",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/gas-fee-controller/node_modules/@metamask/controller-utils/dist/chunk-LGGBBU6G.js"}],[1827,{"./chunk-DBJSLKNR.js":1825,"@metamask/utils":2253,"@spruceid/siwe-parser":2468,buffer:2970},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0});var i=e("./chunk-DBJSLKNR.js"),a=e("@metamask/utils"),n=e("@spruceid/siwe-parser"),s=i.createModuleLogger.call(void 0,i.projectLogger,"detect-siwe");function o(e){try{const i="string"!=typeof(r=e)?r:a.remove0x.call(void 0,r),n=t.from(i,"hex");return 32===n.length?e:n.toString("utf8")}catch(t){return s(t),e}var r}var l={"http:":"80","https:":"443"},c=(e,t)=>e.match(/^[^/:]*:\/\//u)?new URL(e):new URL(`${t}//${e}`);r.parseDomainParts=c,r.isValidSIWEOrigin=e=>{try{const{origin:t,siwe:r}=e;if(!t||!r?.parsedMessage?.domain)return!1;const i=new URL(t),a=c(r.parsedMessage.domain,i.protocol);return 0===a.hostname.localeCompare(i.hostname,void 0,{sensitivity:"accent"})&&(""!==a.port&&a.port!==i.port?""===i.port&&a.port===l[i.protocol]:""===a.username||a.username===i.username)}catch(e){return s(e),!1}},r.detectSIWE=e=>{try{const{data:t}=e,r=o(t);return{isSIWEMessage:!0,parsedMessage:new(0,n.ParsedMessage)(r)}}catch(e){return{isSIWEMessage:!1,parsedMessage:null}}}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>@metamask/gas-fee-controller>@metamask/controller-utils",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/gas-fee-controller/node_modules/@metamask/controller-utils/dist/chunk-M6G3ISXG.js"}],[1828,{"./chunk-LGGBBU6G.js":1826},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var i=e("./chunk-LGGBBU6G.js"),a={[i.NetworkType.goerli]:{chainId:i.ChainId.goerli,ticker:"GoerliETH",rpcPrefs:{blockExplorerUrl:`https://${i.NetworkType.goerli}.etherscan.io`}},[i.NetworkType.sepolia]:{chainId:i.ChainId.sepolia,ticker:"SepoliaETH",rpcPrefs:{blockExplorerUrl:`https://${i.NetworkType.sepolia}.etherscan.io`}},[i.NetworkType.mainnet]:{chainId:i.ChainId.mainnet,ticker:"ETH",rpcPrefs:{blockExplorerUrl:"https://etherscan.io"}},[i.NetworkType["linea-goerli"]]:{chainId:i.ChainId["linea-goerli"],ticker:"LineaETH",rpcPrefs:{blockExplorerUrl:"https://goerli.lineascan.build"}},[i.NetworkType["linea-sepolia"]]:{chainId:i.ChainId["linea-sepolia"],ticker:"LineaETH",rpcPrefs:{blockExplorerUrl:"https://sepolia.lineascan.build"}},[i.NetworkType["linea-mainnet"]]:{chainId:i.ChainId["linea-mainnet"],ticker:"ETH",rpcPrefs:{blockExplorerUrl:"https://lineascan.build"}},[i.NetworkType.rpc]:{chainId:void 0,blockExplorerUrl:void 0,ticker:void 0,rpcPrefs:void 0}},n=(e=>(e.AddEthereumChain="wallet_addEthereumChain",e.ConnectAccounts="connect_accounts",e.EthDecrypt="eth_decrypt",e.EthGetEncryptionPublicKey="eth_getEncryptionPublicKey",e.EthSignTypedData="eth_signTypedData",e.PersonalSign="personal_sign",e.ResultError="result_error",e.ResultSuccess="result_success",e.SnapDialogAlert="snap_dialog:alert",e.SnapDialogConfirmation="snap_dialog:confirmation",e.SnapDialogPrompt="snap_dialog:prompt",e.SwitchEthereumChain="wallet_switchEthereumChain",e.Transaction="transaction",e.Unlock="unlock",e.WalletConnect="wallet_connect",e.WalletRequestPermissions="wallet_requestPermissions",e.WatchAsset="wallet_watchAsset",e))(n||{}),s={[i.ChainId.goerli]:"goerli",[i.ChainId.sepolia]:"sepolia",[i.ChainId.mainnet]:"mainnet",[i.ChainId["linea-goerli"]]:"linea-goerli",[i.ChainId["linea-sepolia"]]:"linea-sepolia",[i.ChainId["linea-mainnet"]]:"linea-mainnet",[i.ChainId.aurora]:"aurora"};r.RPC="rpc",r.FALL_BACK_VS_CURRENCY="ETH",r.IPFS_DEFAULT_GATEWAY_URL="https://cloudflare-ipfs.com/ipfs/",r.GANACHE_CHAIN_ID="0x539",r.MAX_SAFE_CHAIN_ID=0xfffffffffffec,r.ERC721="ERC721",r.ERC1155="ERC1155",r.ERC20="ERC20",r.ERC721_INTERFACE_ID="0x80ac58cd",r.ERC721_METADATA_INTERFACE_ID="0x5b5e139f",r.ERC721_ENUMERABLE_INTERFACE_ID="0x780e9d63",r.ERC1155_INTERFACE_ID="0xd9b67a26",r.ERC1155_METADATA_URI_INTERFACE_ID="0x0e89341c",r.ERC1155_TOKEN_RECEIVER_INTERFACE_ID="0x4e2312e0",r.GWEI="gwei",r.ASSET_TYPES={NATIVE:"NATIVE",TOKEN:"TOKEN",NFT:"NFT",UNKNOWN:"UNKNOWN"},r.TESTNET_TICKER_SYMBOLS={GOERLI:"GoerliETH",SEPOLIA:"SepoliaETH",LINEA_GOERLI:"LineaETH",LINEA_SEPOLIA:"LineaETH"},r.BUILT_IN_NETWORKS=a,r.OPENSEA_PROXY_URL="https://proxy.api.cx.metamask.io/opensea/v1/api/v2",r.NFT_API_BASE_URL="https://nft.api.cx.metamask.io",r.NFT_API_VERSION="1",r.NFT_API_TIMEOUT=15e3,r.ORIGIN_METAMASK="metamask",r.ApprovalType=n,r.CHAIN_ID_TO_ETHERS_NETWORK_NAME_MAP=s}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>@metamask/gas-fee-controller>@metamask/controller-utils",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/gas-fee-controller/node_modules/@metamask/controller-utils/dist/chunk-RKVNLW2C.js"}],[1829,{"./chunk-7C4YHS6A.js":1824,"./chunk-DBJSLKNR.js":1825,"./chunk-LGGBBU6G.js":1826,"./chunk-M6G3ISXG.js":1827,"./chunk-RKVNLW2C.js":1828},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var i=e("./chunk-M6G3ISXG.js");e("./chunk-DBJSLKNR.js");var a=e("./chunk-7C4YHS6A.js"),n=e("./chunk-RKVNLW2C.js"),s=e("./chunk-LGGBBU6G.js");r.ASSET_TYPES=n.ASSET_TYPES,r.ApprovalType=n.ApprovalType,r.BNToHex=a.BNToHex,r.BUILT_IN_NETWORKS=n.BUILT_IN_NETWORKS,r.BuiltInNetworkName=s.BuiltInNetworkName,r.CHAIN_ID_TO_ETHERS_NETWORK_NAME_MAP=n.CHAIN_ID_TO_ETHERS_NETWORK_NAME_MAP,r.ChainId=s.ChainId,r.ERC1155=n.ERC1155,r.ERC1155_INTERFACE_ID=n.ERC1155_INTERFACE_ID,r.ERC1155_METADATA_URI_INTERFACE_ID=n.ERC1155_METADATA_URI_INTERFACE_ID,r.ERC1155_TOKEN_RECEIVER_INTERFACE_ID=n.ERC1155_TOKEN_RECEIVER_INTERFACE_ID,r.ERC20=n.ERC20,r.ERC721=n.ERC721,r.ERC721_ENUMERABLE_INTERFACE_ID=n.ERC721_ENUMERABLE_INTERFACE_ID,r.ERC721_INTERFACE_ID=n.ERC721_INTERFACE_ID,r.ERC721_METADATA_INTERFACE_ID=n.ERC721_METADATA_INTERFACE_ID,r.FALL_BACK_VS_CURRENCY=n.FALL_BACK_VS_CURRENCY,r.GANACHE_CHAIN_ID=n.GANACHE_CHAIN_ID,r.GWEI=n.GWEI,r.IPFS_DEFAULT_GATEWAY_URL=n.IPFS_DEFAULT_GATEWAY_URL,r.InfuraNetworkType=s.InfuraNetworkType,r.MAX_SAFE_CHAIN_ID=n.MAX_SAFE_CHAIN_ID,r.NFT_API_BASE_URL=n.NFT_API_BASE_URL,r.NFT_API_TIMEOUT=n.NFT_API_TIMEOUT,r.NFT_API_VERSION=n.NFT_API_VERSION,r.NetworkType=s.NetworkType,r.NetworksTicker=s.NetworksTicker,r.OPENSEA_PROXY_URL=n.OPENSEA_PROXY_URL,r.ORIGIN_METAMASK=n.ORIGIN_METAMASK,r.RPC=n.RPC,r.TESTNET_TICKER_SYMBOLS=n.TESTNET_TICKER_SYMBOLS,r.convertHexToDecimal=a.convertHexToDecimal,r.detectSIWE=i.detectSIWE,r.fetchWithErrorHandling=a.fetchWithErrorHandling,r.fractionBN=a.fractionBN,r.fromHex=a.fromHex,r.getBuyURL=a.getBuyURL,r.gweiDecToWEIBN=a.gweiDecToWEIBN,r.handleFetch=a.handleFetch,r.hexToBN=a.hexToBN,r.hexToText=a.hexToText,r.isInfuraNetworkType=s.isInfuraNetworkType,r.isNetworkType=s.isNetworkType,r.isNonEmptyArray=a.isNonEmptyArray,r.isPlainObject=a.isPlainObject,r.isSafeChainId=a.isSafeChainId,r.isSafeDynamicKey=a.isSafeDynamicKey,r.isSmartContractCode=a.isSmartContractCode,r.isValidHexAddress=a.isValidHexAddress,r.isValidJson=a.isValidJson,r.isValidSIWEOrigin=i.isValidSIWEOrigin,r.normalizeEnsName=a.normalizeEnsName,r.parseDomainParts=i.parseDomainParts,r.query=a.query,r.safelyExecute=a.safelyExecute,r.safelyExecuteWithTimeout=a.safelyExecuteWithTimeout,r.successfulFetch=a.successfulFetch,r.timeoutFetch=a.timeoutFetch,r.toChecksumHexAddress=a.toChecksumHexAddress,r.toHex=a.toHex,r.weiHexToGweiDec=a.weiHexToGweiDec}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>@metamask/gas-fee-controller>@metamask/controller-utils",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/gas-fee-controller/node_modules/@metamask/controller-utils/dist/index.js"}],[183,{"../../../shared/constants/hardware-wallets":4417,lodash:3770},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=e("lodash"),a=e("../../../shared/constants/hardware-wallets");r.default={version:66,async migrate(e){const t=(0,i.cloneDeep)(e);t.meta.version=66;const r=function(e){var t;const r=window.navigator.hid?a.LedgerTransportTypes.webhid:a.LedgerTransportTypes.u2f,i=Boolean(null===(t=e.PreferencesController)||void 0===t?void 0:t.useLedgerLive),n={...e,PreferencesController:{...null==e?void 0:e.PreferencesController,ledgerTransportType:i?a.LedgerTransportTypes.live:r}};return delete n.PreferencesController.useLedgerLive,n}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/066.js"}],[1830,{"./chunk-LBXAXAXH.js":1831,"@metamask/base-controller":1823},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var i=e("./chunk-LBXAXAXH.js"),a=e("@metamask/base-controller");function n(e){var t,r;class a extends(i.AbstractPollingControllerBaseMixin.call(void 0,e)){constructor(){super(...arguments),i.__privateAdd.call(void 0,this,t,{}),i.__privateAdd.call(void 0,this,r,1e3)}setIntervalLength(e){i.__privateSet.call(void 0,this,r,e)}getIntervalLength(){return i.__privateGet.call(void 0,this,r)}_startPollingByNetworkClientId(e,a){if(!i.__privateGet.call(void 0,this,r))throw new Error("intervalLength must be defined and greater than 0");const n=i.getKey.call(void 0,e,a),s=i.__privateGet.call(void 0,this,t)[n];this._stopPollingByPollingTokenSetId(n);const o=i.__privateGet.call(void 0,this,t)[n]=setTimeout((async()=>{try{await this._executePoll(e,a)}catch(e){console.error(e)}o===i.__privateGet.call(void 0,this,t)[n]&&this._startPollingByNetworkClientId(e,a)}),s?i.__privateGet.call(void 0,this,r):0)}_stopPollingByPollingTokenSetId(e){const r=i.__privateGet.call(void 0,this,t)[e];r&&(clearTimeout(r),delete i.__privateGet.call(void 0,this,t)[e])}}return t=new WeakMap,r=new WeakMap,a}var s=n(class{}),o=n(a.BaseController),l=n(a.BaseControllerV1);r.StaticIntervalPollingControllerOnly=s,r.StaticIntervalPollingController=o,r.StaticIntervalPollingControllerV1=l}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>@metamask/gas-fee-controller>@metamask/polling-controller",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/gas-fee-controller/node_modules/@metamask/polling-controller/dist/chunk-I2PH5XQP.js"}],[1831,{"fast-json-stable-stringify":3298,uuid:4341},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var i,a=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)},n=(e,t,r)=>(a(e,t,"read from private field"),r?r.call(e):t.get(e)),s=(e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)},o=e("fast-json-stable-stringify"),l=(i=o)&&i.__esModule?i:{default:i},c=e("uuid"),d=(e,t)=>`${e}:${l.default.call(void 0,t)}`;r.__privateGet=n,r.__privateAdd=s,r.__privateSet=(e,t,r,i)=>(a(e,t,"write to private field"),i?i.call(e,r):t.set(e,r),r),r.getKey=d,r.AbstractPollingControllerBaseMixin=function(e){var t,r;return t=new WeakMap,r=new WeakMap,class extends e{constructor(){super(...arguments),s(this,t,new Map),s(this,r,new Map)}startPollingByNetworkClientId(e,r={}){const i=c.v4.call(void 0),a=d(e,r),s=n(this,t).get(a)??new Set;return s.add(i),n(this,t).set(a,s),1===s.size&&this._startPollingByNetworkClientId(e,r),i}stopAllPolling(){n(this,t).forEach(((e,t)=>{e.forEach((e=>{this.stopPollingByPollingToken(e)}))}))}stopPollingByPollingToken(e){if(!e)throw new Error("pollingToken required");let i=null;for(const[r,a]of n(this,t))if(a.delete(e)){0===a.size&&(i=r);break}if(i){this._stopPollingByPollingTokenSetId(i),n(this,t).delete(i);const e=n(this,r).get(i);if(e){for(const t of e)t(i);e.clear()}}}onPollingCompleteByNetworkClientId(e,t,i={}){const a=d(e,i),s=n(this,r).get(a)??new Set;s.add(t),n(this,r).set(a,s)}}}}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>@metamask/gas-fee-controller>@metamask/polling-controller",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/gas-fee-controller/node_modules/@metamask/polling-controller/dist/chunk-LBXAXAXH.js"}],[1832,{"./chunk-LBXAXAXH.js":1831,"@metamask/base-controller":1823},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var i=e("./chunk-LBXAXAXH.js"),a=e("@metamask/base-controller");function n(e){var t;class r extends(i.AbstractPollingControllerBaseMixin.call(void 0,e)){constructor(){super(...arguments),i.__privateAdd.call(void 0,this,t,{})}_startPollingByNetworkClientId(e,r){const a=i.getKey.call(void 0,e,r);if(i.__privateGet.call(void 0,this,t)[a])return;const n=this._getNetworkClientById(e);if(!n)throw new Error(`Unable to retrieve blockTracker for networkClientId ${e}`);{const s=this._executePoll.bind(this,e,r);n.blockTracker.addListener("latest",s),i.__privateGet.call(void 0,this,t)[a]=s}}_stopPollingByPollingTokenSetId(e){const[r]=e.split(":"),a=this._getNetworkClientById(r);if(a&&i.__privateGet.call(void 0,this,t)[e]){const r=i.__privateGet.call(void 0,this,t)[e];r&&(a.blockTracker.removeListener("latest",r),delete i.__privateGet.call(void 0,this,t)[e])}}}return t=new WeakMap,r}var s=n(class{}),o=n(a.BaseController),l=n(a.BaseControllerV1);r.BlockTrackerPollingControllerOnly=s,r.BlockTrackerPollingController=o,r.BlockTrackerPollingControllerV1=l}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>@metamask/gas-fee-controller>@metamask/polling-controller",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/gas-fee-controller/node_modules/@metamask/polling-controller/dist/chunk-MUDX6BUY.js"}],[1833,{"./chunk-I2PH5XQP.js":1830,"./chunk-LBXAXAXH.js":1831,"./chunk-MUDX6BUY.js":1832},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var i=e("./chunk-MUDX6BUY.js"),a=e("./chunk-I2PH5XQP.js");e("./chunk-LBXAXAXH.js"),r.BlockTrackerPollingController=i.BlockTrackerPollingController,r.BlockTrackerPollingControllerOnly=i.BlockTrackerPollingControllerOnly,r.BlockTrackerPollingControllerV1=i.BlockTrackerPollingControllerV1,r.StaticIntervalPollingController=a.StaticIntervalPollingController,r.StaticIntervalPollingControllerOnly=a.StaticIntervalPollingControllerOnly,r.StaticIntervalPollingControllerV1=a.StaticIntervalPollingControllerV1}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>@metamask/gas-fee-controller>@metamask/polling-controller",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/gas-fee-controller/node_modules/@metamask/polling-controller/dist/index.js"}],[1834,{"./chunk-S6VGOPUY.js":1852,"@metamask/utils":2253},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var i=e("./chunk-S6VGOPUY.js"),a=e("@metamask/utils").createModuleLogger.call(void 0,i.projectLogger,"layer-1-gas-fee-flow");async function n({layer1GasFeeFlows:e,provider:t,transactionMeta:r}){const i=function(e,t){return t.find((t=>t.matchesTransaction(e)))}(r,e);if(i){a("Found layer 1 gas fee flow",i.constructor.name,r.id);try{const{layer1Fee:e}=await i.getLayer1Fee({provider:t,transactionMeta:r});return e}catch(e){return void a("Failed to get layer 1 gas fee",r.id,e)}}}r.updateTransactionLayer1GasFee=async function(e){const t=await n(e);if(!t)return;const{transactionMeta:r}=e;r.layer1GasFee=t,a("Updated layer 1 gas fee",t,r.id)},r.getTransactionLayer1GasFee=n}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/dist/chunk-2XKEAKQG.js"}],[1835,{"./chunk-DLOQPH4M.js":1839,"./chunk-S6VGOPUY.js":1852,"./chunk-UT4M4XI3.js":1858,"@metamask/controller-utils":1901,"@metamask/utils":2253},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var i=e("./chunk-UT4M4XI3.js"),a=e("./chunk-DLOQPH4M.js"),n=e("./chunk-S6VGOPUY.js"),s=e("@metamask/controller-utils"),o=e("@metamask/utils"),l=o.createModuleLogger.call(void 0,n.projectLogger,"gas-fees");function c(e){return s.toHex.call(void 0,s.gweiDecToWEIBN.call(void 0,e))}r.updateGasFees=async function(e){const{txMeta:t}=e,r={...t.txParams},n=i.SWAP_TRANSACTION_TYPES.includes(t.type)?void 0:e.getSavedGasFees(t.chainId),d=await async function(e){const{eip1559:t,ethQuery:r,gasFeeFlows:i,getGasFeeEstimates:n,txMeta:c}=e,{networkClientId:d}=c;if(!t&&c.txParams.gasPrice||t&&c.txParams.maxFeePerGas&&c.txParams.maxPriorityFeePerGas)return{};const u=a.getGasFeeFlow.call(void 0,c,i);try{const e=await n({networkClientId:d}),t=await u.getGasFees({ethQuery:r,gasFeeControllerData:e,transactionMeta:c}),i=t.estimates?.type;switch(i){case"fee-market":return t.estimates.medium;case"legacy":return{gasPrice:t.estimates.medium};case"eth_gasPrice":return{gasPrice:t.estimates.gasPrice};default:throw new Error(`Unsupported gas fee estimate type returned from flow: ${i}`)}}catch(e){l("Failed to get suggested gas fees",e)}const h=await s.query.call(void 0,r,"gasPrice");return{gasPrice:h?o.add0x.call(void 0,h.toString(16)):void 0}}(e);l("Suggested gas fees",d);const u={...e,initialParams:r,savedGasFees:n,suggestedGasFees:d};t.txParams.maxFeePerGas=function(e){const{savedGasFees:t,eip1559:r,initialParams:i,suggestedGasFees:a}=e;if(!r)return;if(t){const e=c(t.maxBaseFee);return l("Using maxFeePerGas from savedGasFees",e),e}if(i.maxFeePerGas)return l("Using maxFeePerGas from request",i.maxFeePerGas),i.maxFeePerGas;if(i.gasPrice&&!i.maxPriorityFeePerGas)return l("Setting maxFeePerGas to gasPrice from request",i.gasPrice),i.gasPrice;if(a.maxFeePerGas)return l("Using suggested maxFeePerGas",a.maxFeePerGas),a.maxFeePerGas;if(a.gasPrice)return l("Setting maxFeePerGas to suggested gasPrice",a.gasPrice),a.gasPrice;return void l("maxFeePerGas not set")}(u),t.txParams.maxPriorityFeePerGas=function(e){const{eip1559:t,initialParams:r,savedGasFees:i,suggestedGasFees:a,txMeta:n}=e;if(!t)return;if(i){const e=c(i.priorityFee);return l("Using maxPriorityFeePerGas from savedGasFees.priorityFee",e),e}if(r.maxPriorityFeePerGas)return l("Using maxPriorityFeePerGas from request",r.maxPriorityFeePerGas),r.maxPriorityFeePerGas;if(r.gasPrice&&!r.maxFeePerGas)return l("Setting maxPriorityFeePerGas to gasPrice from request",r.gasPrice),r.gasPrice;if(a.maxPriorityFeePerGas)return l("Using suggested maxPriorityFeePerGas",a.maxPriorityFeePerGas),a.maxPriorityFeePerGas;if(n.txParams.maxFeePerGas)return l("Setting maxPriorityFeePerGas to maxFeePerGas",n.txParams.maxFeePerGas),n.txParams.maxFeePerGas;return void l("maxPriorityFeePerGas not set")}(u),t.txParams.gasPrice=function(e){const{eip1559:t,initialParams:r,suggestedGasFees:i}=e;if(t)return;if(r.gasPrice)return l("Using gasPrice from request",r.gasPrice),r.gasPrice;if(i.maxFeePerGas)return l("Using suggested maxFeePerGas",i.maxFeePerGas),i.maxFeePerGas;if(i.gasPrice)return l("Using suggested gasPrice",i.gasPrice),i.gasPrice;return void l("gasPrice not set")}(u),t.userFeeLevel=function(e){const{eip1559:t,initialParams:r,savedGasFees:i,suggestedGasFees:a,txMeta:n}=e;if(!t)return;if(i)return"custom";if(!r.maxFeePerGas&&!r.maxPriorityFeePerGas&&r.gasPrice)return n.origin===s.ORIGIN_METAMASK?"custom":"dappSuggested";if(!r.maxFeePerGas&&!r.maxPriorityFeePerGas&&a.maxFeePerGas&&a.maxPriorityFeePerGas)return"medium";if(n.origin===s.ORIGIN_METAMASK)return"medium";return"dappSuggested"}(u),l("Updated gas fee properties",{maxFeePerGas:t.txParams.maxFeePerGas,maxPriorityFeePerGas:t.txParams.maxPriorityFeePerGas,gasPrice:t.txParams.gasPrice}),(t.txParams.maxFeePerGas||t.txParams.maxPriorityFeePerGas)&&delete t.txParams.gasPrice,t.txParams.gasPrice&&(delete t.txParams.maxFeePerGas,delete t.txParams.maxPriorityFeePerGas),function(e){e.defaultGasEstimates||(e.defaultGasEstimates={});e.defaultGasEstimates.maxFeePerGas=e.txParams.maxFeePerGas,e.defaultGasEstimates.maxPriorityFeePerGas=e.txParams.maxPriorityFeePerGas,e.defaultGasEstimates.gasPrice=e.txParams.gasPrice,e.defaultGasEstimates.estimateType=e.userFeeLevel}(t)},r.gweiDecimalToWeiHex=c}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/dist/chunk-3ZRHCVVS.js"}],[1836,{"./chunk-S6VGOPUY.js":1852,"./chunk-Z4BLTVTB.js":1864,"@metamask/controller-utils":1901,events:3263,lodash:3770},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var i,a,n,s,o,l,c,d,u,h,p,m,f,v,g,_,k,y,w,T,b,E,S,P,C,A,I,j,M,x,N,O,R,G,L,B,F,D,U,H,W,$,V,K,q,Y,X,J,z,Z,Q,ee,te,re,ie=e("./chunk-S6VGOPUY.js"),ae=e("./chunk-Z4BLTVTB.js"),ne=e("@metamask/controller-utils"),se=e("events"),oe=(i=se)&&i.__esModule?i:{default:i},le=e("lodash"),ce=["replacement transaction underpriced","known transaction","gas price too low to replace","transaction with the same hash was already imported","gateway timeout","nonce too low"],de=ie.createModuleLogger.call(void 0,ie.projectLogger,"pending-transactions");a=new WeakMap,n=new WeakMap,s=new WeakMap,o=new WeakMap,l=new WeakMap,c=new WeakMap,d=new WeakMap,u=new WeakMap,h=new WeakMap,p=new WeakMap,m=new WeakMap,f=new WeakMap,v=new WeakMap,g=new WeakSet,_=function(){ae.__privateGet.call(void 0,this,m)||(ae.__privateGet.call(void 0,this,n).on("latest",ae.__privateGet.call(void 0,this,u)),ae.__privateSet.call(void 0,this,m,!0),de("Started polling"))},k=new WeakSet,y=async function(e){const t=await ae.__privateGet.call(void 0,this,h).call(this);try{await ae.__privateMethod.call(void 0,this,w,T).call(this)}catch(e){de("Failed to check transactions",e)}finally{t()}try{await ae.__privateMethod.call(void 0,this,b,E).call(this,e)}catch(e){de("Failed to resubmit transactions",e)}},w=new WeakSet,T=async function(){de("Checking transactions");const e=ae.__privateMethod.call(void 0,this,F,D).call(this);e.length?(de("Found pending transactions to check",{count:e.length,ids:e.map((e=>e.id))}),await Promise.all(e.map((e=>ae.__privateMethod.call(void 0,this,M,x).call(this,e))))):de("No pending transactions to check")},b=new WeakSet,E=async function(e){if(!ae.__privateGet.call(void 0,this,d).call(this)||!ae.__privateGet.call(void 0,this,m))return;de("Resubmitting transactions");const t=ae.__privateMethod.call(void 0,this,F,D).call(this);if(t.length){de("Found pending transactions to resubmit",{count:t.length,ids:t.map((e=>e.id))});for(const r of t)try{await ae.__privateMethod.call(void 0,this,C,A).call(this,r,e)}catch(e){const t=e.value?.message?.toLowerCase()||e.message.toLowerCase();if(ae.__privateMethod.call(void 0,this,S,P).call(this,t))return void de("Ignoring known transaction error",t);ae.__privateMethod.call(void 0,this,U,H).call(this,r,e.message,"There was an error when resubmitting this transaction.")}}else de("No pending transactions to resubmit")},S=new WeakSet,P=function(e){return ce.some((t=>e.includes(t)))},C=new WeakSet,A=async function(e,t){if(!ae.__privateMethod.call(void 0,this,I,j).call(this,e,t))return;const{rawTx:r}=e;if(!ae.__privateGet.call(void 0,this,v).call(this,e))return;if(!r?.length)return de("Approving transaction as no raw value"),void await ae.__privateGet.call(void 0,this,a).call(this,e.id);const i=ae.__privateGet.call(void 0,this,l).call(this,e.networkClientId);await ae.__privateGet.call(void 0,this,p).call(this,i,r);const n=(e.retryCount??0)+1;ae.__privateMethod.call(void 0,this,q,Y).call(this,le.merge.call(void 0,{},e,{retryCount:n}),"PendingTransactionTracker:transaction-retry - Retry count increased")},I=new WeakSet,j=function(e,t){const r=le.cloneDeep.call(void 0,e);r.firstRetryBlockNumber||(r.firstRetryBlockNumber=t,ae.__privateMethod.call(void 0,this,q,Y).call(this,r,"PendingTransactionTracker:#isResubmitDue - First retry block number set"));const{firstRetryBlockNumber:i}=r,a=Number.parseInt(t,16)-Number.parseInt(i,16),n=e.retryCount||0;return a>=Math.min(50,Math.pow(2,n))},M=new WeakSet,x=async function(e){const{hash:t,id:r}=e;if(!t&&ae.__privateGet.call(void 0,this,f).call(this,e)){const t=new Error("We had an error while submitting this transaction, please try again.");return t.name="NoTxHashError",void ae.__privateMethod.call(void 0,this,W,$).call(this,e,t)}if(ae.__privateMethod.call(void 0,this,L,B).call(this,e))return de("Nonce already taken",r),void ae.__privateMethod.call(void 0,this,V,K).call(this,e);try{const r=await ae.__privateMethod.call(void 0,this,X,J).call(this,t),i="0x1"===r?.status;if("0x0"===r?.status)return de("Transaction receipt has failed status"),void ae.__privateMethod.call(void 0,this,W,$).call(this,e,new Error("Transaction dropped or replaced"));const{blockNumber:a,blockHash:n}=r||{};if(i&&a&&n)return void await ae.__privateMethod.call(void 0,this,N,O).call(this,e,{...r,blockNumber:a,blockHash:n})}catch(t){return de("Failed to check transaction",r,t),void ae.__privateMethod.call(void 0,this,U,H).call(this,e,t.message,"There was a problem loading this transaction.")}await ae.__privateMethod.call(void 0,this,R,G).call(this,e)&&ae.__privateMethod.call(void 0,this,V,K).call(this,e)},N=new WeakSet,O=async function(e,t){const{id:r}=e,{blockHash:i}=t;de("Transaction confirmed",r);const{baseFeePerGas:a,timestamp:n}=await ae.__privateMethod.call(void 0,this,z,Z).call(this,i,!1),s=le.cloneDeep.call(void 0,e);s.baseFeePerGas=a,s.blockTimestamp=n,s.status="confirmed",s.txParams={...s.txParams,gasUsed:t.gasUsed},s.txReceipt=t,s.verifiedOnBlockchain=!0,ae.__privateMethod.call(void 0,this,q,Y).call(this,s,"PendingTransactionTracker:#onTransactionConfirmed - Transaction confirmed"),this.hub.emit("transaction-confirmed",s)},R=new WeakSet,G=async function(e){const{hash:t,id:r,txParams:{nonce:i,from:a}}=e;if(!i||!t)return!1;const n=await ae.__privateMethod.call(void 0,this,Q,ee).call(this,a),o=parseInt(n,16);if(parseInt(i,16)>=o)return!1;let l=ae.__privateGet.call(void 0,this,s).get(t);return void 0===l&&(l=0,ae.__privateGet.call(void 0,this,s).set(t,l)),l<3?(de("Incrementing dropped block count",{id:r,droppedBlockCount:l}),ae.__privateGet.call(void 0,this,s).set(t,l+1),!1):(de("Hit dropped block count",r),ae.__privateGet.call(void 0,this,s).delete(t),!0)},L=new WeakSet,B=function(e){const{id:t,txParams:r}=e;return ae.__privateMethod.call(void 0,this,te,re).call(this).some((e=>e.id!==t&&e.txParams.from===r.from&&"confirmed"===e.status&&e.txParams.nonce===r.nonce&&"incoming"!==e.type))},F=new WeakSet,D=function(){return ae.__privateMethod.call(void 0,this,te,re).call(this).filter((e=>"submitted"===e.status&&!e.verifiedOnBlockchain&&!e.isUserOperation))},U=new WeakSet,H=function(e,t,r){ae.__privateMethod.call(void 0,this,q,Y).call(this,{...e,warning:{error:t,message:r}},"PendingTransactionTracker:#warnTransaction - Warning added")},W=new WeakSet,$=function(e,t){de("Transaction failed",e.id,t),this.hub.emit("transaction-failed",e,t)},V=new WeakSet,K=function(e){de("Transaction dropped",e.id),this.hub.emit("transaction-dropped",e)},q=new WeakSet,Y=function(e,t){this.hub.emit("transaction-updated",e,t)},X=new WeakSet,J=async function(e){return await ne.query.call(void 0,ae.__privateGet.call(void 0,this,l).call(this),"getTransactionReceipt",[e])},z=new WeakSet,Z=async function(e,t){return await ne.query.call(void 0,ae.__privateGet.call(void 0,this,l).call(this),"getBlockByHash",[e,t])},Q=new WeakSet,ee=async function(e){return await ne.query.call(void 0,ae.__privateGet.call(void 0,this,l).call(this),"getTransactionCount",[e])},te=new WeakSet,re=function(){const e=ae.__privateGet.call(void 0,this,o).call(this);return ae.__privateGet.call(void 0,this,c).call(this).filter((t=>t.chainId===e))},r.PendingTransactionTracker=class{constructor({approveTransaction:e,blockTracker:t,getChainId:r,getEthQuery:i,getTransactions:T,isResubmitEnabled:E,getGlobalLock:P,publishTransaction:A,hooks:j}){ae.__privateAdd.call(void 0,this,g),ae.__privateAdd.call(void 0,this,k),ae.__privateAdd.call(void 0,this,w),ae.__privateAdd.call(void 0,this,b),ae.__privateAdd.call(void 0,this,S),ae.__privateAdd.call(void 0,this,C),ae.__privateAdd.call(void 0,this,I),ae.__privateAdd.call(void 0,this,M),ae.__privateAdd.call(void 0,this,N),ae.__privateAdd.call(void 0,this,R),ae.__privateAdd.call(void 0,this,L),ae.__privateAdd.call(void 0,this,F),ae.__privateAdd.call(void 0,this,U),ae.__privateAdd.call(void 0,this,W),ae.__privateAdd.call(void 0,this,V),ae.__privateAdd.call(void 0,this,q),ae.__privateAdd.call(void 0,this,X),ae.__privateAdd.call(void 0,this,z),ae.__privateAdd.call(void 0,this,Q),ae.__privateAdd.call(void 0,this,te),ae.__privateAdd.call(void 0,this,a,void 0),ae.__privateAdd.call(void 0,this,n,void 0),ae.__privateAdd.call(void 0,this,s,void 0),ae.__privateAdd.call(void 0,this,o,void 0),ae.__privateAdd.call(void 0,this,l,void 0),ae.__privateAdd.call(void 0,this,c,void 0),ae.__privateAdd.call(void 0,this,d,void 0),ae.__privateAdd.call(void 0,this,u,void 0),ae.__privateAdd.call(void 0,this,h,void 0),ae.__privateAdd.call(void 0,this,p,void 0),ae.__privateAdd.call(void 0,this,m,void 0),ae.__privateAdd.call(void 0,this,f,void 0),ae.__privateAdd.call(void 0,this,v,void 0),this.startIfPendingTransactions=()=>{ae.__privateMethod.call(void 0,this,F,D).call(this).length?ae.__privateMethod.call(void 0,this,g,_).call(this):this.stop()},this.hub=new(0,oe.default),ae.__privateSet.call(void 0,this,a,e),ae.__privateSet.call(void 0,this,n,t),ae.__privateSet.call(void 0,this,s,new Map),ae.__privateSet.call(void 0,this,o,r),ae.__privateSet.call(void 0,this,l,i),ae.__privateSet.call(void 0,this,c,T),ae.__privateSet.call(void 0,this,d,E??(()=>!0)),ae.__privateSet.call(void 0,this,u,ae.__privateMethod.call(void 0,this,k,y).bind(this)),ae.__privateSet.call(void 0,this,h,P),ae.__privateSet.call(void 0,this,p,A),ae.__privateSet.call(void 0,this,m,!1),ae.__privateSet.call(void 0,this,v,j?.beforePublish??(()=>!0)),ae.__privateSet.call(void 0,this,f,j?.beforeCheckPendingTransaction??(()=>!0))}async forceCheckTransaction(e){const t=await ae.__privateGet.call(void 0,this,h).call(this);try{await ae.__privateMethod.call(void 0,this,M,x).call(this,e)}catch(e){de("Failed to check transaction",e)}finally{t()}}stop(){ae.__privateGet.call(void 0,this,m)&&(ae.__privateGet.call(void 0,this,n).removeListener("latest",ae.__privateGet.call(void 0,this,u)),ae.__privateSet.call(void 0,this,m,!1),de("Stopped polling"))}}}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/dist/chunk-5KMU2IAT.js"}],[1837,{"@metamask/rpc-errors":1670},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var i=e("@metamask/rpc-errors");r.validateConfirmedExternalTransaction=function(e,t,r){if(!e||!e.txParams)throw i.rpcErrors.invalidParams('"transactionMeta" or "transactionMeta.txParams" is missing');if("confirmed"!==e.status)throw i.rpcErrors.invalidParams('External transaction status should be "confirmed"');const a=e.txParams.nonce;if(r&&r.length>0){if(r.find((e=>e.txParams?.nonce===a)))throw i.rpcErrors.invalidParams("External transaction nonce should not be in pending txs")}if(t&&t.length>0){if(t.find((e=>e.txParams?.nonce===a)))throw i.rpcErrors.invalidParams("External transaction nonce should not be in confirmed txs")}}}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/dist/chunk-7LXE4KHV.js"}],[1838,{"./chunk-2XKEAKQG.js":1834,"./chunk-DLOQPH4M.js":1839,"./chunk-S6VGOPUY.js":1852,"./chunk-Z4BLTVTB.js":1864,"@metamask/eth-query":1269,"@metamask/utils":2253,events:3263},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var a,n,s,o,l,c,d,u,h,p,m,f,v,g,_,k,y,w,T,b,E,S,P,C,A,I,j=e("./chunk-2XKEAKQG.js"),M=e("./chunk-DLOQPH4M.js"),x=e("./chunk-S6VGOPUY.js"),N=e("./chunk-Z4BLTVTB.js"),O=i(e("@metamask/eth-query")),R=e("@metamask/utils"),G=i(e("events")),L=R.createModuleLogger.call(void 0,x.projectLogger,"gas-fee-poller");a=new WeakMap,n=new WeakMap,s=new WeakMap,o=new WeakMap,l=new WeakMap,c=new WeakMap,d=new WeakMap,u=new WeakMap,h=new WeakSet,p=function(){N.__privateGet.call(void 0,this,u)||(N.__privateMethod.call(void 0,this,v,g).call(this),N.__privateSet.call(void 0,this,u,!0),L("Started polling"))},m=new WeakSet,f=function(){N.__privateGet.call(void 0,this,u)&&(clearTimeout(N.__privateGet.call(void 0,this,d)),N.__privateSet.call(void 0,this,d,void 0),N.__privateSet.call(void 0,this,u,!1),L("Stopped polling"))},v=new WeakSet,g=async function(){await N.__privateMethod.call(void 0,this,_,k).call(this),N.__privateSet.call(void 0,this,d,setTimeout((()=>N.__privateMethod.call(void 0,this,v,g).call(this)),1e4))},_=new WeakSet,k=async function(){const e=N.__privateMethod.call(void 0,this,P,C).call(this);if(!e.length)return;L("Found unapproved transactions",e.length);const t=await N.__privateMethod.call(void 0,this,A,I).call(this,e);L("Retrieved gas fee controller data",t),await Promise.all(e.flatMap((e=>{const{chainId:r}=e,i=t.get(r);return N.__privateMethod.call(void 0,this,y,w).call(this,e,i)})))},y=new WeakSet,w=async function(e,t){const{id:r}=e,[i,a]=await Promise.all([N.__privateMethod.call(void 0,this,T,b).call(this,e,t),N.__privateMethod.call(void 0,this,E,S).call(this,e)]);(i||a)&&this.hub.emit("transaction-updated",{transactionId:r,gasFeeEstimates:i?.gasFeeEstimates,gasFeeEstimatesLoaded:i?.gasFeeEstimatesLoaded,layer1GasFee:a})},T=new WeakSet,b=async function(e,t){const{chainId:r,networkClientId:i}=e,a=new(0,O.default)(N.__privateGet.call(void 0,this,o).call(this,r,i)),s=M.getGasFeeFlow.call(void 0,e,N.__privateGet.call(void 0,this,n));s&&L("Found gas fee flow",s.constructor.name,e.id);const l={ethQuery:a,gasFeeControllerData:t,transactionMeta:e};let c;if(s)try{c=(await s.getGasFees(l)).estimates}catch(t){L("Failed to get suggested gas fees",e.id,t)}if(c||!e.gasFeeEstimatesLoaded)return L("Updated gas fee estimates",{gasFeeEstimates:c,transaction:e.id}),{gasFeeEstimates:c,gasFeeEstimatesLoaded:!0}},E=new WeakSet,S=async function(e){const{chainId:t,networkClientId:r}=e,i=N.__privateGet.call(void 0,this,o).call(this,t,r),a=await j.getTransactionLayer1GasFee.call(void 0,{layer1GasFeeFlows:N.__privateGet.call(void 0,this,c),provider:i,transactionMeta:e});return a&&L("Updated layer 1 gas fee",a,e.id),a},P=new WeakSet,C=function(){return N.__privateGet.call(void 0,this,l).call(this).filter((e=>"unapproved"===e.status))},A=new WeakSet,I=async function(e){const t=new Map;for(const r of e){const{chainId:e,networkClientId:i}=r;if(t.has(e))continue;const n=i??N.__privateGet.call(void 0,this,a).call(this,e);t.set(e,n)}L("Extracted network client IDs by chain ID",t);const r=Array.from(t.entries()).map((async([e,t])=>[e,await N.__privateGet.call(void 0,this,s).call(this,{networkClientId:t})]));return new Map(await Promise.all(r))},r.GasFeePoller=class{constructor({findNetworkClientIdByChainId:e,gasFeeFlows:t,getGasFeeControllerEstimates:r,getProvider:i,getTransactions:g,layer1GasFeeFlows:k,onStateChange:w}){N.__privateAdd.call(void 0,this,h),N.__privateAdd.call(void 0,this,m),N.__privateAdd.call(void 0,this,v),N.__privateAdd.call(void 0,this,_),N.__privateAdd.call(void 0,this,y),N.__privateAdd.call(void 0,this,T),N.__privateAdd.call(void 0,this,E),N.__privateAdd.call(void 0,this,P),N.__privateAdd.call(void 0,this,A),this.hub=new(0,G.default),N.__privateAdd.call(void 0,this,a,void 0),N.__privateAdd.call(void 0,this,n,void 0),N.__privateAdd.call(void 0,this,s,void 0),N.__privateAdd.call(void 0,this,o,void 0),N.__privateAdd.call(void 0,this,l,void 0),N.__privateAdd.call(void 0,this,c,void 0),N.__privateAdd.call(void 0,this,d,void 0),N.__privateAdd.call(void 0,this,u,!1),N.__privateSet.call(void 0,this,a,e),N.__privateSet.call(void 0,this,n,t),N.__privateSet.call(void 0,this,c,k),N.__privateSet.call(void 0,this,s,r),N.__privateSet.call(void 0,this,o,i),N.__privateSet.call(void 0,this,l,g),w((()=>{N.__privateMethod.call(void 0,this,P,C).call(this).length?N.__privateMethod.call(void 0,this,h,p).call(this):N.__privateMethod.call(void 0,this,m,f).call(this)}))}}}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/dist/chunk-7MKQDZKY.js"}],[1839,{"./chunk-RAOYRJ25.js":1851,"@metamask/controller-utils":1901},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var i=e("./chunk-RAOYRJ25.js"),a=e("@metamask/controller-utils");function n(e,t){return a.weiHexToGweiDec.call(void 0,e[t])}r.getGasFeeFlow=function(e,t){return t.find((t=>t.matchesTransaction(e)))},r.mergeGasFeeEstimates=function({gasFeeControllerEstimates:e,transactionGasFeeEstimates:t}){const r=t.type;return"fee-market"===r?Object.values(i.GasFeeEstimateLevel).reduce(((r,i)=>{return{...r,[i]:(n=e?.[i],s=t[i],{...n,suggestedMaxFeePerGas:a.weiHexToGweiDec.call(void 0,s.maxFeePerGas),suggestedMaxPriorityFeePerGas:a.weiHexToGweiDec.call(void 0,s.maxPriorityFeePerGas)})};var n,s}),{...e}):"legacy"===r?Object.values(i.GasFeeEstimateLevel).reduce(((e,r)=>({...e,[r]:n(t,r)})),{}):"eth_gasPrice"===r?{gasPrice:(s=t,a.weiHexToGweiDec.call(void 0,s.gasPrice))}:e;var s}}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/dist/chunk-DLOQPH4M.js"}],[184,{"../../../shared/constants/network":4423,"bignumber.js":2875,lodash:3770},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i,a=e("lodash"),n=(i=e("bignumber.js"))&&i.__esModule?i:{default:i},s=e("../../../shared/constants/network");const o=e=>new n.default(e||"0x0",16).gt(0);r.default={version:67,async migrate(e){const t=(0,a.cloneDeep)(e);t.meta.version=67;const r=function(e){var t,r,i;const a=(null==e?void 0:e.PreferencesController)||{},n=a.preferences||{};if(n.showTestNetworks)return e;const l=(null==e||null===(t=e.TransactionController)||void 0===t?void 0:t.transactions)||{},c=(null===(r=e.NetworkController)||void 0===r?void 0:r.provider)||{},d=(null===(i=e.CachedBalancesController)||void 0===i?void 0:i.cachedBalances)||{},u=s.TEST_CHAINS.includes(null==c?void 0:c.chainId),h=Object.values(l).some((({chainId:e})=>s.TEST_CHAINS.includes(e))),p=s.TEST_CHAINS.some((e=>Object.values(d[e]||{}).some(o))),m=u||h||p,f={...e,PreferencesController:{...a,preferences:{...n,showTestNetworks:m}}};return f}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/067.js"}],[1840,{"./chunk-S6VGOPUY.js":1852,"./chunk-Z4BLTVTB.js":1864,"async-mutex":1905,events:3263},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var i,a,n,s,o,l,c,d,u,h,p,m,f,v,g,_,k,y,w,T,b,E,S,P,C,A,I,j,M,x,N,O,R=e("./chunk-S6VGOPUY.js"),G=e("./chunk-Z4BLTVTB.js"),L=e("async-mutex"),B=e("events"),F=(i=B)&&i.__esModule?i:{default:i},D=[e=>e.status,e=>e.txParams.gasUsed];a=new WeakMap,n=new WeakMap,s=new WeakMap,o=new WeakMap,l=new WeakMap,c=new WeakMap,d=new WeakMap,u=new WeakMap,h=new WeakMap,p=new WeakMap,m=new WeakMap,f=new WeakMap,v=new WeakMap,g=new WeakSet,_=function(e){e.sort(((e,t)=>e.time<t.time?-1:1))},k=new WeakSet,y=function(e,t){return e.filter((e=>!t.some((({hash:t})=>t===e.hash))))},w=new WeakSet,T=function(e,t){return e.filter((e=>t.some((t=>e.hash===t.hash&&G.__privateMethod.call(void 0,this,b,E).call(this,e,t)))))},b=new WeakSet,E=function(e,t){return D.some((r=>r(e)!==r(t)))},S=new WeakSet,P=function(){const e=G.__privateGet.call(void 0,this,m).getLastBlockVariations?.()??[],t=G.__privateMethod.call(void 0,this,M,x).call(this,e);return G.__privateGet.call(void 0,this,s).call(this)[t]},C=new WeakSet,A=function(e){const t=G.__privateMethod.call(void 0,this,S,P).call(this);return t?t+1:G.__privateGet.call(void 0,this,p)?void 0:e-10},I=new WeakSet,j=function(e,t){let r=-1;for(const t of e){const e=t.blockNumber?parseInt(t.blockNumber,10):-1;r=Math.max(r,e)}if(-1===r)return;const i=G.__privateMethod.call(void 0,this,M,x).call(this,t),a=G.__privateGet.call(void 0,this,s).call(this);a[i]>=r||this.hub.emit("updatedLastFetchedBlockNumbers",{lastFetchedBlockNumbers:{...a,[i]:r},blockNumber:r})},M=new WeakSet,x=function(e){const t=G.__privateGet.call(void 0,this,l).call(this),r=G.__privateGet.call(void 0,this,n).call(this)?.toLowerCase();return[t,r,...e].join("#")},N=new WeakSet,O=function(){const e=G.__privateGet.call(void 0,this,c).call(this),t=G.__privateGet.call(void 0,this,l).call(this),r=G.__privateGet.call(void 0,this,m).isSupportedNetwork(t);return e&&r},r.IncomingTransactionHelper=class{constructor({blockTracker:e,getCurrentAccount:t,getLastFetchedBlockNumbers:r,getLocalTransactions:i,getChainId:_,isEnabled:y,queryEntireHistory:T,remoteTransactionSource:E,transactionLimit:P,updateTransactions:A}){G.__privateAdd.call(void 0,this,g),G.__privateAdd.call(void 0,this,k),G.__privateAdd.call(void 0,this,w),G.__privateAdd.call(void 0,this,b),G.__privateAdd.call(void 0,this,S),G.__privateAdd.call(void 0,this,C),G.__privateAdd.call(void 0,this,I),G.__privateAdd.call(void 0,this,M),G.__privateAdd.call(void 0,this,N),G.__privateAdd.call(void 0,this,a,void 0),G.__privateAdd.call(void 0,this,n,void 0),G.__privateAdd.call(void 0,this,s,void 0),G.__privateAdd.call(void 0,this,o,void 0),G.__privateAdd.call(void 0,this,l,void 0),G.__privateAdd.call(void 0,this,c,void 0),G.__privateAdd.call(void 0,this,d,void 0),G.__privateAdd.call(void 0,this,u,new(0,L.Mutex)),G.__privateAdd.call(void 0,this,h,void 0),G.__privateAdd.call(void 0,this,p,void 0),G.__privateAdd.call(void 0,this,m,void 0),G.__privateAdd.call(void 0,this,f,void 0),G.__privateAdd.call(void 0,this,v,void 0),this.hub=new(0,F.default),G.__privateSet.call(void 0,this,a,e),G.__privateSet.call(void 0,this,n,t),G.__privateSet.call(void 0,this,s,r),G.__privateSet.call(void 0,this,o,i||(()=>[])),G.__privateSet.call(void 0,this,l,_),G.__privateSet.call(void 0,this,c,y??(()=>!0)),G.__privateSet.call(void 0,this,d,!1),G.__privateSet.call(void 0,this,p,T??!0),G.__privateSet.call(void 0,this,m,E),G.__privateSet.call(void 0,this,f,P),G.__privateSet.call(void 0,this,v,A??!1),G.__privateSet.call(void 0,this,h,(async e=>{try{await this.update(e)}catch(e){console.error("Error while checking incoming transactions",e)}}))}start(){G.__privateGet.call(void 0,this,d)||G.__privateMethod.call(void 0,this,N,O).call(this)&&(G.__privateGet.call(void 0,this,a).addListener("latest",G.__privateGet.call(void 0,this,h)),G.__privateSet.call(void 0,this,d,!0))}stop(){G.__privateGet.call(void 0,this,a).removeListener("latest",G.__privateGet.call(void 0,this,h)),G.__privateSet.call(void 0,this,d,!1)}async update(e){const t=await G.__privateGet.call(void 0,this,u).acquire();R.incomingTransactionsLogger.call(void 0,"Checking for incoming transactions");try{if(!G.__privateMethod.call(void 0,this,N,O).call(this))return;const t=parseInt(e||await G.__privateGet.call(void 0,this,a).getLatestBlock(),16),r=G.__privateGet.call(void 0,this,m).getLastBlockVariations?.()??[],i=G.__privateMethod.call(void 0,this,C,A).call(this,t),s=G.__privateGet.call(void 0,this,n).call(this),c=G.__privateGet.call(void 0,this,l).call(this);let d=[];try{d=await G.__privateGet.call(void 0,this,m).fetchTransactions({address:s,currentChainId:c,fromBlock:i,limit:G.__privateGet.call(void 0,this,f)})}catch(e){return void R.incomingTransactionsLogger.call(void 0,"Error while fetching remote transactions",e)}G.__privateGet.call(void 0,this,v)||(d=d.filter((e=>e.txParams.to?.toLowerCase()===s.toLowerCase())));const u=G.__privateGet.call(void 0,this,v)?G.__privateGet.call(void 0,this,o).call(this):[],h=G.__privateMethod.call(void 0,this,k,y).call(this,d,u),p=G.__privateMethod.call(void 0,this,w,T).call(this,d,u);(h.length>0||p.length>0)&&(G.__privateMethod.call(void 0,this,g,_).call(this,h),G.__privateMethod.call(void 0,this,g,_).call(this,p),R.incomingTransactionsLogger.call(void 0,"Found incoming transactions",{new:h,updated:p}),this.hub.emit("transactions",{added:h,updated:p})),G.__privateMethod.call(void 0,this,I,j).call(this,d,r)}finally{t()}}}}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/dist/chunk-DTDTOMTB.js"}],[1841,{"./chunk-FDUCRHYT.js":1842,"./chunk-S6VGOPUY.js":1852,"./chunk-UGN7PBON.js":1857,"./chunk-Z4BLTVTB.js":1864,"@metamask/controller-utils":1901,"async-mutex":1905,"bn.js":2922,uuid:4341},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var i,a,n,s,o,l,c,d,u,h,p,m,f,v,g,_,k=e("./chunk-FDUCRHYT.js"),y=e("./chunk-UGN7PBON.js"),w=e("./chunk-S6VGOPUY.js"),T=e("./chunk-Z4BLTVTB.js"),b=e("@metamask/controller-utils"),E=e("async-mutex"),S=e("bn.js"),P=(i=S)&&i.__esModule?i:{default:i},C=e("uuid");a=new WeakMap,n=new WeakMap,s=new WeakMap,o=new WeakSet,l=function(e,t){const r=Date.now()-e,i=Math.max(0,5e3-r);i>0?setTimeout(t,i):t()},c=new WeakMap,d=new WeakMap,u=new WeakSet,h=function(e){let t=e.result;return"0"===e.status&&(t=[],e.result.length&&w.incomingTransactionsLogger.call(void 0,"Ignored Etherscan request error",{message:e.result,type:T.__privateGet.call(void 0,this,n)?"token":"normal"})),t},p=new WeakSet,m=function(e,t){const r=T.__privateMethod.call(void 0,this,g,_).call(this,e,t);return{...r,txParams:{...r.txParams,data:e.input},..."0"===e.isError?{status:"confirmed"}:{error:new Error("Transaction failed"),status:"failed"}}},f=new WeakSet,v=function(e,t){return{...T.__privateMethod.call(void 0,this,g,_).call(this,e,t),isTransfer:!0,transferInformation:{contractAddress:e.contractAddress,decimals:Number(e.tokenDecimal),symbol:e.tokenSymbol}}},g=new WeakSet,_=function(e,t){const r=1e3*parseInt(e.timeStamp,10);return{blockNumber:e.blockNumber,chainId:t,hash:e.hash,id:C.v1.call(void 0,{msecs:r}),status:"confirmed",time:r,txParams:{chainId:t,from:e.from,gas:b.BNToHex.call(void 0,new(0,P.default)(e.gas)),gasPrice:b.BNToHex.call(void 0,new(0,P.default)(e.gasPrice)),gasUsed:b.BNToHex.call(void 0,new(0,P.default)(e.gasUsed)),nonce:b.BNToHex.call(void 0,new(0,P.default)(e.nonce)),to:e.to,value:b.BNToHex.call(void 0,new(0,P.default)(e.value))},type:"incoming",verifiedOnBlockchain:!1}},r.EtherscanRemoteTransactionSource=class{constructor({includeTokenTransfers:e}={}){T.__privateAdd.call(void 0,this,o),T.__privateAdd.call(void 0,this,u),T.__privateAdd.call(void 0,this,p),T.__privateAdd.call(void 0,this,f),T.__privateAdd.call(void 0,this,g),T.__privateAdd.call(void 0,this,a,void 0),T.__privateAdd.call(void 0,this,n,void 0),T.__privateAdd.call(void 0,this,s,new(0,E.Mutex)),T.__privateAdd.call(void 0,this,c,(async(e,t)=>{const{currentChainId:r}=e,i=await k.fetchEtherscanTransactions.call(void 0,t);return T.__privateMethod.call(void 0,this,u,h).call(this,i).map((e=>T.__privateMethod.call(void 0,this,p,m).call(this,e,r)))})),T.__privateAdd.call(void 0,this,d,(async(e,t)=>{const{currentChainId:r}=e,i=await k.fetchEtherscanTokenTransactions.call(void 0,t);return T.__privateMethod.call(void 0,this,u,h).call(this,i).map((e=>T.__privateMethod.call(void 0,this,f,v).call(this,e,r)))})),T.__privateSet.call(void 0,this,a,e??!0),T.__privateSet.call(void 0,this,n,!1)}isSupportedNetwork(e){return Object.keys(y.ETHERSCAN_SUPPORTED_NETWORKS).includes(e)}getLastBlockVariations(){return[T.__privateGet.call(void 0,this,n)?"token":"normal"]}async fetchTransactions(e){const t=await T.__privateGet.call(void 0,this,s).acquire(),r=Date.now(),i={...e,chainId:e.currentChainId};try{const t=T.__privateGet.call(void 0,this,n)?await T.__privateGet.call(void 0,this,d).call(this,e,i):await T.__privateGet.call(void 0,this,c).call(this,e,i);return T.__privateGet.call(void 0,this,a)&&T.__privateSet.call(void 0,this,n,!T.__privateGet.call(void 0,this,n)),t}finally{T.__privateMethod.call(void 0,this,o,l).call(this,r,t)}}}}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/dist/chunk-EQT25RSP.js"}],[1842,{"./chunk-S6VGOPUY.js":1852,"./chunk-UGN7PBON.js":1857,"@metamask/controller-utils":1901},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var i=e("./chunk-UGN7PBON.js"),a=e("./chunk-S6VGOPUY.js"),n=e("@metamask/controller-utils");async function s(e,{address:t,chainId:r,fromBlock:i,limit:s}){const l=function(e,t){const r=o(e);let i=`${r}/api?`;for(const e of Object.keys(t)){const r=t[e];r&&(i+=`${e}=${r}&`)}return i+="tag=latest&page=1",i}(r,{...{module:"account",address:t,startBlock:i?.toString(),offset:s?.toString(),sort:"desc"},action:e});a.incomingTransactionsLogger.call(void 0,"Sending Etherscan request",l);return await n.handleFetch.call(void 0,l)}function o(e){const t=i.ETHERSCAN_SUPPORTED_NETWORKS[e];if(!t)throw new Error(`Etherscan does not support chain with ID: ${e}`);return`https://${t.subdomain}.${t.domain}`}r.fetchEtherscanTransactions=async function({address:e,chainId:t,fromBlock:r,limit:i}){return await s("txlist",{address:e,chainId:t,fromBlock:r,limit:i})},r.fetchEtherscanTokenTransactions=async function({address:e,chainId:t,fromBlock:r,limit:i}){return await s("tokentx",{address:e,chainId:t,fromBlock:r,limit:i})},r.getEtherscanApiHost=o}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/dist/chunk-FDUCRHYT.js"}],[1843,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var i=class extends Error{constructor(e,t){super(e??"Simulation failed"),this.code=t}};r.SimulationError=i,r.SimulationChainNotSupportedError=class extends i{constructor(e){super(`Chain is not supported: ${e}`,"chain-not-supported")}},r.SimulationInvalidResponseError=class extends i{constructor(){super("Invalid response from simulation API","invalid-response")}},r.SimulationRevertedError=class extends i{constructor(){super("Transaction was reverted","reverted")}}}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/dist/chunk-HMOSP33F.js"}],[1844,{"./chunk-HMOSP33F.js":1843,"./chunk-KT6UAKBB.js":1845,"./chunk-S6VGOPUY.js":1852,"./chunk-UGN7PBON.js":1857,"@ethersproject/abi":461,"@metamask/controller-utils":1901,"@metamask/metamask-eth-abis":1471,"@metamask/utils":2253},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var i=e("./chunk-KT6UAKBB.js"),a=e("./chunk-HMOSP33F.js"),n=e("./chunk-UGN7PBON.js"),s=e("./chunk-S6VGOPUY.js"),o=e("@ethersproject/abi"),l=e("@metamask/controller-utils"),c=e("@metamask/metamask-eth-abis"),d=e("@metamask/utils"),u=(e=>(e.ERC20="erc20",e.ERC721="erc721",e.ERC1155="erc1155",e.ERC20_WRAPPED="erc20Wrapped",e.ERC721_LEGACY="erc721Legacy",e))(u||{}),h=d.createModuleLogger.call(void 0,s.projectLogger,"simulation"),p=["Transfer","TransferSingle","TransferBatch","Deposit","Withdrawal"],m={erc20:{abi:c.abiERC20,standard:"erc20"},erc721:{abi:c.abiERC721,standard:"erc721"},erc1155:{abi:c.abiERC1155,standard:"erc1155"},erc20Wrapped:{abi:n.ABI_SIMULATION_ERC20_WRAPPED,standard:"erc20"},erc721Legacy:{abi:n.ABI_SIMULATION_ERC721_LEGACY,standard:"erc721"}},f=["execution reverted","insufficient funds for gas"];function v(e){const t=T(e.transactions[0]?.callTrace??{});h("Extracted logs",t);const r=function(){const e=Object.values(u);return new Map(e.map((e=>{const{abi:t}=m[e];return[e,new(0,o.Interface)(t)]})))}();return t.map((e=>{const t=function(e,t){const r=Object.values(u);for(const i of r)try{const r=t.get(i),{abi:a,standard:n}=m[i];return{...r.parseLog(e),abi:a,standard:n}}catch(e){continue}return}(e,r);if(!t)return void h("Failed to parse log",e);const i=t.abi.find((e=>e.name===t.name))?.inputs;if(!i)return void h("Failed to find inputs for event",t);const a=function(e,t){return e.reduce(((e,r,i)=>{const a=t[i].name.replace("_",""),n=g(r);return e[a]=n,e}),{})}(t.args,i);return{contractAddress:e.address,tokenStandard:t.standard,name:t.name,args:a,abi:t.abi}})).filter((e=>void 0!==e))}function g(e){return Array.isArray(e)?e.map(g):(e.toHexString?.()??e).toLowerCase()}function _(e){return"Transfer"===e.name&&"erc721"===e.tokenStandard&&0===parseInt(e.args.from,16)}function k(e){return"erc721"===e.tokenStandard?[e.args.tokenId]:"erc1155"===e.tokenStandard&&"TransferSingle"===e.name?[e.args.id]:"erc1155"===e.tokenStandard&&"TransferBatch"===e.name?e.args.ids:[void 0]}function y(e,t,r){const i=(a=r.return,l.toHex.call(void 0,l.hexToBN.call(void 0,a)));var a;return"erc721"===t.standard?i===e?"0x1":"0x0":i}function w(e,t,r){switch(e){case"erc721":return new(0,o.Interface)(c.abiERC721).encodeFunctionData("ownerOf",[r]);case"erc1155":return new(0,o.Interface)(c.abiERC1155).encodeFunctionData("balanceOf",[t,r]);default:return new(0,o.Interface)(c.abiERC20).encodeFunctionData("balanceOf",[t])}}function T(e){return[...e.logs??[],...(e.calls??[]).map((e=>T(e))).flat()]}function b(e,t){const r=l.hexToBN.call(void 0,t).sub(l.hexToBN.call(void 0,e)),i=r.isNeg(),a=l.toHex.call(void 0,r.abs());if(!r.isZero())return{previousBalance:e,newBalance:t,difference:a,isDecrease:i};h("Balance change is zero")}r.SupportedToken=u,r.getSimulationData=async function(e){const{chainId:t,from:r,to:n,value:s,data:o}=e;h("Getting simulation data",e);try{const l=await i.simulateTransactions.call(void 0,t,{transactions:[{data:o,from:r,maxFeePerGas:"0x0",maxPriorityFeePerGas:"0x0",to:n,value:s}],withCallTrace:!0,withLogs:!0}),c=l.transactions?.[0]?.error;if(c)throw new(0,a.SimulationError)(c);const d=function(e,t){const r=t.transactions[0];if(!r)return;const{stateDiff:i}=r,a=i?.pre?.[e]?.balance,n=i?.post?.[e]?.balance;if(!a||!n)return;return b(a,n)}(e.from,l),u=v(l);h("Parsed events",u);const m=await async function(e,t){const r=function(e,t){const r=new Set,i=new Map,a=new Map,n=t.filter((t=>p.includes(t.name)&&[t.args.from,t.args.to].includes(e.from)));h("Filtered user events",n);for(const t of n){const n=k(t);h("Extracted token ids",n);for(const s of n){const n={address:t.contractAddress,standard:t.tokenStandard,id:s},o=JSON.stringify(n);if(r.has(o)){h("Ignoring additional event with same contract and token ID",n);continue}r.add(o);const l=w(t.tokenStandard,e.from,s),c={from:e.from,to:t.contractAddress,data:l};_(t)||i.set(n,c),a.set(n,c)}}return{before:i,after:a}}(e,t);h("Generated balance transactions",[...r.after.values()]);const n=[...r.before.values(),e,...r.after.values()];if(1===n.length)return[];const s=await i.simulateTransactions.call(void 0,e.chainId,{transactions:n});if(h("Balance simulation response",s),s.transactions.length!==n.length)throw new(0,a.SimulationInvalidResponseError);let o=0;return[...r.after.keys()].map(((t,i)=>{const a=b(!r.before.get(t)?"0x0":y(e.from,t,s.transactions[o++]),y(e.from,t,s.transactions[i+r.before.size+1]));if(a)return{...t,...a}})).filter((e=>void 0!==e))}(e,u);return{nativeBalanceChange:d,tokenBalanceChanges:m}}catch(t){h("Failed to get simulation data",t,e);let r=t;f.some((e=>r.message?.includes(e)))&&(r=new(0,a.SimulationRevertedError));const{code:i,message:n}=r;return{tokenBalanceChanges:[],error:{code:i,message:n}}}},r.getEvents=v}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/dist/chunk-IT3SYNZ6.js"}],[1845,{"./chunk-HMOSP33F.js":1843,"./chunk-S6VGOPUY.js":1852,"@metamask/controller-utils":1901,"@metamask/utils":2253},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var i=e("./chunk-HMOSP33F.js"),a=e("./chunk-S6VGOPUY.js"),n=e("@metamask/controller-utils"),s=e("@metamask/utils").createModuleLogger.call(void 0,a.projectLogger,"simulation-api"),o="https://tx-sentinel-{0}.api.cx.metamask.io/",l="networks",c=0;function d(e){return o.replace("{0}",e)}r.simulateTransactions=async function(e,t){const r=await async function(e){const t=await async function(){const e=`${d("ethereum-mainnet")}${l}`,t=await fetch(e);return t.json()}(),r=n.convertHexToDecimal.call(void 0,e),a=t[r];if(!a?.confirmations)throw s("Chain is not supported",e),new(0,i.SimulationChainNotSupportedError)(e);return d(a.network)}(e);s("Sending request",r,t);const a=c;c+=1;const o=await fetch(r,{method:"POST",body:JSON.stringify({id:String(a),jsonrpc:"2.0",method:"infura_simulateTransactions",params:[t]})}),u=await o.json();if(s("Received response",u),u.error){const{code:e,message:t}=u.error;throw new(0,i.SimulationError)(t,e)}return u?.result}}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/dist/chunk-KT6UAKBB.js"}],[1846,{"./chunk-UGN7PBON.js":1857,"./chunk-YVCX6Z75.js":1862},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var i=e("./chunk-YVCX6Z75.js"),a=e("./chunk-UGN7PBON.js"),n=[a.CHAIN_IDS.OPTIMISM,a.CHAIN_IDS.OPTIMISM_TESTNET,a.CHAIN_IDS.BASE,a.CHAIN_IDS.BASE_TESTNET,a.CHAIN_IDS.OPBNB,a.CHAIN_IDS.OPBNB_TESTNET,a.CHAIN_IDS.ZORA],s=class extends i.OracleLayer1GasFeeFlow{constructor(){super("0x420000000000000000000000000000000000000F")}matchesTransaction(e){return n.includes(e.chainId)}};r.OptimismLayer1GasFeeFlow=s}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/dist/chunk-NYKRCWBG.js"}],[1847,{"./chunk-2XKEAKQG.js":1834,"./chunk-3ZRHCVVS.js":1835,"./chunk-5KMU2IAT.js":1836,"./chunk-7LXE4KHV.js":1837,"./chunk-7MKQDZKY.js":1838,"./chunk-DLOQPH4M.js":1839,"./chunk-DTDTOMTB.js":1840,"./chunk-EQT25RSP.js":1841,"./chunk-IT3SYNZ6.js":1844,"./chunk-NYKRCWBG.js":1846,"./chunk-PRUNMTRD.js":1848,"./chunk-PUESYN62.js":1849,"./chunk-Q6Q44V4W.js":1850,"./chunk-S6VGOPUY.js":1852,"./chunk-SD6CWFDF.js":1853,"./chunk-TIE3CPF7.js":1854,"./chunk-TJMQEH57.js":1855,"./chunk-UGFBA4GV.js":1856,"./chunk-UT4M4XI3.js":1858,"./chunk-V72C4MCR.js":1859,"./chunk-VH47Q6TS.js":1860,"./chunk-WR5F34OW.js":1861,"./chunk-YXSCBWTU.js":1863,"./chunk-Z4BLTVTB.js":1864,"@ethereumjs/common":419,"@ethereumjs/tx":1870,"@ethereumjs/util":1882,"@metamask/base-controller":1895,"@metamask/controller-utils":1901,"@metamask/eth-query":1269,"@metamask/network-controller":1508,"@metamask/nonce-tracker":1522,"@metamask/rpc-errors":1670,"@metamask/utils":2253,"async-mutex":1905,"eth-method-registry":1910,events:3263,lodash:3770,uuid:4341},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var i,a,n,s,o,l,c,d,u,h,p,m,f,v,g,_,k,y,w,T,b,E,S,P,C,A,I,j,M,x,N,O,R,G,L,B,F,D,U,H,W,$,V,K,q,Y,X,J,z,Z=e("./chunk-VH47Q6TS.js"),Q=e("./chunk-Q6Q44V4W.js"),ee=e("./chunk-YXSCBWTU.js"),te=e("./chunk-NYKRCWBG.js"),re=e("./chunk-WR5F34OW.js"),ie=e("./chunk-TJMQEH57.js"),ae=e("./chunk-TIE3CPF7.js"),ne=e("./chunk-PRUNMTRD.js"),se=e("./chunk-IT3SYNZ6.js"),oe=e("./chunk-SD6CWFDF.js"),le=e("./chunk-DTDTOMTB.js"),ce=e("./chunk-PUESYN62.js"),de=e("./chunk-5KMU2IAT.js"),ue=e("./chunk-7LXE4KHV.js"),he=e("./chunk-3ZRHCVVS.js"),pe=e("./chunk-UT4M4XI3.js"),me=e("./chunk-UGFBA4GV.js"),fe=e("./chunk-V72C4MCR.js"),ve=e("./chunk-EQT25RSP.js"),ge=e("./chunk-7MKQDZKY.js"),_e=e("./chunk-2XKEAKQG.js"),ke=e("./chunk-DLOQPH4M.js"),ye=e("./chunk-S6VGOPUY.js"),we=e("./chunk-Z4BLTVTB.js"),Te=e("@ethereumjs/common"),be=e("@ethereumjs/tx"),Ee=e("@ethereumjs/util"),Se=e("@metamask/base-controller"),Pe=e("@metamask/controller-utils"),Ce=e("@metamask/eth-query"),Ae=(i=Ce)&&i.__esModule?i:{default:i},Ie=e("@metamask/network-controller"),je=e("@metamask/nonce-tracker"),Me=e("@metamask/rpc-errors"),xe=e("@metamask/utils"),Ne=e("async-mutex"),Oe=e("eth-method-registry"),Re=e("events"),Ge=e("lodash"),Le=e("uuid"),Be={transactions:{persist:!0,anonymous:!1},methodData:{persist:!0,anonymous:!1},lastFetchedBlockNumbers:{persist:!0,anonymous:!1}},Fe=Te.Hardfork.London,De=1.1,Ue=1.1,He="TransactionController",We=(e=>(e.Approved="approved",e.NotApproved="not-approved",e.SkippedViaBeforePublishHook="skipped-via-before-publish-hook",e))(We||{});var $e=class extends Se.BaseController{constructor({blockTracker:e,disableHistory:t,disableSendFlowHistory:r,disableSwaps:i,getCurrentAccountEIP1559Compatibility:k,getCurrentNetworkEIP1559Compatibility:b,getExternalPendingTransactions:C,getGasFeeEstimates:I,getNetworkClientRegistry:R,getNetworkState:L,getPermittedAccounts:F,getSavedGasFees:U,getSelectedAddress:V,incomingTransactions:q={},isMultichainEnabled:X=!1,isSimulationEnabled:z,messenger:Z,onNetworkStateChange:Q,pendingTransactions:ee={},provider:te,securityProviderRequest:re,sign:ie,state:ae,testGasFeeFlows:ne,transactionHistoryLimit:se=40,hooks:oe}){super({name:He,metadata:Be,messenger:Z,state:{methodData:{},transactions:[],lastFetchedBlockNumbers:{},...ae}}),we.__privateAdd.call(void 0,this,u),we.__privateAdd.call(void 0,this,p),we.__privateAdd.call(void 0,this,f),we.__privateAdd.call(void 0,this,_),we.__privateAdd.call(void 0,this,y),we.__privateAdd.call(void 0,this,T),we.__privateAdd.call(void 0,this,E),we.__privateAdd.call(void 0,this,P),we.__privateAdd.call(void 0,this,A),we.__privateAdd.call(void 0,this,j),we.__privateAdd.call(void 0,this,x),we.__privateAdd.call(void 0,this,O),we.__privateAdd.call(void 0,this,G),we.__privateAdd.call(void 0,this,B),we.__privateAdd.call(void 0,this,D),we.__privateAdd.call(void 0,this,H),we.__privateAdd.call(void 0,this,$),we.__privateAdd.call(void 0,this,K),we.__privateAdd.call(void 0,this,Y),we.__privateAdd.call(void 0,this,J),we.__privateAdd.call(void 0,this,a,new(0,Re.EventEmitter)),this.approvingTransactionIds=new Set,this.mutex=new(0,Ne.Mutex),we.__privateAdd.call(void 0,this,n,void 0),we.__privateAdd.call(void 0,this,s,void 0),this.signAbortCallbacks=new Map,we.__privateAdd.call(void 0,this,o,void 0),we.__privateAdd.call(void 0,this,l,void 0),we.__privateAdd.call(void 0,this,c,void 0),we.__privateAdd.call(void 0,this,d,void 0),we.__privateAdd.call(void 0,this,g,(()=>{this.pendingTransactionTracker.startIfPendingTransactions(),we.__privateGet.call(void 0,this,d).checkForPendingTransactionAndStartPolling()})),this.messagingSystem=Z,this.getNetworkState=L,this.isSendFlowHistoryDisabled=r??!1,this.isHistoryDisabled=t??!1,this.isSwapsDisabled=i??!1,we.__privateSet.call(void 0,this,l,z??(()=>!0)),this.registry=new(0,Oe.MethodRegistry)({provider:te}),this.getSavedGasFees=U??(e=>{}),this.getCurrentAccountEIP1559Compatibility=k??(()=>Promise.resolve(!0)),this.getCurrentNetworkEIP1559Compatibility=b,this.getGasFeeEstimates=I||(()=>Promise.resolve({})),this.getPermittedAccounts=F,this.getSelectedAddress=V,this.getExternalPendingTransactions=C??(()=>[]),this.securityProviderRequest=re,we.__privateSet.call(void 0,this,n,q),we.__privateSet.call(void 0,this,s,ee),we.__privateSet.call(void 0,this,o,se),this.sign=ie,we.__privateSet.call(void 0,this,c,!0===ne),this.afterSign=oe?.afterSign??(()=>!0),this.beforeApproveOnInit=oe?.beforeApproveOnInit??(()=>!0),this.beforeCheckPendingTransaction=oe?.beforeCheckPendingTransaction??(()=>!0),this.beforePublish=oe?.beforePublish??(()=>!0),this.getAdditionalSignArguments=oe?.getAdditionalSignArguments??(()=>[]),this.publish=oe?.publish??(()=>Promise.resolve({transactionHash:void 0})),this.nonceTracker=we.__privateMethod.call(void 0,this,u,h).call(this,{provider:te,blockTracker:e});const le=e=>this.messagingSystem.call("NetworkController:findNetworkClientIdByChainId",e);we.__privateSet.call(void 0,this,d,new(0,ce.MultichainTrackingHelper)({isMultichainEnabled:X,provider:te,nonceTracker:this.nonceTracker,incomingTransactionOptions:q,findNetworkClientIdByChainId:le,getNetworkClientById:e=>this.messagingSystem.call("NetworkController:getNetworkClientById",e),getNetworkClientRegistry:R,removeIncomingTransactionHelperListeners:we.__privateMethod.call(void 0,this,y,w).bind(this),removePendingTransactionTrackerListeners:we.__privateMethod.call(void 0,this,E,S).bind(this),createNonceTracker:we.__privateMethod.call(void 0,this,u,h).bind(this),createIncomingTransactionHelper:we.__privateMethod.call(void 0,this,p,m).bind(this),createPendingTransactionTracker:we.__privateMethod.call(void 0,this,f,v).bind(this),onNetworkStateChange:e=>{this.messagingSystem.subscribe("NetworkController:stateChange",e)}})),we.__privateGet.call(void 0,this,d).initialize();const de=new(0,ve.EtherscanRemoteTransactionSource)({includeTokenTransfers:q.includeTokenTransfers});this.incomingTransactionHelper=we.__privateMethod.call(void 0,this,p,m).call(this,{blockTracker:e,etherscanRemoteTransactionSource:de}),this.pendingTransactionTracker=we.__privateMethod.call(void 0,this,f,v).call(this,{provider:te,blockTracker:e}),this.gasFeeFlows=we.__privateMethod.call(void 0,this,j,M).call(this),this.layer1GasFeeFlows=we.__privateMethod.call(void 0,this,x,N).call(this);new(0,ge.GasFeePoller)({findNetworkClientIdByChainId:le,gasFeeFlows:this.gasFeeFlows,getGasFeeControllerEstimates:this.getGasFeeEstimates,getProvider:(e,t)=>we.__privateGet.call(void 0,this,d).getProvider({networkClientId:t,chainId:e}),getTransactions:()=>this.state.transactions,layer1GasFeeFlows:this.layer1GasFeeFlows,onStateChange:e=>{this.messagingSystem.subscribe("TransactionController:stateChange",e)}}).hub.on("transaction-updated",we.__privateMethod.call(void 0,this,H,W).bind(this)),this.messagingSystem.subscribe("TransactionController:stateChange",we.__privateGet.call(void 0,this,g)),Q((()=>{ye.projectLogger.call(void 0,"Detected network change",this.getChainId()),this.pendingTransactionTracker.startIfPendingTransactions(),this.onBootCleanup()})),this.onBootCleanup(),we.__privateGet.call(void 0,this,g).call(this)}failTransaction(e,t,r){const i=Ge.merge.call(void 0,{},e,{error:me.normalizeTxError.call(void 0,t),status:"failed"});this.messagingSystem.publish(`${He}:transactionFailed`,{actionId:r,error:t.message,transactionMeta:i}),this.updateTransaction(i,"TransactionController#failTransaction - Add error message and set status to failed"),this.onTransactionStatusChange(i),this.messagingSystem.publish(`${He}:transactionFinished`,i),we.__privateGet.call(void 0,this,a).emit(`${e.id}:finished`,i)}async registryLookup(e){const t=await this.registry.lookup(e);if(!t)return{registryMethod:"",parsedRegistryMethod:{name:void 0,args:void 0}};return{registryMethod:t,parsedRegistryMethod:this.registry.parse(t)}}destroy(){we.__privateMethod.call(void 0,this,_,k).call(this)}async handleMethodData(e){const t=await this.mutex.acquire();try{const{methodData:t}=this.state;if(Object.keys(t).find((t=>e===t)))return t[e];const r=await this.registryLookup(e);return this.update((t=>{t.methodData[e]=r})),r}finally{t()}}async addTransaction(e,{actionId:t,deviceConfirmedOn:r,method:i,origin:a,requireApproval:n,securityAlertResponse:s,sendFlowHistory:o,swaps:l={},type:c,networkClientId:u}={}){if(ye.projectLogger.call(void 0,"Adding transaction",e),e=me.normalizeTransactionParams.call(void 0,e),u&&!we.__privateGet.call(void 0,this,d).has(u))throw new Error("The networkClientId for this transaction could not be found");const h=u??we.__privateMethod.call(void 0,this,K,q).call(this),p=await this.getEIP1559Compatibility(h);Z.validateTxParams.call(void 0,e,p),a&&await Z.validateTransactionOrigin.call(void 0,await this.getPermittedAccounts(a),this.getSelectedAddress(),e.from,a);const m=this.generateDappSuggestedGasFees(e,a),f=this.getChainId(h),v=we.__privateGet.call(void 0,this,d).getEthQuery({networkClientId:h,chainId:f}),g=c??(await oe.determineTransactionType.call(void 0,e,v)).type,_=this.getTransactionWithActionId(t);let k=_?Ge.cloneDeep.call(void 0,_):{actionId:t,chainId:f,dappSuggestedGasFees:m,deviceConfirmedOn:r,id:Le.v1.call(void 0),origin:a,securityAlertResponse:s,status:"unapproved",time:Date.now(),txParams:e,userEditedGasLimit:!1,verifiedOnBlockchain:!1,type:g,networkClientId:h};if(await this.updateGasProperties(k),!_){if(i&&this.securityProviderRequest){const e=await this.securityProviderRequest(k,i);k.securityProviderResponse=e}this.isSendFlowHistoryDisabled||(k.sendFlowHistory=o??[]),this.isHistoryDisabled||(k=ae.addInitialHistorySnapshot.call(void 0,k)),k=pe.updateSwapsTransaction.call(void 0,k,g,l,{isSwapsDisabled:this.isSwapsDisabled,cancelTransaction:this.cancelTransaction.bind(this),messenger:this.messagingSystem}),this.addMetadata(k),!1!==n?we.__privateMethod.call(void 0,this,D,U).call(this,k):ye.projectLogger.call(void 0,"Skipping simulation as approval not required"),this.messagingSystem.publish(`${He}:unapprovedTransactionAdded`,k)}return{result:this.processApproval(k,{isExisting:Boolean(_),requireApproval:n,actionId:t}),transactionMeta:k}}startIncomingTransactionPolling(e=[]){0!==e.length?we.__privateGet.call(void 0,this,d).startIncomingTransactionPolling(e):this.incomingTransactionHelper.start()}stopIncomingTransactionPolling(e=[]){0!==e.length?we.__privateGet.call(void 0,this,d).stopIncomingTransactionPolling(e):this.incomingTransactionHelper.stop()}stopAllIncomingTransactionPolling(){this.incomingTransactionHelper.stop(),we.__privateGet.call(void 0,this,d).stopAllIncomingTransactionPolling()}async updateIncomingTransactions(e=[]){0!==e.length?await we.__privateGet.call(void 0,this,d).updateIncomingTransactions(e):await this.incomingTransactionHelper.update()}async stopTransaction(e,t,{estimatedBaseFee:r,actionId:i}={}){if(this.getTransactionWithActionId(i))return;t&&(t=me.normalizeGasFeeValues.call(void 0,t),me.validateGasValues.call(void 0,t)),ye.projectLogger.call(void 0,"Creating cancel transaction",e,t);const n=this.getTransaction(e);if(!n)return;if(!this.sign)throw new Error("No sign method defined.");const s=me.getIncreasedPriceFromExisting.call(void 0,n.txParams.gasPrice,De),o=me.isGasPriceValue.call(void 0,t)&&t.gasPrice,l=o&&me.validateMinimumIncrease.call(void 0,o,s)||s,c=n.txParams?.maxFeePerGas,u=me.getIncreasedPriceFromExisting.call(void 0,c,De),h=me.isFeeMarketEIP1559Values.call(void 0,t)&&t.maxFeePerGas,p=h&&me.validateMinimumIncrease.call(void 0,h,u)||c&&u,m=n.txParams?.maxPriorityFeePerGas,f=me.getIncreasedPriceFromExisting.call(void 0,m,De),v=me.isFeeMarketEIP1559Values.call(void 0,t)&&t.maxPriorityFeePerGas,g=v&&me.validateMinimumIncrease.call(void 0,v,f)||m&&f,_=p&&g?{from:n.txParams.from,gasLimit:n.txParams.gas,maxFeePerGas:p,maxPriorityFeePerGas:g,type:"0x2",nonce:n.txParams.nonce,to:n.txParams.from,value:"0x0"}:{from:n.txParams.from,gasLimit:n.txParams.gas,gasPrice:l,nonce:n.txParams.nonce,to:n.txParams.from,value:"0x0"},k=this.prepareUnsignedEthTx(n.chainId,_),y=await this.sign(k,n.txParams.from),w=Ee.bufferToHex.call(void 0,y.serialize()),T=_.maxFeePerGas??_.gasPrice,b=_.maxFeePerGas?n.txParams.maxFeePerGas:n.txParams.gasPrice;ye.projectLogger.call(void 0,"Submitting cancel transaction",{oldFee:b,newFee:T,txParams:_});const E=we.__privateGet.call(void 0,this,d).getEthQuery({networkClientId:n.networkClientId,chainId:n.chainId}),S=await this.publishTransactionForRetry(E,w,n),P={actionId:i,chainId:n.chainId,networkClientId:n.networkClientId,estimatedBaseFee:r,hash:S,id:Le.v1.call(void 0),originalGasEstimate:n.txParams.gas,status:"submitted",time:Date.now(),type:"cancel",txParams:_};this.addMetadata(P),this.messagingSystem.publish(`${He}:transactionApproved`,{transactionMeta:P,actionId:i}),this.messagingSystem.publish(`${He}:transactionSubmitted`,{transactionMeta:P,actionId:i}),this.messagingSystem.publish(`${He}:transactionFinished`,P),we.__privateGet.call(void 0,this,a).emit(`${n.id}:finished`,P)}async speedUpTransaction(e,t,{actionId:r,estimatedBaseFee:i}={}){if(this.getTransactionWithActionId(r))return;t&&(t=me.normalizeGasFeeValues.call(void 0,t),me.validateGasValues.call(void 0,t)),ye.projectLogger.call(void 0,"Creating speed up transaction",e,t);const a=this.getTransaction(e);if(!a)return;if(!this.sign)throw new Error("No sign method defined.");const n=me.getIncreasedPriceFromExisting.call(void 0,a.txParams.gasPrice,Ue),s=me.isGasPriceValue.call(void 0,t)&&t.gasPrice,o=s&&me.validateMinimumIncrease.call(void 0,s,n)||n,l=a.txParams?.maxFeePerGas,c=me.getIncreasedPriceFromExisting.call(void 0,l,Ue),u=me.isFeeMarketEIP1559Values.call(void 0,t)&&t.maxFeePerGas,h=u&&me.validateMinimumIncrease.call(void 0,u,c)||l&&c,p=a.txParams?.maxPriorityFeePerGas,m=me.getIncreasedPriceFromExisting.call(void 0,p,Ue),f=me.isFeeMarketEIP1559Values.call(void 0,t)&&t.maxPriorityFeePerGas,v=f&&me.validateMinimumIncrease.call(void 0,f,m)||p&&m,g=h&&v?{...a.txParams,gasLimit:a.txParams.gas,maxFeePerGas:h,maxPriorityFeePerGas:v,type:"0x2"}:{...a.txParams,gasLimit:a.txParams.gas,gasPrice:o},_=this.prepareUnsignedEthTx(a.chainId,g),k=await this.sign(_,a.txParams.from),y=this.updateTransactionMetaRSV(a,k),w=Ee.bufferToHex.call(void 0,k.serialize()),T=g.maxFeePerGas??g.gasPrice,b=g.maxFeePerGas?y.txParams.maxFeePerGas:y.txParams.gasPrice;ye.projectLogger.call(void 0,"Submitting speed up transaction",{oldFee:b,newFee:T,txParams:g});const E=we.__privateGet.call(void 0,this,d).getEthQuery({networkClientId:a.networkClientId,chainId:a.chainId}),S=await this.publishTransactionForRetry(E,w,a),P={...y,estimatedBaseFee:i,id:Le.v1.call(void 0),time:Date.now(),hash:S,actionId:r,originalGasEstimate:a.txParams.gas,type:"retry",originalType:a.type},C=h&&v?{...P,txParams:{...a.txParams,maxFeePerGas:h,maxPriorityFeePerGas:v}}:{...P,txParams:{...a.txParams,gasPrice:o}};this.addMetadata(C),this.messagingSystem.publish(`${He}:transactionApproved`,{transactionMeta:C,actionId:r}),this.messagingSystem.publish(`${He}:transactionSubmitted`,{transactionMeta:C,actionId:r}),this.messagingSystem.publish(`${He}:speedupTransactionAdded`,C)}async estimateGas(e,t){const r=we.__privateGet.call(void 0,this,d).getEthQuery({networkClientId:t}),{estimatedGas:i,simulationFails:a}=await fe.estimateGas.call(void 0,e,r);return{gas:i,simulationFails:a}}async estimateGasBuffered(e,t,r){const i=we.__privateGet.call(void 0,this,d).getEthQuery({networkClientId:r}),{blockGasLimit:a,estimatedGas:n,simulationFails:s}=await fe.estimateGas.call(void 0,e,i);return{gas:fe.addGasBuffer.call(void 0,n,a,t),simulationFails:s}}updateTransaction(e,t){const{id:r}=e;we.__privateMethod.call(void 0,this,O,R).call(this,{transactionId:r,note:t,skipHistory:this.isHistoryDisabled},(()=>({...e})))}updateSecurityAlertResponse(e,t){if(!t)throw new Error("updateSecurityAlertResponse: securityAlertResponse should not be null");const r=this.getTransaction(e);if(!r)throw new Error("Cannot update security alert response as no transaction metadata found");const i={...r,securityAlertResponse:t};this.updateTransaction(i,`${He}:updatesecurityAlertResponse - securityAlertResponse updated`)}wipeTransactions(e,t){if(e&&!t)return void this.update((e=>{e.transactions=[]}));const r=this.getChainId(),i=this.state.transactions.filter((({chainId:i,txParams:a})=>{if(!(e||i===r))return!0;return!(!t||a.from?.toLowerCase()===t.toLowerCase())}));this.update((e=>{e.transactions=this.trimTransactionsForState(i)}))}async confirmExternalTransaction(e,t,r){const i=this.addExternalTransaction(e);try{const e=i.id,a={...i,status:"confirmed",txReceipt:t};r&&(a.baseFeePerGas=r),this.markNonceDuplicatesDropped(e),this.updateTransaction(a,`${He}:confirmExternalTransaction - Add external transaction`),this.onTransactionStatusChange(a),this.updatePostBalance(a),this.messagingSystem.publish(`${He}:transactionConfirmed`,a)}catch(e){console.error("Failed to confirm external transaction",e)}}updateTransactionSendFlowHistory(e,t,r){if(this.isSendFlowHistoryDisabled)throw new Error("Send flow history is disabled for the current transaction controller");const i=this.getTransaction(e);if(!i)throw new Error("Cannot update send flow history as no transaction metadata found");me.validateIfTransactionUnapproved.call(void 0,i,"updateTransactionSendFlowHistory");const a=i.sendFlowHistory??[];if(t===a.length){const e={...i,sendFlowHistory:[...a,...r]};this.updateTransaction(e,`${He}:updateTransactionSendFlowHistory - sendFlowHistory updated`)}return this.getTransaction(e)}updateTransactionGasFees(e,{defaultGasEstimates:t,estimateUsed:r,estimateSuggested:i,gas:a,gasLimit:n,gasPrice:s,maxPriorityFeePerGas:o,maxFeePerGas:l,originalGasEstimate:c,userEditedGasLimit:d,userFeeLevel:u}){const h=this.getTransaction(e);if(!h)throw new Error("Cannot update transaction as no transaction metadata found");me.validateIfTransactionUnapproved.call(void 0,h,"updateTransactionGasFees");let p={txParams:{gas:a,gasLimit:n,gasPrice:s,maxPriorityFeePerGas:o,maxFeePerGas:l},defaultGasEstimates:t,estimateUsed:r,estimateSuggested:i,originalGasEstimate:c,userEditedGasLimit:d,userFeeLevel:u};p.txParams=Ge.pickBy.call(void 0,p.txParams),p=Ge.pickBy.call(void 0,p);const m=Ge.merge.call(void 0,{},h,p);return this.updateTransaction(m,`${He}:updateTransactionGasFees - gas values updated`),this.getTransaction(e)}updatePreviousGasParams(e,{gasLimit:t,maxFeePerGas:r,maxPriorityFeePerGas:i}){const a=this.getTransaction(e);if(!a)throw new Error("Cannot update transaction as no transaction metadata found");me.validateIfTransactionUnapproved.call(void 0,a,"updatePreviousGasParams");const n={previousGas:{gasLimit:t,maxFeePerGas:r,maxPriorityFeePerGas:i}};n.previousGas=Ge.pickBy.call(void 0,n.previousGas);const s=Ge.merge.call(void 0,{},a,n);return this.updateTransaction(s,`${He}:updatePreviousGasParams - Previous gas values updated`),this.getTransaction(e)}async getNonceLock(e,t){return we.__privateGet.call(void 0,this,d).getNonceLock(e,t)}async updateEditableParams(e,{data:t,gas:r,gasPrice:i,from:a,to:n,value:s}){const o=this.getTransaction(e);if(!o)throw new Error("Cannot update editable params as no transaction metadata found");me.validateIfTransactionUnapproved.call(void 0,o,"updateEditableParams");const l={txParams:{data:t,from:a,to:n,value:s,gas:r,gasPrice:i}};l.txParams=Ge.pickBy.call(void 0,l.txParams);const c=Ge.merge.call(void 0,{},o,l),u=we.__privateGet.call(void 0,this,d).getProvider({chainId:o.chainId,networkClientId:o.networkClientId}),h=new(0,Ae.default)(u),{type:p}=await oe.determineTransactionType.call(void 0,c.txParams,h);return c.type=p,await _e.updateTransactionLayer1GasFee.call(void 0,{layer1GasFeeFlows:this.layer1GasFeeFlows,provider:u,transactionMeta:c}),this.updateTransaction(c,`Update Editable Params for ${e}`),this.getTransaction(e)}async approveTransactionsWithSameNonce(e=[],{hasNonce:t}={}){if(ye.projectLogger.call(void 0,"Approving transactions with same nonce",{transactions:e}),0===e.length)return"";const r=e[0],i=this.getCommonConfiguration(r.chainId);let a;try{a=this.messagingSystem.call("NetworkController:findNetworkClientIdByChainId",r.chainId)}catch(e){ye.projectLogger.call(void 0,"failed to find networkClientId from chainId",e)}const n=be.TransactionFactory.fromTxData(r,{common:i}),s=Ee.bufferToHex.call(void 0,n.serialize());if(this.approvingTransactionIds.has(s))return"";let o,l;this.approvingTransactionIds.add(s);try{const i=r.from;l=!0!==t?await this.getNonceLock(i,a):void 0;const n=l?xe.add0x.call(void 0,l.nextNonce.toString(16)):r.nonce;l&&ye.projectLogger.call(void 0,"Using nonce from nonce tracker",n,l.nonceDetails),o=await Promise.all(e.map((e=>(e.nonce=n,this.signExternalTransaction(e.chainId,e)))))}catch(e){throw ye.projectLogger.call(void 0,"Error while signing transactions with same nonce",e),e}finally{l?.releaseLock(),this.approvingTransactionIds.delete(s)}return o}updateCustodialTransaction(e,{errorMessage:t,hash:r,status:i}){const n=this.getTransaction(e);if(!n)throw new Error("Cannot update custodial transaction as no transaction metadata found");if(!n.custodyId)throw new Error("Transaction must be a custodian transaction");if(i&&!["submitted","signed","failed"].includes(i))throw new Error(`Cannot update custodial transaction with status: ${i}`);const s=Ge.merge.call(void 0,{},n,Ge.pickBy.call(void 0,{hash:r,status:i}));"submitted"===s.status&&(s.submittedTime=(new Date).getTime()),"failed"===s.status&&(s.error=me.normalizeTxError.call(void 0,new Error(t))),this.updateTransaction(s,`${He}:updateCustodialTransaction - Custodial transaction updated`),["submitted","failed"].includes(i)&&(this.messagingSystem.publish(`${He}:transactionFinished`,s),we.__privateGet.call(void 0,this,a).emit(`${s.id}:finished`,s))}initApprovals(){const e=this.getChainId(),t=this.state.transactions.filter((t=>"unapproved"===t.status&&t.chainId===e&&!t.isUserOperation));for(const e of t)this.processApproval(e,{shouldShowRequest:!1}).catch((e=>{e?.code!==Me.errorCodes.provider.userRejectedRequest&&console.error("Error during persisted transaction approval",e)}))}getTransactions({searchCriteria:e={},initialList:t,filterToCurrentNetwork:r=!0,limit:i}={}){const a=this.getChainId(),n=Ge.mapValues.call(void 0,e,(e=>"function"==typeof e?e:t=>t===e)),s=t??this.state.transactions,o=Ge.sortBy.call(void 0,Ge.pickBy.call(void 0,s,(e=>{if(r&&e.chainId!==a)return!1;for(const[t,r]of Object.entries(n))if(t in e.txParams){if(!1===r(e.txParams[t]))return!1}else if(!1===r(e[t]))return!1;return!0})),"time");if(void 0!==i){const e=new Set,t=[];for(let r=o.length-1;r>-1;r--){const a=o[r],{nonce:n}=a.txParams;if(!e.has(n)){if(!(e.size<i))continue;e.add(n)}t.unshift(a)}return t}return o}async estimateGasFee({transactionParams:e,chainId:t,networkClientId:r}){const i=we.__privateMethod.call(void 0,this,$,V).call(this,{networkClientId:r,chainId:t}),a={txParams:e,chainId:t,networkClientId:i},n=ke.getGasFeeFlow.call(void 0,a,this.gasFeeFlows),s=we.__privateGet.call(void 0,this,d).getEthQuery({networkClientId:i,chainId:t}),o=await this.getGasFeeEstimates({networkClientId:i});return n.getGasFees({ethQuery:s,gasFeeControllerData:o,transactionMeta:a})}async getLayer1GasFee({transactionParams:e,chainId:t,networkClientId:r}){const i=we.__privateGet.call(void 0,this,d).getProvider({networkClientId:r,chainId:t});return await _e.getTransactionLayer1GasFee.call(void 0,{layer1GasFeeFlows:this.layer1GasFeeFlows,provider:i,transactionMeta:{txParams:e,chainId:t}})}async signExternalTransaction(e,t){if(!this.sign)throw new Error("No sign method defined.");const r=me.normalizeTransactionParams.call(void 0,t),i=me.isEIP1559Transaction.call(void 0,r)?"0x2":"0x0",a={...r,type:i,gasLimit:r.gas,chainId:e},{from:n}=a,s=this.getCommonConfiguration(e),o=be.TransactionFactory.fromTxData(a,{common:s}),l=await this.sign(o,n);return Ee.bufferToHex.call(void 0,l.serialize())}clearUnapprovedTransactions(){const e=this.state.transactions.filter((({status:e})=>"unapproved"!==e));this.update((t=>{t.transactions=this.trimTransactionsForState(e)}))}abortTransactionSigning(e){if(!this.getTransaction(e))throw new Error("Cannot abort signing as no transaction metadata found");const t=this.signAbortCallbacks.get(e);if(!t)throw new Error("Cannot abort signing as transaction is not waiting for signing");t(),this.signAbortCallbacks.delete(e)}addMetadata(e){this.update((t=>{t.transactions=this.trimTransactionsForState([...t.transactions,e])}))}async updateGasProperties(e){const t=await this.getEIP1559Compatibility(e.networkClientId)&&"0x0"!==e.txParams.type,{networkClientId:r,chainId:i}=e,a=we.__privateMethod.call(void 0,this,J,z).call(this,r),n=we.__privateGet.call(void 0,this,d).getEthQuery({networkClientId:r,chainId:i}),s=we.__privateGet.call(void 0,this,d).getProvider({networkClientId:r,chainId:i});await fe.updateGas.call(void 0,{ethQuery:n,chainId:i,isCustomNetwork:a,txMeta:e}),await he.updateGasFees.call(void 0,{eip1559:t,ethQuery:n,gasFeeFlows:this.gasFeeFlows,getGasFeeEstimates:this.getGasFeeEstimates,getSavedGasFees:this.getSavedGasFees.bind(this),txMeta:e}),await _e.updateTransactionLayer1GasFee.call(void 0,{layer1GasFeeFlows:this.layer1GasFeeFlows,provider:s,transactionMeta:e})}onBootCleanup(){this.submitApprovedTransactions()}submitApprovedTransactions(){const e=this.state.transactions.filter((e=>"approved"===e.status));for(const t of e)this.beforeApproveOnInit(t)&&this.approveTransaction(t.id).catch((e=>{console.error("Error while submitting persisted transaction",e)}))}async processApproval(e,{isExisting:t=!1,requireApproval:r,shouldShowRequest:i=!0,actionId:a}){const n=e.id;let s;const{meta:o,isCompleted:l}=this.isTransactionCompleted(n),c=l?Promise.resolve(o):this.waitForTransactionFinished(n);if(o&&!t&&!l)try{if(!1!==r){const t=await this.requestApproval(e,{shouldShowRequest:i});s=t.resultCallbacks;const r=t.value,a=r?.txMeta;a&&(ye.projectLogger.call(void 0,"Updating transaction with approval data",{customNonce:a.customNonceValue,params:a.txParams}),this.updateTransaction(a,"TransactionController#processApproval - Updated with approval data"))}const{isCompleted:t}=this.isTransactionCompleted(n);if(!t){"skipped-via-before-publish-hook"===await this.approveTransaction(n)&&s&&s.success();const e=this.getTransaction(n);this.messagingSystem.publish(`${He}:transactionApproved`,{transactionMeta:e,actionId:a})}}catch(e){const{isCompleted:t}=this.isTransactionCompleted(n);if(!t){if(e?.code===Me.errorCodes.provider.userRejectedRequest)throw this.cancelTransaction(n,a),Me.providerErrors.userRejectedRequest("MetaMask Tx Signature: User denied transaction signature.");this.failTransaction(o,e,a)}}const d=await c;switch(d?.status){case"failed":throw s?.error(d.error),Me.rpcErrors.internal(d.error.message);case"submitted":return s?.success(),d.hash;default:const e=Me.rpcErrors.internal(`MetaMask Tx Signature: Unknown problem: ${JSON.stringify(d||n)}`);throw s?.error(e),e}}async approveTransaction(e){const t=new Array;t.push(await this.mutex.acquire());let r=this.getTransactionOrThrow(e);try{if(!this.sign)return this.failTransaction(r,new Error("No sign method defined.")),"not-approved";if(!r.chainId)return this.failTransaction(r,new Error("No chainId defined.")),"not-approved";if(this.approvingTransactionIds.has(e))return ye.projectLogger.call(void 0,"Skipping approval as signing in progress",e),"not-approved";this.approvingTransactionIds.add(e),t.push((()=>this.approvingTransactionIds.delete(e)));const[i,n]=await ne.getNextNonce.call(void 0,r,(e=>we.__privateGet.call(void 0,this,d).getNonceLock(e,r.networkClientId)));n&&t.push(n),r=we.__privateMethod.call(void 0,this,O,R).call(this,{transactionId:e,note:"TransactionController#approveTransaction - Transaction approved"},(e=>{const{txParams:t,chainId:r}=e;e.status="approved",e.txParams={...t,nonce:i,chainId:r,gasLimit:t.gas,...me.isEIP1559Transaction.call(void 0,t)&&{type:"0x2"}}})),this.onTransactionStatusChange(r);const s=await this.signTransaction(r,r.txParams);if(!this.beforePublish(r))return ye.projectLogger.call(void 0,"Skipping publishing transaction based on hook"),this.messagingSystem.publish(`${He}:transactionPublishingSkipped`,r),"skipped-via-before-publish-hook";if(!s)return"not-approved";const o=we.__privateGet.call(void 0,this,d).getEthQuery({networkClientId:r.networkClientId,chainId:r.chainId});let l;const c="swap"===r.type;c&&(ye.projectLogger.call(void 0,"Determining pre-transaction balance"),l=await Pe.query.call(void 0,o,"getBalance",[r.txParams.from])),ye.projectLogger.call(void 0,"Publishing transaction",r.txParams);let{transactionHash:u}=await this.publish(r,s);return void 0===u&&(u=await this.publishTransaction(o,s)),ye.projectLogger.call(void 0,"Publish successful",u),r=we.__privateMethod.call(void 0,this,O,R).call(this,{transactionId:e,note:"TransactionController#approveTransaction - Transaction submitted"},(e=>{e.hash=u,e.status="submitted",e.submittedTime=(new Date).getTime(),c&&(e.preTxBalance=l,ye.projectLogger.call(void 0,"Updated pre-transaction balance",l))})),this.messagingSystem.publish(`${He}:transactionSubmitted`,{transactionMeta:r}),this.messagingSystem.publish(`${He}:transactionFinished`,r),we.__privateGet.call(void 0,this,a).emit(`${e}:finished`,r),this.onTransactionStatusChange(r),"approved"}catch(e){return this.failTransaction(r,e),"not-approved"}finally{t.forEach((e=>e()))}}async publishTransaction(e,t){return await Pe.query.call(void 0,e,"sendRawTransaction",[t])}cancelTransaction(e,t){const r=this.state.transactions.find((({id:t})=>t===e));if(!r)return;this.update((t=>{const r=t.transactions.filter((({id:t})=>t!==e));t.transactions=this.trimTransactionsForState(r)}));const i={...r,status:"rejected"};this.messagingSystem.publish(`${He}:transactionFinished`,i),we.__privateGet.call(void 0,this,a).emit(`${r.id}:finished`,i),this.messagingSystem.publish(`${He}:transactionRejected`,{transactionMeta:i,actionId:t}),this.onTransactionStatusChange(i)}trimTransactionsForState(e){const t=new Set,r=[...e].sort(((e,t)=>e.time>t.time?-1:1)).filter((e=>{const{chainId:r,status:i,txParams:a,time:n}=e;if(a){const e=`${String(a.nonce)}-${Pe.convertHexToDecimal.call(void 0,r)}-${new Date(n).toDateString()}`;if(t.has(e))return!0;if(t.size<we.__privateGet.call(void 0,this,o)||!this.isFinalState(i))return t.add(e),!0}return!1}));return r.reverse(),r}isFinalState(e){return"rejected"===e||"confirmed"===e||"failed"===e}isLocalFinalState(e){return["confirmed","failed","rejected","submitted"].includes(e)}async requestApproval(e,{shouldShowRequest:t}){const r=this.getApprovalId(e),{origin:i}=e,a=Pe.ApprovalType.Transaction,n={txId:e.id};return await this.messagingSystem.call("ApprovalController:addRequest",{id:r,origin:i||Pe.ORIGIN_METAMASK,type:a,requestData:n,expectsResult:!0},t)}getTransaction(e){const{transactions:t}=this.state;return t.find((({id:t})=>t===e))}getTransactionOrThrow(e,t="TransactionController"){const r=this.getTransaction(e);if(!r)throw new Error(`${t}: No transaction found with id ${e}`);return r}getApprovalId(e){return String(e.id)}isTransactionCompleted(e){const t=this.getTransaction(e);if(!t)return{meta:void 0,isCompleted:!1};return{meta:t,isCompleted:this.isLocalFinalState(t.status)}}getChainId(e){const t=we.__privateMethod.call(void 0,this,Y,X).call(this),r=we.__privateMethod.call(void 0,this,K,q).call(this);return e&&e!==r?this.messagingSystem.call("NetworkController:getNetworkClientById",e).configuration.chainId:t}prepareUnsignedEthTx(e,t){return be.TransactionFactory.fromTxData(t,{freeze:!1,common:this.getCommonConfiguration(e)})}getCommonConfiguration(e){const t={chainId:parseInt(e,16),defaultHardfork:Fe};return Te.Common.custom(t)}onIncomingTransactions({added:e,updated:t}){this.update((r=>{const{transactions:i}=r,a=[...e,...i.map((e=>t.find((({hash:t})=>t===e.hash))??e))];r.transactions=this.trimTransactionsForState(a)}))}onUpdatedLastFetchedBlockNumbers({lastFetchedBlockNumbers:e,blockNumber:t}){this.update((t=>{t.lastFetchedBlockNumbers=e})),this.messagingSystem.publish(`${He}:incomingTransactionBlockReceived`,t)}generateDappSuggestedGasFees(e,t){if(!t||t===Pe.ORIGIN_METAMASK)return;const{gasPrice:r,maxFeePerGas:i,maxPriorityFeePerGas:a,gas:n}=e;if(void 0===r&&void 0===i&&void 0===a&&void 0===n)return;const s={};return void 0!==r?s.gasPrice=r:void 0===i&&void 0===a||(s.maxFeePerGas=i,s.maxPriorityFeePerGas=a),void 0!==n&&(s.gas=n),s}addExternalTransaction(e){const{chainId:t}=e,{transactions:r}=this.state,i=e?.txParams?.from,a=r.filter((e=>e.txParams.from===i&&e.chainId===t)),n=a.filter((e=>"confirmed"===e.status)),s=a.filter((e=>"submitted"===e.status));ue.validateConfirmedExternalTransaction.call(void 0,e,n,s);const o=0!==(e.history??[]).length||this.isHistoryDisabled?e:ae.addInitialHistorySnapshot.call(void 0,e);return this.update((e=>{e.transactions=this.trimTransactionsForState([...e.transactions,o])})),o}markNonceDuplicatesDropped(e){const t=this.getTransaction(e);if(!t)return;const r=t.txParams?.nonce,i=t.txParams?.from,{chainId:a}=t,n=this.state.transactions.filter((t=>t.id!==e&&t.txParams.from===i&&t.txParams.nonce===r&&t.chainId===a&&"incoming"!==t.type)),s=n.map((e=>e.id));if(0!==n.length){this.update((e=>{for(const r of e.transactions)s.includes(r.id)&&(r.replacedBy=t?.hash,r.replacedById=t?.id)}));for(const e of this.state.transactions)s.includes(e.id)&&"failed"!==e.status&&this.setTransactionStatusDropped(e)}}setTransactionStatusDropped(e){const t={...e,status:"dropped"};this.messagingSystem.publish(`${He}:transactionDropped`,{transactionMeta:t}),this.updateTransaction(t,"TransactionController#setTransactionStatusDropped - Transaction dropped"),this.onTransactionStatusChange(t)}getTransactionWithActionId(e){return this.state.transactions.find((t=>e&&t.actionId===e))}async waitForTransactionFinished(e){return new Promise((t=>{we.__privateGet.call(void 0,this,a).once(`${e}:finished`,(e=>{t(e)}))}))}updateTransactionMetaRSV(e,t){const r=Ge.cloneDeep.call(void 0,e);for(const e of["r","s","v"]){const i=t[e];null!=i&&(r[e]=xe.add0x.call(void 0,i.toString(16)))}return r}async getEIP1559Compatibility(e){const t=await this.getCurrentNetworkEIP1559Compatibility(e),r=await this.getCurrentAccountEIP1559Compatibility();return t&&r}async signTransaction(e,t){ye.projectLogger.call(void 0,"Signing transaction",t);const r=this.prepareUnsignedEthTx(e.chainId,t);this.approvingTransactionIds.add(e.id);const i=await new Promise(((i,a)=>{this.sign?.(r,t.from,...this.getAdditionalSignArguments(e)).then(i,a),this.signAbortCallbacks.set(e.id,(()=>a(new Error("Signing aborted by user"))))}));if(this.signAbortCallbacks.delete(e.id),!i)return void ye.projectLogger.call(void 0,"Skipping signed status as no signed transaction");const a=Ge.cloneDeep.call(void 0,e);if(!this.afterSign(a,i))return this.updateTransaction(a,"TransactionController#signTransaction - Update after sign"),void ye.projectLogger.call(void 0,"Skipping signed status based on hook");const n={...this.updateTransactionMetaRSV(a,i),status:"signed"};this.updateTransaction(n,"TransactionController#approveTransaction - Transaction signed"),this.onTransactionStatusChange(n);const s=Ee.bufferToHex.call(void 0,i.serialize()),o=Ge.merge.call(void 0,{},n,{rawTx:s});return this.updateTransaction(o,"TransactionController#approveTransaction - RawTransaction added"),s}onTransactionStatusChange(e){this.messagingSystem.publish(`${He}:transactionStatusUpdated`,{transactionMeta:e})}getNonceTrackerTransactions(e,t,r=this.getChainId()){return ne.getAndFormatTransactionsForNonceTracker.call(void 0,r,t,e,this.state.transactions)}onConfirmedTransaction(e){ye.projectLogger.call(void 0,"Processing confirmed transaction",e.id),this.markNonceDuplicatesDropped(e.id),this.messagingSystem.publish(`${He}:transactionConfirmed`,e),this.onTransactionStatusChange(e),this.updatePostBalance(e)}async updatePostBalance(e){try{if("swap"!==e.type)return;const t=we.__privateGet.call(void 0,this,d).getEthQuery({networkClientId:e.networkClientId,chainId:e.chainId}),{updatedTransactionMeta:r,approvalTransactionMeta:i}=await pe.updatePostTransactionBalance.call(void 0,e,{ethQuery:t,getTransaction:this.getTransaction.bind(this),updateTransaction:this.updateTransaction.bind(this)});this.messagingSystem.publish(`${He}:postTransactionBalanceUpdated`,{transactionMeta:r,approvalTransactionMeta:i})}catch(e){ye.projectLogger.call(void 0,"Error while updating post transaction balance",e)}}async publishTransactionForRetry(e,t,r){try{return await this.publishTransaction(e,t)}catch(e){if(this.isTransactionAlreadyConfirmedError(e))throw await this.pendingTransactionTracker.forceCheckTransaction(r),new Error("Previous transaction is already confirmed");throw e}}isTransactionAlreadyConfirmedError(e){return e?.message?.includes("nonce too low")||e?.data?.message?.includes("nonce too low")}};a=new WeakMap,n=new WeakMap,s=new WeakMap,o=new WeakMap,l=new WeakMap,c=new WeakMap,d=new WeakMap,u=new WeakSet,h=function({provider:e,blockTracker:t,chainId:r}){return new(0,je.NonceTracker)({provider:e,blockTracker:t,getPendingTransactions:we.__privateMethod.call(void 0,this,A,I).bind(this,r),getConfirmedTransactions:this.getNonceTrackerTransactions.bind(this,"confirmed")})},p=new WeakSet,m=function({blockTracker:e,etherscanRemoteTransactionSource:t,chainId:r}){const i=new(0,le.IncomingTransactionHelper)({blockTracker:e,getCurrentAccount:this.getSelectedAddress,getLastFetchedBlockNumbers:()=>this.state.lastFetchedBlockNumbers,getChainId:r?()=>r:this.getChainId.bind(this),isEnabled:we.__privateGet.call(void 0,this,n).isEnabled,queryEntireHistory:we.__privateGet.call(void 0,this,n).queryEntireHistory,remoteTransactionSource:t,transactionLimit:we.__privateGet.call(void 0,this,o),updateTransactions:we.__privateGet.call(void 0,this,n).updateTransactions});return we.__privateMethod.call(void 0,this,T,b).call(this,i),i},f=new WeakSet,v=function({provider:e,blockTracker:t,chainId:r}){const i=new(0,Ae.default)(e),a=r?()=>r:this.getChainId.bind(this),n=new(0,de.PendingTransactionTracker)({approveTransaction:async e=>{await this.approveTransaction(e)},blockTracker:t,getChainId:a,getEthQuery:()=>i,getTransactions:()=>this.state.transactions,isResubmitEnabled:we.__privateGet.call(void 0,this,s).isResubmitEnabled,getGlobalLock:()=>we.__privateGet.call(void 0,this,d).acquireNonceLockForChainIdKey({chainId:a()}),publishTransaction:this.publishTransaction.bind(this),hooks:{beforeCheckPendingTransaction:this.beforeCheckPendingTransaction.bind(this),beforePublish:this.beforePublish.bind(this)}});return we.__privateMethod.call(void 0,this,P,C).call(this,n),n},g=new WeakMap,_=new WeakSet,k=function(){this.pendingTransactionTracker.stop(),we.__privateMethod.call(void 0,this,E,S).call(this,this.pendingTransactionTracker),this.incomingTransactionHelper.stop(),we.__privateMethod.call(void 0,this,y,w).call(this,this.incomingTransactionHelper),we.__privateGet.call(void 0,this,d).stopAllTracking()},y=new WeakSet,w=function(e){e.hub.removeAllListeners("transactions"),e.hub.removeAllListeners("updatedLastFetchedBlockNumbers")},T=new WeakSet,b=function(e){e.hub.on("transactions",this.onIncomingTransactions.bind(this)),e.hub.on("updatedLastFetchedBlockNumbers",this.onUpdatedLastFetchedBlockNumbers.bind(this))},E=new WeakSet,S=function(e){e.hub.removeAllListeners("transaction-confirmed"),e.hub.removeAllListeners("transaction-dropped"),e.hub.removeAllListeners("transaction-failed"),e.hub.removeAllListeners("transaction-updated")},P=new WeakSet,C=function(e){e.hub.on("transaction-confirmed",this.onConfirmedTransaction.bind(this)),e.hub.on("transaction-dropped",this.setTransactionStatusDropped.bind(this)),e.hub.on("transaction-failed",this.failTransaction.bind(this)),e.hub.on("transaction-updated",this.updateTransaction.bind(this))},A=new WeakSet,I=function(e,t){return[...this.getNonceTrackerTransactions("submitted",t,e),...this.getExternalPendingTransactions(t,e)]},j=new WeakSet,M=function(){return we.__privateGet.call(void 0,this,c)?[new(0,ie.TestGasFeeFlow)]:[new(0,Q.LineaGasFeeFlow),new(0,ee.DefaultGasFeeFlow)]},x=new WeakSet,N=function(){return[new(0,te.OptimismLayer1GasFeeFlow),new(0,re.ScrollLayer1GasFeeFlow)]},O=new WeakSet,R=function({transactionId:e,note:t,skipHistory:r},i){let a=[];this.update((n=>{const s=n.transactions.findIndex((({id:t})=>t===e));let o=n.transactions[s];o=i(o)??o,o.txParams=me.normalizeTransactionParams.call(void 0,o.txParams),Z.validateTxParams.call(void 0,o.txParams),a=we.__privateMethod.call(void 0,this,G,L).call(this,o),!0!==r&&(o=ae.updateTransactionHistory.call(void 0,o,t??"Transaction updated")),n.transactions[s]=o}));const n=this.getTransaction(e);return a.length>0&&we.__privateMethod.call(void 0,this,B,F).call(this,n,a),n},G=new WeakSet,L=function(e){const{id:t,txParams:r}=e,i=this.getTransaction(t)?.txParams;if(!i||Ge.isEqual.call(void 0,i,r))return[];const a=Object.keys(r).filter((e=>r[e]!==i[e]));return ye.projectLogger.call(void 0,"Transaction parameters have been updated",t,a,i,r),a},B=new WeakSet,F=function(e,t){["to","value","data"].some((e=>t.includes(e)))&&(ye.projectLogger.call(void 0,"Updating simulation data due to transaction parameter update"),we.__privateMethod.call(void 0,this,D,U).call(this,e))},D=new WeakSet,U=async function(e){const{id:t,chainId:r,txParams:i}=e,{from:a,to:n,value:s,data:o}=i;let c={error:{code:"disabled",message:"Simulation disabled"},tokenBalanceChanges:[]};we.__privateGet.call(void 0,this,l).call(this)&&(we.__privateMethod.call(void 0,this,O,R).call(this,{transactionId:t,skipHistory:!0},(e=>{e.simulationData=void 0})),c=await se.getSimulationData.call(void 0,{chainId:r,from:a,to:n,value:s,data:o}));this.getTransaction(t)?(we.__privateMethod.call(void 0,this,O,R).call(this,{transactionId:t,note:"TransactionController#updateSimulationData - Update simulation data"},(e=>{e.simulationData=c})),ye.projectLogger.call(void 0,"Updated simulation data",t,c)):ye.projectLogger.call(void 0,"Cannot update simulation data as transaction not found",t,c)},H=new WeakSet,W=function({transactionId:e,gasFeeEstimates:t,gasFeeEstimatesLoaded:r,layer1GasFee:i}){we.__privateMethod.call(void 0,this,O,R).call(this,{transactionId:e,skipHistory:!0},(e=>{t&&(e.gasFeeEstimates=t),void 0!==r&&(e.gasFeeEstimatesLoaded=r),i&&(e.layer1GasFee=i)}))},$=new WeakSet,V=function({networkClientId:e,chainId:t}){const r=we.__privateMethod.call(void 0,this,Y,X).call(this),i=we.__privateMethod.call(void 0,this,K,q).call(this);return e||(t&&t!==r?this.messagingSystem.call("NetworkController:findNetworkClientIdByChainId",t):i)},K=new WeakSet,q=function(){return this.getNetworkState().selectedNetworkClientId},Y=new WeakSet,X=function(){return this.getNetworkState().providerConfig.chainId},J=new WeakSet,z=function(e){const t=we.__privateMethod.call(void 0,this,K,q).call(this);return e&&e!==t?this.messagingSystem.call("NetworkController:getNetworkClientById",e).configuration.type===Ie.NetworkClientType.Custom:this.getNetworkState().providerConfig.type===Pe.NetworkType.rpc},r.HARDFORK=Fe,r.CANCEL_RATE=De,r.SPEED_UP_RATE=Ue,r.ApprovalState=We,r.TransactionController=$e}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/dist/chunk-OQNGSDIH.js"}],[1848,{"./chunk-S6VGOPUY.js":1852,"@metamask/controller-utils":1901},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var i=e("./chunk-S6VGOPUY.js"),a=e("@metamask/controller-utils"),n=i.createModuleLogger.call(void 0,i.projectLogger,"nonce");r.getNextNonce=async function(e,t){const{customNonceValue:r,txParams:{from:i,nonce:s}}=e,o=r?a.toHex.call(void 0,r):void 0;if(o)return n("Using custom nonce",o),[o,void 0];if(s)return n("Using existing nonce",s),[s,void 0];const l=await t(i),c=a.toHex.call(void 0,l.nextNonce),d=l.releaseLock.bind(l);return n("Using nonce from nonce tracker",c,l.nonceDetails),[c,d]},r.getAndFormatTransactionsForNonceTracker=function(e,t,r,i){return i.filter((({chainId:i,isTransfer:a,isUserOperation:n,status:s,txParams:{from:o}})=>!a&&!n&&i===e&&s===r&&o.toLowerCase()===t.toLowerCase())).map((({status:e,txParams:{from:t,gas:r,value:i,nonce:a}})=>({status:e,history:[{}],txParams:{from:t??"",gas:r??"",value:i??"",nonce:a??""}})))}}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/dist/chunk-PRUNMTRD.js"}],[1849,{"./chunk-EQT25RSP.js":1841,"./chunk-S6VGOPUY.js":1852,"./chunk-Z4BLTVTB.js":1864,"@metamask/eth-query":1269,"async-mutex":1905},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var i,a,n,s,o,l,c,d,u,h,p,m,f,v,g,_,k,y,w,T,b,E,S,P,C=e("./chunk-EQT25RSP.js"),A=e("./chunk-S6VGOPUY.js"),I=e("./chunk-Z4BLTVTB.js"),j=e("@metamask/eth-query"),M=(i=j)&&i.__esModule?i:{default:i},x=e("async-mutex");a=new WeakMap,n=new WeakMap,s=new WeakMap,o=new WeakMap,l=new WeakMap,c=new WeakMap,d=new WeakMap,u=new WeakMap,h=new WeakMap,p=new WeakMap,m=new WeakMap,f=new WeakMap,v=new WeakMap,g=new WeakMap,_=new WeakMap,k=new WeakMap,y=new WeakSet,w=function(e){const t=I.__privateGet.call(void 0,this,g).get(e);t&&(t.pendingTransactionTracker.stop(),I.__privateGet.call(void 0,this,h).call(this,t.pendingTransactionTracker),t.incomingTransactionHelper.stop(),I.__privateGet.call(void 0,this,u).call(this,t.incomingTransactionHelper),I.__privateGet.call(void 0,this,g).delete(e))},T=new WeakSet,b=function(e){if(I.__privateGet.call(void 0,this,g).get(e))return;const{provider:t,blockTracker:r,configuration:{chainId:i}}=I.__privateGet.call(void 0,this,c).call(this,e);let a=I.__privateGet.call(void 0,this,_).get(i);a||(a=new(0,C.EtherscanRemoteTransactionSource)({includeTokenTransfers:I.__privateGet.call(void 0,this,o).includeTokenTransfers}),I.__privateGet.call(void 0,this,_).set(i,a));const n=I.__privateGet.call(void 0,this,p).call(this,{provider:t,blockTracker:r,chainId:i}),s=I.__privateGet.call(void 0,this,m).call(this,{blockTracker:r,etherscanRemoteTransactionSource:a,chainId:i}),l=I.__privateGet.call(void 0,this,f).call(this,{provider:t,blockTracker:r,chainId:i});I.__privateGet.call(void 0,this,g).set(e,{nonceTracker:n,incomingTransactionHelper:s,pendingTransactionTracker:l})},E=new WeakMap,S=new WeakSet,P=function({networkClientId:e,chainId:t}={}){let r;if(e)try{r=I.__privateGet.call(void 0,this,c).call(this,e)}catch(e){A.incomingTransactionsLogger.call(void 0,"failed to get network client by networkClientId")}if(!r&&t)try{const e=I.__privateGet.call(void 0,this,l).call(this,t);r=I.__privateGet.call(void 0,this,c).call(this,e)}catch(e){A.incomingTransactionsLogger.call(void 0,"failed to get network client by chainId")}return r},r.MultichainTrackingHelper=class{constructor({isMultichainEnabled:e,provider:t,nonceTracker:r,incomingTransactionOptions:i,findNetworkClientIdByChainId:P,getNetworkClientById:C,getNetworkClientRegistry:A,removeIncomingTransactionHelperListeners:j,removePendingTransactionTrackerListeners:M,createNonceTracker:x,createIncomingTransactionHelper:N,createPendingTransactionTracker:O,onNetworkStateChange:R}){I.__privateAdd.call(void 0,this,y),I.__privateAdd.call(void 0,this,T),I.__privateAdd.call(void 0,this,S),I.__privateAdd.call(void 0,this,a,void 0),I.__privateAdd.call(void 0,this,n,void 0),I.__privateAdd.call(void 0,this,s,void 0),I.__privateAdd.call(void 0,this,o,void 0),I.__privateAdd.call(void 0,this,l,void 0),I.__privateAdd.call(void 0,this,c,void 0),I.__privateAdd.call(void 0,this,d,void 0),I.__privateAdd.call(void 0,this,u,void 0),I.__privateAdd.call(void 0,this,h,void 0),I.__privateAdd.call(void 0,this,p,void 0),I.__privateAdd.call(void 0,this,m,void 0),I.__privateAdd.call(void 0,this,f,void 0),I.__privateAdd.call(void 0,this,v,new Map),I.__privateAdd.call(void 0,this,g,new Map),I.__privateAdd.call(void 0,this,_,new Map),this.checkForPendingTransactionAndStartPolling=()=>{for(const[,e]of I.__privateGet.call(void 0,this,g))e.pendingTransactionTracker.startIfPendingTransactions()},I.__privateAdd.call(void 0,this,k,(e=>{I.__privateGet.call(void 0,this,E).call(this,e);const t=Object.keys(e),r=Array.from(I.__privateGet.call(void 0,this,g).keys());r.filter((e=>!t.includes(e))).forEach((e=>{I.__privateMethod.call(void 0,this,y,w).call(this,e)}));t.filter((e=>!r.includes(e))).forEach((e=>{I.__privateMethod.call(void 0,this,T,b).call(this,e)}))})),I.__privateAdd.call(void 0,this,E,(e=>{const t=new Set;Object.values(e).forEach((e=>t.add(e.configuration.chainId)));Array.from(I.__privateGet.call(void 0,this,_).keys()).filter((e=>!t.has(e))).forEach((e=>{I.__privateGet.call(void 0,this,_).delete(e)}))})),I.__privateSet.call(void 0,this,a,e),I.__privateSet.call(void 0,this,n,t),I.__privateSet.call(void 0,this,s,r),I.__privateSet.call(void 0,this,o,i),I.__privateSet.call(void 0,this,l,P),I.__privateSet.call(void 0,this,c,C),I.__privateSet.call(void 0,this,d,A),I.__privateSet.call(void 0,this,u,j),I.__privateSet.call(void 0,this,h,M),I.__privateSet.call(void 0,this,p,x),I.__privateSet.call(void 0,this,m,N),I.__privateSet.call(void 0,this,f,O),R(((e,t)=>{if(I.__privateGet.call(void 0,this,a)){const e=I.__privateGet.call(void 0,this,d).call(this);t.forEach((({op:t,path:r})=>{if("remove"===t&&"networkConfigurations"===r[0]){const t=r[1];delete e[t]}})),I.__privateGet.call(void 0,this,k).call(this,e)}}))}initialize(){if(!I.__privateGet.call(void 0,this,a))return;const e=I.__privateGet.call(void 0,this,d).call(this);I.__privateGet.call(void 0,this,k).call(this,e)}has(e){return I.__privateGet.call(void 0,this,g).has(e)}getEthQuery({networkClientId:e,chainId:t}={}){return new(0,M.default)(this.getProvider({networkClientId:e,chainId:t}))}getProvider({networkClientId:e,chainId:t}={}){if(!I.__privateGet.call(void 0,this,a))return I.__privateGet.call(void 0,this,n);const r=I.__privateMethod.call(void 0,this,S,P).call(this,{networkClientId:e,chainId:t});return r?.provider||I.__privateGet.call(void 0,this,n)}async acquireNonceLockForChainIdKey({chainId:e,key:t="global"}){let r=I.__privateGet.call(void 0,this,v).get(e);r||(r=new Map,I.__privateGet.call(void 0,this,v).set(e,r));let i=r.get(t);return i||(i=new(0,x.Mutex),r.set(t,i)),await i.acquire()}async getNonceLock(e,t){let r,i=I.__privateGet.call(void 0,this,s);if(t&&I.__privateGet.call(void 0,this,a)){const a=I.__privateGet.call(void 0,this,c).call(this,t);r=await this.acquireNonceLockForChainIdKey({chainId:a.configuration.chainId,key:e});const n=I.__privateGet.call(void 0,this,g).get(t);if(!n)throw new Error("missing nonceTracker for networkClientId");i=n.nonceTracker}try{const t=await i.getNonceLock(e);return{...t,releaseLock:()=>{t.releaseLock(),r?.()}}}catch(e){throw r?.(),e}}startIncomingTransactionPolling(e=[]){e.forEach((e=>{I.__privateGet.call(void 0,this,g).get(e)?.incomingTransactionHelper.start()}))}stopIncomingTransactionPolling(e=[]){e.forEach((e=>{I.__privateGet.call(void 0,this,g).get(e)?.incomingTransactionHelper.stop()}))}stopAllIncomingTransactionPolling(){for(const[,e]of I.__privateGet.call(void 0,this,g))e.incomingTransactionHelper.stop()}async updateIncomingTransactions(e=[]){(await Promise.allSettled(e.map((async e=>await(I.__privateGet.call(void 0,this,g).get(e)?.incomingTransactionHelper.update()))))).filter((e=>"rejected"===e.status)).forEach((e=>{A.incomingTransactionsLogger.call(void 0,"failed to update incoming transactions",e.reason)}))}stopAllTracking(){for(const[e]of I.__privateGet.call(void 0,this,g))I.__privateMethod.call(void 0,this,y,w).call(this,e)}}}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/dist/chunk-PUESYN62.js"}],[185,{lodash:3770},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=e("lodash");r.default={version:68,async migrate(e){const t=(0,i.cloneDeep)(e);t.meta.version=68;const r=function(e){const{PermissionsController:t={},PermissionsMetadata:r={},...i}=e,{domainMetadata:s={},permissionsHistory:o={},permissionsLog:l=[]}=r;return{...i,PermissionController:a(t),PermissionLogController:{permissionActivityLog:l,permissionHistory:o},SubjectMetadataController:n(s)}}(t.data);return t.data=r,t}};function a(e){const{domains:t={}}=e;return{subjects:Object.entries(t).reduce(((e,[t,r])=>{const{permissions:[i]}=r,a=i.caveats.find((e=>"exposedAccounts"===e.name)),n={...i,caveats:[{type:"restrictReturnedAccounts",value:a.value}]};return delete n["@context"],e[t]={origin:t,permissions:{eth_accounts:n}},e}),{})}}function n(e){return{subjectMetadata:Object.entries(e).reduce(((e,[t,r])=>{const{name:i=null,icon:a=null,extensionId:n=null,...s}=r;return delete s.lastUpdated,delete s.host,t&&(e[t]={name:i,iconUrl:a,extensionId:n,...s,origin:t}),e}),{})}}}}},{package:"$root$",file:"app/scripts/migrations/068.js"}],[1850,{"./chunk-RAOYRJ25.js":1851,"./chunk-S6VGOPUY.js":1852,"./chunk-YXSCBWTU.js":1863,"./chunk-Z4BLTVTB.js":1864,"@metamask/controller-utils":1901,"@metamask/utils":2253},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var i,a,n,s,o,l,c,d,u,h,p=e("./chunk-YXSCBWTU.js"),m=e("./chunk-S6VGOPUY.js"),f=e("./chunk-RAOYRJ25.js"),v=e("./chunk-Z4BLTVTB.js"),g=e("@metamask/controller-utils"),_=e("@metamask/utils").createModuleLogger.call(void 0,m.projectLogger,"linea-gas-fee-flow"),k=[g.ChainId["linea-mainnet"],g.ChainId["linea-goerli"],g.ChainId["linea-sepolia"]],y={low:1,medium:1.35,high:1.7},w={low:1,medium:1.05,high:1.1};i=new WeakSet,a=async function(e){const{ethQuery:t,transactionMeta:r}=e,i=await v.__privateMethod.call(void 0,this,n,s).call(this,r,t);_("Received Linea response",i);const a=v.__privateMethod.call(void 0,this,o,l).call(this,i.baseFeePerGas,y);_("Generated base fees",v.__privateMethod.call(void 0,this,u,h).call(this,a));const p=v.__privateMethod.call(void 0,this,o,l).call(this,i.priorityFeePerGas,w);_("Generated priority fees",v.__privateMethod.call(void 0,this,u,h).call(this,p));const m=v.__privateMethod.call(void 0,this,c,d).call(this,a,p);_("Generated max fees",v.__privateMethod.call(void 0,this,u,h).call(this,m));return{estimates:Object.values(f.GasFeeEstimateLevel).reduce(((e,t)=>({...e,[t]:{maxFeePerGas:g.toHex.call(void 0,m[t]),maxPriorityFeePerGas:g.toHex.call(void 0,p[t])}})),{type:"fee-market"})}},n=new WeakSet,s=function(e,t){return g.query.call(void 0,t,"linea_estimateGas",[{from:e.txParams.from,to:e.txParams.to,value:e.txParams.value,input:e.txParams.data,gasPrice:"0x100000000"}])},o=new WeakSet,l=function(e,t){const r=g.hexToBN.call(void 0,e);return{low:r.muln(t.low),medium:r.muln(t.medium),high:r.muln(t.high)}},c=new WeakSet,d=function(e,t){return{low:e.low.add(t.low),medium:e.medium.add(t.medium),high:e.high.add(t.high)}},u=new WeakSet,h=function(e){return Object.values(f.GasFeeEstimateLevel).map((t=>e[t].toString(10)))},r.LineaGasFeeFlow=class{constructor(){v.__privateAdd.call(void 0,this,i),v.__privateAdd.call(void 0,this,n),v.__privateAdd.call(void 0,this,o),v.__privateAdd.call(void 0,this,c),v.__privateAdd.call(void 0,this,u)}matchesTransaction(e){return k.includes(e.chainId)}async getGasFees(e){try{return await v.__privateMethod.call(void 0,this,i,a).call(this,e)}catch(t){return _("Using default flow as fallback due to error",t),(new(0,p.DefaultGasFeeFlow)).getGasFees(e)}}}}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/dist/chunk-Q6Q44V4W.js"}],[1851,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var i=(e=>(e.approved="approved",e.cancelled="cancelled",e.confirmed="confirmed",e.dropped="dropped",e.failed="failed",e.rejected="rejected",e.signed="signed",e.submitted="submitted",e.unapproved="unapproved",e))(i||{}),a=(e=>(e.MM_MOBILE="metamask_mobile",e.MM_EXTENSION="metamask_extension",e.OTHER="other_device",e))(a||{}),n=(e=>(e.cancel="cancel",e.contractInteraction="contractInteraction",e.deployContract="contractDeployment",e.ethDecrypt="eth_decrypt",e.ethGetEncryptionPublicKey="eth_getEncryptionPublicKey",e.incoming="incoming",e.personalSign="personal_sign",e.retry="retry",e.simpleSend="simpleSend",e.signTypedData="eth_signTypedData",e.smart="smart",e.swap="swap",e.swapAndSend="swapAndSend",e.swapApproval="swapApproval",e.tokenMethodApprove="approve",e.tokenMethodSafeTransferFrom="safetransferfrom",e.tokenMethodTransfer="transfer",e.tokenMethodTransferFrom="transferfrom",e.tokenMethodSetApprovalForAll="setapprovalforall",e.tokenMethodIncreaseAllowance="increaseAllowance",e))(n||{}),s=(e=>(e.legacy="0x0",e.accessList="0x1",e.feeMarket="0x2",e))(s||{}),o=(e=>(e.CUSTOM="custom",e.DAPP_SUGGESTED="dappSuggested",e.MEDIUM="medium",e))(o||{}),l=(e=>(e.Low="low",e.Medium="medium",e.High="high",e))(l||{}),c=(e=>(e.FeeMarket="fee-market",e.Legacy="legacy",e.GasPrice="eth_gasPrice",e))(c||{}),d=(e=>(e.erc20="erc20",e.erc721="erc721",e.erc1155="erc1155",e))(d||{}),u=(e=>(e.ChainNotSupported="chain-not-supported",e.Disabled="disabled",e.InvalidResponse="invalid-response",e.Reverted="reverted",e))(u||{});r.TransactionStatus=i,r.WalletDevice=a,r.TransactionType=n,r.TransactionEnvelopeType=s,r.UserFeeLevel=o,r.GasFeeEstimateLevel=l,r.GasFeeEstimateType=c,r.SimulationTokenStandard=d,r.SimulationErrorCode=u}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/dist/chunk-RAOYRJ25.js"}],[1852,{"@metamask/utils":2253},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var i=e("@metamask/utils"),a=i.createProjectLogger.call(void 0,"transaction-controller"),n=i.createModuleLogger.call(void 0,a,"incoming-transactions");r.createModuleLogger=i.createModuleLogger,r.projectLogger=a,r.incomingTransactionsLogger=n}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/dist/chunk-S6VGOPUY.js"}],[1853,{"@ethersproject/abi":461,"@metamask/controller-utils":1901,"@metamask/metamask-eth-abis":1471},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var i=e("@ethersproject/abi"),a=e("@metamask/controller-utils"),n=e("@metamask/metamask-eth-abis"),s=new(0,i.Interface)(n.abiERC20),o=new(0,i.Interface)(n.abiERC721),l=new(0,i.Interface)(n.abiERC1155),c=new(0,i.Interface)(n.abiFiatTokenV2);r.ESTIMATE_GAS_ERROR="eth_estimateGas rpc method error",r.determineTransactionType=async function(e,t){const{data:r,to:i}=e;if(r&&!i)return{type:"contractDeployment",getCodeResponse:void 0};const{contractCode:n,isContractAddress:d}=await async function(e,t){let r;try{r=await a.query.call(void 0,e,"getCode",[t])}catch(e){r=null}const i=!!r&&("0x"!==r&&"0x0"!==r);return{contractCode:r,isContractAddress:i}}(t,i);if(!d)return{type:"simpleSend",getCodeResponse:n};const u=0!==Number(e.value??"0"),h={type:"contractInteraction",getCodeResponse:n};if(!r||u)return h;const p=function(e){if(!e)return;try{return s.parseTransaction({data:e})}catch{}try{return o.parseTransaction({data:e})}catch{}try{return l.parseTransaction({data:e})}catch{}try{return c.parseTransaction({data:e})}catch{}return}(r)?.name;if(!p)return h;const m=["approve","setapprovalforall","transfer","transferfrom","safetransferfrom","increaseAllowance"].find((e=>e.toLowerCase()===p.toLowerCase()));return m?{type:m,getCodeResponse:n}:h}}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/dist/chunk-SD6CWFDF.js"}],[1854,{"fast-json-patch":3297,lodash:3770},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var i,a=e("fast-json-patch"),n=(i=a)&&i.__esModule?i:{default:i},s=e("lodash"),o=["/status","/txParams/gasPrice","/txParams/gas","/estimatedBaseFee","/blockTimestamp"];function l(e,t,r){const i=n.default.compare(e,t);return i[0]&&(r&&(i[0].note=r),i[0].timestamp=Date.now()),i}function c(e){return s.cloneDeep.call(void 0,e).reduce(((e,t)=>n.default.applyPatch(e,t).newDocument))}function d(e){const t={...e};return delete t.history,s.cloneDeep.call(void 0,t)}r.MAX_TRANSACTION_HISTORY_LENGTH=100,r.DISPLAYED_TRANSACTION_HISTORY_PATHS=o,r.addInitialHistorySnapshot=function(e){const t=d(e);return s.merge.call(void 0,{},e,{history:[t]})},r.updateTransactionHistory=function(e,t){if(!e.history)return e;const r=d(e),i=l(c(e.history),r,t);if(0===i.length)return e;let a=[...e.history,i];return a.length>100&&(a=function(e){const t=e[0],r=e.slice(1),i=r.findIndex((e=>!e.some((({path:e})=>o.includes(e)))));if(-1===i)return e;const a=i===r.length-1?i-1:i+1,n=Math.min(i,a),s=r[n],d=r[n+1],u=c([t,...r.slice(0,n)]),h=c([u,s,d]),p=l(u,h,`${String(s[0].note)}, ${String(d[0].note)}`);return r.splice(n,2,p),[t,...r]}(a)),s.merge.call(void 0,{},e,{history:a})}}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/dist/chunk-TIE3CPF7.js"}],[1855,{"./chunk-Z4BLTVTB.js":1864,"@metamask/controller-utils":1901},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var i,a,n,s=e("./chunk-Z4BLTVTB.js"),o=e("@metamask/controller-utils"),l=1e15;i=new WeakMap,a=new WeakSet,n=function(e,t){const r=Math.ceil(e/t);return o.toHex.call(void 0,r)},r.TestGasFeeFlow=class{constructor(){s.__privateAdd.call(void 0,this,a),s.__privateAdd.call(void 0,this,i,1)}matchesTransaction(e){return!0}async getGasFees(e){const{transactionMeta:t}=e,{txParams:r}=t,{gas:o}=r;if(!o)throw new Error("Cannot estimate fee without gas value");const c=parseInt(o,16),d=.5*l,u=(s.__privateGet.call(void 0,this,i)+1)*l,h=s.__privateGet.call(void 0,this,i)*l,p=u-d,m=h-d,f=u+d,v=h+d;return s.__privateSet.call(void 0,this,i,s.__privateGet.call(void 0,this,i)+1),{estimates:{type:"fee-market",low:{maxFeePerGas:s.__privateMethod.call(void 0,this,a,n).call(this,p,c),maxPriorityFeePerGas:s.__privateMethod.call(void 0,this,a,n).call(this,m,c)},medium:{maxFeePerGas:s.__privateMethod.call(void 0,this,a,n).call(this,u,c),maxPriorityFeePerGas:s.__privateMethod.call(void 0,this,a,n).call(this,h,c)},high:{maxFeePerGas:s.__privateMethod.call(void 0,this,a,n).call(this,f,c),maxPriorityFeePerGas:s.__privateMethod.call(void 0,this,a,n).call(this,v,c)}}}}}}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/dist/chunk-TJMQEH57.js"}],[1856,{"@metamask/controller-utils":1901,"@metamask/utils":2253},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var i=e("@metamask/controller-utils"),a=e("@metamask/utils"),n={data:e=>a.add0x.call(void 0,l(e)),from:e=>a.add0x.call(void 0,e).toLowerCase(),gas:e=>a.add0x.call(void 0,e),gasLimit:e=>a.add0x.call(void 0,e),gasPrice:e=>a.add0x.call(void 0,e),nonce:e=>a.add0x.call(void 0,e),to:e=>a.add0x.call(void 0,e).toLowerCase(),value:e=>a.add0x.call(void 0,e),maxFeePerGas:e=>a.add0x.call(void 0,e),maxPriorityFeePerGas:e=>a.add0x.call(void 0,e),estimatedBaseFee:e=>a.add0x.call(void 0,e),type:e=>a.add0x.call(void 0,e)};var s=(e,t)=>a.add0x.call(void 0,`${parseInt(""+e*t,10).toString(16)}`);function o(e){try{return JSON.parse(JSON.stringify(e)),!0}catch{return!1}}function l(e){const t=e.toLowerCase().startsWith("0x")?e.slice(0,2):"",r=t?e.slice(2):e;return t+(r.length%2==0?r:`0${r}`)}r.ESTIMATE_GAS_ERROR="eth_estimateGas rpc method error",r.normalizeTransactionParams=function(e){const t={from:""};for(const r of a.getKnownPropertyNames.call(void 0,n))e[r]&&(t[r]=n[r](e[r]));return t.value||(t.value="0x0"),t},r.isEIP1559Transaction=function(e){const t=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);return t(e,"maxFeePerGas")&&t(e,"maxPriorityFeePerGas")},r.validateGasValues=e=>{Object.keys(e).forEach((t=>{const r=e[t];if("string"!=typeof r||!a.isStrictHexString.call(void 0,r))throw new TypeError(`expected hex string for ${t} but received: ${r}`)}))},r.isFeeMarketEIP1559Values=e=>void 0!==e?.maxFeePerGas||void 0!==e?.maxPriorityFeePerGas,r.isGasPriceValue=e=>void 0!==e?.gasPrice,r.getIncreasedPriceHex=s,r.getIncreasedPriceFromExisting=(e,t)=>s(i.convertHexToDecimal.call(void 0,e),t),r.validateMinimumIncrease=function(e,t){const r=i.convertHexToDecimal.call(void 0,e),a=i.convertHexToDecimal.call(void 0,t);if(r>=a)return e;throw new Error(`The proposed value: ${r} should meet or exceed the minimum value: ${a}`)},r.validateIfTransactionUnapproved=function(e,t){if("unapproved"!==e?.status)throw new Error(`TransactionsController: Can only call ${t} on an unapproved transaction.\n      Current tx status: ${e?.status}`)},r.normalizeTxError=function(e){return{name:e.name,message:e.message,stack:e.stack,code:e.code,rpc:o(e.value)?e.value:void 0}},r.normalizeGasFeeValues=function(e){const t=e=>"string"==typeof e?a.add0x.call(void 0,e):e;return"gasPrice"in e?{gasPrice:t(e.gasPrice)}:{maxFeePerGas:t(e.maxFeePerGas),maxPriorityFeePerGas:t(e.maxPriorityFeePerGas)}},r.padHexToEvenLength=l}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/dist/chunk-UGFBA4GV.js"}],[1857,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var i={MAINNET:"0x1",GOERLI:"0x5",BASE:"0x2105",BASE_TESTNET:"0x14a33",BSC:"0x38",BSC_TESTNET:"0x61",OPTIMISM:"0xa",OPTIMISM_TESTNET:"0x1a4",OPBNB:"0xcc",OPBNB_TESTNET:"0x15eb",OPTIMISM_SEPOLIA:"0xaa37dc",POLYGON:"0x89",POLYGON_TESTNET:"0x13881",AVALANCHE:"0xa86a",AVALANCHE_TESTNET:"0xa869",FANTOM:"0xfa",FANTOM_TESTNET:"0xfa2",SEPOLIA:"0xaa36a7",LINEA_GOERLI:"0xe704",LINEA_SEPOLIA:"0xe705",LINEA_MAINNET:"0xe708",MOONBEAM:"0x504",MOONBEAM_TESTNET:"0x507",MOONRIVER:"0x505",GNOSIS:"0x64",ARBITRUM:"0xa4b1",ZKSYNC_ERA:"0x144",ZORA:"0x76adf1",SCROLL:"0x82750",SCROLL_SEPOLIA:"0x8274f"},a="etherscan.io",n="api",s={[i.GOERLI]:{domain:a,subdomain:`${n}-goerli`},[i.MAINNET]:{domain:a,subdomain:n},[i.SEPOLIA]:{domain:a,subdomain:`${n}-sepolia`},[i.LINEA_GOERLI]:{domain:"lineascan.build",subdomain:`${n}-goerli`},[i.LINEA_SEPOLIA]:{domain:"lineascan.build",subdomain:`${n}-sepolia`},[i.LINEA_MAINNET]:{domain:"lineascan.build",subdomain:n},[i.BSC]:{domain:"bscscan.com",subdomain:n},[i.BSC_TESTNET]:{domain:"bscscan.com",subdomain:`${n}-testnet`},[i.OPTIMISM]:{domain:a,subdomain:`${n}-optimistic`},[i.OPTIMISM_SEPOLIA]:{domain:a,subdomain:`${n}-sepolia-optimistic`},[i.POLYGON]:{domain:"polygonscan.com",subdomain:n},[i.POLYGON_TESTNET]:{domain:"polygonscan.com",subdomain:`${n}-mumbai`},[i.AVALANCHE]:{domain:"snowtrace.io",subdomain:n},[i.AVALANCHE_TESTNET]:{domain:"snowtrace.io",subdomain:`${n}-testnet`},[i.FANTOM]:{domain:"ftmscan.com",subdomain:n},[i.FANTOM_TESTNET]:{domain:"ftmscan.com",subdomain:`${n}-testnet`},[i.MOONBEAM]:{domain:"moonscan.io",subdomain:`${n}-moonbeam`},[i.MOONBEAM_TESTNET]:{domain:"moonscan.io",subdomain:`${n}-moonbase`},[i.MOONRIVER]:{domain:"moonscan.io",subdomain:`${n}-moonriver`},[i.GNOSIS]:{domain:"gnosisscan.io",subdomain:`${n}-gnosis`}},o={[i.OPTIMISM]:1,[i.OPTIMISM_SEPOLIA]:1};r.CHAIN_IDS=i,r.DEFAULT_ETHERSCAN_DOMAIN=a,r.DEFAULT_ETHERSCAN_SUBDOMAIN_PREFIX=n,r.ETHERSCAN_SUPPORTED_NETWORKS=s,r.GAS_BUFFER_CHAIN_OVERRIDES=o,r.ABI_SIMULATION_ERC20_WRAPPED=[{anonymous:!1,inputs:[{indexed:!0,name:"to",type:"address"},{indexed:!1,name:"wad",type:"uint256"}],name:"Deposit",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"from",type:"address"},{indexed:!1,name:"wad",type:"uint256"}],name:"Withdrawal",type:"event"}],r.ABI_SIMULATION_ERC721_LEGACY=[{anonymous:!1,inputs:[{indexed:!1,name:"_from",type:"address"},{indexed:!1,name:"_to",type:"address"},{indexed:!1,name:"_tokenId",type:"uint256"}],name:"Transfer",type:"event"}]}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/dist/chunk-UGN7PBON.js"}],[1858,{"./chunk-S6VGOPUY.js":1852,"./chunk-UGFBA4GV.js":1856,"./chunk-UGN7PBON.js":1857,"@metamask/controller-utils":1901,lodash:3770},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var i=e("./chunk-UGFBA4GV.js"),a=e("./chunk-UGN7PBON.js"),n=e("./chunk-S6VGOPUY.js"),s=e("@metamask/controller-utils"),o=e("lodash"),l=n.createModuleLogger.call(void 0,n.projectLogger,"swaps"),c=5e3,d="0x0000000000000000000000000000000000000000",u={name:"Ether",address:d,decimals:18},h={name:"Binance Coin",address:d,decimals:18},p={name:"Matic",address:d,decimals:18},m={name:"Avalanche",address:d,decimals:18},f={name:"Test Ether",address:d,decimals:18},v={name:"Ether",address:d,decimals:18},g={...u},_={...u},k={...u},y={[a.CHAIN_IDS.MAINNET]:u,"0x539":f,[a.CHAIN_IDS.BSC]:h,[a.CHAIN_IDS.POLYGON]:p,[a.CHAIN_IDS.GOERLI]:v,[a.CHAIN_IDS.AVALANCHE]:m,[a.CHAIN_IDS.OPTIMISM]:_,[a.CHAIN_IDS.ARBITRUM]:g,[a.CHAIN_IDS.ZKSYNC_ERA]:k},w=["swap","swapAndSend","swapApproval"];function T(e,t){return!(!e||!t)&&e===y[t]?.address}function b(e){return new Promise((t=>setTimeout(t,e)))}r.UPDATE_POST_TX_BALANCE_TIMEOUT=c,r.UPDATE_POST_TX_BALANCE_ATTEMPTS=6,r.DEFAULT_TOKEN_ADDRESS=d,r.SWAPS_CHAINID_DEFAULT_TOKEN_MAP=y,r.SWAP_TRANSACTION_TYPES=w,r.updateSwapsTransaction=function(e,t,r,{isSwapsDisabled:a,cancelTransaction:n,messenger:s}){if(a||!w.includes(t))return e;if("swap"===t&&!1===r?.hasApproveTx&&e.simulationFails)throw n(e.id),new Error("Simulation failed");const l=r?.meta;if(!l)return e;let c=e;return"swapApproval"===t&&(c=function(e,{type:t,sourceTokenSymbol:r}){i.validateIfTransactionUnapproved.call(void 0,e,"updateSwapApprovalTransaction");let a={type:t,sourceTokenSymbol:r};return a=o.pickBy.call(void 0,{type:t,sourceTokenSymbol:r}),o.merge.call(void 0,{},e,a)}(e,l),s.publish("TransactionController:transactionNewSwapApproval",{transactionMeta:c})),"swapAndSend"===t&&(c=function(e,{approvalTxId:t,destinationTokenAddress:r,destinationTokenAmount:a,destinationTokenDecimals:n,destinationTokenSymbol:s,estimatedBaseFee:l,sourceTokenAddress:c,sourceTokenAmount:d,sourceTokenDecimals:u,sourceTokenSymbol:h,swapAndSendRecipient:p,swapMetaData:m,swapTokenValue:f,type:v}){i.validateIfTransactionUnapproved.call(void 0,e,"updateSwapTransaction");let g={approvalTxId:t,destinationTokenAddress:r,destinationTokenAmount:a,destinationTokenDecimals:n,destinationTokenSymbol:s,estimatedBaseFee:l,sourceTokenAddress:c,sourceTokenAmount:d,sourceTokenDecimals:u,sourceTokenSymbol:h,swapAndSendRecipient:p,swapMetaData:m,swapTokenValue:f,type:v};return g=o.pickBy.call(void 0,g),o.merge.call(void 0,{},e,g)}(e,l),s.publish("TransactionController:transactionNewSwapAndSend",{transactionMeta:c})),"swap"===t&&(c=function(e,{sourceTokenSymbol:t,destinationTokenSymbol:r,type:a,destinationTokenDecimals:n,destinationTokenAddress:s,swapMetaData:l,swapTokenValue:c,estimatedBaseFee:d,approvalTxId:u}){i.validateIfTransactionUnapproved.call(void 0,e,"updateSwapTransaction");let h={sourceTokenSymbol:t,destinationTokenSymbol:r,type:a,destinationTokenDecimals:n,destinationTokenAddress:s,swapMetaData:l,swapTokenValue:c,estimatedBaseFee:d,approvalTxId:u};return h=o.pickBy.call(void 0,h),o.merge.call(void 0,{},e,h)}(e,l),s.publish("TransactionController:transactionNewSwap",{transactionMeta:c})),c},r.updatePostTransactionBalance=async function(e,{ethQuery:t,getTransaction:r,updateTransaction:i}){l("Updating post transaction balance",e.id);const a=e.id;let n,o;for(let i=0;i<6;i++){l("Querying balance",{attempt:i});const d=await s.query.call(void 0,t,"getBalance",[e.txParams.from]);n={...r(a)??{}},o=n.approvalTxId?r(n.approvalTxId):void 0,n.postTxBalance=d.toString(16);const u=T(e.destinationTokenAddress,e.chainId);if(!u||e.preTxBalance!==n.postTxBalance){l("Finishing post balance update",{isDefaultTokenAddress:u,preTxBalance:e.preTxBalance,postTxBalance:n.postTxBalance});break}l("Waiting for balance to update",{delay:c}),await b(c)}return i(n,"TransactionController#updatePostTransactionBalance - Add post transaction balance"),l("Completed post balance update",n?.postTxBalance),{updatedTransactionMeta:n,approvalTransactionMeta:o}}}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/dist/chunk-UT4M4XI3.js"}],[1859,{"./chunk-S6VGOPUY.js":1852,"./chunk-UGN7PBON.js":1857,"@metamask/controller-utils":1901,"@metamask/utils":2253},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var i=e("./chunk-UGN7PBON.js"),a=e("./chunk-S6VGOPUY.js"),n=e("@metamask/controller-utils"),s=e("@metamask/utils"),o=s.createModuleLogger.call(void 0,a.projectLogger,"gas"),l="0x5208",c=1.5;async function d(e,t){const r={...e},{data:i,value:a}=r,{gasLimit:l,number:c}=await async function(e){return await n.query.call(void 0,e,"getBlockByNumber",["latest",!1])}(t),u=n.hexToBN.call(void 0,l);r.data=i?s.add0x.call(void 0,i):i,r.gas=n.BNToHex.call(void 0,n.fractionBN.call(void 0,u,19,20)),r.value=a||"0x0";let h,p=r.gas;try{p=await n.query.call(void 0,t,"estimateGas",[r])}catch(e){h={reason:e.message,errorKey:e.errorKey,debug:{blockNumber:c,blockGasLimit:l}},o("Estimation failed",{...h,fallback:d})}return{blockGasLimit:l,estimatedGas:p,simulationFails:h}}function u(e,t,r){const i=n.hexToBN.call(void 0,e),a=n.hexToBN.call(void 0,t).muln(.9),l=i.muln(r);if(i.gt(a)){const t=s.add0x.call(void 0,e);return o("Using estimated value",t),t}if(l.lt(a)){const e=s.add0x.call(void 0,n.BNToHex.call(void 0,l));return o("Using padded estimate",e,r),e}const c=s.add0x.call(void 0,n.BNToHex.call(void 0,a));return o("Using 90% of block gas limit",c),c}r.log=o,r.FIXED_GAS=l,r.DEFAULT_GAS_MULTIPLIER=c,r.updateGas=async function(e){const{txMeta:t}=e,r={...t.txParams},[a,s]=await async function(e){const{isCustomNetwork:t,chainId:r,txMeta:a}=e;if(a.txParams.gas)return o("Using value from request",a.txParams.gas),[a.txParams.gas];if(await async function({ethQuery:e,txMeta:t,isCustomNetwork:r}){const{txParams:{to:i,data:a}}=t;if(r||!i||a)return!1;const s=await async function(e,t){return await n.query.call(void 0,e,"getCode",[t])}(e,i);return!s||"0x"===s}(e))return o("Using fixed value",l),[l];const{blockGasLimit:s,estimatedGas:h,simulationFails:p}=await d(a.txParams,e.ethQuery);if(t)return o("Using original estimate as custom network"),[h,p];const m=i.GAS_BUFFER_CHAIN_OVERRIDES[r]??c;return[u(h,s,m),p]}(e);t.txParams.gas=a,t.simulationFails=s,r.gas||(t.originalGasEstimate=t.txParams.gas),t.defaultGasEstimates||(t.defaultGasEstimates={}),t.defaultGasEstimates.gas=t.txParams.gas},r.estimateGas=d,r.addGasBuffer=u}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/dist/chunk-V72C4MCR.js"}],[186,{"@metamask/permission-controller":1577,lodash:3770},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=e("@metamask/permission-controller"),a=e("lodash");r.default={version:69,async migrate(e){const t=(0,a.cloneDeep)(e);t.meta.version=69;const r=function(e){var t;if("object"==typeof(null==e||null===(t=e.SubjectMetadataController)||void 0===t?void 0:t.subjectMetadata)){const{SubjectMetadataController:{subjectMetadata:t}}=e;Object.values(t).forEach((e=>{e&&"object"==typeof e&&!Array.isArray(e)&&(e.subjectType=e.extensionId?i.SubjectType.Extension:i.SubjectType.Website)}))}return e}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/069.js"}],[1860,{"./chunk-UGFBA4GV.js":1856,"@ethersproject/abi":461,"@metamask/controller-utils":1901,"@metamask/metamask-eth-abis":1471,"@metamask/rpc-errors":1670},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var i=e("./chunk-UGFBA4GV.js"),a=e("@ethersproject/abi"),n=e("@metamask/controller-utils"),s=e("@metamask/metamask-eth-abis"),o=e("@metamask/rpc-errors");function l(e,t){switch(t){case"maxFeePerGas":case"maxPriorityFeePerGas":if(e.type&&"0x2"!==e.type)throw o.rpcErrors.invalidParams(`Invalid transaction envelope type: specified type "${e.type}" but including maxFeePerGas and maxPriorityFeePerGas requires type: "0x2"`);break;default:if(e.type&&"0x2"===e.type)throw o.rpcErrors.invalidParams(`Invalid transaction envelope type: specified type "${e.type}" but included a gasPrice instead of maxFeePerGas and maxPriorityFeePerGas`)}}function c(e,t,r){if(void 0!==e[r])throw o.rpcErrors.invalidParams(`Invalid transaction params: specified ${t} but also included ${r}, these cannot be mixed`)}function d(e,t){if("string"!=typeof e[t])throw o.rpcErrors.invalidParams(`Invalid transaction params: ${t} is not a string. got: (${e[t]})`)}r.validateTransactionOrigin=async function(e,t,r,i){if(i!==n.ORIGIN_METAMASK){if(!e.includes(r))throw o.providerErrors.unauthorized({data:{origin:i}})}else if(r!==t)throw o.rpcErrors.internal({message:"Internally initiated transaction is using invalid account.",data:{origin:i,fromAddress:r,selectedAddress:t}})},r.validateTxParams=function(e,t=!0){!function(e,t){if(i.isEIP1559Transaction.call(void 0,e)&&!t)throw o.rpcErrors.invalidParams("Invalid transaction params: params specify an EIP-1559 transaction but the current network does not support EIP-1559")}(e,t),function(e){if(!e||"string"!=typeof e)throw o.rpcErrors.invalidParams(`Invalid "from" address ${e}: not a string.`);if(!n.isValidHexAddress.call(void 0,e))throw o.rpcErrors.invalidParams('Invalid "from" address.')}(e.from),function(e){if("0x"===e.to||void 0===e.to){if(!e.data)throw o.rpcErrors.invalidParams('Invalid "to" address.');delete e.to}else if(void 0!==e.to&&!n.isValidHexAddress.call(void 0,e.to))throw o.rpcErrors.invalidParams('Invalid "to" address.')}(e),function(e){if(void 0!==e){if(e.includes("-"))throw o.rpcErrors.invalidParams(`Invalid transaction value "${e}": not a positive number.`);if(e.includes("."))throw o.rpcErrors.invalidParams(`Invalid transaction value "${e}": number must be in wei.`);const t=parseInt(e,10);if(!(Number.isFinite(t)&&!Number.isNaN(t)&&!isNaN(Number(e))&&Number.isSafeInteger(t)))throw o.rpcErrors.invalidParams(`Invalid transaction value ${e}: number must be a valid number.`)}}(e.value),function(e){if(e){const t=new(0,a.Interface)(s.abiERC20);try{t.parseTransaction({data:e})}catch(e){if(e.message.match(/BUFFER_OVERRUN/u))throw o.rpcErrors.invalidParams("Invalid transaction params: data out-of-bounds, BUFFER_OVERRUN.")}}}(e.data),function(e){if(void 0!==e&&"number"!=typeof e&&"string"!=typeof e)throw o.rpcErrors.invalidParams(`Invalid transaction params: chainId is not a Number or hex string. got: (${e})`)}(e.chainId),function(e){e.gasPrice&&(l(e,"gasPrice"),c(e,"gasPrice","maxFeePerGas"),c(e,"gasPrice","maxPriorityFeePerGas"),d(e,"gasPrice"));e.maxFeePerGas&&(l(e,"maxFeePerGas"),c(e,"maxFeePerGas","gasPrice"),d(e,"maxFeePerGas"));e.maxPriorityFeePerGas&&(l(e,"maxPriorityFeePerGas"),c(e,"maxPriorityFeePerGas","gasPrice"),d(e,"maxPriorityFeePerGas"))}(e)}}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/dist/chunk-VH47Q6TS.js"}],[1861,{"./chunk-UGN7PBON.js":1857,"./chunk-YVCX6Z75.js":1862},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var i=e("./chunk-YVCX6Z75.js"),a=e("./chunk-UGN7PBON.js"),n=[a.CHAIN_IDS.SCROLL,a.CHAIN_IDS.SCROLL_SEPOLIA],s=class extends i.OracleLayer1GasFeeFlow{constructor(){super("0x5300000000000000000000000000000000000002",!0)}matchesTransaction(e){return n.includes(e.chainId)}};r.ScrollLayer1GasFeeFlow=s}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/dist/chunk-WR5F34OW.js"}],[1862,{"./chunk-S6VGOPUY.js":1852,"./chunk-Z4BLTVTB.js":1864,"@ethereumjs/common":419,"@ethereumjs/tx":1870,"@ethersproject/contracts":484,"@ethersproject/providers":522,"@metamask/utils":2253,buffer:2970,lodash:3770},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0});var i,a,n,s,o,l,c,d,u,h,p=e("./chunk-S6VGOPUY.js"),m=e("./chunk-Z4BLTVTB.js"),f=e("@ethereumjs/common"),v=e("@ethereumjs/tx"),g=e("@ethersproject/contracts"),_=e("@ethersproject/providers"),k=e("@metamask/utils"),y=e("lodash"),w=k.createModuleLogger.call(void 0,p.projectLogger,"oracle-layer1-gas-fee-flow"),T=[{inputs:[{internalType:"bytes",name:"_data",type:"bytes"}],name:"getL1Fee",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"}];i=new WeakMap,a=new WeakMap,n=new WeakSet,s=async function(e){const{provider:t,transactionMeta:r}=e,n=new(0,g.Contract)(m.__privateGet.call(void 0,this,i),T,new(0,_.Web3Provider)(t)),s=m.__privateMethod.call(void 0,this,o,l).call(this,r,m.__privateGet.call(void 0,this,a)).serialize(),c=await n.getL1Fee(s);if(void 0===c)throw new Error("No value returned from oracle contract");return{layer1Fee:c.toHexString()}},o=new WeakSet,l=function(e,r){const i=m.__privateMethod.call(void 0,this,c,d).call(this,e),a=m.__privateMethod.call(void 0,this,u,h).call(this,e);let n=v.TransactionFactory.fromTxData(i,{common:a});if(r){const e=t.from("abcdef0123456789abcdef0123456789abcdef0123456789abcdef0123456789","hex");n=n.sign(e)}return n},c=new WeakSet,d=function(e){return{...y.omit.call(void 0,e.txParams,"gas"),gasLimit:e.txParams.gas}},u=new WeakSet,h=function(e){const t=Number(e.chainId);return f.Common.custom({chainId:t,defaultHardfork:f.Hardfork.London})},r.OracleLayer1GasFeeFlow=class{constructor(e,t){m.__privateAdd.call(void 0,this,n),m.__privateAdd.call(void 0,this,o),m.__privateAdd.call(void 0,this,c),m.__privateAdd.call(void 0,this,u),m.__privateAdd.call(void 0,this,i,void 0),m.__privateAdd.call(void 0,this,a,void 0),m.__privateSet.call(void 0,this,i,e),m.__privateSet.call(void 0,this,a,t??!1)}async getLayer1Fee(e){try{return await m.__privateMethod.call(void 0,this,n,s).call(this,e)}catch(e){throw w("Failed to get oracle layer 1 gas fee",e),new Error("Failed to get oracle layer 1 gas fee")}}}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/dist/chunk-YVCX6Z75.js"}],[1863,{"./chunk-3ZRHCVVS.js":1835,"./chunk-RAOYRJ25.js":1851,"./chunk-S6VGOPUY.js":1852,"./chunk-Z4BLTVTB.js":1864,"@metamask/gas-fee-controller":1802,"@metamask/utils":2253},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var i,a,n,s,o,l,c,d,u,h,p=e("./chunk-3ZRHCVVS.js"),m=e("./chunk-S6VGOPUY.js"),f=e("./chunk-RAOYRJ25.js"),v=e("./chunk-Z4BLTVTB.js"),g=e("@metamask/gas-fee-controller"),_=e("@metamask/utils").createModuleLogger.call(void 0,m.projectLogger,"default-gas-fee-flow");i=new WeakSet,a=function(e){return{type:"fee-market",...Object.values(f.GasFeeEstimateLevel).reduce(((t,r)=>({...t,[r]:v.__privateMethod.call(void 0,this,c,d).call(this,e,r)})),{})}},n=new WeakSet,s=function(e){return{type:"legacy",...Object.values(f.GasFeeEstimateLevel).reduce(((t,r)=>({...t,[r]:v.__privateMethod.call(void 0,this,u,h).call(this,e,r)})),{})}},o=new WeakSet,l=function(e){return{type:"eth_gasPrice",gasPrice:p.gweiDecimalToWeiHex.call(void 0,e.gasPrice)}},c=new WeakSet,d=function(e,t){return{maxFeePerGas:p.gweiDecimalToWeiHex.call(void 0,e[t].suggestedMaxFeePerGas),maxPriorityFeePerGas:p.gweiDecimalToWeiHex.call(void 0,e[t].suggestedMaxPriorityFeePerGas)}},u=new WeakSet,h=function(e,t){return p.gweiDecimalToWeiHex.call(void 0,e[t])},r.DefaultGasFeeFlow=class{constructor(){v.__privateAdd.call(void 0,this,i),v.__privateAdd.call(void 0,this,n),v.__privateAdd.call(void 0,this,o),v.__privateAdd.call(void 0,this,c),v.__privateAdd.call(void 0,this,u)}matchesTransaction(e){return!0}async getGasFees(e){const{gasFeeControllerData:t}=e,{gasEstimateType:r,gasFeeEstimates:c}=t;let d;switch(r){case g.GAS_ESTIMATE_TYPES.FEE_MARKET:_("Using fee market estimates",c),d=v.__privateMethod.call(void 0,this,i,a).call(this,c);break;case g.GAS_ESTIMATE_TYPES.LEGACY:_("Using legacy estimates",c),d=v.__privateMethod.call(void 0,this,n,s).call(this,c);break;case g.GAS_ESTIMATE_TYPES.ETH_GASPRICE:_("Using eth_gasPrice estimates",c),d=v.__privateMethod.call(void 0,this,o,l).call(this,c);break;default:throw new Error(`Unsupported gas estimate type: ${r}`)}return{estimates:d}}}}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/dist/chunk-YXSCBWTU.js"}],[1864,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var i=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)};r.__privateGet=(e,t,r)=>(i(e,t,"read from private field"),r?r.call(e):t.get(e)),r.__privateAdd=(e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)},r.__privateSet=(e,t,r,a)=>(i(e,t,"write to private field"),a?a.call(e,r):t.set(e,r),r),r.__privateMethod=(e,t,r)=>(i(e,t,"access private method"),r)}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/dist/chunk-Z4BLTVTB.js"}],[1865,{"./chunk-2XKEAKQG.js":1834,"./chunk-3ZRHCVVS.js":1835,"./chunk-5KMU2IAT.js":1836,"./chunk-7LXE4KHV.js":1837,"./chunk-7MKQDZKY.js":1838,"./chunk-DLOQPH4M.js":1839,"./chunk-DTDTOMTB.js":1840,"./chunk-EQT25RSP.js":1841,"./chunk-FDUCRHYT.js":1842,"./chunk-HMOSP33F.js":1843,"./chunk-IT3SYNZ6.js":1844,"./chunk-KT6UAKBB.js":1845,"./chunk-NYKRCWBG.js":1846,"./chunk-OQNGSDIH.js":1847,"./chunk-PRUNMTRD.js":1848,"./chunk-PUESYN62.js":1849,"./chunk-Q6Q44V4W.js":1850,"./chunk-RAOYRJ25.js":1851,"./chunk-S6VGOPUY.js":1852,"./chunk-SD6CWFDF.js":1853,"./chunk-TIE3CPF7.js":1854,"./chunk-TJMQEH57.js":1855,"./chunk-UGFBA4GV.js":1856,"./chunk-UGN7PBON.js":1857,"./chunk-UT4M4XI3.js":1858,"./chunk-V72C4MCR.js":1859,"./chunk-VH47Q6TS.js":1860,"./chunk-WR5F34OW.js":1861,"./chunk-YVCX6Z75.js":1862,"./chunk-YXSCBWTU.js":1863,"./chunk-Z4BLTVTB.js":1864},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var i=e("./chunk-OQNGSDIH.js");e("./chunk-VH47Q6TS.js"),e("./chunk-Q6Q44V4W.js"),e("./chunk-YXSCBWTU.js"),e("./chunk-NYKRCWBG.js"),e("./chunk-WR5F34OW.js"),e("./chunk-YVCX6Z75.js"),e("./chunk-TJMQEH57.js");var a=e("./chunk-TIE3CPF7.js");e("./chunk-PRUNMTRD.js"),e("./chunk-IT3SYNZ6.js"),e("./chunk-KT6UAKBB.js");var n=e("./chunk-SD6CWFDF.js");e("./chunk-DTDTOMTB.js"),e("./chunk-PUESYN62.js"),e("./chunk-5KMU2IAT.js"),e("./chunk-7LXE4KHV.js"),e("./chunk-3ZRHCVVS.js"),e("./chunk-UT4M4XI3.js");var s=e("./chunk-UGFBA4GV.js");e("./chunk-V72C4MCR.js"),e("./chunk-HMOSP33F.js"),e("./chunk-EQT25RSP.js"),e("./chunk-FDUCRHYT.js"),e("./chunk-UGN7PBON.js"),e("./chunk-7MKQDZKY.js"),e("./chunk-2XKEAKQG.js");var o=e("./chunk-DLOQPH4M.js");e("./chunk-S6VGOPUY.js");var l=e("./chunk-RAOYRJ25.js");e("./chunk-Z4BLTVTB.js"),r.CANCEL_RATE=i.CANCEL_RATE,r.DISPLAYED_TRANSACTION_HISTORY_PATHS=a.DISPLAYED_TRANSACTION_HISTORY_PATHS,r.GasFeeEstimateLevel=l.GasFeeEstimateLevel,r.GasFeeEstimateType=l.GasFeeEstimateType,r.HARDFORK=i.HARDFORK,r.MAX_TRANSACTION_HISTORY_LENGTH=a.MAX_TRANSACTION_HISTORY_LENGTH,r.SimulationErrorCode=l.SimulationErrorCode,r.SimulationTokenStandard=l.SimulationTokenStandard,r.TransactionController=i.TransactionController,r.TransactionEnvelopeType=l.TransactionEnvelopeType,r.TransactionStatus=l.TransactionStatus,r.TransactionType=l.TransactionType,r.UserFeeLevel=l.UserFeeLevel,r.WalletDevice=l.WalletDevice,r.determineTransactionType=n.determineTransactionType,r.isEIP1559Transaction=s.isEIP1559Transaction,r.mergeGasFeeEstimates=o.mergeGasFeeEstimates,r.normalizeTransactionParams=s.normalizeTransactionParams}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/dist/index.js"}],[1866,{"./types":1873,"./util":1874,"@ethereumjs/common":419,"@ethereumjs/util":1882},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.BaseTransaction=void 0;const i=e("@ethereumjs/common"),a=e("@ethereumjs/util"),n=e("./types"),s=e("./util");r.BaseTransaction=class{constructor(e,t){this.cache={hash:undefined,dataFee:undefined},this.activeCapabilities=[],this.DEFAULT_CHAIN=i.Chain.Mainnet,this.DEFAULT_HARDFORK=i.Hardfork.Merge;const{nonce:r,gasLimit:n,to:o,value:l,data:c,v:d,r:u,s:h,type:p}=e;this._type=Number((0,a.bufferToBigInt)((0,a.toBuffer)(p))),this.txOptions=t;const m=(0,a.toBuffer)(""===o?"0x":o),f=(0,a.toBuffer)(""===d?"0x":d),v=(0,a.toBuffer)(""===u?"0x":u),g=(0,a.toBuffer)(""===h?"0x":h);this.nonce=(0,a.bufferToBigInt)((0,a.toBuffer)(""===r?"0x":r)),this.gasLimit=(0,a.bufferToBigInt)((0,a.toBuffer)(""===n?"0x":n)),this.to=m.length>0?new a.Address(m):undefined,this.value=(0,a.bufferToBigInt)((0,a.toBuffer)(""===l?"0x":l)),this.data=(0,a.toBuffer)(""===c?"0x":c),this.v=f.length>0?(0,a.bufferToBigInt)(f):undefined,this.r=v.length>0?(0,a.bufferToBigInt)(v):undefined,this.s=g.length>0?(0,a.bufferToBigInt)(g):undefined,this._validateCannotExceedMaxInteger({value:this.value,r:this.r,s:this.s}),this._validateCannotExceedMaxInteger({gasLimit:this.gasLimit},64),this._validateCannotExceedMaxInteger({nonce:this.nonce},64,!0);const _=this.to===undefined||null===this.to,k=t.allowUnlimitedInitCodeSize??!1,y=t.common??this._getCommon();_&&y.isActivatedEIP(3860)&&!1===k&&(0,s.checkMaxInitCodeSize)(y,this.data.length)}get type(){return this._type}supports(e){return this.activeCapabilities.includes(e)}validate(e=!1){const t=[];return this.getBaseFee()>this.gasLimit&&t.push(`gasLimit is too low. given ${this.gasLimit}, need at least ${this.getBaseFee()}`),this.isSigned()&&!this.verifySignature()&&t.push("Invalid Signature"),e?t:0===t.length}_validateYParity(){const{v:e}=this;if(e!==undefined&&e!==BigInt(0)&&e!==BigInt(1)){const e=this._errorMsg("The y-parity of the transaction should either be 0 or 1");throw new Error(e)}}_validateHighS(){const{s:e}=this;if(this.common.gteHardfork("homestead")&&e!==undefined&&e>a.SECP256K1_ORDER_DIV_2){const e=this._errorMsg("Invalid Signature: s-values greater than secp256k1n/2 are considered invalid");throw new Error(e)}}getBaseFee(){const e=this.common.param("gasPrices","tx");let t=this.getDataFee();if(e&&(t+=e),this.common.gteHardfork("homestead")&&this.toCreationAddress()){const e=this.common.param("gasPrices","txCreation");e&&(t+=e)}return t}getDataFee(){const e=this.common.param("gasPrices","txDataZero"),t=this.common.param("gasPrices","txDataNonZero");let r=BigInt(0);for(let i=0;i<this.data.length;i++)0===this.data[i]?r+=e:r+=t;if((this.to===undefined||null===this.to)&&this.common.isActivatedEIP(3860)){const e=BigInt(Math.ceil(this.data.length/32));r+=this.common.param("gasPrices","initCodeWordCost")*e}return r}toCreationAddress(){return this.to===undefined||0===this.to.buf.length}isSigned(){const{v:e,r:t,s:r}=this;return e!==undefined&&t!==undefined&&r!==undefined}verifySignature(){try{const e=this.getSenderPublicKey();return 0!==(0,a.unpadBuffer)(e).length}catch(e){return!1}}getSenderAddress(){return new a.Address((0,a.publicToAddress)(this.getSenderPublicKey()))}sign(e){if(32!==e.length){const e=this._errorMsg("Private key must be 32 bytes in length.");throw new Error(e)}let t=!1;0===this.type&&this.common.gteHardfork("spuriousDragon")&&!this.supports(n.Capability.EIP155ReplayProtection)&&(this.activeCapabilities.push(n.Capability.EIP155ReplayProtection),t=!0);const r=this.getMessageToSign(!0),{v:i,r:s,s:o}=(0,a.ecsign)(r,e),l=this._processSignature(i,s,o);if(t){const e=this.activeCapabilities.indexOf(n.Capability.EIP155ReplayProtection);e>-1&&this.activeCapabilities.splice(e,1)}return l}_getCommon(e,t){if(t!==undefined){const r=(0,a.bufferToBigInt)((0,a.toBuffer)(t));if(e){if(e.chainId()!==r){const e=this._errorMsg("The chain ID does not match the chain ID of Common");throw new Error(e)}return e.copy()}return i.Common.isSupportedChainId(r)?new i.Common({chain:r,hardfork:this.DEFAULT_HARDFORK}):i.Common.custom({name:"custom-chain",networkId:r,chainId:r},{baseChain:this.DEFAULT_CHAIN,hardfork:this.DEFAULT_HARDFORK})}return e?.copy()??new i.Common({chain:this.DEFAULT_CHAIN,hardfork:this.DEFAULT_HARDFORK})}_validateCannotExceedMaxInteger(e,t=256,r=!1){for(const[i,n]of Object.entries(e))switch(t){case 64:if(r){if(n!==undefined&&n>=a.MAX_UINT64){const e=this._errorMsg(`${i} cannot equal or exceed MAX_UINT64 (2^64-1), given ${n}`);throw new Error(e)}}else if(n!==undefined&&n>a.MAX_UINT64){const e=this._errorMsg(`${i} cannot exceed MAX_UINT64 (2^64-1), given ${n}`);throw new Error(e)}break;case 256:if(r){if(n!==undefined&&n>=a.MAX_INTEGER){const e=this._errorMsg(`${i} cannot equal or exceed MAX_INTEGER (2^256-1), given ${n}`);throw new Error(e)}}else if(n!==undefined&&n>a.MAX_INTEGER){const e=this._errorMsg(`${i} cannot exceed MAX_INTEGER (2^256-1), given ${n}`);throw new Error(e)}break;default:{const e=this._errorMsg("unimplemented bits value");throw new Error(e)}}}static _validateNotArray(e){const t=["nonce","gasPrice","gasLimit","to","value","data","v","r","s","type","baseFee","maxFeePerGas","chainId"];for(const[r,i]of Object.entries(e))if(t.includes(r)&&Array.isArray(i))throw new Error(`${r} cannot be an array`)}_getSharedErrorPostfix(){let e="";try{e=this.isSigned()?(0,a.bufferToHex)(this.hash()):"not available (unsigned)"}catch(t){e="error"}let t="";try{t=this.isSigned().toString()}catch(t){e="error"}let r="";try{r=this.common.hardfork()}catch(e){r="error"}let i=`tx type=${this.type} hash=${e} nonce=${this.nonce} value=${this.value} `;return i+=`signed=${t} hf=${r}`,i}}}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>@ethereumjs/tx",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/node_modules/@ethereumjs/tx/dist/baseTransaction.js"}],[1867,{"./baseTransaction":1866,"./util":1874,"@ethereumjs/rlp":422,"@ethereumjs/util":1882,buffer:2970,"ethereum-cryptography/keccak":3195},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.FeeMarketEIP1559Transaction=void 0;const i=e("@ethereumjs/rlp"),a=e("@ethereumjs/util"),n=e("ethereum-cryptography/keccak"),s=e("./baseTransaction"),o=e("./util"),l=t.from(2..toString(16).padStart(2,"0"),"hex");class c extends s.BaseTransaction{constructor(e,t={}){super({...e,type:2},t),this.DEFAULT_HARDFORK="london";const{chainId:r,accessList:i,maxFeePerGas:n,maxPriorityFeePerGas:l}=e;if(this.common=this._getCommon(t.common,r),this.chainId=this.common.chainId(),!1===this.common.isActivatedEIP(1559))throw new Error("EIP-1559 not enabled on Common");this.activeCapabilities=this.activeCapabilities.concat([1559,2718,2930]);const c=o.AccessLists.getAccessListData(i??[]);if(this.accessList=c.accessList,this.AccessListJSON=c.AccessListJSON,o.AccessLists.verifyAccessList(this.accessList),this.maxFeePerGas=(0,a.bufferToBigInt)((0,a.toBuffer)(""===n?"0x":n)),this.maxPriorityFeePerGas=(0,a.bufferToBigInt)((0,a.toBuffer)(""===l?"0x":l)),this._validateCannotExceedMaxInteger({maxFeePerGas:this.maxFeePerGas,maxPriorityFeePerGas:this.maxPriorityFeePerGas}),s.BaseTransaction._validateNotArray(e),this.gasLimit*this.maxFeePerGas>a.MAX_INTEGER){const e=this._errorMsg("gasLimit * maxFeePerGas cannot exceed MAX_INTEGER (2^256-1)");throw new Error(e)}if(this.maxFeePerGas<this.maxPriorityFeePerGas){const e=this._errorMsg("maxFeePerGas cannot be less than maxPriorityFeePerGas (The total must be the larger of the two)");throw new Error(e)}this._validateYParity(),this._validateHighS();(t?.freeze??!0)&&Object.freeze(this)}static fromTxData(e,t={}){return new c(e,t)}static fromSerializedTx(e,t={}){if(!e.slice(0,1).equals(l))throw new Error(`Invalid serialized tx input: not an EIP-1559 transaction (wrong tx type, expected: 2, received: ${e.slice(0,1).toString("hex")}`);const r=(0,a.arrToBufArr)(i.RLP.decode(e.slice(1)));if(!Array.isArray(r))throw new Error("Invalid serialized tx input: must be array");return c.fromValuesArray(r,t)}static fromValuesArray(e,t={}){if(9!==e.length&&12!==e.length)throw new Error("Invalid EIP-1559 transaction. Only expecting 9 values (for unsigned tx) or 12 values (for signed tx).");const[r,i,n,s,o,l,d,u,h,p,m,f]=e;return this._validateNotArray({chainId:r,v:p}),(0,a.validateNoLeadingZeroes)({nonce:i,maxPriorityFeePerGas:n,maxFeePerGas:s,gasLimit:o,value:d,v:p,r:m,s:f}),new c({chainId:(0,a.bufferToBigInt)(r),nonce:i,maxPriorityFeePerGas:n,maxFeePerGas:s,gasLimit:o,to:l,value:d,data:u,accessList:h??[],v:p!==undefined?(0,a.bufferToBigInt)(p):undefined,r:m,s:f},t)}getDataFee(){if(this.cache.dataFee&&this.cache.dataFee.hardfork===this.common.hardfork())return this.cache.dataFee.value;let e=super.getDataFee();return e+=BigInt(o.AccessLists.getDataFeeEIP2930(this.accessList,this.common)),Object.isFrozen(this)&&(this.cache.dataFee={value:e,hardfork:this.common.hardfork()}),e}getUpfrontCost(e=BigInt(0)){const t=this.maxPriorityFeePerGas,r=this.maxFeePerGas-e,i=(t<r?t:r)+e;return this.gasLimit*i+this.value}raw(){return[(0,a.bigIntToUnpaddedBuffer)(this.chainId),(0,a.bigIntToUnpaddedBuffer)(this.nonce),(0,a.bigIntToUnpaddedBuffer)(this.maxPriorityFeePerGas),(0,a.bigIntToUnpaddedBuffer)(this.maxFeePerGas),(0,a.bigIntToUnpaddedBuffer)(this.gasLimit),this.to!==undefined?this.to.buf:t.from([]),(0,a.bigIntToUnpaddedBuffer)(this.value),this.data,this.accessList,this.v!==undefined?(0,a.bigIntToUnpaddedBuffer)(this.v):t.from([]),this.r!==undefined?(0,a.bigIntToUnpaddedBuffer)(this.r):t.from([]),this.s!==undefined?(0,a.bigIntToUnpaddedBuffer)(this.s):t.from([])]}serialize(){const e=this.raw();return t.concat([l,t.from(i.RLP.encode((0,a.bufArrToArr)(e)))])}getMessageToSign(e=!0){const r=this.raw().slice(0,9),s=t.concat([l,t.from(i.RLP.encode((0,a.bufArrToArr)(r)))]);return e?t.from((0,n.keccak256)(s)):s}hash(){if(!this.isSigned()){const e=this._errorMsg("Cannot call hash method if transaction is not signed");throw new Error(e)}return Object.isFrozen(this)?(this.cache.hash||(this.cache.hash=t.from((0,n.keccak256)(this.serialize()))),this.cache.hash):t.from((0,n.keccak256)(this.serialize()))}getMessageToVerifySignature(){return this.getMessageToSign()}getSenderPublicKey(){if(!this.isSigned()){const e=this._errorMsg("Cannot call this method if transaction is not signed");throw new Error(e)}const e=this.getMessageToVerifySignature(),{v:t,r:r,s:i}=this;this._validateHighS();try{return(0,a.ecrecover)(e,t+BigInt(27),(0,a.bigIntToUnpaddedBuffer)(r),(0,a.bigIntToUnpaddedBuffer)(i))}catch(e){const t=this._errorMsg("Invalid Signature");throw new Error(t)}}_processSignature(e,t,r){const i={...this.txOptions,common:this.common};return c.fromTxData({chainId:this.chainId,nonce:this.nonce,maxPriorityFeePerGas:this.maxPriorityFeePerGas,maxFeePerGas:this.maxFeePerGas,gasLimit:this.gasLimit,to:this.to,value:this.value,data:this.data,accessList:this.accessList,v:e-BigInt(27),r:(0,a.bufferToBigInt)(t),s:(0,a.bufferToBigInt)(r)},i)}toJSON(){const e=o.AccessLists.getAccessListJSON(this.accessList);return{chainId:(0,a.bigIntToHex)(this.chainId),nonce:(0,a.bigIntToHex)(this.nonce),maxPriorityFeePerGas:(0,a.bigIntToHex)(this.maxPriorityFeePerGas),maxFeePerGas:(0,a.bigIntToHex)(this.maxFeePerGas),gasLimit:(0,a.bigIntToHex)(this.gasLimit),to:this.to!==undefined?this.to.toString():undefined,value:(0,a.bigIntToHex)(this.value),data:"0x"+this.data.toString("hex"),accessList:e,v:this.v!==undefined?(0,a.bigIntToHex)(this.v):undefined,r:this.r!==undefined?(0,a.bigIntToHex)(this.r):undefined,s:this.s!==undefined?(0,a.bigIntToHex)(this.s):undefined}}errorStr(){let e=this._getSharedErrorPostfix();return e+=` maxFeePerGas=${this.maxFeePerGas} maxPriorityFeePerGas=${this.maxPriorityFeePerGas}`,e}_errorMsg(e){return`${e} (${this.errorStr()})`}}r.FeeMarketEIP1559Transaction=c}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>@ethereumjs/tx",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/node_modules/@ethereumjs/tx/dist/eip1559Transaction.js"}],[1868,{"./baseTransaction":1866,"./util":1874,"@ethereumjs/rlp":422,"@ethereumjs/util":1882,buffer:2970,"ethereum-cryptography/keccak":3195},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.AccessListEIP2930Transaction=void 0;const i=e("@ethereumjs/rlp"),a=e("@ethereumjs/util"),n=e("ethereum-cryptography/keccak"),s=e("./baseTransaction"),o=e("./util"),l=t.from(1..toString(16).padStart(2,"0"),"hex");class c extends s.BaseTransaction{constructor(e,t={}){super({...e,type:1},t),this.DEFAULT_HARDFORK="berlin";const{chainId:r,accessList:i,gasPrice:n}=e;if(this.common=this._getCommon(t.common,r),this.chainId=this.common.chainId(),!this.common.isActivatedEIP(2930))throw new Error("EIP-2930 not enabled on Common");this.activeCapabilities=this.activeCapabilities.concat([2718,2930]);const l=o.AccessLists.getAccessListData(i??[]);if(this.accessList=l.accessList,this.AccessListJSON=l.AccessListJSON,o.AccessLists.verifyAccessList(this.accessList),this.gasPrice=(0,a.bufferToBigInt)((0,a.toBuffer)(""===n?"0x":n)),this._validateCannotExceedMaxInteger({gasPrice:this.gasPrice}),s.BaseTransaction._validateNotArray(e),this.gasPrice*this.gasLimit>a.MAX_INTEGER){const e=this._errorMsg("gasLimit * gasPrice cannot exceed MAX_INTEGER");throw new Error(e)}this._validateYParity(),this._validateHighS();(t?.freeze??!0)&&Object.freeze(this)}static fromTxData(e,t={}){return new c(e,t)}static fromSerializedTx(e,t={}){if(!e.slice(0,1).equals(l))throw new Error(`Invalid serialized tx input: not an EIP-2930 transaction (wrong tx type, expected: 1, received: ${e.slice(0,1).toString("hex")}`);const r=(0,a.arrToBufArr)(i.RLP.decode(Uint8Array.from(e.slice(1))));if(!Array.isArray(r))throw new Error("Invalid serialized tx input: must be array");return c.fromValuesArray(r,t)}static fromValuesArray(e,t={}){if(8!==e.length&&11!==e.length)throw new Error("Invalid EIP-2930 transaction. Only expecting 8 values (for unsigned tx) or 11 values (for signed tx).");const[r,i,n,s,o,l,d,u,h,p,m]=e;this._validateNotArray({chainId:r,v:h}),(0,a.validateNoLeadingZeroes)({nonce:i,gasPrice:n,gasLimit:s,value:l,v:h,r:p,s:m});return new c({chainId:(0,a.bufferToBigInt)(r),nonce:i,gasPrice:n,gasLimit:s,to:o,value:l,data:d,accessList:u??[],v:h!==undefined?(0,a.bufferToBigInt)(h):undefined,r:p,s:m},t)}getDataFee(){if(this.cache.dataFee&&this.cache.dataFee.hardfork===this.common.hardfork())return this.cache.dataFee.value;let e=super.getDataFee();return e+=BigInt(o.AccessLists.getDataFeeEIP2930(this.accessList,this.common)),Object.isFrozen(this)&&(this.cache.dataFee={value:e,hardfork:this.common.hardfork()}),e}getUpfrontCost(){return this.gasLimit*this.gasPrice+this.value}raw(){return[(0,a.bigIntToUnpaddedBuffer)(this.chainId),(0,a.bigIntToUnpaddedBuffer)(this.nonce),(0,a.bigIntToUnpaddedBuffer)(this.gasPrice),(0,a.bigIntToUnpaddedBuffer)(this.gasLimit),this.to!==undefined?this.to.buf:t.from([]),(0,a.bigIntToUnpaddedBuffer)(this.value),this.data,this.accessList,this.v!==undefined?(0,a.bigIntToUnpaddedBuffer)(this.v):t.from([]),this.r!==undefined?(0,a.bigIntToUnpaddedBuffer)(this.r):t.from([]),this.s!==undefined?(0,a.bigIntToUnpaddedBuffer)(this.s):t.from([])]}serialize(){const e=this.raw();return t.concat([l,t.from(i.RLP.encode((0,a.bufArrToArr)(e)))])}getMessageToSign(e=!0){const r=this.raw().slice(0,8),s=t.concat([l,t.from(i.RLP.encode((0,a.bufArrToArr)(r)))]);return e?t.from((0,n.keccak256)(s)):s}hash(){if(!this.isSigned()){const e=this._errorMsg("Cannot call hash method if transaction is not signed");throw new Error(e)}return Object.isFrozen(this)?(this.cache.hash||(this.cache.hash=t.from((0,n.keccak256)(this.serialize()))),this.cache.hash):t.from((0,n.keccak256)(this.serialize()))}getMessageToVerifySignature(){return this.getMessageToSign()}getSenderPublicKey(){if(!this.isSigned()){const e=this._errorMsg("Cannot call this method if transaction is not signed");throw new Error(e)}const e=this.getMessageToVerifySignature(),{v:t,r:r,s:i}=this;this._validateHighS();try{return(0,a.ecrecover)(e,t+BigInt(27),(0,a.bigIntToUnpaddedBuffer)(r),(0,a.bigIntToUnpaddedBuffer)(i))}catch(e){const t=this._errorMsg("Invalid Signature");throw new Error(t)}}_processSignature(e,t,r){const i={...this.txOptions,common:this.common};return c.fromTxData({chainId:this.chainId,nonce:this.nonce,gasPrice:this.gasPrice,gasLimit:this.gasLimit,to:this.to,value:this.value,data:this.data,accessList:this.accessList,v:e-BigInt(27),r:(0,a.bufferToBigInt)(t),s:(0,a.bufferToBigInt)(r)},i)}toJSON(){const e=o.AccessLists.getAccessListJSON(this.accessList);return{chainId:(0,a.bigIntToHex)(this.chainId),nonce:(0,a.bigIntToHex)(this.nonce),gasPrice:(0,a.bigIntToHex)(this.gasPrice),gasLimit:(0,a.bigIntToHex)(this.gasLimit),to:this.to!==undefined?this.to.toString():undefined,value:(0,a.bigIntToHex)(this.value),data:"0x"+this.data.toString("hex"),accessList:e,v:this.v!==undefined?(0,a.bigIntToHex)(this.v):undefined,r:this.r!==undefined?(0,a.bigIntToHex)(this.r):undefined,s:this.s!==undefined?(0,a.bigIntToHex)(this.s):undefined}}errorStr(){let e=this._getSharedErrorPostfix();return e+=` gasPrice=${this.gasPrice} accessListCount=${this.accessList?.length??0}`,e}_errorMsg(e){return`${e} (${this.errorStr()})`}}r.AccessListEIP2930Transaction=c}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>@ethereumjs/tx",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/node_modules/@ethereumjs/tx/dist/eip2930Transaction.js"}],[1869,{"@ethereumjs/util":1882},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.normalizeTxParams=void 0;const i=e("@ethereumjs/util");r.normalizeTxParams=e=>{const t=Object.assign({},e);return t.gasLimit=(0,i.toType)(t.gasLimit??t.gas,i.TypeOutput.BigInt),t.data=t.data===undefined?t.input:t.data,t.gasPrice=t.gasPrice!==undefined?BigInt(t.gasPrice):undefined,t.value=t.value!==undefined?BigInt(t.value):undefined,t.to=null!==t.to&&t.to!==undefined?(0,i.setLengthLeft)((0,i.toBuffer)(t.to),20):null,t.v="0x0"===t.v?"0x":t.v,t.r="0x0"===t.r?"0x":t.r,t.s="0x0"===t.s?"0x":t.s,"0x"!==t.v&&(t.v=(0,i.toType)(t.v,i.TypeOutput.BigInt)),t}}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>@ethereumjs/tx",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/node_modules/@ethereumjs/tx/dist/fromRpc.js"}],[187,{lodash:3770},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=e("lodash");r.default={version:70,async migrate(e){const t=(0,i.cloneDeep)(e);t.meta.version=70;const r=function(e){var t;if(Array.isArray(null==e||null===(t=e.PermissionLogController)||void 0===t?void 0:t.permissionActivityLog)){const{PermissionLogController:{permissionActivityLog:t}}=e;t.forEach((e=>{e&&"object"==typeof e&&!Array.isArray(e)&&(delete e.request,delete e.response)}))}return e}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/070.js"}],[1870,{"./eip1559Transaction":1867,"./eip2930Transaction":1868,"./legacyTransaction":1871,"./transactionFactory":1872,"./types":1873},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var i=this&&this.__createBinding||(Object.create?function(e,t,r,i){i===undefined&&(i=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,a)}:function(e,t,r,i){i===undefined&&(i=r),e[i]=t[r]}),a=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||i(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),r.TransactionFactory=r.Transaction=r.AccessListEIP2930Transaction=r.FeeMarketEIP1559Transaction=void 0;var n=e("./eip1559Transaction");Object.defineProperty(r,"FeeMarketEIP1559Transaction",{enumerable:!0,get:function(){return n.FeeMarketEIP1559Transaction}});var s=e("./eip2930Transaction");Object.defineProperty(r,"AccessListEIP2930Transaction",{enumerable:!0,get:function(){return s.AccessListEIP2930Transaction}});var o=e("./legacyTransaction");Object.defineProperty(r,"Transaction",{enumerable:!0,get:function(){return o.Transaction}});var l=e("./transactionFactory");Object.defineProperty(r,"TransactionFactory",{enumerable:!0,get:function(){return l.TransactionFactory}}),a(e("./types"),r)}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>@ethereumjs/tx",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/node_modules/@ethereumjs/tx/dist/index.js"}],[1871,{"./baseTransaction":1866,"./types":1873,"@ethereumjs/rlp":422,"@ethereumjs/util":1882,buffer:2970,"ethereum-cryptography/keccak":3195},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.Transaction=void 0;const i=e("@ethereumjs/rlp"),a=e("@ethereumjs/util"),n=e("ethereum-cryptography/keccak"),s=e("./baseTransaction"),o=e("./types");function l(e,t){const r=Number(e),i=2*Number(t);return r===i+35||r===i+36}class c extends s.BaseTransaction{constructor(e,t={}){if(super({...e,type:0},t),this.common=this._validateTxV(this.v,t.common),this.gasPrice=(0,a.bufferToBigInt)((0,a.toBuffer)(""===e.gasPrice?"0x":e.gasPrice)),this.gasPrice*this.gasLimit>a.MAX_INTEGER){const e=this._errorMsg("gas limit * gasPrice cannot exceed MAX_INTEGER (2^256-1)");throw new Error(e)}this._validateCannotExceedMaxInteger({gasPrice:this.gasPrice}),s.BaseTransaction._validateNotArray(e),this.common.gteHardfork("spuriousDragon")&&(this.isSigned()?l(this.v,this.common.chainId())&&this.activeCapabilities.push(o.Capability.EIP155ReplayProtection):this.activeCapabilities.push(o.Capability.EIP155ReplayProtection));(t?.freeze??!0)&&Object.freeze(this)}static fromTxData(e,t={}){return new c(e,t)}static fromSerializedTx(e,t={}){const r=(0,a.arrToBufArr)(i.RLP.decode(Uint8Array.from(e)));if(!Array.isArray(r))throw new Error("Invalid serialized tx input. Must be array");return this.fromValuesArray(r,t)}static fromValuesArray(e,t={}){if(6!==e.length&&9!==e.length)throw new Error("Invalid transaction. Only expecting 6 values (for unsigned tx) or 9 values (for signed tx).");const[r,i,n,s,o,l,d,u,h]=e;return(0,a.validateNoLeadingZeroes)({nonce:r,gasPrice:i,gasLimit:n,value:o,v:d,r:u,s:h}),new c({nonce:r,gasPrice:i,gasLimit:n,to:s,value:o,data:l,v:d,r:u,s:h},t)}raw(){return[(0,a.bigIntToUnpaddedBuffer)(this.nonce),(0,a.bigIntToUnpaddedBuffer)(this.gasPrice),(0,a.bigIntToUnpaddedBuffer)(this.gasLimit),this.to!==undefined?this.to.buf:t.from([]),(0,a.bigIntToUnpaddedBuffer)(this.value),this.data,this.v!==undefined?(0,a.bigIntToUnpaddedBuffer)(this.v):t.from([]),this.r!==undefined?(0,a.bigIntToUnpaddedBuffer)(this.r):t.from([]),this.s!==undefined?(0,a.bigIntToUnpaddedBuffer)(this.s):t.from([])]}serialize(){return t.from(i.RLP.encode((0,a.bufArrToArr)(this.raw())))}_getMessageToSign(){const e=[(0,a.bigIntToUnpaddedBuffer)(this.nonce),(0,a.bigIntToUnpaddedBuffer)(this.gasPrice),(0,a.bigIntToUnpaddedBuffer)(this.gasLimit),this.to!==undefined?this.to.buf:t.from([]),(0,a.bigIntToUnpaddedBuffer)(this.value),this.data];return this.supports(o.Capability.EIP155ReplayProtection)&&(e.push((0,a.bigIntToUnpaddedBuffer)(this.common.chainId())),e.push((0,a.unpadBuffer)((0,a.toBuffer)(0))),e.push((0,a.unpadBuffer)((0,a.toBuffer)(0)))),e}getMessageToSign(e=!0){const r=this._getMessageToSign();return e?t.from((0,n.keccak256)(i.RLP.encode((0,a.bufArrToArr)(r)))):r}getDataFee(){return this.cache.dataFee&&this.cache.dataFee.hardfork===this.common.hardfork()?this.cache.dataFee.value:(Object.isFrozen(this)&&(this.cache.dataFee={value:super.getDataFee(),hardfork:this.common.hardfork()}),super.getDataFee())}getUpfrontCost(){return this.gasLimit*this.gasPrice+this.value}hash(){if(!this.isSigned()){const e=this._errorMsg("Cannot call hash method if transaction is not signed");throw new Error(e)}return Object.isFrozen(this)?(this.cache.hash||(this.cache.hash=t.from((0,n.keccak256)(i.RLP.encode((0,a.bufArrToArr)(this.raw()))))),this.cache.hash):t.from((0,n.keccak256)(i.RLP.encode((0,a.bufArrToArr)(this.raw()))))}getMessageToVerifySignature(){if(!this.isSigned()){const e=this._errorMsg("This transaction is not signed");throw new Error(e)}const e=this._getMessageToSign();return t.from((0,n.keccak256)(i.RLP.encode((0,a.bufArrToArr)(e))))}getSenderPublicKey(){const e=this.getMessageToVerifySignature(),{v:t,r:r,s:i}=this;this._validateHighS();try{return(0,a.ecrecover)(e,t,(0,a.bigIntToUnpaddedBuffer)(r),(0,a.bigIntToUnpaddedBuffer)(i),this.supports(o.Capability.EIP155ReplayProtection)?this.common.chainId():undefined)}catch(e){const t=this._errorMsg("Invalid Signature");throw new Error(t)}}_processSignature(e,t,r){this.supports(o.Capability.EIP155ReplayProtection)&&(e+=this.common.chainId()*BigInt(2)+BigInt(8));const i={...this.txOptions,common:this.common};return c.fromTxData({nonce:this.nonce,gasPrice:this.gasPrice,gasLimit:this.gasLimit,to:this.to,value:this.value,data:this.data,v:e,r:(0,a.bufferToBigInt)(t),s:(0,a.bufferToBigInt)(r)},i)}toJSON(){return{nonce:(0,a.bigIntToHex)(this.nonce),gasPrice:(0,a.bigIntToHex)(this.gasPrice),gasLimit:(0,a.bigIntToHex)(this.gasLimit),to:this.to!==undefined?this.to.toString():undefined,value:(0,a.bigIntToHex)(this.value),data:"0x"+this.data.toString("hex"),v:this.v!==undefined?(0,a.bigIntToHex)(this.v):undefined,r:this.r!==undefined?(0,a.bigIntToHex)(this.r):undefined,s:this.s!==undefined?(0,a.bigIntToHex)(this.s):undefined}}_validateTxV(e,t){let r;const i=e!==undefined?Number(e):undefined;if(i!==undefined&&i<37&&27!==i&&28!==i)throw new Error(`Legacy txs need either v = 27/28 or v >= 37 (EIP-155 replay protection), got v = ${i}`);if(i!==undefined&&0!==i&&(!t||t.gteHardfork("spuriousDragon"))&&27!==i&&28!==i)if(t){if(!l(BigInt(i),t.chainId()))throw new Error(`Incompatible EIP155-based V ${i} and chain id ${t.chainId()}. See the Common parameter of the Transaction constructor to set the chain id.`)}else{let e;e=(i-35)%2==0?35:36,r=BigInt(i-e)/BigInt(2)}return this._getCommon(t,r)}errorStr(){let e=this._getSharedErrorPostfix();return e+=` gasPrice=${this.gasPrice}`,e}_errorMsg(e){return`${e} (${this.errorStr()})`}}r.Transaction=c}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>@ethereumjs/tx",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/node_modules/@ethereumjs/tx/dist/legacyTransaction.js"}],[1872,{"../../../../../../../../../is-buffer/index.js":3582,"./eip1559Transaction":1867,"./eip2930Transaction":1868,"./fromRpc":1869,"./legacyTransaction":1871,"@ethereumjs/util":1882},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.TransactionFactory=void 0;const i=e("@ethereumjs/util"),a=e("./eip1559Transaction"),n=e("./eip2930Transaction"),s=e("./fromRpc"),o=e("./legacyTransaction");class l{constructor(){}static fromTxData(e,t={}){if("type"in e&&e.type!==undefined){const r=Number((0,i.bufferToBigInt)((0,i.toBuffer)(e.type)));if(0===r)return o.Transaction.fromTxData(e,t);if(1===r)return n.AccessListEIP2930Transaction.fromTxData(e,t);if(2===r)return a.FeeMarketEIP1559Transaction.fromTxData(e,t);throw new Error(`Tx instantiation with type ${r} not supported`)}return o.Transaction.fromTxData(e,t)}static fromSerializedData(e,t={}){if(!(e[0]<=127))return o.Transaction.fromSerializedTx(e,t);switch(e[0]){case 1:return n.AccessListEIP2930Transaction.fromSerializedTx(e,t);case 2:return a.FeeMarketEIP1559Transaction.fromSerializedTx(e,t);default:throw new Error(`TypedTransaction with ID ${e[0]} unknown`)}}static fromBlockBodyData(e,r={}){if(t.isBuffer(e))return this.fromSerializedData(e,r);if(Array.isArray(e))return o.Transaction.fromValuesArray(e,r);throw new Error("Cannot decode transaction: unknown type input")}static async fromEthersProvider(e,t,r){const a=(0,i.getProvider)(e),n=await(0,i.fetchFromProvider)(a,{method:"eth_getTransactionByHash",params:[t]});if(null===n)throw new Error("No data returned from provider");return l.fromRPCTx(n,r)}static async fromRPCTx(e,t={}){return l.fromTxData((0,s.normalizeTxParams)(e),t)}}r.TransactionFactory=l}).call(this)}).call(this,{isBuffer:e("../../../../../../../../../is-buffer/index.js")})}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>@ethereumjs/tx",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/node_modules/@ethereumjs/tx/dist/transactionFactory.js"}],[1873,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){function i(e){if(0===e.length)return!0;const t=e[0];return!!Array.isArray(t)}Object.defineProperty(r,"__esModule",{value:!0}),r.isAccessList=r.isAccessListBuffer=r.Capability=void 0,function(e){e[e.EIP155ReplayProtection=155]="EIP155ReplayProtection",e[e.EIP1559FeeMarket=1559]="EIP1559FeeMarket",e[e.EIP2718TypedTransaction=2718]="EIP2718TypedTransaction",e[e.EIP2930AccessLists=2930]="EIP2930AccessLists"}(r.Capability||(r.Capability={})),r.isAccessListBuffer=i,r.isAccessList=function(e){return!i(e)}}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>@ethereumjs/tx",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/node_modules/@ethereumjs/tx/dist/types.js"}],[1874,{"./types":1873,"@ethereumjs/util":1882},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.AccessLists=r.checkMaxInitCodeSize=void 0;const i=e("@ethereumjs/util"),a=e("./types");r.checkMaxInitCodeSize=function(e,t){const r=e.param("vm","maxInitCodeSize");if(r&&BigInt(t)>r)throw new Error(`the initcode size of this transaction is too large: it is ${t} while the max is ${e.param("vm","maxInitCodeSize")}`)};r.AccessLists=class{static getAccessListData(e){let t,r;if((0,a.isAccessList)(e)){t=e;const a=[];for(let t=0;t<e.length;t++){const r=e[t],n=(0,i.toBuffer)(r.address),s=[];for(let e=0;e<r.storageKeys.length;e++)s.push((0,i.toBuffer)(r.storageKeys[e]));a.push([n,s])}r=a}else{r=e??[];const a=[];for(let e=0;e<r.length;e++){const t=r[e],n=(0,i.bufferToHex)(t[0]),s=[];for(let e=0;e<t[1].length;e++)s.push((0,i.bufferToHex)(t[1][e]));const o={address:n,storageKeys:s};a.push(o)}t=a}return{AccessListJSON:t,accessList:r}}static verifyAccessList(e){for(let t=0;t<e.length;t++){const r=e[t],i=r[0],a=r[1];if(r[2]!==undefined)throw new Error("Access list item cannot have 3 elements. It can only have an address, and an array of storage slots.");if(20!==i.length)throw new Error("Invalid EIP-2930 transaction: address length should be 20 bytes");for(let e=0;e<a.length;e++)if(32!==a[e].length)throw new Error("Invalid EIP-2930 transaction: storage slot length should be 32 bytes")}}static getAccessListJSON(e){const t=[];for(let r=0;r<e.length;r++){const a=e[r],n={address:"0x"+(0,i.setLengthLeft)(a[0],20).toString("hex"),storageKeys:[]},s=a[1];for(let e=0;e<s.length;e++){const t=s[e];n.storageKeys.push("0x"+(0,i.setLengthLeft)(t,32).toString("hex"))}t.push(n)}return t}static getDataFeeEIP2930(e,t){const r=t.param("gasPrices","accessListStorageKeyCost"),i=t.param("gasPrices","accessListAddressCost");let a=0;for(let t=0;t<e.length;t++){a+=e[t][1].length}return e.length*Number(i)+a*Number(r)}}}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>@ethereumjs/tx",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/node_modules/@ethereumjs/tx/dist/util.js"}],[1875,{"./bytes":1878,"./constants":1879,"./helpers":1881,"./internal":1883,"@ethereumjs/rlp":422,buffer:2970,"ethereum-cryptography/keccak":3195,"ethereum-cryptography/secp256k1":3212,"ethereum-cryptography/utils":3214},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.accountBodyToRLP=r.accountBodyToSlim=r.accountBodyFromSlim=r.isZeroAddress=r.zeroAddress=r.importPublic=r.privateToAddress=r.privateToPublic=r.publicToAddress=r.pubToAddress=r.isValidPublic=r.isValidPrivate=r.generateAddress2=r.generateAddress=r.isValidChecksumAddress=r.toChecksumAddress=r.isValidAddress=r.Account=void 0;const i=e("@ethereumjs/rlp"),a=e("ethereum-cryptography/keccak"),n=e("ethereum-cryptography/secp256k1"),s=e("ethereum-cryptography/utils"),o=e("./bytes"),l=e("./constants"),c=e("./helpers"),d=e("./internal"),u=BigInt(0);class h{constructor(e=u,t=u,r=l.KECCAK256_RLP,i=l.KECCAK256_NULL){this.nonce=e,this.balance=t,this.storageRoot=r,this.codeHash=i,this._validate()}static fromAccountData(e){const{nonce:t,balance:r,storageRoot:i,codeHash:a}=e;return new h(t!==undefined?(0,o.bufferToBigInt)((0,o.toBuffer)(t)):undefined,r!==undefined?(0,o.bufferToBigInt)((0,o.toBuffer)(r)):undefined,i!==undefined?(0,o.toBuffer)(i):undefined,a!==undefined?(0,o.toBuffer)(a):undefined)}static fromRlpSerializedAccount(e){const t=(0,o.arrToBufArr)(i.RLP.decode(Uint8Array.from(e)));if(!Array.isArray(t))throw new Error("Invalid serialized account input. Must be array");return this.fromValuesArray(t)}static fromValuesArray(e){const[t,r,i,a]=e;return new h((0,o.bufferToBigInt)(t),(0,o.bufferToBigInt)(r),i,a)}_validate(){if(this.nonce<u)throw new Error("nonce must be greater than zero");if(this.balance<u)throw new Error("balance must be greater than zero");if(32!==this.storageRoot.length)throw new Error("storageRoot must have a length of 32");if(32!==this.codeHash.length)throw new Error("codeHash must have a length of 32")}raw(){return[(0,o.bigIntToUnpaddedBuffer)(this.nonce),(0,o.bigIntToUnpaddedBuffer)(this.balance),this.storageRoot,this.codeHash]}serialize(){return t.from(i.RLP.encode((0,o.bufArrToArr)(this.raw())))}isContract(){return!this.codeHash.equals(l.KECCAK256_NULL)}isEmpty(){return this.balance===u&&this.nonce===u&&this.codeHash.equals(l.KECCAK256_NULL)}}r.Account=h;r.isValidAddress=function(e){try{(0,c.assertIsString)(e)}catch(e){return!1}return/^0x[0-9a-fA-F]{40}$/.test(e)};r.toChecksumAddress=function(e,r){(0,c.assertIsHexString)(e);const i=(0,d.stripHexPrefix)(e).toLowerCase();let n="";if(r!==undefined){n=(0,o.bufferToBigInt)((0,o.toBuffer)(r)).toString()+"0x"}const l=t.from(n+i,"utf8"),u=(0,s.bytesToHex)((0,a.keccak256)(l));let h="0x";for(let e=0;e<i.length;e++)parseInt(u[e],16)>=8?h+=i[e].toUpperCase():h+=i[e];return h};r.isValidChecksumAddress=function(e,t){return(0,r.isValidAddress)(e)&&(0,r.toChecksumAddress)(e,t)===e};r.generateAddress=function(e,r){return(0,c.assertIsBuffer)(e),(0,c.assertIsBuffer)(r),(0,o.bufferToBigInt)(r)===BigInt(0)?t.from((0,a.keccak256)(i.RLP.encode((0,o.bufArrToArr)([e,null])))).slice(-20):t.from((0,a.keccak256)(i.RLP.encode((0,o.bufArrToArr)([e,r])))).slice(-20)};r.generateAddress2=function(e,r,i){if((0,c.assertIsBuffer)(e),(0,c.assertIsBuffer)(r),(0,c.assertIsBuffer)(i),20!==e.length)throw new Error("Expected from to be of length 20");if(32!==r.length)throw new Error("Expected salt to be of length 32");const n=(0,a.keccak256)(t.concat([t.from("ff","hex"),e,r,(0,a.keccak256)(i)]));return(0,o.toBuffer)(n).slice(-20)};r.isValidPrivate=function(e){return n.secp256k1.utils.isValidPrivateKey(e)};r.isValidPublic=function(e,r=!1){if((0,c.assertIsBuffer)(e),64===e.length)try{return n.secp256k1.ProjectivePoint.fromHex(t.concat([t.from([4]),e])),!0}catch(e){return!1}if(!r)return!1;try{return n.secp256k1.ProjectivePoint.fromHex(e),!0}catch(e){return!1}};r.pubToAddress=function(e,r=!1){if((0,c.assertIsBuffer)(e),r&&64!==e.length&&(e=t.from(n.secp256k1.ProjectivePoint.fromHex(e).toRawBytes(!1).slice(1))),64!==e.length)throw new Error("Expected pubKey to be of length 64");return t.from((0,a.keccak256)(e)).slice(-20)},r.publicToAddress=r.pubToAddress;r.privateToPublic=function(e){return(0,c.assertIsBuffer)(e),t.from(n.secp256k1.ProjectivePoint.fromPrivateKey(e).toRawBytes(!1).slice(1))};r.privateToAddress=function(e){return(0,r.publicToAddress)((0,r.privateToPublic)(e))};r.importPublic=function(e){return(0,c.assertIsBuffer)(e),64!==e.length&&(e=t.from(n.secp256k1.ProjectivePoint.fromHex(e).toRawBytes(!1).slice(1))),e};r.zeroAddress=function(){const e=(0,o.zeros)(20);return(0,o.bufferToHex)(e)};function p(e){const[t,r,i,a]=e;return[t,r,0===(0,o.arrToBufArr)(i).length?l.KECCAK256_RLP:i,0===(0,o.arrToBufArr)(a).length?l.KECCAK256_NULL:a]}r.isZeroAddress=function(e){try{(0,c.assertIsString)(e)}catch(e){return!1}return(0,r.zeroAddress)()===e},r.accountBodyFromSlim=p;const m=new Uint8Array(0);r.accountBodyToSlim=function(e){const[t,r,i,a]=e;return[t,r,(0,o.arrToBufArr)(i).equals(l.KECCAK256_RLP)?m:i,(0,o.arrToBufArr)(a).equals(l.KECCAK256_NULL)?m:a]},r.accountBodyToRLP=function(e,t=!0){const r=t?p(e):e;return(0,o.arrToBufArr)(i.RLP.encode(r))}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>@ethereumjs/util",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/node_modules/@ethereumjs/util/dist/account.js"}],[1876,{"./account":1875,"./bytes":1878,buffer:2970},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.Address=void 0;const i=e("./account"),a=e("./bytes");class n{constructor(e){if(20!==e.length)throw new Error("Invalid address length");this.buf=e}static zero(){return new n((0,a.zeros)(20))}static fromString(e){if(!(0,i.isValidAddress)(e))throw new Error("Invalid address");return new n((0,a.toBuffer)(e))}static fromPublicKey(e){if(!t.isBuffer(e))throw new Error("Public key should be Buffer");const r=(0,i.pubToAddress)(e);return new n(r)}static fromPrivateKey(e){if(!t.isBuffer(e))throw new Error("Private key should be Buffer");const r=(0,i.privateToAddress)(e);return new n(r)}static generate(e,t){if("bigint"!=typeof t)throw new Error("Expected nonce to be a bigint");return new n((0,i.generateAddress)(e.buf,(0,a.bigIntToBuffer)(t)))}static generate2(e,r,a){if(!t.isBuffer(r))throw new Error("Expected salt to be a Buffer");if(!t.isBuffer(a))throw new Error("Expected initCode to be a Buffer");return new n((0,i.generateAddress2)(e.buf,r,a))}equals(e){return this.buf.equals(e.buf)}isZero(){return this.equals(n.zero())}isPrecompileOrSystemAddress(){const e=(0,a.bufferToBigInt)(this.buf),t=BigInt(0),r=BigInt("0xffff");return e>=t&&e<=r}toString(){return"0x"+this.buf.toString("hex")}toBuffer(){return t.from(this.buf)}}r.Address=n}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>@ethereumjs/util",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/node_modules/@ethereumjs/util/dist/address.js"}],[1877,{events:3263},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.AsyncEventEmitter=void 0;const i=e("events");class a extends i.EventEmitter{emit(e,...t){let[r,i]=t;const a=this;let n=a._events[e]??[];return i===undefined&&"function"==typeof r&&(i=r,r=undefined),"newListener"!==e&&"removeListener"!==e||(r={event:r,fn:i},i=undefined),n=Array.isArray(n)?n:[n],async function(e,t,r){let i;for await(const a of t)try{a.length<2?a.call(e,r):await new Promise(((t,i)=>{a.call(e,r,(e=>{e?i(e):t()}))}))}catch(e){i=e}if(i)throw i}(a,n.slice(),r).then(i).catch(i),a.listenerCount(e)>0}once(e,t){const r=this;let i;if("function"!=typeof t)throw new TypeError("listener must be a function");return i=t.length>=2?function(a,n){r.removeListener(e,i),t(a,n)}:function(a){r.removeListener(e,i),t(a,i)},r.on(e,i),r}first(e,t){let r=this._events[e]??[];if("function"!=typeof t)throw new TypeError("listener must be a function");return Array.isArray(r)||(this._events[e]=r=[r]),r.unshift(t),this}before(e,t,r){return this.beforeOrAfter(e,t,r)}after(e,t,r){return this.beforeOrAfter(e,t,r,"after")}beforeOrAfter(e,t,r,i){let a,n,s=this._events[e]??[];const o="after"===i?1:0;if("function"!=typeof r)throw new TypeError("listener must be a function");if("function"!=typeof t)throw new TypeError("target must be a function");for(Array.isArray(s)||(this._events[e]=s=[s]),n=s.length,a=s.length;a--;)if(s[a]===t){n=a+o;break}return s.splice(n,0,r),this}on(e,t){return super.on(e,t)}addListener(e,t){return super.addListener(e,t)}prependListener(e,t){return super.prependListener(e,t)}prependOnceListener(e,t){return super.prependOnceListener(e,t)}removeAllListeners(e){return super.removeAllListeners(e)}removeListener(e,t){return super.removeListener(e,t)}eventNames(){return super.eventNames()}listeners(e){return super.listeners(e)}listenerCount(e){return super.listenerCount(e)}getMaxListeners(){return super.getMaxListeners()}setMaxListeners(e){return super.setMaxListeners(e)}}r.AsyncEventEmitter=a}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>@ethereumjs/util",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/node_modules/@ethereumjs/util/dist/asyncEventEmitter.js"}],[1878,{"./helpers":1881,"./internal":1883,buffer:2970},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.intToUnpaddedBuffer=r.bigIntToUnpaddedBuffer=r.bigIntToHex=r.bufArrToArr=r.arrToBufArr=r.validateNoLeadingZeroes=r.baToJSON=r.toUtf8=r.short=r.addHexPrefix=r.toUnsigned=r.fromSigned=r.bufferToInt=r.bigIntToBuffer=r.bufferToBigInt=r.bufferToHex=r.toBuffer=r.unpadHexString=r.unpadArray=r.unpadBuffer=r.setLengthRight=r.setLengthLeft=r.zeros=r.intToBuffer=r.intToHex=void 0;const i=e("./helpers"),a=e("./internal");r.intToHex=function(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Received an invalid integer type: ${e}`);return`0x${e.toString(16)}`};r.intToBuffer=function(e){const i=(0,r.intToHex)(e);return t.from((0,a.padToEven)(i.slice(2)),"hex")};r.zeros=function(e){return t.allocUnsafe(e).fill(0)};const n=function(e,t,i){const a=(0,r.zeros)(t);return i?e.length<t?(e.copy(a),a):e.slice(0,t):e.length<t?(e.copy(a,t-e.length),a):e.slice(-t)};r.setLengthLeft=function(e,t){return(0,i.assertIsBuffer)(e),n(e,t,!1)};r.setLengthRight=function(e,t){return(0,i.assertIsBuffer)(e),n(e,t,!0)};const s=function(e){let t=e[0];for(;e.length>0&&"0"===t.toString();)t=(e=e.slice(1))[0];return e};r.unpadBuffer=function(e){return(0,i.assertIsBuffer)(e),s(e)};r.unpadArray=function(e){return(0,i.assertIsArray)(e),s(e)};r.unpadHexString=function(e){return(0,i.assertIsHexString)(e),e=(0,a.stripHexPrefix)(e),"0x"+s(e)};r.toBuffer=function(e){if(null===e||e===undefined)return t.allocUnsafe(0);if(t.isBuffer(e))return t.from(e);if(Array.isArray(e)||e instanceof Uint8Array)return t.from(e);if("string"==typeof e){if(!(0,a.isHexString)(e))throw new Error(`Cannot convert string to buffer. toBuffer only supports 0x-prefixed hex strings and this string was given: ${e}`);return t.from((0,a.padToEven)((0,a.stripHexPrefix)(e)),"hex")}if("number"==typeof e)return(0,r.intToBuffer)(e);if("bigint"==typeof e){if(e<BigInt(0))throw new Error(`Cannot convert negative bigint to buffer. Given: ${e}`);let r=e.toString(16);return r.length%2&&(r="0"+r),t.from(r,"hex")}if(e.toArray)return t.from(e.toArray());if(e.toBuffer)return t.from(e.toBuffer());throw new Error("invalid type")};function o(e){const t=(0,r.bufferToHex)(e);return"0x"===t?BigInt(0):BigInt(t)}function l(e){return(0,r.toBuffer)("0x"+e.toString(16))}r.bufferToHex=function(e){return"0x"+(e=(0,r.toBuffer)(e)).toString("hex")},r.bufferToBigInt=o,r.bigIntToBuffer=l;r.bufferToInt=function(e){const t=Number(o(e));if(!Number.isSafeInteger(t))throw new Error("Number exceeds 53 bits");return t};r.fromSigned=function(e){return BigInt.asIntN(256,o(e))};r.toUnsigned=function(e){return l(BigInt.asUintN(256,e))};r.addHexPrefix=function(e){return"string"!=typeof e||(0,a.isHexPrefixed)(e)?e:"0x"+e},r.short=function(e,r=50){const i=t.isBuffer(e)?e.toString("hex"):e;return i.length<=r?i:i.slice(0,r)+"…"};r.toUtf8=function(e){if((e=(0,a.stripHexPrefix)(e)).length%2!=0)throw new Error("Invalid non-even hex string input for toUtf8() provided");return t.from(e.replace(/^(00)+|(00)+$/g,""),"hex").toString("utf8")};r.baToJSON=function(e){if(t.isBuffer(e))return`0x${e.toString("hex")}`;if(e instanceof Array){const t=[];for(let i=0;i<e.length;i++)t.push((0,r.baToJSON)(e[i]));return t}};r.validateNoLeadingZeroes=function(e){for(const[t,r]of Object.entries(e))if(r!==undefined&&r.length>0&&0===r[0])throw new Error(`${t} cannot have leading zeroes, received: ${r.toString("hex")}`)},r.arrToBufArr=function e(r){return Array.isArray(r)?r.map((t=>e(t))):t.from(r)},r.bufArrToArr=function e(t){return Array.isArray(t)?t.map((t=>e(t))):Uint8Array.from(t??[])};r.bigIntToHex=e=>"0x"+e.toString(16),r.bigIntToUnpaddedBuffer=function(e){return(0,r.unpadBuffer)(l(e))},r.intToUnpaddedBuffer=function(e){return(0,r.unpadBuffer)((0,r.intToBuffer)(e))}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>@ethereumjs/util",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/node_modules/@ethereumjs/util/dist/bytes.js"}],[1879,{buffer:2970,"ethereum-cryptography/secp256k1":3212},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.MAX_WITHDRAWALS_PER_PAYLOAD=r.RLP_EMPTY_STRING=r.KECCAK256_RLP=r.KECCAK256_RLP_S=r.KECCAK256_RLP_ARRAY=r.KECCAK256_RLP_ARRAY_S=r.KECCAK256_NULL=r.KECCAK256_NULL_S=r.TWO_POW256=r.SECP256K1_ORDER_DIV_2=r.SECP256K1_ORDER=r.MAX_INTEGER_BIGINT=r.MAX_INTEGER=r.MAX_UINT64=void 0;const i=e("buffer"),a=e("ethereum-cryptography/secp256k1");r.MAX_UINT64=BigInt("0xffffffffffffffff"),r.MAX_INTEGER=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),r.MAX_INTEGER_BIGINT=BigInt("115792089237316195423570985008687907853269984665640564039457584007913129639935"),r.SECP256K1_ORDER=a.secp256k1.CURVE.n,r.SECP256K1_ORDER_DIV_2=a.secp256k1.CURVE.n/BigInt(2),r.TWO_POW256=BigInt("0x10000000000000000000000000000000000000000000000000000000000000000"),r.KECCAK256_NULL_S="c5d2460186f7233c927e7db2dcc703c0e500b653ca82273b7bfad8045d85a470",r.KECCAK256_NULL=i.Buffer.from(r.KECCAK256_NULL_S,"hex"),r.KECCAK256_RLP_ARRAY_S="1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347",r.KECCAK256_RLP_ARRAY=i.Buffer.from(r.KECCAK256_RLP_ARRAY_S,"hex"),r.KECCAK256_RLP_S="56e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421",r.KECCAK256_RLP=i.Buffer.from(r.KECCAK256_RLP_S,"hex"),r.RLP_EMPTY_STRING=i.Buffer.from([128]),r.MAX_WITHDRAWALS_PER_PAYLOAD=16}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>@ethereumjs/util",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/node_modules/@ethereumjs/util/dist/constants.js"}],[188,{lodash:3770},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=e("lodash");r.default={version:71,async migrate(e){const t=(0,i.cloneDeep)(e);t.meta.version=71;const r=function(e){e.NotificationController&&(e.AnnouncementController={announcements:e.NotificationController.notifications},delete e.NotificationController);return e}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/071.js"}],[1880,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.compactBytesToNibbles=r.bytesToNibbles=r.nibblesToCompactBytes=r.nibblesToBytes=r.hasTerminator=void 0;r.hasTerminator=e=>e.length>0&&16===e[e.length-1];r.nibblesToBytes=(e,t)=>{for(let r=0,i=0;i<e.length;r+=1,i+=2)t[r]=e[i]<<4|e[i+1]};r.nibblesToCompactBytes=e=>{let t=0;(0,r.hasTerminator)(e)&&(t=1,e=e.subarray(0,e.length-1));const i=new Uint8Array(e.length/2+1);return i[0]=t<<5,1&~e.length||(i[0]|=16,i[0]|=e[0],e=e.subarray(1)),(0,r.nibblesToBytes)(e,i.subarray(1)),i};r.bytesToNibbles=e=>{const t=2*e.length+1,r=new Uint8Array(t);for(let t=0;t<e.length;t++){const i=e[t];r[2*t]=i/16,r[2*t+1]=i%16}return r[t-1]=16,r};r.compactBytesToNibbles=e=>{if(0===e.length)return e;let t=(0,r.bytesToNibbles)(e);t[0]<2&&(t=t.subarray(0,t.length-1));const i=2-(1&t[0]);return t.subarray(i)}}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>@ethereumjs/util",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/node_modules/@ethereumjs/util/dist/encoding.js"}],[1881,{"../../../../../../../../../is-buffer/index.js":3582,"./internal":1883},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.assertIsString=r.assertIsArray=r.assertIsBuffer=r.assertIsHexString=void 0;const i=e("./internal");r.assertIsHexString=function(e){if(!(0,i.isHexString)(e)){throw new Error(`This method only supports 0x-prefixed hex strings but input was: ${e}`)}};r.assertIsBuffer=function(e){if(!t.isBuffer(e)){throw new Error(`This method only supports Buffer but input was: ${e}`)}};r.assertIsArray=function(e){if(!Array.isArray(e)){throw new Error(`This method only supports number arrays but input was: ${e}`)}};r.assertIsString=function(e){if("string"!=typeof e){throw new Error(`This method only supports strings but input was: ${e}`)}}}).call(this)}).call(this,{isBuffer:e("../../../../../../../../../is-buffer/index.js")})}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>@ethereumjs/util",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/node_modules/@ethereumjs/util/dist/helpers.js"}],[1882,{"./account":1875,"./address":1876,"./asyncEventEmitter":1877,"./bytes":1878,"./constants":1879,"./encoding":1880,"./internal":1883,"./lock":1884,"./provider":1885,"./signature":1886,"./types":1887,"./units":1888,"./withdrawal":1889},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var i=this&&this.__createBinding||(Object.create?function(e,t,r,i){i===undefined&&(i=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,a)}:function(e,t,r,i){i===undefined&&(i=r),e[i]=t[r]}),a=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||i(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),r.toAscii=r.stripHexPrefix=r.padToEven=r.isHexString=r.isHexPrefixed=r.getKeys=r.getBinarySize=r.fromUtf8=r.fromAscii=r.arrayContainsArray=void 0,a(e("./constants"),r),a(e("./units"),r),a(e("./account"),r),a(e("./address"),r),a(e("./withdrawal"),r),a(e("./signature"),r),a(e("./bytes"),r),a(e("./types"),r),a(e("./encoding"),r),a(e("./asyncEventEmitter"),r);var n=e("./internal");Object.defineProperty(r,"arrayContainsArray",{enumerable:!0,get:function(){return n.arrayContainsArray}}),Object.defineProperty(r,"fromAscii",{enumerable:!0,get:function(){return n.fromAscii}}),Object.defineProperty(r,"fromUtf8",{enumerable:!0,get:function(){return n.fromUtf8}}),Object.defineProperty(r,"getBinarySize",{enumerable:!0,get:function(){return n.getBinarySize}}),Object.defineProperty(r,"getKeys",{enumerable:!0,get:function(){return n.getKeys}}),Object.defineProperty(r,"isHexPrefixed",{enumerable:!0,get:function(){return n.isHexPrefixed}}),Object.defineProperty(r,"isHexString",{enumerable:!0,get:function(){return n.isHexString}}),Object.defineProperty(r,"padToEven",{enumerable:!0,get:function(){return n.padToEven}}),Object.defineProperty(r,"stripHexPrefix",{enumerable:!0,get:function(){return n.stripHexPrefix}}),Object.defineProperty(r,"toAscii",{enumerable:!0,get:function(){return n.toAscii}}),a(e("./lock"),r),a(e("./provider"),r)}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>@ethereumjs/util",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/node_modules/@ethereumjs/util/dist/index.js"}],[1883,{buffer:2970},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(e){(function(){function t(e){if("string"!=typeof e)throw new Error("[isHexPrefixed] input must be type 'string', received type "+typeof e);return"0"===e[0]&&"x"===e[1]}Object.defineProperty(r,"__esModule",{value:!0}),r.isHexString=r.getKeys=r.fromAscii=r.fromUtf8=r.toAscii=r.arrayContainsArray=r.getBinarySize=r.padToEven=r.stripHexPrefix=r.isHexPrefixed=void 0,r.isHexPrefixed=t;function i(e){let t=e;if("string"!=typeof t)throw new Error("[padToEven] value must be type 'string', received "+typeof t);return t.length%2&&(t=`0${t}`),t}r.stripHexPrefix=e=>{if("string"!=typeof e)throw new Error("[stripHexPrefix] input must be type 'string', received "+typeof e);return t(e)?e.slice(2):e},r.padToEven=i,r.getBinarySize=function(t){if("string"!=typeof t)throw new Error("[getBinarySize] method requires input type 'string', received "+typeof t);return e.byteLength(t,"utf8")},r.arrayContainsArray=function(e,t,r){if(!0!==Array.isArray(e))throw new Error(`[arrayContainsArray] method requires input 'superset' to be an array, got type '${typeof e}'`);if(!0!==Array.isArray(t))throw new Error(`[arrayContainsArray] method requires input 'subset' to be an array, got type '${typeof t}'`);return t[!0===r?"some":"every"]((t=>e.indexOf(t)>=0))},r.toAscii=function(e){let t="",r=0;const i=e.length;for("0x"===e.substring(0,2)&&(r=2);r<i;r+=2){const i=parseInt(e.substr(r,2),16);t+=String.fromCharCode(i)}return t},r.fromUtf8=function(t){return`0x${i(e.from(t,"utf8").toString("hex")).replace(/^0+|0+$/g,"")}`},r.fromAscii=function(e){let t="";for(let r=0;r<e.length;r++){const i=e.charCodeAt(r).toString(16);t+=i.length<2?`0${i}`:i}return`0x${t}`},r.getKeys=function(e,t,r){if(!Array.isArray(e))throw new Error("[getKeys] method expects input 'params' to be an array, got "+typeof e);if("string"!=typeof t)throw new Error("[getKeys] method expects input 'key' to be type 'string', got "+typeof e);const i=[];for(let a=0;a<e.length;a++){let n=e[a][t];if(!0!==r||n){if("string"!=typeof n)throw new Error("invalid abi - expected type 'string', received "+typeof n)}else n="";i.push(n)}return i},r.isHexString=function(e,t){return!("string"!=typeof e||!e.match(/^0x[0-9A-Fa-f]*$/))&&!(void 0!==t&&t>0&&e.length!==2+2*t)}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>@ethereumjs/util",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/node_modules/@ethereumjs/util/dist/internal.js"}],[1884,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.Lock=void 0;r.Lock=class{constructor(){this.permits=1,this.promiseResolverQueue=[]}async acquire(){return this.permits>0?(this.permits-=1,Promise.resolve(!0)):new Promise((e=>this.promiseResolverQueue.push(e)))}release(){if(this.permits+=1,this.permits>1&&this.promiseResolverQueue.length>0)console.warn("Lock.permits should never be > 0 when there is someone waiting.");else if(1===this.permits&&this.promiseResolverQueue.length>0){this.permits-=1;const e=this.promiseResolverQueue.shift();e&&e(!0)}}}}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>@ethereumjs/util",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/node_modules/@ethereumjs/util/dist/lock.js"}],[1885,{"micro-ftch":3813},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getProvider=r.fetchFromProvider=void 0;const i=e("micro-ftch");r.fetchFromProvider=async(e,t)=>(await(0,i.default)(e,{headers:{"content-type":"application/json"},type:"json",data:{method:t.method,params:t.params,jsonrpc:"2.0",id:1}})).result;r.getProvider=e=>{if("string"==typeof e)return e;if(e?.connection?.url!==undefined)return e.connection.url;throw new Error("Must provide valid provider URL or Web3Provider")}}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>@ethereumjs/util",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/node_modules/@ethereumjs/util/dist/provider.js"}],[1886,{"./bytes":1878,"./constants":1879,"./helpers":1881,buffer:2970,"ethereum-cryptography/keccak":3195,"ethereum-cryptography/secp256k1":3212},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.hashPersonalMessage=r.isValidSignature=r.fromRpcSig=r.toCompactSig=r.toRpcSig=r.ecrecover=r.ecsign=void 0;const i=e("ethereum-cryptography/keccak"),a=e("ethereum-cryptography/secp256k1"),n=e("./bytes"),s=e("./constants"),o=e("./helpers");function l(e,t){return e===BigInt(0)||e===BigInt(1)?e:t===undefined?e-BigInt(27):e-(t*BigInt(2)+BigInt(35))}function c(e){return e===BigInt(0)||e===BigInt(1)}r.ecsign=function(e,r,i){const n=a.secp256k1.sign(e,r),s=n.toCompactRawBytes();return{r:t.from(s.slice(0,32)),s:t.from(s.slice(32,64)),v:i===undefined?BigInt(n.recovery+27):BigInt(n.recovery+35)+BigInt(i)*BigInt(2)}};r.ecrecover=function(e,r,i,s,o){const d=t.concat([(0,n.setLengthLeft)(i,32),(0,n.setLengthLeft)(s,32)],64),u=l(r,o);if(!c(u))throw new Error("Invalid signature v value");const h=a.secp256k1.Signature.fromCompact(d).addRecoveryBit(Number(u)).recoverPublicKey(e);return t.from(h.toRawBytes(!1).slice(1))};r.toRpcSig=function(e,r,i,a){if(!c(l(e,a)))throw new Error("Invalid signature v value");return(0,n.bufferToHex)(t.concat([(0,n.setLengthLeft)(r,32),(0,n.setLengthLeft)(i,32),(0,n.toBuffer)(e)]))};r.toCompactSig=function(e,r,i,a){if(!c(l(e,a)))throw new Error("Invalid signature v value");let s=i;return(e>BigInt(28)&&e%BigInt(2)===BigInt(1)||e===BigInt(1)||e===BigInt(28))&&(s=t.from(i),s[0]|=128),(0,n.bufferToHex)(t.concat([(0,n.setLengthLeft)(r,32),(0,n.setLengthLeft)(s,32)]))};r.fromRpcSig=function(e){const t=(0,n.toBuffer)(e);let r,i,a;if(t.length>=65)r=t.slice(0,32),i=t.slice(32,64),a=(0,n.bufferToBigInt)(t.slice(64));else{if(64!==t.length)throw new Error("Invalid signature length");r=t.slice(0,32),i=t.slice(32,64),a=BigInt((0,n.bufferToInt)(t.slice(32,33))>>7),i[0]&=127}return a<27&&(a+=BigInt(27)),{v:a,r:r,s:i}};r.isValidSignature=function(e,t,r,i=!0,a){if(32!==t.length||32!==r.length)return!1;if(!c(l(e,a)))return!1;const o=(0,n.bufferToBigInt)(t),d=(0,n.bufferToBigInt)(r);return!(o===BigInt(0)||o>=s.SECP256K1_ORDER||d===BigInt(0)||d>=s.SECP256K1_ORDER)&&!(i&&d>=s.SECP256K1_ORDER_DIV_2)};r.hashPersonalMessage=function(e){(0,o.assertIsBuffer)(e);const r=t.from(`Ethereum Signed Message:\n${e.length}`,"utf-8");return t.from((0,i.keccak256)(t.concat([r,e])))}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>@ethereumjs/util",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/node_modules/@ethereumjs/util/dist/signature.js"}],[1887,{"./bytes":1878,"./internal":1883},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.toType=r.TypeOutput=void 0;const i=e("./bytes"),a=e("./internal");var n;!function(e){e[e.Number=0]="Number",e[e.BigInt=1]="BigInt",e[e.Buffer=2]="Buffer",e[e.PrefixedHexString=3]="PrefixedHexString"}(n=r.TypeOutput||(r.TypeOutput={})),r.toType=function(e,t){if(null===e)return null;if(e===undefined)return undefined;if("string"==typeof e&&!(0,a.isHexString)(e))throw new Error(`A string must be provided with a 0x-prefix, given: ${e}`);if("number"==typeof e&&!Number.isSafeInteger(e))throw new Error("The provided number is greater than MAX_SAFE_INTEGER (please use an alternative input type)");const r=(0,i.toBuffer)(e);switch(t){case n.Buffer:return r;case n.BigInt:return(0,i.bufferToBigInt)(r);case n.Number:{const e=(0,i.bufferToBigInt)(r);if(e>BigInt(Number.MAX_SAFE_INTEGER))throw new Error("The provided number is greater than MAX_SAFE_INTEGER (please use an alternative output type)");return Number(e)}case n.PrefixedHexString:return(0,i.bufferToHex)(r);default:throw new Error("unknown outputType")}}}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>@ethereumjs/util",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/node_modules/@ethereumjs/util/dist/types.js"}],[1888,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.GWEI_TO_WEI=void 0,r.GWEI_TO_WEI=BigInt(1e9)}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>@ethereumjs/util",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/node_modules/@ethereumjs/util/dist/units.js"}],[1889,{"./address":1876,"./bytes":1878,"./types":1887,buffer:2970},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.Withdrawal=void 0;const i=e("./address"),a=e("./bytes"),n=e("./types");class s{constructor(e,t,r,i){this.index=e,this.validatorIndex=t,this.address=r,this.amount=i}static fromWithdrawalData(e){const{index:t,validatorIndex:r,address:a,amount:o}=e,l=(0,n.toType)(t,n.TypeOutput.BigInt),c=(0,n.toType)(r,n.TypeOutput.BigInt),d=new i.Address((0,n.toType)(a,n.TypeOutput.Buffer)),u=(0,n.toType)(o,n.TypeOutput.BigInt);return new s(l,c,d,u)}static fromValuesArray(e){if(4!==e.length)throw Error(`Invalid withdrawalArray length expected=4 actual=${e.length}`);const[t,r,i,a]=e;return s.fromWithdrawalData({index:t,validatorIndex:r,address:i,amount:a})}static toBufferArray(e){const{index:r,validatorIndex:a,address:s,amount:o}=e,l=(0,n.toType)(r,n.TypeOutput.BigInt)===BigInt(0)?t.alloc(0):(0,n.toType)(r,n.TypeOutput.Buffer),c=(0,n.toType)(a,n.TypeOutput.BigInt)===BigInt(0)?t.alloc(0):(0,n.toType)(a,n.TypeOutput.Buffer);let d;d=s instanceof i.Address?s.buf:(0,n.toType)(s,n.TypeOutput.Buffer);return[l,c,d,(0,n.toType)(o,n.TypeOutput.BigInt)===BigInt(0)?t.alloc(0):(0,n.toType)(o,n.TypeOutput.Buffer)]}raw(){return s.toBufferArray(this)}toValue(){return{index:this.index,validatorIndex:this.validatorIndex,address:this.address.buf,amount:this.amount}}toJSON(){return{index:(0,a.bigIntToHex)(this.index),validatorIndex:(0,a.bigIntToHex)(this.validatorIndex),address:"0x"+this.address.buf.toString("hex"),amount:(0,a.bigIntToHex)(this.amount)}}}r.Withdrawal=s}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>@ethereumjs/util",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/node_modules/@ethereumjs/util/dist/withdrawal.js"}],[189,{lodash:3770},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=e("lodash");r.default={version:72,async migrate(e){const t=(0,i.cloneDeep)(e);t.meta.version=72;const r=function(e){const t=(null==e?void 0:e.PreferencesController)||{};return{...e,PreferencesController:{...t,knownMethodData:{}}}}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/072.js"}],[1890,{"./chunk-UJFCPTF3.js":1892,"./chunk-Z4BLTVTB.js":1893},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var i,a,n,s,o=e("./chunk-UJFCPTF3.js"),l=e("./chunk-Z4BLTVTB.js");i=new WeakMap,a=new WeakMap,n=new WeakMap,s=new WeakMap,r.ControllerMessenger=class{constructor(){l.__privateAdd.call(void 0,this,i,new Map),l.__privateAdd.call(void 0,this,a,new Map),l.__privateAdd.call(void 0,this,n,new Map),l.__privateAdd.call(void 0,this,s,new Map)}registerActionHandler(e,t){if(l.__privateGet.call(void 0,this,i).has(e))throw new Error(`A handler for ${e} has already been registered`);l.__privateGet.call(void 0,this,i).set(e,t)}unregisterActionHandler(e){l.__privateGet.call(void 0,this,i).delete(e)}clearActions(){l.__privateGet.call(void 0,this,i).clear()}call(e,...t){const r=l.__privateGet.call(void 0,this,i).get(e);if(!r)throw new Error(`A handler for ${e} has not been registered`);return r(...t)}registerInitialEventPayload({eventType:e,getPayload:t}){l.__privateGet.call(void 0,this,n).set(e,t)}publish(e,...t){const r=l.__privateGet.call(void 0,this,a).get(e);if(r)for(const[e,i]of r.entries())try{if(i){const r=l.__privateGet.call(void 0,this,s).get(e),a=i(...t);a!==r&&(l.__privateGet.call(void 0,this,s).set(e,a),e(a,r))}else e(...t)}catch(e){setTimeout((()=>{throw e}))}}subscribe(e,t,r){let i=l.__privateGet.call(void 0,this,a).get(e);if(i||(i=new Map,l.__privateGet.call(void 0,this,a).set(e,i)),i.set(t,r),r){const i=l.__privateGet.call(void 0,this,n).get(e);if(i){const e=r(...i());l.__privateGet.call(void 0,this,s).set(t,e)}}}unsubscribe(e,t){const r=l.__privateGet.call(void 0,this,a).get(e);if(!r||!r.has(t))throw new Error(`Subscription not found for event: ${e}`);r.get(t)&&l.__privateGet.call(void 0,this,s).delete(t),r.delete(t)}clearEventSubscriptions(e){l.__privateGet.call(void 0,this,a).delete(e)}clearSubscriptions(){l.__privateGet.call(void 0,this,a).clear()}getRestricted({name:e,allowedActions:t,allowedEvents:r}){return new(0,o.RestrictedControllerMessenger)({controllerMessenger:this,name:e,allowedActions:t,allowedEvents:r})}}}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>@metamask/base-controller",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/node_modules/@metamask/base-controller/dist/chunk-G42723LG.js"}],[1891,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var i=class{constructor(e={},t={}){this.defaultConfig={},this.defaultState={},this.disabled=!1,this.name="BaseController",this.internalConfig=this.defaultConfig,this.internalState=this.defaultState,this.internalListeners=[],this.initialState=t,this.initialConfig=e}initialize(){return this.internalState=this.defaultState,this.internalConfig=this.defaultConfig,this.configure(this.initialConfig),this.update(this.initialState),this}get config(){return this.internalConfig}get state(){return this.internalState}configure(e,t=!1,r=!0){if(r){this.internalConfig=t?e:Object.assign(this.internalConfig,e);for(const e of Object.keys(this.internalConfig)){const t=this.internalConfig[e];void 0!==t&&(this[e]=t)}}else for(const t of Object.keys(e))if(void 0!==this.internalConfig[t]){const r=e[t];this.internalConfig[t]=r,this[t]=r}}notify(){this.disabled||this.internalListeners.forEach((e=>{e(this.internalState)}))}subscribe(e){this.internalListeners.push(e)}unsubscribe(e){const t=this.internalListeners.findIndex((t=>e===t));return t>-1&&this.internalListeners.splice(t,1),t>-1}update(e,t=!1){this.internalState=t?Object.assign({},e):Object.assign({},this.internalState,e),this.notify()}},a=i;r.BaseControllerV1=i,r.BaseControllerV1_default=a}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>@metamask/base-controller",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/node_modules/@metamask/base-controller/dist/chunk-NINOM2XQ.js"}],[1892,{"./chunk-Z4BLTVTB.js":1893},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var i,a,n,s,o,l,c,d,u,h,p=e("./chunk-Z4BLTVTB.js");i=new WeakMap,a=new WeakMap,n=new WeakMap,s=new WeakMap,o=new WeakSet,l=function(e){const t=p.__privateGet.call(void 0,this,s);return p.__privateMethod.call(void 0,this,u,h).call(this,e)||null!==t&&t.includes(e)},c=new WeakSet,d=function(e){const t=p.__privateGet.call(void 0,this,n);return p.__privateMethod.call(void 0,this,u,h).call(this,e)||null!==t&&t.includes(e)},u=new WeakSet,h=function(e){return e.startsWith(`${p.__privateGet.call(void 0,this,a)}:`)},r.RestrictedControllerMessenger=class{constructor({controllerMessenger:e,name:t,allowedActions:r,allowedEvents:l}){p.__privateAdd.call(void 0,this,o),p.__privateAdd.call(void 0,this,c),p.__privateAdd.call(void 0,this,u),p.__privateAdd.call(void 0,this,i,void 0),p.__privateAdd.call(void 0,this,a,void 0),p.__privateAdd.call(void 0,this,n,void 0),p.__privateAdd.call(void 0,this,s,void 0),p.__privateSet.call(void 0,this,i,e),p.__privateSet.call(void 0,this,a,t),p.__privateSet.call(void 0,this,n,r),p.__privateSet.call(void 0,this,s,l)}registerActionHandler(e,t){if(!p.__privateMethod.call(void 0,this,u,h).call(this,e))throw new Error(`Only allowed registering action handlers prefixed by '${p.__privateGet.call(void 0,this,a)}:'`);p.__privateGet.call(void 0,this,i).registerActionHandler(e,t)}unregisterActionHandler(e){if(!p.__privateMethod.call(void 0,this,u,h).call(this,e))throw new Error(`Only allowed unregistering action handlers prefixed by '${p.__privateGet.call(void 0,this,a)}:'`);p.__privateGet.call(void 0,this,i).unregisterActionHandler(e)}call(e,...t){if(!p.__privateMethod.call(void 0,this,c,d).call(this,e))throw new Error(`Action missing from allow list: ${e}`);return p.__privateGet.call(void 0,this,i).call(e,...t)}registerInitialEventPayload({eventType:e,getPayload:t}){if(!p.__privateMethod.call(void 0,this,u,h).call(this,e))throw new Error(`Only allowed publishing events prefixed by '${p.__privateGet.call(void 0,this,a)}:'`);p.__privateGet.call(void 0,this,i).registerInitialEventPayload({eventType:e,getPayload:t})}publish(e,...t){if(!p.__privateMethod.call(void 0,this,u,h).call(this,e))throw new Error(`Only allowed publishing events prefixed by '${p.__privateGet.call(void 0,this,a)}:'`);p.__privateGet.call(void 0,this,i).publish(e,...t)}subscribe(e,t,r){if(!p.__privateMethod.call(void 0,this,o,l).call(this,e))throw new Error(`Event missing from allow list: ${e}`);return r?p.__privateGet.call(void 0,this,i).subscribe(e,t,r):p.__privateGet.call(void 0,this,i).subscribe(e,t)}unsubscribe(e,t){if(!p.__privateMethod.call(void 0,this,o,l).call(this,e))throw new Error(`Event missing from allow list: ${e}`);p.__privateGet.call(void 0,this,i).unsubscribe(e,t)}clearEventSubscriptions(e){if(!p.__privateMethod.call(void 0,this,u,h).call(this,e))throw new Error(`Only allowed clearing events prefixed by '${p.__privateGet.call(void 0,this,a)}:'`);p.__privateGet.call(void 0,this,i).clearEventSubscriptions(e)}}}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>@metamask/base-controller",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/node_modules/@metamask/base-controller/dist/chunk-UJFCPTF3.js"}],[1893,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var i=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)};r.__privateGet=(e,t,r)=>(i(e,t,"read from private field"),r?r.call(e):t.get(e)),r.__privateAdd=(e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)},r.__privateSet=(e,t,r,a)=>(i(e,t,"write to private field"),a?a.call(e,r):t.set(e,r),r),r.__privateMethod=(e,t,r)=>(i(e,t,"access private method"),r)}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>@metamask/base-controller",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/node_modules/@metamask/base-controller/dist/chunk-Z4BLTVTB.js"}],[1894,{"./chunk-Z4BLTVTB.js":1893,immer:3574},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var i,a=e("./chunk-Z4BLTVTB.js"),n=e("immer");n.enablePatches.call(void 0);function s(e,t,r){return Object.keys(e).reduce(((i,a)=>{try{const n=t[a];if(!n)throw new Error(`No metadata found for '${String(a)}'`);const s=n[r],o=e[a];return"function"==typeof s?i[a]=s(o):s&&(i[a]=o),i}catch(e){return setTimeout((()=>{throw e})),i}}),{})}i=new WeakMap,r.BaseController=class{constructor({messenger:e,metadata:t,name:r,state:s}){a.__privateAdd.call(void 0,this,i,void 0),this.messagingSystem=e,this.name=r,a.__privateSet.call(void 0,this,i,n.freeze.call(void 0,s,!0)),this.metadata=t,this.messagingSystem.registerActionHandler(`${r}:getState`,(()=>this.state)),this.messagingSystem.registerInitialEventPayload({eventType:`${r}:stateChange`,getPayload:()=>[this.state,[]]})}get state(){return a.__privateGet.call(void 0,this,i)}set state(e){throw new Error("Controller state cannot be directly mutated; use 'update' method instead.")}update(e){const[t,r,s]=n.produceWithPatches.call(void 0,a.__privateGet.call(void 0,this,i),e);return a.__privateSet.call(void 0,this,i,t),this.messagingSystem.publish(`${this.name}:stateChange`,t,r),{nextState:t,patches:r,inversePatches:s}}applyPatches(e){const t=n.applyPatches.call(void 0,a.__privateGet.call(void 0,this,i),e);a.__privateSet.call(void 0,this,i,t),this.messagingSystem.publish(`${this.name}:stateChange`,t,e)}destroy(){this.messagingSystem.clearEventSubscriptions(`${this.name}:stateChange`)}},r.getAnonymizedState=function(e,t){return s(e,t,"anonymous")},r.getPersistentState=function(e,t){return s(e,t,"persist")}}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>@metamask/base-controller",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/node_modules/@metamask/base-controller/dist/chunk-ZNOPSWMU.js"}],[1895,{"./chunk-G42723LG.js":1890,"./chunk-NINOM2XQ.js":1891,"./chunk-UJFCPTF3.js":1892,"./chunk-Z4BLTVTB.js":1893,"./chunk-ZNOPSWMU.js":1894},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var i=e("./chunk-NINOM2XQ.js"),a=e("./chunk-ZNOPSWMU.js"),n=e("./chunk-G42723LG.js"),s=e("./chunk-UJFCPTF3.js");e("./chunk-Z4BLTVTB.js"),r.BaseController=a.BaseController,r.BaseControllerV1=i.BaseControllerV1,r.ControllerMessenger=n.ControllerMessenger,r.RestrictedControllerMessenger=s.RestrictedControllerMessenger,r.getAnonymizedState=a.getAnonymizedState,r.getPersistentState=a.getPersistentState}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>@metamask/base-controller",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/node_modules/@metamask/base-controller/dist/index.js"}],[1896,{"./chunk-RKVNLW2C.js":1900,"@ethereumjs/util":1882,"@metamask/ethjs-unit":1334,"@metamask/utils":2253,"bn.js":2922,buffer:2970,"eth-ens-namehash":3160,"fast-deep-equal":3291},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var a=e("./chunk-RKVNLW2C.js"),n=e("@ethereumjs/util"),s=e("@metamask/ethjs-unit"),o=e("@metamask/utils"),l=i(e("bn.js")),c=i(e("eth-ens-namehash")),d=i(e("fast-deep-equal")),u=new Error("timeout"),h=["__proto__","constructor","prototype"];function p(e){return e?new(0,l.default)(o.remove0x.call(void 0,e),16):new(0,l.default)(0)}async function m(e,t){const r=await fetch(e,t);if(!r.ok)throw new Error(`Fetch failed with status '${r.status}' for request '${String(e)}'`);return r}async function f(e,t){const r=await m(e,t);return await r.json()}r.PROTOTYPE_POLLUTION_BLOCKLIST=h,r.isSafeDynamicKey=function(e){return"string"==typeof e&&!h.some((t=>e===t))},r.isSafeChainId=function(e){if(!o.isHexString.call(void 0,e))return!1;const t=Number.parseInt(e,o.isStrictHexString.call(void 0,e)?16:10);return Number.isSafeInteger(t)&&t>0&&t<=a.MAX_SAFE_CHAIN_ID},r.BNToHex=function(e){return o.add0x.call(void 0,e.toString(16))},r.fractionBN=function(e,t,r){const i=new(0,l.default)(t),a=new(0,l.default)(r);return e.mul(i).div(a)},r.gweiDecToWEIBN=function(e){if(Number.isNaN(e))return new(0,l.default)(0);const t=e.toString().split("."),r=t[0]||"0";let i=t[1]||"";if(!i)return s.toWei.call(void 0,r,"gwei");if(i.length<=9)return s.toWei.call(void 0,`${r}.${i}`,"gwei");const a=i.slice(9)[0];i=i.slice(0,9);let n=s.toWei.call(void 0,`${r}.${i}`,"gwei");return Number(a)>=5&&(n=n.add(new(0,l.default)(1))),n},r.weiHexToGweiDec=function(e){const t=new(0,l.default)(o.remove0x.call(void 0,e),16);return s.fromWei.call(void 0,t,"gwei")},r.getBuyURL=function(e="1",t,r=5){switch(e){case"1":return`https://buy.coinbase.com/?code=9ec56d01-7e81-5017-930c-513daa27bb6a&amount=${r}&address=${t}&crypto_currency=ETH`;case"5":return"https://goerli-faucet.slock.it/";case"11155111":return"https://sepoliafaucet.net/";default:return}},r.hexToBN=p,r.hexToText=function(e){try{const r=o.remove0x.call(void 0,e);return t.from(r,"hex").toString("utf8")}catch(t){return e}},r.fromHex=function(e){return l.default.isBN(e)?e:new(0,l.default)(p(e).toString(10))},r.toHex=function(e){return"string"==typeof e&&o.isStrictHexString.call(void 0,e)?e:`0x${l.default.isBN(e)?e.toString(16):new(0,l.default)(e.toString(),10).toString(16)}`},r.safelyExecute=async function(e,t=!1){try{return await e()}catch(e){return void(t&&console.error(e))}},r.safelyExecuteWithTimeout=async function(e,t=!1,r=500){try{return await Promise.race([e(),new Promise(((e,t)=>setTimeout((()=>{t(u)}),r)))])}catch(e){return void(t&&console.error(e))}},r.toChecksumHexAddress=function(e){if("string"!=typeof e)return e;const t=o.add0x.call(void 0,e);return o.isHexString.call(void 0,t)?n.toChecksumAddress.call(void 0,t):t},r.isValidHexAddress=function(e,{allowNonPrefixed:t=!0}={}){const r=t?o.add0x.call(void 0,e):e;return!!o.isStrictHexString.call(void 0,r)&&n.isValidAddress.call(void 0,r)},r.isSmartContractCode=function(e){return!!e&&("0x"!==e&&"0x0"!==e)},r.successfulFetch=m,r.handleFetch=f,r.fetchWithErrorHandling=async function({url:e,options:t,timeout:r,errorCodesToCatch:i}){let a;try{a=r?Promise.race([await f(e,t),new Promise(((e,t)=>setTimeout((()=>{t(u)}),r)))]):await f(e,t)}catch(e){!function(e,t=[]){if(!e)return;if(!(e instanceof Error))throw e;if(!t.some((t=>e.message.includes(`Fetch failed with status '${t}'`)))&&!e.message.includes("Failed to fetch")&&e!==u)throw e;console.error(e)}(e,i)}return a},r.timeoutFetch=async function(e,t,r=500){return Promise.race([m(e,t),new Promise(((e,t)=>setTimeout((()=>{t(u)}),r)))])},r.normalizeEnsName=function(e){if("."===e)return e;if(e&&"string"==typeof e)try{const t=c.default.normalize(e.trim());if(t.match(/^(([\w\d-]+)\.)*[\w\d-]{7,}\.(eth|test)$/u))return t}catch(e){}return null},r.query=function(e,t,r=[]){return new Promise(((i,a)=>{const n=(e,t)=>{e?a(e):i(t)};t in e&&"function"==typeof e[t]?e[t](...r,n):e.sendAsync({method:t,params:r},n)}))},r.convertHexToDecimal=(e="0x0")=>o.isStrictHexString.call(void 0,e)?parseInt(e,16):Number(e)?Number(e):0,r.isPlainObject=function(e){return Boolean(e)&&"object"==typeof e&&!Array.isArray(e)},r.isNonEmptyArray=function(e){return Array.isArray(e)&&e.length>0},r.isValidJson=function(e){try{return d.default.call(void 0,e,JSON.parse(JSON.stringify(e)))}catch(e){return!1}}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>@metamask/controller-utils",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/node_modules/@metamask/controller-utils/dist/chunk-7C4YHS6A.js"}],[1897,{"@metamask/utils":2253},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var i=e("@metamask/utils"),a=i.createProjectLogger.call(void 0,"controller-utils");r.createModuleLogger=i.createModuleLogger,r.projectLogger=a}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>@metamask/controller-utils",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/node_modules/@metamask/controller-utils/dist/chunk-DBJSLKNR.js"}],[1898,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var i={mainnet:"mainnet",goerli:"goerli",sepolia:"sepolia","linea-goerli":"linea-goerli","linea-sepolia":"linea-sepolia","linea-mainnet":"linea-mainnet"},a={...i,rpc:"rpc"};var n=(e=>(e.Mainnet="mainnet",e.Goerli="goerli",e.Sepolia="sepolia",e.LineaGoerli="linea-goerli",e.LineaSepolia="linea-sepolia",e.LineaMainnet="linea-mainnet",e.Aurora="aurora",e))(n||{}),s={mainnet:"0x1",goerli:"0x5",sepolia:"0xaa36a7",aurora:"0x4e454152","linea-goerli":"0xe704","linea-sepolia":"0xe705","linea-mainnet":"0xe708"},o=(e=>(e.mainnet="ETH",e.goerli="GoerliETH",e.sepolia="SepoliaETH",e["linea-goerli"]="LineaETH",e["linea-sepolia"]="LineaETH",e["linea-mainnet"]="ETH",e.rpc="",e))(o||{});r.InfuraNetworkType=i,r.NetworkType=a,r.isNetworkType=function(e){return Object.values(a).includes(e)},r.isInfuraNetworkType=function(e){return Object.keys(i).includes(e)},r.BuiltInNetworkName=n,r.ChainId=s,r.NetworksTicker=o}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>@metamask/controller-utils",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/node_modules/@metamask/controller-utils/dist/chunk-LGGBBU6G.js"}],[1899,{"./chunk-DBJSLKNR.js":1897,"@metamask/utils":2253,"@spruceid/siwe-parser":2468,buffer:2970},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0});var i=e("./chunk-DBJSLKNR.js"),a=e("@metamask/utils"),n=e("@spruceid/siwe-parser"),s=i.createModuleLogger.call(void 0,i.projectLogger,"detect-siwe");function o(e){try{const i="string"!=typeof(r=e)?r:a.remove0x.call(void 0,r),n=t.from(i,"hex");return 32===n.length?e:n.toString("utf8")}catch(t){return s(t),e}var r}var l={"http:":"80","https:":"443"},c=(e,t)=>e.match(/^[^/:]*:\/\//u)?new URL(e):new URL(`${t}//${e}`);r.parseDomainParts=c,r.isValidSIWEOrigin=e=>{try{const{origin:t,siwe:r}=e;if(!t||!r?.parsedMessage?.domain)return!1;const i=new URL(t),a=c(r.parsedMessage.domain,i.protocol);return 0===a.hostname.localeCompare(i.hostname,void 0,{sensitivity:"accent"})&&(""!==a.port&&a.port!==i.port?""===i.port&&a.port===l[i.protocol]:""===a.username||a.username===i.username)}catch(e){return s(e),!1}},r.detectSIWE=e=>{try{const{data:t}=e,r=o(t);return{isSIWEMessage:!0,parsedMessage:new(0,n.ParsedMessage)(r)}}catch(e){return{isSIWEMessage:!1,parsedMessage:null}}}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>@metamask/controller-utils",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/node_modules/@metamask/controller-utils/dist/chunk-M6G3ISXG.js"}],[19,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.isFeatureAnnouncementRead=function(e,t){if(t.includes(e.id))return!0;return function(e){const t=Date.now()-e.getTime();return t/i>=90}(new Date(e.createdAt))},r.processFeatureAnnouncement=function(e){return{type:e.type,id:e.data.id,createdAt:new Date(e.createdAt).toISOString(),data:e.data,isRead:!1}};const i=864e5}}},{package:"$root$",file:"app/scripts/controllers/metamask-notifications/processors/process-feature-announcement.ts"}],[190,{lodash:3770},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=e("lodash");r.default={version:73,async migrate(e){const t=(0,i.cloneDeep)(e);t.meta.version=73;const r=function(e){const t=(null==e?void 0:e.PreferencesController)||{};return{...e,PreferencesController:{...t,knownMethodData:{}}}}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/073.js"}],[1900,{"./chunk-LGGBBU6G.js":1898},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var i=e("./chunk-LGGBBU6G.js"),a={[i.NetworkType.goerli]:{chainId:i.ChainId.goerli,ticker:"GoerliETH",rpcPrefs:{blockExplorerUrl:`https://${i.NetworkType.goerli}.etherscan.io`}},[i.NetworkType.sepolia]:{chainId:i.ChainId.sepolia,ticker:"SepoliaETH",rpcPrefs:{blockExplorerUrl:`https://${i.NetworkType.sepolia}.etherscan.io`}},[i.NetworkType.mainnet]:{chainId:i.ChainId.mainnet,ticker:"ETH",rpcPrefs:{blockExplorerUrl:"https://etherscan.io"}},[i.NetworkType["linea-goerli"]]:{chainId:i.ChainId["linea-goerli"],ticker:"LineaETH",rpcPrefs:{blockExplorerUrl:"https://goerli.lineascan.build"}},[i.NetworkType["linea-sepolia"]]:{chainId:i.ChainId["linea-sepolia"],ticker:"LineaETH",rpcPrefs:{blockExplorerUrl:"https://sepolia.lineascan.build"}},[i.NetworkType["linea-mainnet"]]:{chainId:i.ChainId["linea-mainnet"],ticker:"ETH",rpcPrefs:{blockExplorerUrl:"https://lineascan.build"}},[i.NetworkType.rpc]:{chainId:void 0,blockExplorerUrl:void 0,ticker:void 0,rpcPrefs:void 0}},n=(e=>(e.AddEthereumChain="wallet_addEthereumChain",e.ConnectAccounts="connect_accounts",e.EthDecrypt="eth_decrypt",e.EthGetEncryptionPublicKey="eth_getEncryptionPublicKey",e.EthSignTypedData="eth_signTypedData",e.PersonalSign="personal_sign",e.ResultError="result_error",e.ResultSuccess="result_success",e.SnapDialogAlert="snap_dialog:alert",e.SnapDialogConfirmation="snap_dialog:confirmation",e.SnapDialogPrompt="snap_dialog:prompt",e.SwitchEthereumChain="wallet_switchEthereumChain",e.Transaction="transaction",e.Unlock="unlock",e.WalletConnect="wallet_connect",e.WalletRequestPermissions="wallet_requestPermissions",e.WatchAsset="wallet_watchAsset",e))(n||{}),s={[i.ChainId.goerli]:"goerli",[i.ChainId.sepolia]:"sepolia",[i.ChainId.mainnet]:"mainnet",[i.ChainId["linea-goerli"]]:"linea-goerli",[i.ChainId["linea-sepolia"]]:"linea-sepolia",[i.ChainId["linea-mainnet"]]:"linea-mainnet",[i.ChainId.aurora]:"aurora"};r.RPC="rpc",r.FALL_BACK_VS_CURRENCY="ETH",r.IPFS_DEFAULT_GATEWAY_URL="https://cloudflare-ipfs.com/ipfs/",r.GANACHE_CHAIN_ID="0x539",r.MAX_SAFE_CHAIN_ID=0xfffffffffffec,r.ERC721="ERC721",r.ERC1155="ERC1155",r.ERC20="ERC20",r.ERC721_INTERFACE_ID="0x80ac58cd",r.ERC721_METADATA_INTERFACE_ID="0x5b5e139f",r.ERC721_ENUMERABLE_INTERFACE_ID="0x780e9d63",r.ERC1155_INTERFACE_ID="0xd9b67a26",r.ERC1155_METADATA_URI_INTERFACE_ID="0x0e89341c",r.ERC1155_TOKEN_RECEIVER_INTERFACE_ID="0x4e2312e0",r.GWEI="gwei",r.ASSET_TYPES={NATIVE:"NATIVE",TOKEN:"TOKEN",NFT:"NFT",UNKNOWN:"UNKNOWN"},r.TESTNET_TICKER_SYMBOLS={GOERLI:"GoerliETH",SEPOLIA:"SepoliaETH",LINEA_GOERLI:"LineaETH",LINEA_SEPOLIA:"LineaETH"},r.BUILT_IN_NETWORKS=a,r.OPENSEA_PROXY_URL="https://proxy.api.cx.metamask.io/opensea/v1/api/v2",r.NFT_API_BASE_URL="https://nft.api.cx.metamask.io",r.NFT_API_VERSION="1",r.NFT_API_TIMEOUT=15e3,r.ORIGIN_METAMASK="metamask",r.ApprovalType=n,r.CHAIN_ID_TO_ETHERS_NETWORK_NAME_MAP=s}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>@metamask/controller-utils",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/node_modules/@metamask/controller-utils/dist/chunk-RKVNLW2C.js"}],[1901,{"./chunk-7C4YHS6A.js":1896,"./chunk-DBJSLKNR.js":1897,"./chunk-LGGBBU6G.js":1898,"./chunk-M6G3ISXG.js":1899,"./chunk-RKVNLW2C.js":1900},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var i=e("./chunk-M6G3ISXG.js");e("./chunk-DBJSLKNR.js");var a=e("./chunk-7C4YHS6A.js"),n=e("./chunk-RKVNLW2C.js"),s=e("./chunk-LGGBBU6G.js");r.ASSET_TYPES=n.ASSET_TYPES,r.ApprovalType=n.ApprovalType,r.BNToHex=a.BNToHex,r.BUILT_IN_NETWORKS=n.BUILT_IN_NETWORKS,r.BuiltInNetworkName=s.BuiltInNetworkName,r.CHAIN_ID_TO_ETHERS_NETWORK_NAME_MAP=n.CHAIN_ID_TO_ETHERS_NETWORK_NAME_MAP,r.ChainId=s.ChainId,r.ERC1155=n.ERC1155,r.ERC1155_INTERFACE_ID=n.ERC1155_INTERFACE_ID,r.ERC1155_METADATA_URI_INTERFACE_ID=n.ERC1155_METADATA_URI_INTERFACE_ID,r.ERC1155_TOKEN_RECEIVER_INTERFACE_ID=n.ERC1155_TOKEN_RECEIVER_INTERFACE_ID,r.ERC20=n.ERC20,r.ERC721=n.ERC721,r.ERC721_ENUMERABLE_INTERFACE_ID=n.ERC721_ENUMERABLE_INTERFACE_ID,r.ERC721_INTERFACE_ID=n.ERC721_INTERFACE_ID,r.ERC721_METADATA_INTERFACE_ID=n.ERC721_METADATA_INTERFACE_ID,r.FALL_BACK_VS_CURRENCY=n.FALL_BACK_VS_CURRENCY,r.GANACHE_CHAIN_ID=n.GANACHE_CHAIN_ID,r.GWEI=n.GWEI,r.IPFS_DEFAULT_GATEWAY_URL=n.IPFS_DEFAULT_GATEWAY_URL,r.InfuraNetworkType=s.InfuraNetworkType,r.MAX_SAFE_CHAIN_ID=n.MAX_SAFE_CHAIN_ID,r.NFT_API_BASE_URL=n.NFT_API_BASE_URL,r.NFT_API_TIMEOUT=n.NFT_API_TIMEOUT,r.NFT_API_VERSION=n.NFT_API_VERSION,r.NetworkType=s.NetworkType,r.NetworksTicker=s.NetworksTicker,r.OPENSEA_PROXY_URL=n.OPENSEA_PROXY_URL,r.ORIGIN_METAMASK=n.ORIGIN_METAMASK,r.RPC=n.RPC,r.TESTNET_TICKER_SYMBOLS=n.TESTNET_TICKER_SYMBOLS,r.convertHexToDecimal=a.convertHexToDecimal,r.detectSIWE=i.detectSIWE,r.fetchWithErrorHandling=a.fetchWithErrorHandling,r.fractionBN=a.fractionBN,r.fromHex=a.fromHex,r.getBuyURL=a.getBuyURL,r.gweiDecToWEIBN=a.gweiDecToWEIBN,r.handleFetch=a.handleFetch,r.hexToBN=a.hexToBN,r.hexToText=a.hexToText,r.isInfuraNetworkType=s.isInfuraNetworkType,r.isNetworkType=s.isNetworkType,r.isNonEmptyArray=a.isNonEmptyArray,r.isPlainObject=a.isPlainObject,r.isSafeChainId=a.isSafeChainId,r.isSafeDynamicKey=a.isSafeDynamicKey,r.isSmartContractCode=a.isSmartContractCode,r.isValidHexAddress=a.isValidHexAddress,r.isValidJson=a.isValidJson,r.isValidSIWEOrigin=i.isValidSIWEOrigin,r.normalizeEnsName=a.normalizeEnsName,r.parseDomainParts=i.parseDomainParts,r.query=a.query,r.safelyExecute=a.safelyExecute,r.safelyExecuteWithTimeout=a.safelyExecuteWithTimeout,r.successfulFetch=a.successfulFetch,r.timeoutFetch=a.timeoutFetch,r.toChecksumHexAddress=a.toChecksumHexAddress,r.toHex=a.toHex,r.weiHexToGweiDec=a.weiHexToGweiDec}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>@metamask/controller-utils",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/node_modules/@metamask/controller-utils/dist/index.js"}],[1902,{"./Semaphore":1903,tslib:4295},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var i=e("tslib"),a=e("./Semaphore"),n=function(){function e(e){this._semaphore=new a.default(1,e)}return e.prototype.acquire=function(){return i.__awaiter(this,arguments,void 0,(function(e){var t;return void 0===e&&(e=0),i.__generator(this,(function(r){switch(r.label){case 0:return[4,this._semaphore.acquire(1,e)];case 1:return t=r.sent(),[2,t[1]]}}))}))},e.prototype.runExclusive=function(e,t){return void 0===t&&(t=0),this._semaphore.runExclusive((function(){return e()}),1,t)},e.prototype.isLocked=function(){return this._semaphore.isLocked()},e.prototype.waitForUnlock=function(e){return void 0===e&&(e=0),this._semaphore.waitForUnlock(1,e)},e.prototype.release=function(){this._semaphore.isLocked()&&this._semaphore.release()},e.prototype.cancel=function(){return this._semaphore.cancel()},e}();r.default=n}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>async-mutex",file:"node_modules/@metamask/smart-transactions-controller/node_modules/async-mutex/lib/Mutex.js"}],[1903,{"./errors":1904,tslib:4295},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var i=e("tslib"),a=e("./errors"),n=function(){function e(e,t){void 0===t&&(t=a.E_CANCELED),this._value=e,this._cancelError=t,this._queue=[],this._weightedWaiters=[]}return e.prototype.acquire=function(e,t){var r=this;if(void 0===e&&(e=1),void 0===t&&(t=0),e<=0)throw new Error("invalid weight ".concat(e,": must be positive"));return new Promise((function(i,a){var n={resolve:i,reject:a,weight:e,priority:t},o=s(r._queue,(function(e){return t<=e.priority}));-1===o&&e<=r._value?r._dispatchItem(n):r._queue.splice(o+1,0,n)}))},e.prototype.runExclusive=function(e){return i.__awaiter(this,arguments,void 0,(function(e,t,r){var a,n,s;return void 0===t&&(t=1),void 0===r&&(r=0),i.__generator(this,(function(i){switch(i.label){case 0:return[4,this.acquire(t,r)];case 1:a=i.sent(),n=a[0],s=a[1],i.label=2;case 2:return i.trys.push([2,,4,5]),[4,e(n)];case 3:return[2,i.sent()];case 4:return s(),[7];case 5:return[2]}}))}))},e.prototype.waitForUnlock=function(e,t){var r=this;if(void 0===e&&(e=1),void 0===t&&(t=0),e<=0)throw new Error("invalid weight ".concat(e,": must be positive"));return this._couldLockImmediately(e,t)?Promise.resolve():new Promise((function(i){var a,n,o;r._weightedWaiters[e-1]||(r._weightedWaiters[e-1]=[]),a=r._weightedWaiters[e-1],n={resolve:i,priority:t},o=s(a,(function(e){return n.priority<=e.priority})),a.splice(o+1,0,n)}))},e.prototype.isLocked=function(){return this._value<=0},e.prototype.getValue=function(){return this._value},e.prototype.setValue=function(e){this._value=e,this._dispatchQueue()},e.prototype.release=function(e){if(void 0===e&&(e=1),e<=0)throw new Error("invalid weight ".concat(e,": must be positive"));this._value+=e,this._dispatchQueue()},e.prototype.cancel=function(){var e=this;this._queue.forEach((function(t){return t.reject(e._cancelError)})),this._queue=[]},e.prototype._dispatchQueue=function(){for(this._drainUnlockWaiters();this._queue.length>0&&this._queue[0].weight<=this._value;)this._dispatchItem(this._queue.shift()),this._drainUnlockWaiters()},e.prototype._dispatchItem=function(e){var t=this._value;this._value-=e.weight,e.resolve([t,this._newReleaser(e.weight)])},e.prototype._newReleaser=function(e){var t=this,r=!1;return function(){r||(r=!0,t.release(e))}},e.prototype._drainUnlockWaiters=function(){if(0===this._queue.length)for(var e=this._value;e>0;e--){(r=this._weightedWaiters[e-1])&&(r.forEach((function(e){return e.resolve()})),this._weightedWaiters[e-1]=[])}else{var t=this._queue[0].priority;for(e=this._value;e>0;e--){var r;if(r=this._weightedWaiters[e-1]){var i=r.findIndex((function(e){return e.priority<=t}));(-1===i?r:r.splice(0,i)).forEach((function(e){return e.resolve()}))}}}},e.prototype._couldLockImmediately=function(e,t){return(0===this._queue.length||this._queue[0].priority<t)&&e<=this._value},e}();function s(e,t){for(var r=e.length-1;r>=0;r--)if(t(e[r]))return r;return-1}r.default=n}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>async-mutex",file:"node_modules/@metamask/smart-transactions-controller/node_modules/async-mutex/lib/Semaphore.js"}],[1904,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.E_CANCELED=r.E_ALREADY_LOCKED=r.E_TIMEOUT=void 0,r.E_TIMEOUT=new Error("timeout while waiting for mutex to become available"),r.E_ALREADY_LOCKED=new Error("mutex already locked"),r.E_CANCELED=new Error("request for lock canceled")}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>async-mutex",file:"node_modules/@metamask/smart-transactions-controller/node_modules/async-mutex/lib/errors.js"}],[1905,{"./Mutex":1902,"./Semaphore":1903,"./errors":1904,"./tryAcquire":1906,"./withTimeout":1907,tslib:4295},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.tryAcquire=r.withTimeout=r.Semaphore=r.Mutex=void 0;var i=e("tslib"),a=e("./Mutex");Object.defineProperty(r,"Mutex",{enumerable:!0,get:function(){return a.default}});var n=e("./Semaphore");Object.defineProperty(r,"Semaphore",{enumerable:!0,get:function(){return n.default}});var s=e("./withTimeout");Object.defineProperty(r,"withTimeout",{enumerable:!0,get:function(){return s.withTimeout}});var o=e("./tryAcquire");Object.defineProperty(r,"tryAcquire",{enumerable:!0,get:function(){return o.tryAcquire}}),i.__exportStar(e("./errors"),r)}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>async-mutex",file:"node_modules/@metamask/smart-transactions-controller/node_modules/async-mutex/lib/index.js"}],[1906,{"./errors":1904,"./withTimeout":1907},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.tryAcquire=void 0;var i=e("./errors"),a=e("./withTimeout");r.tryAcquire=function(e,t){return void 0===t&&(t=i.E_ALREADY_LOCKED),(0,a.withTimeout)(e,0,t)}}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>async-mutex",file:"node_modules/@metamask/smart-transactions-controller/node_modules/async-mutex/lib/tryAcquire.js"}],[1907,{"./errors":1904,tslib:4295},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.withTimeout=void 0;var i=e("tslib"),a=e("./errors");function n(e){return e.getValue!==undefined}r.withTimeout=function(e,t,r){var s=this;return void 0===r&&(r=a.E_TIMEOUT),{acquire:function(a,o){var l;if(n(e)?l=a:(l=undefined,o=a),l!==undefined&&l<=0)throw new Error("invalid weight ".concat(l,": must be positive"));return new Promise((function(a,c){return i.__awaiter(s,void 0,void 0,(function(){var s,d,u,h;return i.__generator(this,(function(i){switch(i.label){case 0:s=!1,d=setTimeout((function(){s=!0,c(r)}),t),i.label=1;case 1:return i.trys.push([1,3,,4]),[4,n(e)?e.acquire(l,o):e.acquire(o)];case 2:return u=i.sent(),s?(Array.isArray(u)?u[1]:u)():(clearTimeout(d),a(u)),[3,4];case 3:return h=i.sent(),s||(clearTimeout(d),c(h)),[3,4];case 4:return[2]}}))}))}))},runExclusive:function(e,t,r){return i.__awaiter(this,void 0,void 0,(function(){var a,n;return i.__generator(this,(function(i){switch(i.label){case 0:a=function(){return undefined},i.label=1;case 1:return i.trys.push([1,,7,8]),[4,this.acquire(t,r)];case 2:return n=i.sent(),Array.isArray(n)?(a=n[1],[4,e(n[0])]):[3,4];case 3:return[2,i.sent()];case 4:return a=n,[4,e()];case 5:return[2,i.sent()];case 6:return[3,8];case 7:return a(),[7];case 8:return[2]}}))}))},release:function(t){e.release(t)},cancel:function(){return e.cancel()},waitForUnlock:function(i,a){var s;if(n(e)?s=i:(s=undefined,a=i),s!==undefined&&s<=0)throw new Error("invalid weight ".concat(s,": must be positive"));return new Promise((function(i,o){var l=setTimeout((function(){return o(r)}),t);(n(e)?e.waitForUnlock(s,a):e.waitForUnlock(a)).then((function(){clearTimeout(l),i()}))}))},isLocked:function(){return e.isLocked()},getValue:function(){return e.getValue()},setValue:function(t){return e.setValue(t)}}}}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>async-mutex",file:"node_modules/@metamask/smart-transactions-controller/node_modules/async-mutex/lib/withTimeout.js"}],[1908,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){!function(e){var r,i=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,a=Math.ceil,n=Math.floor,s="[BigNumber Error] ",o=s+"Number primitive has more than 15 significant digits: ",l=1e14,c=14,d=9007199254740991,u=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],h=1e7,p=1e9;function m(e){var t=0|e;return e>0||e===t?t:t-1}function f(e){for(var t,r,i=1,a=e.length,n=e[0]+"";i<a;){for(t=e[i++]+"",r=c-t.length;r--;t="0"+t);n+=t}for(a=n.length;48===n.charCodeAt(--a););return n.slice(0,a+1||1)}function v(e,t){var r,i,a=e.c,n=t.c,s=e.s,o=t.s,l=e.e,c=t.e;if(!s||!o)return null;if(r=a&&!a[0],i=n&&!n[0],r||i)return r?i?0:-o:s;if(s!=o)return s;if(r=s<0,i=l==c,!a||!n)return i?0:!a^r?1:-1;if(!i)return l>c^r?1:-1;for(o=(l=a.length)<(c=n.length)?l:c,s=0;s<o;s++)if(a[s]!=n[s])return a[s]>n[s]^r?1:-1;return l==c?0:l>c^r?1:-1}function g(e,t,r,i){if(e<t||e>r||e!==n(e))throw Error(s+(i||"Argument")+("number"==typeof e?e<t||e>r?" out of range: ":" not an integer: ":" not a primitive number: ")+String(e))}function _(e){var t=e.c.length-1;return m(e.e/c)==t&&e.c[t]%2!=0}function k(e,t){return(e.length>1?e.charAt(0)+"."+e.slice(1):e)+(t<0?"e":"e+")+t}function y(e,t,r){var i,a;if(t<0){for(a=r+".";++t;a+=r);e=a+e}else if(++t>(i=e.length)){for(a=r,t-=i;--t;a+=r);e+=a}else t<i&&(e=e.slice(0,t)+"."+e.slice(t));return e}r=function e(t){var r,w,T,b,E,S,P,C,A,I,j=$.prototype={constructor:$,toString:null,valueOf:null},M=new $(1),x=20,N=4,O=-7,R=21,G=-1e7,L=1e7,B=!1,F=1,D=0,U={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:" ",suffix:""},H="0123456789abcdefghijklmnopqrstuvwxyz",W=!0;function $(e,t){var r,a,s,l,u,h,p,m,f=this;if(!(f instanceof $))return new $(e,t);if(null==t){if(e&&!0===e._isBigNumber)return f.s=e.s,void(!e.c||e.e>L?f.c=f.e=null:e.e<G?f.c=[f.e=0]:(f.e=e.e,f.c=e.c.slice()));if((h="number"==typeof e)&&0*e==0){if(f.s=1/e<0?(e=-e,-1):1,e===~~e){for(l=0,u=e;u>=10;u/=10,l++);return void(l>L?f.c=f.e=null:(f.e=l,f.c=[e]))}m=String(e)}else{if(!i.test(m=String(e)))return T(f,m,h);f.s=45==m.charCodeAt(0)?(m=m.slice(1),-1):1}(l=m.indexOf("."))>-1&&(m=m.replace(".","")),(u=m.search(/e/i))>0?(l<0&&(l=u),l+=+m.slice(u+1),m=m.substring(0,u)):l<0&&(l=m.length)}else{if(g(t,2,H.length,"Base"),10==t&&W)return Y(f=new $(e),x+f.e+1,N);if(m=String(e),h="number"==typeof e){if(0*e!=0)return T(f,m,h,t);if(f.s=1/e<0?(m=m.slice(1),-1):1,$.DEBUG&&m.replace(/^0\.0*|\./,"").length>15)throw Error(o+e)}else f.s=45===m.charCodeAt(0)?(m=m.slice(1),-1):1;for(r=H.slice(0,t),l=u=0,p=m.length;u<p;u++)if(r.indexOf(a=m.charAt(u))<0){if("."==a){if(u>l){l=p;continue}}else if(!s&&(m==m.toUpperCase()&&(m=m.toLowerCase())||m==m.toLowerCase()&&(m=m.toUpperCase()))){s=!0,u=-1,l=0;continue}return T(f,String(e),h,t)}h=!1,(l=(m=w(m,t,10,f.s)).indexOf("."))>-1?m=m.replace(".",""):l=m.length}for(u=0;48===m.charCodeAt(u);u++);for(p=m.length;48===m.charCodeAt(--p););if(m=m.slice(u,++p)){if(p-=u,h&&$.DEBUG&&p>15&&(e>d||e!==n(e)))throw Error(o+f.s*e);if((l=l-u-1)>L)f.c=f.e=null;else if(l<G)f.c=[f.e=0];else{if(f.e=l,f.c=[],u=(l+1)%c,l<0&&(u+=c),u<p){for(u&&f.c.push(+m.slice(0,u)),p-=c;u<p;)f.c.push(+m.slice(u,u+=c));u=c-(m=m.slice(u)).length}else u-=p;for(;u--;m+="0");f.c.push(+m)}}else f.c=[f.e=0]}function V(e,t,r,i){var a,n,s,o,l;if(null==r?r=N:g(r,0,8),!e.c)return e.toString();if(a=e.c[0],s=e.e,null==t)l=f(e.c),l=1==i||2==i&&(s<=O||s>=R)?k(l,s):y(l,s,"0");else if(n=(e=Y(new $(e),t,r)).e,o=(l=f(e.c)).length,1==i||2==i&&(t<=n||n<=O)){for(;o<t;l+="0",o++);l=k(l,n)}else if(t-=s,l=y(l,n,"0"),n+1>o){if(--t>0)for(l+=".";t--;l+="0");}else if((t+=n-o)>0)for(n+1==o&&(l+=".");t--;l+="0");return e.s<0&&a?"-"+l:l}function K(e,t){for(var r,i,a=1,n=new $(e[0]);a<e.length;a++)(!(i=new $(e[a])).s||(r=v(n,i))===t||0===r&&n.s===t)&&(n=i);return n}function q(e,t,r){for(var i=1,a=t.length;!t[--a];t.pop());for(a=t[0];a>=10;a/=10,i++);return(r=i+r*c-1)>L?e.c=e.e=null:r<G?e.c=[e.e=0]:(e.e=r,e.c=t),e}function Y(e,t,r,i){var s,o,d,h,p,m,f,v=e.c,g=u;if(v){e:{for(s=1,h=v[0];h>=10;h/=10,s++);if((o=t-s)<0)o+=c,d=t,p=v[m=0],f=n(p/g[s-d-1]%10);else if((m=a((o+1)/c))>=v.length){if(!i)break e;for(;v.length<=m;v.push(0));p=f=0,s=1,d=(o%=c)-c+1}else{for(p=h=v[m],s=1;h>=10;h/=10,s++);f=(d=(o%=c)-c+s)<0?0:n(p/g[s-d-1]%10)}if(i=i||t<0||null!=v[m+1]||(d<0?p:p%g[s-d-1]),i=r<4?(f||i)&&(0==r||r==(e.s<0?3:2)):f>5||5==f&&(4==r||i||6==r&&(o>0?d>0?p/g[s-d]:0:v[m-1])%10&1||r==(e.s<0?8:7)),t<1||!v[0])return v.length=0,i?(t-=e.e+1,v[0]=g[(c-t%c)%c],e.e=-t||0):v[0]=e.e=0,e;if(0==o?(v.length=m,h=1,m--):(v.length=m+1,h=g[c-o],v[m]=d>0?n(p/g[s-d]%g[d])*h:0),i)for(;;){if(0==m){for(o=1,d=v[0];d>=10;d/=10,o++);for(d=v[0]+=h,h=1;d>=10;d/=10,h++);o!=h&&(e.e++,v[0]==l&&(v[0]=1));break}if(v[m]+=h,v[m]!=l)break;v[m--]=0,h=1}for(o=v.length;0===v[--o];v.pop());}e.e>L?e.c=e.e=null:e.e<G&&(e.c=[e.e=0])}return e}function X(e){var t,r=e.e;return null===r?e.toString():(t=f(e.c),t=r<=O||r>=R?k(t,r):y(t,r,"0"),e.s<0?"-"+t:t)}return $.clone=e,$.ROUND_UP=0,$.ROUND_DOWN=1,$.ROUND_CEIL=2,$.ROUND_FLOOR=3,$.ROUND_HALF_UP=4,$.ROUND_HALF_DOWN=5,$.ROUND_HALF_EVEN=6,$.ROUND_HALF_CEIL=7,$.ROUND_HALF_FLOOR=8,$.EUCLID=9,$.config=$.set=function(e){var t,r;if(null!=e){if("object"!=typeof e)throw Error(s+"Object expected: "+e);if(e.hasOwnProperty(t="DECIMAL_PLACES")&&(g(r=e[t],0,p,t),x=r),e.hasOwnProperty(t="ROUNDING_MODE")&&(g(r=e[t],0,8,t),N=r),e.hasOwnProperty(t="EXPONENTIAL_AT")&&((r=e[t])&&r.pop?(g(r[0],-p,0,t),g(r[1],0,p,t),O=r[0],R=r[1]):(g(r,-p,p,t),O=-(R=r<0?-r:r))),e.hasOwnProperty(t="RANGE"))if((r=e[t])&&r.pop)g(r[0],-p,-1,t),g(r[1],1,p,t),G=r[0],L=r[1];else{if(g(r,-p,p,t),!r)throw Error(s+t+" cannot be zero: "+r);G=-(L=r<0?-r:r)}if(e.hasOwnProperty(t="CRYPTO")){if((r=e[t])!==!!r)throw Error(s+t+" not true or false: "+r);if(r){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw B=!r,Error(s+"crypto unavailable");B=r}else B=r}if(e.hasOwnProperty(t="MODULO_MODE")&&(g(r=e[t],0,9,t),F=r),e.hasOwnProperty(t="POW_PRECISION")&&(g(r=e[t],0,p,t),D=r),e.hasOwnProperty(t="FORMAT")){if("object"!=typeof(r=e[t]))throw Error(s+t+" not an object: "+r);U=r}if(e.hasOwnProperty(t="ALPHABET")){if("string"!=typeof(r=e[t])||/^.?$|[+\-.\s]|(.).*\1/.test(r))throw Error(s+t+" invalid: "+r);W="0123456789"==r.slice(0,10),H=r}}return{DECIMAL_PLACES:x,ROUNDING_MODE:N,EXPONENTIAL_AT:[O,R],RANGE:[G,L],CRYPTO:B,MODULO_MODE:F,POW_PRECISION:D,FORMAT:U,ALPHABET:H}},$.isBigNumber=function(e){if(!e||!0!==e._isBigNumber)return!1;if(!$.DEBUG)return!0;var t,r,i=e.c,a=e.e,o=e.s;e:if("[object Array]"=={}.toString.call(i)){if((1===o||-1===o)&&a>=-p&&a<=p&&a===n(a)){if(0===i[0]){if(0===a&&1===i.length)return!0;break e}if((t=(a+1)%c)<1&&(t+=c),String(i[0]).length==t){for(t=0;t<i.length;t++)if((r=i[t])<0||r>=l||r!==n(r))break e;if(0!==r)return!0}}}else if(null===i&&null===a&&(null===o||1===o||-1===o))return!0;throw Error(s+"Invalid BigNumber: "+e)},$.maximum=$.max=function(){return K(arguments,-1)},$.minimum=$.min=function(){return K(arguments,1)},$.random=(b=9007199254740992,E=Math.random()*b&2097151?function(){return n(Math.random()*b)}:function(){return 8388608*(1073741824*Math.random()|0)+(8388608*Math.random()|0)},function(e){var t,r,i,o,l,d=0,h=[],m=new $(M);if(null==e?e=x:g(e,0,p),o=a(e/c),B)if(crypto.getRandomValues){for(t=crypto.getRandomValues(new Uint32Array(o*=2));d<o;)(l=131072*t[d]+(t[d+1]>>>11))>=9e15?(r=crypto.getRandomValues(new Uint32Array(2)),t[d]=r[0],t[d+1]=r[1]):(h.push(l%1e14),d+=2);d=o/2}else{if(!crypto.randomBytes)throw B=!1,Error(s+"crypto unavailable");for(t=crypto.randomBytes(o*=7);d<o;)(l=281474976710656*(31&t[d])+1099511627776*t[d+1]+4294967296*t[d+2]+16777216*t[d+3]+(t[d+4]<<16)+(t[d+5]<<8)+t[d+6])>=9e15?crypto.randomBytes(7).copy(t,d):(h.push(l%1e14),d+=7);d=o/7}if(!B)for(;d<o;)(l=E())<9e15&&(h[d++]=l%1e14);for(o=h[--d],e%=c,o&&e&&(l=u[c-e],h[d]=n(o/l)*l);0===h[d];h.pop(),d--);if(d<0)h=[i=0];else{for(i=-1;0===h[0];h.splice(0,1),i-=c);for(d=1,l=h[0];l>=10;l/=10,d++);d<c&&(i-=c-d)}return m.e=i,m.c=h,m}),$.sum=function(){for(var e=1,t=arguments,r=new $(t[0]);e<t.length;)r=r.plus(t[e++]);return r},w=function(){var e="0123456789";function t(e,t,r,i){for(var a,n,s=[0],o=0,l=e.length;o<l;){for(n=s.length;n--;s[n]*=t);for(s[0]+=i.indexOf(e.charAt(o++)),a=0;a<s.length;a++)s[a]>r-1&&(null==s[a+1]&&(s[a+1]=0),s[a+1]+=s[a]/r|0,s[a]%=r)}return s.reverse()}return function(i,a,n,s,o){var l,c,d,u,h,p,m,v,g=i.indexOf("."),_=x,k=N;for(g>=0&&(u=D,D=0,i=i.replace(".",""),p=(v=new $(a)).pow(i.length-g),D=u,v.c=t(y(f(p.c),p.e,"0"),10,n,e),v.e=v.c.length),d=u=(m=t(i,a,n,o?(l=H,e):(l=e,H))).length;0==m[--u];m.pop());if(!m[0])return l.charAt(0);if(g<0?--d:(p.c=m,p.e=d,p.s=s,m=(p=r(p,v,_,k,n)).c,h=p.r,d=p.e),g=m[c=d+_+1],u=n/2,h=h||c<0||null!=m[c+1],h=k<4?(null!=g||h)&&(0==k||k==(p.s<0?3:2)):g>u||g==u&&(4==k||h||6==k&&1&m[c-1]||k==(p.s<0?8:7)),c<1||!m[0])i=h?y(l.charAt(1),-_,l.charAt(0)):l.charAt(0);else{if(m.length=c,h)for(--n;++m[--c]>n;)m[c]=0,c||(++d,m=[1].concat(m));for(u=m.length;!m[--u];);for(g=0,i="";g<=u;i+=l.charAt(m[g++]));i=y(i,d,l.charAt(0))}return i}}(),r=function(){function e(e,t,r){var i,a,n,s,o=0,l=e.length,c=t%h,d=t/h|0;for(e=e.slice();l--;)o=((a=c*(n=e[l]%h)+(i=d*n+(s=e[l]/h|0)*c)%h*h+o)/r|0)+(i/h|0)+d*s,e[l]=a%r;return o&&(e=[o].concat(e)),e}function t(e,t,r,i){var a,n;if(r!=i)n=r>i?1:-1;else for(a=n=0;a<r;a++)if(e[a]!=t[a]){n=e[a]>t[a]?1:-1;break}return n}function r(e,t,r,i){for(var a=0;r--;)e[r]-=a,a=e[r]<t[r]?1:0,e[r]=a*i+e[r]-t[r];for(;!e[0]&&e.length>1;e.splice(0,1));}return function(i,a,s,o,d){var u,h,p,f,v,g,_,k,y,w,T,b,E,S,P,C,A,I=i.s==a.s?1:-1,j=i.c,M=a.c;if(!(j&&j[0]&&M&&M[0]))return new $(i.s&&a.s&&(j?!M||j[0]!=M[0]:M)?j&&0==j[0]||!M?0*I:I/0:NaN);for(y=(k=new $(I)).c=[],I=s+(h=i.e-a.e)+1,d||(d=l,h=m(i.e/c)-m(a.e/c),I=I/c|0),p=0;M[p]==(j[p]||0);p++);if(M[p]>(j[p]||0)&&h--,I<0)y.push(1),f=!0;else{for(S=j.length,C=M.length,p=0,I+=2,(v=n(d/(M[0]+1)))>1&&(M=e(M,v,d),j=e(j,v,d),C=M.length,S=j.length),E=C,T=(w=j.slice(0,C)).length;T<C;w[T++]=0);A=M.slice(),A=[0].concat(A),P=M[0],M[1]>=d/2&&P++;do{if(v=0,(u=t(M,w,C,T))<0){if(b=w[0],C!=T&&(b=b*d+(w[1]||0)),(v=n(b/P))>1)for(v>=d&&(v=d-1),_=(g=e(M,v,d)).length,T=w.length;1==t(g,w,_,T);)v--,r(g,C<_?A:M,_,d),_=g.length,u=1;else 0==v&&(u=v=1),_=(g=M.slice()).length;if(_<T&&(g=[0].concat(g)),r(w,g,T,d),T=w.length,-1==u)for(;t(M,w,C,T)<1;)v++,r(w,C<T?A:M,T,d),T=w.length}else 0===u&&(v++,w=[0]);y[p++]=v,w[0]?w[T++]=j[E]||0:(w=[j[E]],T=1)}while((E++<S||null!=w[0])&&I--);f=null!=w[0],y[0]||y.splice(0,1)}if(d==l){for(p=1,I=y[0];I>=10;I/=10,p++);Y(k,s+(k.e=p+h*c-1)+1,o,f)}else k.e=h,k.r=+f;return k}}(),S=/^(-?)0([xbo])(?=\w[\w.]*$)/i,P=/^([^.]+)\.$/,C=/^\.([^.]+)$/,A=/^-?(Infinity|NaN)$/,I=/^\s*\+(?=[\w.])|^\s+|\s+$/g,T=function(e,t,r,i){var a,n=r?t:t.replace(I,"");if(A.test(n))e.s=isNaN(n)?null:n<0?-1:1;else{if(!r&&(n=n.replace(S,(function(e,t,r){return a="x"==(r=r.toLowerCase())?16:"b"==r?2:8,i&&i!=a?e:t})),i&&(a=i,n=n.replace(P,"$1").replace(C,"0.$1")),t!=n))return new $(n,a);if($.DEBUG)throw Error(s+"Not a"+(i?" base "+i:"")+" number: "+t);e.s=null}e.c=e.e=null},j.absoluteValue=j.abs=function(){var e=new $(this);return e.s<0&&(e.s=1),e},j.comparedTo=function(e,t){return v(this,new $(e,t))},j.decimalPlaces=j.dp=function(e,t){var r,i,a,n=this;if(null!=e)return g(e,0,p),null==t?t=N:g(t,0,8),Y(new $(n),e+n.e+1,t);if(!(r=n.c))return null;if(i=((a=r.length-1)-m(this.e/c))*c,a=r[a])for(;a%10==0;a/=10,i--);return i<0&&(i=0),i},j.dividedBy=j.div=function(e,t){return r(this,new $(e,t),x,N)},j.dividedToIntegerBy=j.idiv=function(e,t){return r(this,new $(e,t),0,1)},j.exponentiatedBy=j.pow=function(e,t){var r,i,o,l,d,u,h,p,m=this;if((e=new $(e)).c&&!e.isInteger())throw Error(s+"Exponent not an integer: "+X(e));if(null!=t&&(t=new $(t)),d=e.e>14,!m.c||!m.c[0]||1==m.c[0]&&!m.e&&1==m.c.length||!e.c||!e.c[0])return p=new $(Math.pow(+X(m),d?e.s*(2-_(e)):+X(e))),t?p.mod(t):p;if(u=e.s<0,t){if(t.c?!t.c[0]:!t.s)return new $(NaN);(i=!u&&m.isInteger()&&t.isInteger())&&(m=m.mod(t))}else{if(e.e>9&&(m.e>0||m.e<-1||(0==m.e?m.c[0]>1||d&&m.c[1]>=24e7:m.c[0]<8e13||d&&m.c[0]<=9999975e7)))return l=m.s<0&&_(e)?-0:0,m.e>-1&&(l=1/l),new $(u?1/l:l);D&&(l=a(D/c+2))}for(d?(r=new $(.5),u&&(e.s=1),h=_(e)):h=(o=Math.abs(+X(e)))%2,p=new $(M);;){if(h){if(!(p=p.times(m)).c)break;l?p.c.length>l&&(p.c.length=l):i&&(p=p.mod(t))}if(o){if(0===(o=n(o/2)))break;h=o%2}else if(Y(e=e.times(r),e.e+1,1),e.e>14)h=_(e);else{if(0===(o=+X(e)))break;h=o%2}m=m.times(m),l?m.c&&m.c.length>l&&(m.c.length=l):i&&(m=m.mod(t))}return i?p:(u&&(p=M.div(p)),t?p.mod(t):l?Y(p,D,N,undefined):p)},j.integerValue=function(e){var t=new $(this);return null==e?e=N:g(e,0,8),Y(t,t.e+1,e)},j.isEqualTo=j.eq=function(e,t){return 0===v(this,new $(e,t))},j.isFinite=function(){return!!this.c},j.isGreaterThan=j.gt=function(e,t){return v(this,new $(e,t))>0},j.isGreaterThanOrEqualTo=j.gte=function(e,t){return 1===(t=v(this,new $(e,t)))||0===t},j.isInteger=function(){return!!this.c&&m(this.e/c)>this.c.length-2},j.isLessThan=j.lt=function(e,t){return v(this,new $(e,t))<0},j.isLessThanOrEqualTo=j.lte=function(e,t){return-1===(t=v(this,new $(e,t)))||0===t},j.isNaN=function(){return!this.s},j.isNegative=function(){return this.s<0},j.isPositive=function(){return this.s>0},j.isZero=function(){return!!this.c&&0==this.c[0]},j.minus=function(e,t){var r,i,a,n,s=this,o=s.s;if(t=(e=new $(e,t)).s,!o||!t)return new $(NaN);if(o!=t)return e.s=-t,s.plus(e);var d=s.e/c,u=e.e/c,h=s.c,p=e.c;if(!d||!u){if(!h||!p)return h?(e.s=-t,e):new $(p?s:NaN);if(!h[0]||!p[0])return p[0]?(e.s=-t,e):new $(h[0]?s:3==N?-0:0)}if(d=m(d),u=m(u),h=h.slice(),o=d-u){for((n=o<0)?(o=-o,a=h):(u=d,a=p),a.reverse(),t=o;t--;a.push(0));a.reverse()}else for(i=(n=(o=h.length)<(t=p.length))?o:t,o=t=0;t<i;t++)if(h[t]!=p[t]){n=h[t]<p[t];break}if(n&&(a=h,h=p,p=a,e.s=-e.s),(t=(i=p.length)-(r=h.length))>0)for(;t--;h[r++]=0);for(t=l-1;i>o;){if(h[--i]<p[i]){for(r=i;r&&!h[--r];h[r]=t);--h[r],h[i]+=l}h[i]-=p[i]}for(;0==h[0];h.splice(0,1),--u);return h[0]?q(e,h,u):(e.s=3==N?-1:1,e.c=[e.e=0],e)},j.modulo=j.mod=function(e,t){var i,a,n=this;return e=new $(e,t),!n.c||!e.s||e.c&&!e.c[0]?new $(NaN):!e.c||n.c&&!n.c[0]?new $(n):(9==F?(a=e.s,e.s=1,i=r(n,e,0,3),e.s=a,i.s*=a):i=r(n,e,0,F),(e=n.minus(i.times(e))).c[0]||1!=F||(e.s=n.s),e)},j.multipliedBy=j.times=function(e,t){var r,i,a,n,s,o,d,u,p,f,v,g,_,k,y,w=this,T=w.c,b=(e=new $(e,t)).c;if(!(T&&b&&T[0]&&b[0]))return!w.s||!e.s||T&&!T[0]&&!b||b&&!b[0]&&!T?e.c=e.e=e.s=null:(e.s*=w.s,T&&b?(e.c=[0],e.e=0):e.c=e.e=null),e;for(i=m(w.e/c)+m(e.e/c),e.s*=w.s,(d=T.length)<(f=b.length)&&(_=T,T=b,b=_,a=d,d=f,f=a),a=d+f,_=[];a--;_.push(0));for(k=l,y=h,a=f;--a>=0;){for(r=0,v=b[a]%y,g=b[a]/y|0,n=a+(s=d);n>a;)r=((u=v*(u=T[--s]%y)+(o=g*u+(p=T[s]/y|0)*v)%y*y+_[n]+r)/k|0)+(o/y|0)+g*p,_[n--]=u%k;_[n]=r}return r?++i:_.splice(0,1),q(e,_,i)},j.negated=function(){var e=new $(this);return e.s=-e.s||null,e},j.plus=function(e,t){var r,i=this,a=i.s;if(t=(e=new $(e,t)).s,!a||!t)return new $(NaN);if(a!=t)return e.s=-t,i.minus(e);var n=i.e/c,s=e.e/c,o=i.c,d=e.c;if(!n||!s){if(!o||!d)return new $(a/0);if(!o[0]||!d[0])return d[0]?e:new $(o[0]?i:0*a)}if(n=m(n),s=m(s),o=o.slice(),a=n-s){for(a>0?(s=n,r=d):(a=-a,r=o),r.reverse();a--;r.push(0));r.reverse()}for((a=o.length)-(t=d.length)<0&&(r=d,d=o,o=r,t=a),a=0;t;)a=(o[--t]=o[t]+d[t]+a)/l|0,o[t]=l===o[t]?0:o[t]%l;return a&&(o=[a].concat(o),++s),q(e,o,s)},j.precision=j.sd=function(e,t){var r,i,a,n=this;if(null!=e&&e!==!!e)return g(e,1,p),null==t?t=N:g(t,0,8),Y(new $(n),e,t);if(!(r=n.c))return null;if(i=(a=r.length-1)*c+1,a=r[a]){for(;a%10==0;a/=10,i--);for(a=r[0];a>=10;a/=10,i++);}return e&&n.e+1>i&&(i=n.e+1),i},j.shiftedBy=function(e){return g(e,-9007199254740991,d),this.times("1e"+e)},j.squareRoot=j.sqrt=function(){var e,t,i,a,n,s=this,o=s.c,l=s.s,c=s.e,d=x+4,u=new $("0.5");if(1!==l||!o||!o[0])return new $(!l||l<0&&(!o||o[0])?NaN:o?s:1/0);if(0==(l=Math.sqrt(+X(s)))||l==1/0?(((t=f(o)).length+c)%2==0&&(t+="0"),l=Math.sqrt(+t),c=m((c+1)/2)-(c<0||c%2),i=new $(t=l==1/0?"5e"+c:(t=l.toExponential()).slice(0,t.indexOf("e")+1)+c)):i=new $(l+""),i.c[0])for((l=(c=i.e)+d)<3&&(l=0);;)if(n=i,i=u.times(n.plus(r(s,n,d,1))),f(n.c).slice(0,l)===(t=f(i.c)).slice(0,l)){if(i.e<c&&--l,"9999"!=(t=t.slice(l-3,l+1))&&(a||"4999"!=t)){+t&&(+t.slice(1)||"5"!=t.charAt(0))||(Y(i,i.e+x+2,1),e=!i.times(i).eq(s));break}if(!a&&(Y(n,n.e+x+2,0),n.times(n).eq(s))){i=n;break}d+=4,l+=4,a=1}return Y(i,i.e+x+1,N,e)},j.toExponential=function(e,t){return null!=e&&(g(e,0,p),e++),V(this,e,t,1)},j.toFixed=function(e,t){return null!=e&&(g(e,0,p),e=e+this.e+1),V(this,e,t)},j.toFormat=function(e,t,r){var i,a=this;if(null==r)null!=e&&t&&"object"==typeof t?(r=t,t=null):e&&"object"==typeof e?(r=e,e=t=null):r=U;else if("object"!=typeof r)throw Error(s+"Argument not an object: "+r);if(i=a.toFixed(e,t),a.c){var n,o=i.split("."),l=+r.groupSize,c=+r.secondaryGroupSize,d=r.groupSeparator||"",u=o[0],h=o[1],p=a.s<0,m=p?u.slice(1):u,f=m.length;if(c&&(n=l,l=c,c=n,f-=n),l>0&&f>0){for(n=f%l||l,u=m.substr(0,n);n<f;n+=l)u+=d+m.substr(n,l);c>0&&(u+=d+m.slice(n)),p&&(u="-"+u)}i=h?u+(r.decimalSeparator||"")+((c=+r.fractionGroupSize)?h.replace(new RegExp("\\d{"+c+"}\\B","g"),"$&"+(r.fractionGroupSeparator||"")):h):u}return(r.prefix||"")+i+(r.suffix||"")},j.toFraction=function(e){var t,i,a,n,o,l,d,h,p,m,v,g,_=this,k=_.c;if(null!=e&&(!(d=new $(e)).isInteger()&&(d.c||1!==d.s)||d.lt(M)))throw Error(s+"Argument "+(d.isInteger()?"out of range: ":"not an integer: ")+X(d));if(!k)return new $(_);for(t=new $(M),p=i=new $(M),a=h=new $(M),g=f(k),o=t.e=g.length-_.e-1,t.c[0]=u[(l=o%c)<0?c+l:l],e=!e||d.comparedTo(t)>0?o>0?t:p:d,l=L,L=1/0,d=new $(g),h.c[0]=0;m=r(d,t,0,1),1!=(n=i.plus(m.times(a))).comparedTo(e);)i=a,a=n,p=h.plus(m.times(n=p)),h=n,t=d.minus(m.times(n=t)),d=n;return n=r(e.minus(i),a,0,1),h=h.plus(n.times(p)),i=i.plus(n.times(a)),h.s=p.s=_.s,v=r(p,a,o*=2,N).minus(_).abs().comparedTo(r(h,i,o,N).minus(_).abs())<1?[p,a]:[h,i],L=l,v},j.toNumber=function(){return+X(this)},j.toPrecision=function(e,t){return null!=e&&g(e,1,p),V(this,e,t,2)},j.toString=function(e){var t,r=this,i=r.s,a=r.e;return null===a?i?(t="Infinity",i<0&&(t="-"+t)):t="NaN":(null==e?t=a<=O||a>=R?k(f(r.c),a):y(f(r.c),a,"0"):10===e&&W?t=y(f((r=Y(new $(r),x+a+1,N)).c),r.e,"0"):(g(e,2,H.length,"Base"),t=w(y(f(r.c),a,"0"),10,e,i,!0)),i<0&&r.c[0]&&(t="-"+t)),t},j.valueOf=j.toJSON=function(){return X(this)},j._isBigNumber=!0,null!=t&&$.set(t),$}(),r.default=r.BigNumber=r,"function"==typeof define&&define.amd?define((function(){return r})):void 0!==t&&t.exports?t.exports=r:(e||(e="undefined"!=typeof self&&self?self:window),e.BigNumber=r)}(this)}}},{package:"@metamask/smart-transactions-controller>bignumber.js",file:"node_modules/@metamask/smart-transactions-controller/node_modules/bignumber.js/bignumber.js"}],[1909,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=[{constant:!1,inputs:[{name:"_new",type:"address"}],name:"setOwner",outputs:[],payable:!1,type:"function"},{constant:!0,inputs:[],name:"totalSignatures",outputs:[{name:"",type:"uint256"}],payable:!1,type:"function"},{constant:!0,inputs:[],name:"owner",outputs:[{name:"",type:"address"}],payable:!1,type:"function"},{constant:!1,inputs:[],name:"drain",outputs:[],payable:!1,type:"function"},{constant:!0,inputs:[{name:"",type:"bytes4"}],name:"entries",outputs:[{name:"",type:"string"}],payable:!1,type:"function"},{constant:!1,inputs:[{name:"_method",type:"string"}],name:"register",outputs:[{name:"",type:"bool"}],payable:!1,type:"function"},{inputs:[],type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,name:"creator",type:"address"},{indexed:!0,name:"signature",type:"bytes4"},{indexed:!1,name:"method",type:"string"}],name:"Registered",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"old",type:"address"},{indexed:!0,name:"current",type:"address"}],name:"NewOwner",type:"event"}]}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>eth-method-registry",file:"node_modules/@metamask/smart-transactions-controller/node_modules/eth-method-registry/dist/abi.json"}],[191,{"../../../shared/constants/network":4423,"bignumber.js":2875,lodash:3770},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i,a=e("lodash"),n=(i=e("bignumber.js"))&&i.__esModule?i:{default:i},s=e("../../../shared/constants/network");const o=e=>new n.default(e||"0x0",16).gt(0),l=["0x3","0x2a","0x4"],c={"0x3":{rpcUrl:(0,s.getRpcUrl)({network:"ropsten"}),nickname:"Ropsten",ticker:"RopstenETH"},"0x2a":{rpcUrl:(0,s.getRpcUrl)({network:"kovan"}),nickname:"Kovan",ticker:"KovanETH"},"0x4":{rpcUrl:(0,s.getRpcUrl)({network:"rinkeby"}),nickname:"Rinkeby",ticker:"RinkebyETH"}};r.default={version:74,async migrate(e){const t=(0,a.cloneDeep)(e);t.meta.version=74;const r=function(e){var t,r;const i=(null==e?void 0:e.PreferencesController)||{},n=i.preferences||{},s=(null==e?void 0:e.NetworkController)||{},d=(null==s?void 0:s.provider)||{},u=l.filter((e=>e===(null==d?void 0:d.chainId)));if(!n.showTestNetworks&&0===u.length)return e;const h=(null==e||null===(t=e.TransactionController)||void 0===t?void 0:t.transactions)||{},p=(null===(r=e.CachedBalancesController)||void 0===r?void 0:r.cachedBalances)||{},m=Object.values(h).filter((({chainId:e})=>l.includes(e))).map((({chainId:e})=>e)),f=l.filter((e=>Object.values(p[e]||{}).some(o))),v=(0,a.uniq)([...f,...m,...u]),g=i.frequentRpcListDetail??[];v.forEach((e=>{g.find((t=>t.chainId===e))||g.unshift({rpcUrl:c[e].rpcUrl,chainId:e,ticker:c[e].ticker,nickname:c[e].nickname,rpcPrefs:{}})})),g.length&&(i.frequentRpcListDetail=g);if(u.length){const e=u[0];s.provider={...s.provider,type:"rpc",rpcUrl:c[e].rpcUrl,chainId:e,nickname:c[e].nickname,ticker:c[e].ticker}}return{...e,PreferencesController:{...i},NetworkController:{...s}}}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/074.js"}],[1910,{"./abi.json":1909,"./registry-map.json":1911,"@metamask/ethjs-contract":1794,"@metamask/ethjs-query":1797},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.MethodRegistry=void 0;const a=i(e("@metamask/ethjs-query")),n=i(e("@metamask/ethjs-contract")),s=i(e("./registry-map.json")),o=i(e("./abi.json"));r.MethodRegistry=class{constructor(e){if(!e.provider)throw new Error("Missing required 'provider' option");const t=s.default[e.network||"1"];if(!t)throw new Error("No method registry found on the requested network.");const r=new a.default(e.provider),i=(0,n.default)(r);this.registry=i(o.default).at(t)}async lookup(e){const t=await this.registry.entries(e);return t?t[0]:undefined}parse(e){const t=e.match(/^([^)(]*)\((.*)\)([^)(]*)$/u);let r;if(r=t?t[1].charAt(0).toUpperCase()+t[1].slice(1).split(/(?=[A-Z])/u).join(" "):"",t){const i=e.match(new RegExp(`${t[1]}\\(+([a-z1-9,()\\[\\]]+)\\)`,"u"));let a,n=[];return i&&(a=i[1].match(/[A-z1-9]+/gu),a&&(n=a.map((e=>({type:e}))))),{name:r,args:n}}return{}}}}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>eth-method-registry",file:"node_modules/@metamask/smart-transactions-controller/node_modules/eth-method-registry/dist/index.js"}],[1911,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports={1:"0x44691B39d1a75dC4E0A0346CBB15E310e6ED1E86"}}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>eth-method-registry",file:"node_modules/@metamask/smart-transactions-controller/node_modules/eth-method-registry/dist/registry-map.json"}],[1912,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports={name:"@metamask/smart-transactions-controller",version:"10.1.2",description:"Improves success rates for swaps by trialing transactions privately and finding minimum fees",repository:{type:"git",url:"https://github.com/MetaMask/smart-transactions-controller.git"},license:"SEE LICENSE IN LICENSE",main:"dist/index.js",types:"dist/index.d.ts",files:["dist/"],scripts:{build:"tsc --project .","build:clean":"rm -rf dist && yarn build","build:link":"yarn build && cd dist && yarn link && rm -rf node_modules && cd ..",lint:"yarn lint:eslint && yarn lint:misc --check","lint:eslint":"eslint . --cache --ext js,ts","lint:fix":"yarn lint:eslint --fix && yarn lint:misc --write","lint:misc":"prettier '**/*.json' '**/*.md' '!CHANGELOG.md' '**/*.yml' '!.yarnrc.yml' --ignore-path .gitignore",prepack:"./scripts/prepack.sh",test:"jest","test:watch":"jest --watchAll"},dependencies:{"@babel/runtime":"^7.24.1","@ethereumjs/tx":"^5.2.1","@ethereumjs/util":"^9.0.2","@ethersproject/bytes":"^5.7.0","@metamask/base-controller":"^5.0.1","@metamask/controller-utils":"^9.1.0","@metamask/eth-query":"^4.0.0","@metamask/network-controller":"^18.1.2","@metamask/polling-controller":"^6.0.1","@metamask/transaction-controller":"^30.0.0","bignumber.js":"^9.0.1",events:"^3.3.0","fast-json-patch":"^3.1.0",lodash:"^4.17.21"},devDependencies:{"@lavamoat/allow-scripts":"^2.3.1","@metamask/auto-changelog":"^3.1.0","@metamask/eslint-config":"^12.2.0","@metamask/eslint-config-jest":"^12.1.0","@metamask/eslint-config-nodejs":"^12.1.0","@metamask/eslint-config-typescript":"^12.1.0","@types/jest":"^26.0.24","@types/lodash":"^4.14.194","@types/node":"^18.19.17","@types/sinon":"^9.0.10","@typescript-eslint/eslint-plugin":"^5.33.0","@typescript-eslint/parser":"^5.33.0",eslint:"^8.48.0","eslint-config-prettier":"^8.8.0","eslint-plugin-import":"^2.27.5","eslint-plugin-jest":"^27.1.5","eslint-plugin-jsdoc":"^39.2.9","eslint-plugin-n":"^15.7.0","eslint-plugin-prettier":"^4.2.1","eslint-plugin-promise":"^6.1.1","isomorphic-fetch":"^3.0.0",jest:"^26.4.2",nock:"^13.3.1",prettier:"^2.8.8","prettier-plugin-packagejson":"^2.4.3",sinon:"^9.2.4","ts-jest":"^26.5.6",typescript:"~4.8.4"},packageManager:"yarn@3.2.1",engines:{node:"^18.18 || >=20"},publishConfig:{access:"public",registry:"https://registry.npmjs.org/"},lavamoat:{allowScripts:{"@lavamoat/preinstall-always-fail":!1,"@metamask/controller-utils>ethereumjs-util>ethereum-cryptography>keccak":!1,"@metamask/controller-utils>ethereumjs-util>ethereum-cryptography>secp256k1":!1,"@metamask/controller-utils>babel-runtime>core-js":!1}}}}}},{package:"@metamask/smart-transactions-controller",file:"node_modules/@metamask/smart-transactions-controller/package.json"}],[1913,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var i=(e=>(e[e.Unverified=0]="Unverified",e[e.Blocked=1]="Blocked",e[e.Verified=2]="Verified",e[e.Unavailable=3]="Unavailable",e))(i||{});r.SnapsRegistryStatus=i}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/chunk-4CA3O64H.js"}],[1914,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/chunk-4URGXJP7.js"}],[1915,{"./chunk-EXN2TFDJ.js":1924,"./chunk-KH72WRHR.js":1931,"@metamask/post-message-stream":1622},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var i,a=e("./chunk-KH72WRHR.js"),n=e("./chunk-EXN2TFDJ.js"),s=e("@metamask/post-message-stream"),o=class extends a.ProxyExecutionService{constructor({messenger:e,setupSnapProvider:t,offscreenPromise:r}){super({messenger:e,setupSnapProvider:t,stream:new(0,s.BrowserRuntimePostMessageStream)({name:"parent",target:"child"})}),n.__privateAdd.call(void 0,this,i,void 0),n.__privateSet.call(void 0,this,i,r)}async initEnvStream(e){return await n.__privateGet.call(void 0,this,i),await super.initEnvStream(e)}};i=new WeakMap,r.OffscreenExecutionService=o}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/chunk-6ERB63FH.js"}],[1916,{"./chunk-EXN2TFDJ.js":1924,"./chunk-WCDDYBFW.js":1940,"@metamask/base-controller":1952,"@metamask/snaps-utils":2116,"@metamask/utils":2253,nanoid:1984},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var i,a,n,s,o,l,c,d,u,h,p=e("./chunk-WCDDYBFW.js"),m=e("./chunk-EXN2TFDJ.js"),f=e("@metamask/base-controller"),v=e("@metamask/snaps-utils"),g=e("@metamask/utils"),_=e("nanoid"),k=1e7,y="SnapInterfaceController",w=class extends f.BaseController{constructor({messenger:e,state:t}){super({messenger:e,metadata:{interfaces:{persist:!1,anonymous:!1}},name:y,state:{interfaces:{},...t}}),m.__privateAdd.call(void 0,this,i),m.__privateAdd.call(void 0,this,n),m.__privateAdd.call(void 0,this,o),m.__privateAdd.call(void 0,this,c),m.__privateAdd.call(void 0,this,u),m.__privateMethod.call(void 0,this,i,a).call(this)}async createInterface(e,t,r){const i=p.getJsxInterface.call(void 0,t);await m.__privateMethod.call(void 0,this,u,h).call(this,i),p.validateInterfaceContext.call(void 0,r);const a=_.nanoid.call(void 0),n=p.constructState.call(void 0,{},i);return this.update((t=>{t.interfaces[a]={snapId:e,content:i,state:n,context:r??null}})),a}getInterface(e,t){return m.__privateMethod.call(void 0,this,n,s).call(this,e,t),this.state.interfaces[t]}async updateInterface(e,t,r){m.__privateMethod.call(void 0,this,n,s).call(this,e,t);const i=p.getJsxInterface.call(void 0,r);await m.__privateMethod.call(void 0,this,u,h).call(this,i);const a=this.state.interfaces[t].state,o=p.constructState.call(void 0,a,i);this.update((e=>{e.interfaces[t].state=o,e.interfaces[t].content=i}))}deleteInterface(e){this.update((t=>{delete t.interfaces[e]}))}updateInterfaceState(e,t){this.update((r=>{r.interfaces[e].state=t}))}};i=new WeakSet,a=function(){this.messagingSystem.registerActionHandler(`${y}:createInterface`,this.createInterface.bind(this)),this.messagingSystem.registerActionHandler(`${y}:getInterface`,this.getInterface.bind(this)),this.messagingSystem.registerActionHandler(`${y}:updateInterface`,this.updateInterface.bind(this)),this.messagingSystem.registerActionHandler(`${y}:deleteInterface`,this.deleteInterface.bind(this)),this.messagingSystem.registerActionHandler(`${y}:updateInterfaceState`,this.updateInterfaceState.bind(this))},n=new WeakSet,s=function(e,t){const r=this.state.interfaces[t];g.assert.call(void 0,void 0!==r,`Interface with id '${t}' not found.`),g.assert.call(void 0,r.snapId===e,`Interface not created by ${e}.`)},o=new WeakSet,l=async function(){await this.messagingSystem.call("PhishingController:maybeUpdateState")},c=new WeakSet,d=function(e){return this.messagingSystem.call("PhishingController:testOrigin",e).result},u=new WeakSet,h=async function(e){const t=v.getJsonSizeUnsafe.call(void 0,e);g.assert.call(void 0,t<=k,"A Snap UI may not be larger than 10 MB."),await m.__privateMethod.call(void 0,this,o,l).call(this),v.validateJsxLinks.call(void 0,e,m.__privateMethod.call(void 0,this,c,d).bind(this))},r.SnapInterfaceController=w}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/chunk-6VGMRXGY.js"}],[1917,{"./chunk-EXN2TFDJ.js":1924,"@metamask/post-message-stream":1622},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var i,a,n,s,o=e("./chunk-EXN2TFDJ.js"),l=e("@metamask/post-message-stream"),c=class extends l.BasePostMessageStream{constructor({stream:e,jobId:t}){super(),o.__privateAdd.call(void 0,this,n),o.__privateAdd.call(void 0,this,i,void 0),o.__privateAdd.call(void 0,this,a,void 0),o.__privateSet.call(void 0,this,i,e),o.__privateSet.call(void 0,this,a,t),o.__privateGet.call(void 0,this,i).on("data",o.__privateMethod.call(void 0,this,n,s).bind(this))}_postMessage(e){o.__privateGet.call(void 0,this,i).write({jobId:o.__privateGet.call(void 0,this,a),data:e})}};i=new WeakMap,a=new WeakMap,n=new WeakSet,s=function(e){e.jobId===o.__privateGet.call(void 0,this,a)&&this.push(e.data)},r.ProxyPostMessageStream=c}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/chunk-7Y6P5FRN.js"}],[1918,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});r.RequestQueue=class{constructor(e){this.maxQueueSize=e,this.queueSizes=new Map}increment(e){const t=this.queueSizes.get(e)??0;if(t>=this.maxQueueSize)throw new Error("Maximum number of requests reached. Try again later.");this.queueSizes.set(e,t+1)}decrement(e){const t=this.queueSizes.get(e)??0;if(0===t)throw new Error(`Cannot decrement, ${e} does not have any outstanding requests.`);this.queueSizes.set(e,t-1)}get(e){return this.queueSizes.get(e)??0}}}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/chunk-AP7CJ6DA.js"}],[1919,{"@metamask/utils":2253,"@xstate/fsm":2587},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var i=e("@metamask/utils"),a=e("@xstate/fsm");r.validateMachine=function(e){i.assert.call(void 0,"_options"in e,"The machine is not an @xstate/fsm machine");const t=e,r=new Set,a=e=>{return(t=e,Array.isArray(t)?t:null==t?[]:[t]).flatMap((e=>"string"==typeof e?[e]:(i.assert.call(void 0,"function"==typeof e),[]))).forEach(r.add.bind(r));var t};for(const e of Object.values(t.config.states)){a(e.entry),a(e.exit);for(const t of Object.values(e.on??{}))a(t.actions)}r.forEach((e=>i.assert.call(void 0,void 0!==t._options.actions&&e in t._options.actions,`Action "${e}" doesn't have an implementation`)))},r.forceStrict=function(e){let t=!1;e.subscribe((e=>{i.assert.call(void 0,!t||e.changed,"Invalid state transition"),t=!0}));const r=e.send.bind(e);e.send=(...t)=>(i.assert.call(void 0,e.status===a.InterpreterStatus.Running,"Interpreter is stopped"),r(...t))}}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/chunk-BO2ZDPWV.js"}],[192,{lodash:3770},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=e("lodash");r.default={version:75,async migrate(e){const t=(0,i.cloneDeep)(e);t.meta.version=75;const r=function(e){return delete e.ThreeBoxController,e}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/075.js"}],[1920,{"@metamask/utils":2253},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var i=e("@metamask/utils");r.Timer=class{constructor(e){i.assert.call(void 0,!Number.isNaN(e),new TypeError("Can't start a timer with NaN time")),i.assert.call(void 0,e>=0,new TypeError("Can't start a timer with negative time")),this.state={value:"stopped",remaining:e}}get status(){return this.state.value}get remaining(){return this.state.remaining}cancel(){i.assert.call(void 0,"paused"===this.status||"running"===this.status,new Error("Tried to cancel a not running Timer")),this.onFinish(!1)}finish(){i.assert.call(void 0,"finished"!==this.status,new Error("Tried to finish a finished Timer.")),this.onFinish(!0)}pause(){i.assert.call(void 0,"running"===this.state.value,new Error("Tried to pause a not running Timer"));const{callback:e,start:t,timeout:r,remaining:a}=this.state;void 0!==r&&clearTimeout(r),this.state={value:"paused",callback:e,remaining:a-(Date.now()-t)}}start(e){i.assert.call(void 0,"stopped"===this.state.value,new Error("Tried to start an already running Timer"));const{remaining:t}=this.state;this.state={value:"paused",remaining:t,callback:e},this.resume()}resume(){i.assert.call(void 0,"paused"===this.state.value,new Error("Tried to resume not paused Timer"));const{remaining:e,callback:t}=this.state,r=Date.now();let a;e!==Number.POSITIVE_INFINITY&&(a=setTimeout((()=>this.onFinish(!0)),e)),this.state={value:"running",callback:t,remaining:e,start:r,timeout:a}}onFinish(e){i.assert.call(void 0,"running"===this.state.value||"paused"===this.state.value),"running"===this.state.value&&void 0!==this.state.timeout&&clearTimeout(this.state.timeout);const{callback:t,remaining:r}=this.state;this.state={value:"finished",remaining:"running"===this.state.value?r-(Date.now()-this.state.start):r},e&&t()}}}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/chunk-BOFPNIRX.js"}],[1921,{"./chunk-BOFPNIRX.js":1920,"@metamask/snaps-sdk":2075,"@metamask/snaps-utils":2116,"fast-deep-equal":3291},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var i,a=e("./chunk-BOFPNIRX.js"),n=e("@metamask/snaps-sdk"),s=e("@metamask/snaps-utils"),o=e("fast-deep-equal"),l=(i=o)&&i.__esModule?i:{default:i};function c(e,t){return Object.entries(e).reduce(((e,[r,i])=>(r in t||(e[r]=i),e)),{})}function d(e,t){let r;const i=new Promise(((i,a)=>{e.start((()=>{void 0===t?i():i(t)})),r=a}));return i.cancel=()=>{"finished"!==e.status&&(e.cancel(),r(new Error("The delay has been canceled.")))},i}var u=Symbol("Used to check if the requested promise has timeout (see withTimeout)");async function h(e,t){return t&&0!==t.length?await Promise.all(t.map((async t=>e.fetch(t)))):[]}r.setDiff=c,r.permissionsDiff=function(e,t){return Object.entries(e).reduce(((e,[r,i])=>{const a=r in t;return(!a||a&&!l.default.call(void 0,i.caveats??[],t[r].caveats??[]))&&(e[r]=i),e}),{})},r.delay=function(e,t){return d(new(0,a.Timer)(e),t)},r.delayWithTimer=d,r.hasTimedOut=u,r.withTimeout=async function(e,t){const r=d("number"==typeof t?new(0,a.Timer)(t):t,u);try{return await Promise.race([e,r])}finally{r.cancel()}},r.getSnapFiles=h,r.fetchSnap=async function(e,t){try{const e=await t.manifest(),r=await t.fetch(e.result.source.location.npm.filePath),{iconPath:i}=e.result.source.location.npm,a=i?await t.fetch(i):void 0,n=await h(t,e.result.source.files);await Promise.all(n.map((async e=>{e.data.base64=await s.encodeBase64.call(void 0,e)})));const o=await h(t,e.result.source.locales),l={manifest:e,sourceCode:r,svgIcon:a,auxiliaryFiles:n,localizationFiles:s.getValidatedLocalizationFiles.call(void 0,o)};return await s.validateFetchedSnap.call(void 0,l),l}catch(t){throw new Error(`Failed to fetch snap "${e}": ${n.getErrorMessage.call(void 0,t)}.`)}},r.calculateConnectionsChange=function(e,t){const r=c(t,e),i=c(e,t);return{newConnections:r,unusedConnections:i,approvedConnections:c(e,i)}}}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/chunk-CDTGUNSA.js"}],[1922,{"./chunk-EXN2TFDJ.js":1924,"@metamask/base-controller":1952,"@metamask/snaps-registry":1991,"@metamask/snaps-utils":2116,"@metamask/utils":2253},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var i,a,n,s,o,l,c,d,u,h,p,m,f,v,g,_,k,y,w,T,b,E,S,P,C,A,I=e("./chunk-EXN2TFDJ.js"),j=e("@metamask/base-controller"),M=e("@metamask/snaps-registry"),x=e("@metamask/snaps-utils"),N=e("@metamask/utils"),O={database:null,lastUpdated:null,databaseUnavailable:!1},R=class extends j.BaseController{constructor({messenger:e,state:t,url:r={registry:"https://acl.execution.metamask.io/latest/registry.json",signature:"https://acl.execution.metamask.io/latest/signature.json"},publicKey:d="0x025b65308f0f0fb8bc7f7ff87bfc296e0330eee5d3c1d1ee4a048b2fd6a86fa0a6",fetchFunction:m=globalThis.fetch.bind(globalThis),recentFetchThreshold:v=N.inMilliseconds.call(void 0,5,N.Duration.Minute),refetchOnAllowlistMiss:_=!0}){super({messenger:e,metadata:{database:{persist:!0,anonymous:!1},lastUpdated:{persist:!0,anonymous:!1},databaseUnavailable:{persist:!0,anonymous:!1}},name:"SnapsRegistry",state:{...O,...t}}),I.__privateAdd.call(void 0,this,c),I.__privateAdd.call(void 0,this,u),I.__privateAdd.call(void 0,this,p),I.__privateAdd.call(void 0,this,f),I.__privateAdd.call(void 0,this,g),I.__privateAdd.call(void 0,this,k),I.__privateAdd.call(void 0,this,w),I.__privateAdd.call(void 0,this,b),I.__privateAdd.call(void 0,this,S),I.__privateAdd.call(void 0,this,C),I.__privateAdd.call(void 0,this,i,void 0),I.__privateAdd.call(void 0,this,a,void 0),I.__privateAdd.call(void 0,this,n,void 0),I.__privateAdd.call(void 0,this,s,void 0),I.__privateAdd.call(void 0,this,o,void 0),I.__privateAdd.call(void 0,this,l,void 0),I.__privateSet.call(void 0,this,i,r),I.__privateSet.call(void 0,this,a,d),I.__privateSet.call(void 0,this,n,m),I.__privateSet.call(void 0,this,s,v),I.__privateSet.call(void 0,this,o,_),I.__privateSet.call(void 0,this,l,null),this.messagingSystem.registerActionHandler("SnapsRegistry:get",(async(...e)=>I.__privateMethod.call(void 0,this,k,y).call(this,...e))),this.messagingSystem.registerActionHandler("SnapsRegistry:getMetadata",(async(...e)=>I.__privateMethod.call(void 0,this,b,E).call(this,...e))),this.messagingSystem.registerActionHandler("SnapsRegistry:resolveVersion",(async(...e)=>I.__privateMethod.call(void 0,this,w,T).call(this,...e))),this.messagingSystem.registerActionHandler("SnapsRegistry:update",(async()=>I.__privateMethod.call(void 0,this,u,h).call(this)))}};i=new WeakMap,a=new WeakMap,n=new WeakMap,s=new WeakMap,o=new WeakMap,l=new WeakMap,c=new WeakSet,d=function(){return this.state.lastUpdated&&Date.now()-this.state.lastUpdated<I.__privateGet.call(void 0,this,s)},u=new WeakSet,h=async function(){I.__privateGet.call(void 0,this,l)?await I.__privateGet.call(void 0,this,l):(null===I.__privateGet.call(void 0,this,l)&&I.__privateSet.call(void 0,this,l,I.__privateMethod.call(void 0,this,p,m).call(this)),await I.__privateGet.call(void 0,this,l),I.__privateSet.call(void 0,this,l,null))},p=new WeakSet,m=async function(){if(!I.__privateMethod.call(void 0,this,c,d).call(this))try{const e=await I.__privateMethod.call(void 0,this,C,A).call(this,I.__privateGet.call(void 0,this,i).registry),t=await I.__privateMethod.call(void 0,this,C,A).call(this,I.__privateGet.call(void 0,this,i).signature);I.__privateMethod.call(void 0,this,S,P).call(this,e,t),this.update((t=>{t.database=JSON.parse(e),t.lastUpdated=Date.now(),t.databaseUnavailable=!1}))}catch{this.update((e=>{e.databaseUnavailable=!0}))}},f=new WeakSet,v=async function(){return null===this.state.database&&await I.__privateMethod.call(void 0,this,u,h).call(this),this.state.database},g=new WeakSet,_=async function(e,t,r=!1){const i=await I.__privateMethod.call(void 0,this,f,v).call(this),a=i?.blockedSnaps.find((r=>"id"in r?r.id===e&&N.satisfiesVersionRange.call(void 0,t.version,r.versionRange):r.checksum===t.checksum));if(a)return{status:1,reason:a.reason};const n=i?.verifiedSnaps[e],s=n?.versions?.[t.version];return s&&s.checksum===t.checksum?{status:2}:I.__privateGet.call(void 0,this,o)&&!r?(await I.__privateMethod.call(void 0,this,u,h).call(this),I.__privateMethod.call(void 0,this,g,_).call(this,e,t,!0)):{status:this.state.databaseUnavailable?3:0}},k=new WeakSet,y=async function(e){return Object.entries(e).reduce((async(e,[t,r])=>{const i=await I.__privateMethod.call(void 0,this,g,_).call(this,t,r),a=await e;return a[t]=i,a}),Promise.resolve({}))},w=new WeakSet,T=async function(e,t,r=!1){const i=await I.__privateMethod.call(void 0,this,f,v).call(this),a=i?.verifiedSnaps[e]?.versions??null;if(!a&&I.__privateGet.call(void 0,this,o)&&!r)return await I.__privateMethod.call(void 0,this,u,h).call(this),I.__privateMethod.call(void 0,this,w,T).call(this,e,t,!0);if(!a)return t;const n=x.getTargetVersion.call(void 0,Object.keys(a),t);return n||!I.__privateGet.call(void 0,this,o)||r?n?(N.assertIsSemVerRange.call(void 0,n),n):t:(await I.__privateMethod.call(void 0,this,u,h).call(this),I.__privateMethod.call(void 0,this,w,T).call(this,e,t,!0))},b=new WeakSet,E=async function(e){const t=await I.__privateMethod.call(void 0,this,f,v).call(this);return t?.verifiedSnaps[e]?.metadata??null},S=new WeakSet,P=function(e,t){N.assert.call(void 0,I.__privateGet.call(void 0,this,a),"No public key provided.");const r=M.verify.call(void 0,{registry:e,signature:JSON.parse(t),publicKey:I.__privateGet.call(void 0,this,a)});N.assert.call(void 0,r,"Invalid registry signature.")},C=new WeakSet,A=async function(e){const t=await I.__privateGet.call(void 0,this,n).call(this,e);if(!t.ok)throw new Error(`Failed to fetch ${e}.`);return await t.text()},r.JsonSnapsRegistry=R}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/chunk-CPUUURMT.js"}],[1923,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/chunk-D74XJG2L.js"}],[1924,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var i=(t=>void 0!==e?e:"undefined"!=typeof Proxy?new Proxy(t,{get:(t,r)=>(void 0!==e?e:t)[r]}):t)((function(t){if(void 0!==e)return e.apply(this,arguments);throw Error('Dynamic require of "'+t+'" is not supported')})),a=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)};r.__require=i,r.__privateGet=(e,t,r)=>(a(e,t,"read from private field"),r?r.call(e):t.get(e)),r.__privateAdd=(e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)},r.__privateSet=(e,t,r,i)=>(a(e,t,"write to private field"),i?i.call(e,r):t.set(e,r),r),r.__privateMethod=(e,t,r)=>(a(e,t,"access private method"),r)}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/chunk-EXN2TFDJ.js"}],[1925,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/chunk-G66GQJS6.js"}],[1926,{"./chunk-BOFPNIRX.js":1920,"./chunk-EXN2TFDJ.js":1924,"./chunk-YYPUPKQY.js":1943,"@metamask/base-controller":1952,"@metamask/snaps-rpc-methods":2039,"@metamask/snaps-utils":2116,"@metamask/utils":2253},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var i,a,n,s,o=e("./chunk-YYPUPKQY.js"),l=e("./chunk-BOFPNIRX.js"),c=e("./chunk-EXN2TFDJ.js"),d=e("@metamask/base-controller"),u=e("@metamask/snaps-rpc-methods"),h=e("@metamask/snaps-utils"),p=e("@metamask/utils"),m=p.inMilliseconds.call(void 0,24,p.Duration.Hour),f=class extends d.BaseController{constructor({messenger:e,state:t}){super({messenger:e,metadata:{jobs:{persist:!0,anonymous:!1}},name:"CronjobController",state:{jobs:{},...t}}),c.__privateAdd.call(void 0,this,i,void 0),c.__privateAdd.call(void 0,this,a,void 0),c.__privateAdd.call(void 0,this,n,void 0),c.__privateAdd.call(void 0,this,s,void 0),c.__privateSet.call(void 0,this,n,new Map),c.__privateSet.call(void 0,this,s,new Map),c.__privateSet.call(void 0,this,i,e),this._handleSnapRegisterEvent=this._handleSnapRegisterEvent.bind(this),this._handleSnapUnregisterEvent=this._handleSnapUnregisterEvent.bind(this),this._handleEventSnapUpdated=this._handleEventSnapUpdated.bind(this),this.messagingSystem.subscribe("SnapController:snapInstalled",this._handleSnapRegisterEvent),this.messagingSystem.subscribe("SnapController:snapUninstalled",this._handleSnapUnregisterEvent),this.messagingSystem.subscribe("SnapController:snapEnabled",this._handleSnapRegisterEvent),this.messagingSystem.subscribe("SnapController:snapDisabled",this._handleSnapUnregisterEvent),this.messagingSystem.subscribe("SnapController:snapUpdated",this._handleEventSnapUpdated),this.dailyCheckIn().catch((e=>{h.logError.call(void 0,e)}))}getAllJobs(){const e=this.messagingSystem.call("SnapController:getAll");return o.getRunnableSnaps.call(void 0,e).map((e=>this.getSnapJobs(e.id))).flat().filter((e=>void 0!==e))}getSnapJobs(e){const t=c.__privateGet.call(void 0,this,i).call("PermissionController:getPermissions",e),r=t?.[u.SnapEndowments.Cronjob],a=u.getCronjobCaveatJobs.call(void 0,r);return a?.map(((t,r)=>({...t,id:`${e}-${r}`,snapId:e})))}register(e){const t=this.getSnapJobs(e);t?.forEach((e=>this.schedule(e)))}schedule(e){if(c.__privateGet.call(void 0,this,n).has(e.id))return;const t=h.parseCronExpression.call(void 0,e.expression).next(),r=new Date,i=t.getTime()-r.getTime();if(i>m)return;const a=new(0,l.Timer)(i);a.start((()=>{this.executeCronjob(e).catch((e=>{h.logError.call(void 0,e)})),c.__privateGet.call(void 0,this,n).delete(e.id),this.schedule(e)})),this.state.jobs[e.id]?.lastRun||this.updateJobLastRunState(e.id,0),c.__privateGet.call(void 0,this,n).set(e.id,a),c.__privateGet.call(void 0,this,s).set(e.id,e.snapId)}async executeCronjob(e){this.updateJobLastRunState(e.id,Date.now()),await c.__privateGet.call(void 0,this,i).call("SnapController:handleRequest",{snapId:e.snapId,origin:"",handler:h.HandlerType.OnCronjob,request:e.request})}unregister(e){const t=[...c.__privateGet.call(void 0,this,s).entries()].filter((([t,r])=>r===e));t.length&&t.forEach((([e])=>{const t=c.__privateGet.call(void 0,this,n).get(e);t&&(t.cancel(),c.__privateGet.call(void 0,this,n).delete(e),c.__privateGet.call(void 0,this,s).delete(e))}))}updateJobLastRunState(e,t){this.update((r=>{r.jobs[e]={lastRun:t}}))}async dailyCheckIn(){const e=this.getAllJobs();for(const t of e){const e=h.parseCronExpression.call(void 0,t.expression),r=this.state.jobs[t.id]?.lastRun;void 0!==r&&e.hasPrev()&&e.prev().getTime()>r&&await this.executeCronjob(t),this.schedule(t)}c.__privateSet.call(void 0,this,a,new(0,l.Timer)(m)),c.__privateGet.call(void 0,this,a).start((()=>{this.dailyCheckIn().catch((e=>{h.logError.call(void 0,e)}))}))}destroy(){super.destroy(),this.messagingSystem.unsubscribe("SnapController:snapInstalled",this._handleSnapRegisterEvent),this.messagingSystem.unsubscribe("SnapController:snapUninstalled",this._handleSnapUnregisterEvent),this.messagingSystem.unsubscribe("SnapController:snapEnabled",this._handleSnapRegisterEvent),this.messagingSystem.unsubscribe("SnapController:snapDisabled",this._handleSnapUnregisterEvent),this.messagingSystem.unsubscribe("SnapController:snapUpdated",this._handleEventSnapUpdated),c.__privateGet.call(void 0,this,s).forEach((e=>{this.unregister(e)}))}_handleSnapRegisterEvent(e){this.register(e.id)}_handleSnapUnregisterEvent(e){this.unregister(e.id)}_handleEventSnapUpdated(e){this.unregister(e.id),this.register(e.id)}};i=new WeakMap,a=new WeakMap,n=new WeakMap,s=new WeakMap,r.DAILY_TIMEOUT=m,r.CronjobController=f}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/chunk-GRBWVPLF.js"}],[1927,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/chunk-HOY6NKQR.js"}],[1928,{"./chunk-7Y6P5FRN.js":1917,"./chunk-EXN2TFDJ.js":1924,"./chunk-S775IABY.js":1938,"@metamask/post-message-stream":1622,"@metamask/snaps-utils":2116,"@metamask/utils":2253,nanoid:1984},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var i,a,n=e("./chunk-S775IABY.js"),s=e("./chunk-7Y6P5FRN.js"),o=e("./chunk-EXN2TFDJ.js"),l=e("@metamask/post-message-stream"),c=e("@metamask/snaps-utils"),d=e("@metamask/utils"),u=e("nanoid"),h="snaps-worker-pool",p=class extends n.AbstractExecutionService{constructor({documentUrl:e,messenger:t,setupSnapProvider:r}){super({messenger:t,setupSnapProvider:r}),o.__privateAdd.call(void 0,this,i,void 0),o.__privateAdd.call(void 0,this,a,void 0),o.__privateSet.call(void 0,this,i,e)}async terminateJob(e){d.assert.call(void 0,o.__privateGet.call(void 0,this,a),"Runtime stream not initialized."),o.__privateGet.call(void 0,this,a).write({jobId:e.id,data:{jsonrpc:"2.0",method:"terminateJob",id:u.nanoid.call(void 0)}})}async initEnvStream(e){await this.createDocument(),d.assert.call(void 0,o.__privateGet.call(void 0,this,a),"Runtime stream not initialized.");return{worker:e,stream:new(0,s.ProxyPostMessageStream)({stream:o.__privateGet.call(void 0,this,a),jobId:e})}}async createDocument(){if(document.getElementById(h))return;const e=await c.createWindow.call(void 0,o.__privateGet.call(void 0,this,i).href,h,!1);o.__privateSet.call(void 0,this,a,new(0,l.WindowPostMessageStream)({name:"parent",target:"child",targetWindow:e,targetOrigin:"*"}))}};i=new WeakMap,a=new WeakMap,r.WORKER_POOL_ID=h,r.WebWorkerExecutionService=p}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/chunk-HQ6HMINL.js"}],[1929,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/chunk-JAUAKTUL.js"}],[193,{lodash:3770},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=e("lodash");r.default={version:76,async migrate(e){const t=(0,i.cloneDeep)(e);t.meta.version=76;const r=function(e){var t;if(e.CollectiblesController){const{allCollectibleContracts:t,allCollectibles:r,ignoredCollectibles:i,...a}=e.CollectiblesController;e.NftController={...t?{allNftContracts:t}:{},...r?{allNfts:r}:{},...i?{ignoredNfts:i}:{},...a},delete e.CollectiblesController}null!==(t=e.PreferencesController)&&void 0!==t&&t.useCollectibleDetection&&(e.PreferencesController.useNftDetection=e.PreferencesController.useCollectibleDetection,delete e.PreferencesController.useCollectibleDetection);return e}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/076.js"}],[1930,{"@metamask/snaps-rpc-methods":2039},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var i=e("@metamask/snaps-rpc-methods"),a=Object.freeze(["snap_dialog","snap_manageState","snap_notify","snap_getLocale",i.SnapEndowments.Cronjob,i.SnapEndowments.HomePage,i.SnapEndowments.LifecycleHooks,i.SnapEndowments.EthereumProvider,i.SnapEndowments.TransactionInsight,i.SnapEndowments.SignatureInsight]);r.ALLOWED_PERMISSIONS=a,r.LEGACY_ENCRYPTION_KEY_DERIVATION_OPTIONS={algorithm:"PBKDF2",params:{iterations:1e4}}}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/chunk-JQ54YYLU.js"}],[1931,{"./chunk-7Y6P5FRN.js":1917,"./chunk-EXN2TFDJ.js":1924,"./chunk-S775IABY.js":1938,nanoid:1984},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var i,a=e("./chunk-S775IABY.js"),n=e("./chunk-7Y6P5FRN.js"),s=e("./chunk-EXN2TFDJ.js"),o=e("nanoid"),l=class extends a.AbstractExecutionService{constructor({stream:e,messenger:t,setupSnapProvider:r}){super({messenger:t,setupSnapProvider:r,usePing:!1}),s.__privateAdd.call(void 0,this,i,void 0),s.__privateSet.call(void 0,this,i,e)}async terminateJob(e){s.__privateGet.call(void 0,this,i).write({jobId:e.id,data:{jsonrpc:"2.0",method:"terminateJob",id:o.nanoid.call(void 0)}})}async initEnvStream(e){const t=new(0,n.ProxyPostMessageStream)({stream:s.__privateGet.call(void 0,this,i),jobId:e});return await new Promise((e=>{t.once("data",e),t.write({name:"command",data:{jsonrpc:"2.0",method:"ping",id:o.nanoid.call(void 0)}})})),{worker:e,stream:t}}};i=new WeakMap,r.ProxyExecutionService=l}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/chunk-KH72WRHR.js"}],[1932,{"./chunk-EXN2TFDJ.js":1924,"./chunk-RDBT3ZJQ.js":1937,"@metamask/snaps-utils":2116,"@metamask/utils":2253},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var i,a=e("./chunk-RDBT3ZJQ.js"),n=e("./chunk-EXN2TFDJ.js"),s=e("@metamask/snaps-utils"),o=e("@metamask/utils");function l(e){return o.assert.call(void 0,void 0!==e.data.canonicalPath),e.data.canonicalPath=`local:${e.data.canonicalPath}`,e}i=new WeakMap,r.LocalLocation=class{constructor(e,t={}){n.__privateAdd.call(void 0,this,i,void 0),o.assertStruct.call(void 0,e.toString(),s.LocalSnapIdStruct,"Invalid Snap Id"),o.assert.call(void 0,void 0===t.fetchOptions,"Currently adding fetch options to local: is unsupported."),n.__privateSet.call(void 0,this,i,new(0,a.HttpLocation)(new URL(e.toString().slice(s.SnapIdPrefixes.local.length)),{...t,fetchOptions:{cache:"no-cache"}}))}async manifest(){return l(await n.__privateGet.call(void 0,this,i).manifest())}async fetch(e){return l(await n.__privateGet.call(void 0,this,i).fetch(e))}get shouldAlwaysReload(){return!0}}}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/chunk-LWBPKSU2.js"}],[1933,{"@metamask/snaps-utils":2116,"@metamask/utils":2253},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var i=e("@metamask/snaps-utils"),a=e("@metamask/utils").createModuleLogger.call(void 0,i.snapsLogger,"snaps-controllers");r.log=a}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/chunk-NXZVKBSV.js"}],[1934,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/chunk-OHMCPTOI.js"}],[1935,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/chunk-OIEUL55W.js"}],[1936,{"./chunk-LWBPKSU2.js":1932,"./chunk-RDBT3ZJQ.js":1937,"./chunk-XWDEGRM5.js":1942,"@metamask/utils":2253},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var i=e("./chunk-LWBPKSU2.js"),a=e("./chunk-XWDEGRM5.js"),n=e("./chunk-RDBT3ZJQ.js"),s=e("@metamask/utils");r.detectSnapLocation=function(e,t){const r=t?.allowHttp??!1,o=t?.allowLocal??!1,l=new URL(e);switch(l.protocol){case"npm:":return new(0,a.NpmLocation)(l,t);case"local:":return s.assert.call(void 0,o,new TypeError("Fetching local snaps is disabled.")),new(0,i.LocalLocation)(l,t);case"http:":case"https:":return s.assert.call(void 0,r,new TypeError("Fetching snaps through http/https is disabled.")),new(0,n.HttpLocation)(l,t);default:throw new TypeError(`Unrecognized "${l.protocol}" snap location protocol.`)}}}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/chunk-PT22IXNS.js"}],[1937,{"@metamask/snaps-utils":2116,"@metamask/utils":2253},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var i=e("@metamask/snaps-utils"),a=e("@metamask/utils");r.HttpLocation=class{constructor(e,t={}){this.cache=new Map,a.assertStruct.call(void 0,e.toString(),i.HttpSnapIdStruct,"Invalid Snap Id: "),this.fetchFn=t.fetch??globalThis.fetch.bind(globalThis),this.fetchOptions=t.fetchOptions,this.url=e}async manifest(){if(this.validatedManifest)return this.validatedManifest.clone();const e=new URL(i.NpmSnapFileNames.Manifest,this.url).toString(),t=await this.fetchFn(e,this.fetchOptions);if(!t.ok)throw new Error(`Failed to fetch "${e}". Status code: ${t.status}.`);const r=await t.text(),a=i.parseJson.call(void 0,r),n=new(0,i.VirtualFile)({value:r,result:i.createSnapManifest.call(void 0,a),path:i.NpmSnapFileNames.Manifest,data:{canonicalPath:e}});return this.validatedManifest=n,this.manifest()}async fetch(e){const t=i.normalizeRelative.call(void 0,e),r=this.cache.get(t);if(void 0!==r){const{file:e,contents:t}=r,i=new Uint8Array(await t.arrayBuffer()),a=e.clone();return a.value=i,a}const n=this.toCanonical(t).toString(),s=await this.fetchFn(n,this.fetchOptions);if(!s.ok)throw new Error(`Failed to fetch "${n}". Status code: ${s.status}.`);const o=new(0,i.VirtualFile)({value:"",path:t,data:{canonicalPath:n}}),l=await s.blob();return a.assert.call(void 0,!this.cache.has(t),"Corrupted cache, multiple files with same path."),this.cache.set(t,{file:o,contents:l}),this.fetch(t)}get root(){return new URL(this.url)}toCanonical(e){return a.assert.call(void 0,!e.startsWith("/"),"Tried to parse absolute path."),new URL(e,this.url)}}}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/chunk-RDBT3ZJQ.js"}],[1938,{"./chunk-BOFPNIRX.js":1920,"./chunk-CDTGUNSA.js":1921,"./chunk-EXN2TFDJ.js":1924,"./chunk-NXZVKBSV.js":1933,"@metamask/json-rpc-engine":1966,"@metamask/json-rpc-middleware-stream":1969,"@metamask/object-multiplex":1558,"@metamask/rpc-errors":1670,"@metamask/snaps-utils":2116,"@metamask/utils":2253,nanoid:1984,"readable-stream":4175},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var i,a,n,s,o,l,c,d,u,h,p,m,f,v,g,_,k,y=e("./chunk-NXZVKBSV.js"),w=e("./chunk-CDTGUNSA.js"),T=e("./chunk-BOFPNIRX.js"),b=e("./chunk-EXN2TFDJ.js"),E=e("@metamask/json-rpc-engine"),S=e("@metamask/json-rpc-middleware-stream"),P=e("@metamask/object-multiplex"),C=(i=P)&&i.__esModule?i:{default:i},A=e("@metamask/rpc-errors"),I=e("@metamask/snaps-utils"),j=e("@metamask/utils"),M=e("nanoid"),x=e("readable-stream"),N="ExecutionService";function O(e,t){const r=new(0,C.default);return x.pipeline.call(void 0,e,r,e,(e=>{e&&(t?I.logError.call(void 0,`"${t}" stream failure.`,e):I.logError.call(void 0,e))})),r}a=new WeakMap,n=new WeakMap,s=new WeakMap,o=new WeakMap,l=new WeakMap,c=new WeakMap,d=new WeakMap,u=new WeakMap,h=new WeakSet,p=function(e){b.__privateGet.call(void 0,this,a).delete(e)},m=new WeakSet,f=function(e,t){b.__privateGet.call(void 0,this,a).set(e,(async({origin:r,handler:i,request:a})=>await this.command(t,{id:M.nanoid.call(void 0),jsonrpc:"2.0",method:"snapRpc",params:{origin:r,handler:i,request:a,target:e}})))},v=new WeakSet,g=function(e,t){b.__privateGet.call(void 0,this,n).set(e,t),b.__privateGet.call(void 0,this,s).set(t,e)},_=new WeakSet,k=function(e){const t=b.__privateGet.call(void 0,this,s).get(e);if(!t)throw new Error(`job: "${e}" has no mapped snap.`);b.__privateGet.call(void 0,this,s).delete(e),b.__privateGet.call(void 0,this,n).delete(t),b.__privateMethod.call(void 0,this,h,p).call(this,t)},r.AbstractExecutionService=class{constructor({setupSnapProvider:e,messenger:t,initTimeout:r=j.inMilliseconds.call(void 0,60,j.Duration.Second),pingTimeout:i=j.inMilliseconds.call(void 0,2,j.Duration.Second),terminationTimeout:p=j.inMilliseconds.call(void 0,1,j.Duration.Second),usePing:f=!0}){b.__privateAdd.call(void 0,this,h),b.__privateAdd.call(void 0,this,m),b.__privateAdd.call(void 0,this,v),b.__privateAdd.call(void 0,this,_),b.__privateAdd.call(void 0,this,a,void 0),b.__privateAdd.call(void 0,this,n,void 0),b.__privateAdd.call(void 0,this,s,void 0),b.__privateAdd.call(void 0,this,o,void 0),b.__privateAdd.call(void 0,this,l,void 0),b.__privateAdd.call(void 0,this,c,void 0),b.__privateAdd.call(void 0,this,d,void 0),b.__privateAdd.call(void 0,this,u,void 0),b.__privateSet.call(void 0,this,a,new Map),this.jobs=new Map,this.setupSnapProvider=e,b.__privateSet.call(void 0,this,n,new Map),b.__privateSet.call(void 0,this,s,new Map),b.__privateSet.call(void 0,this,o,t),b.__privateSet.call(void 0,this,l,r),b.__privateSet.call(void 0,this,c,i),b.__privateSet.call(void 0,this,d,p),b.__privateSet.call(void 0,this,u,f),this.registerMessageHandlers()}registerMessageHandlers(){b.__privateGet.call(void 0,this,o).registerActionHandler(`${N}:handleRpcRequest`,(async(e,t)=>this.handleRpcRequest(e,t))),b.__privateGet.call(void 0,this,o).registerActionHandler(`${N}:executeSnap`,(async e=>this.executeSnap(e))),b.__privateGet.call(void 0,this,o).registerActionHandler(`${N}:terminateSnap`,(async e=>this.terminateSnap(e))),b.__privateGet.call(void 0,this,o).registerActionHandler(`${N}:terminateAllSnaps`,(async()=>this.terminateAllSnaps()))}async terminate(e){const t=this.jobs.get(e);if(!t)throw new Error(`Job with id "${e}" not found.`);try{const t=await w.withTimeout.call(void 0,this.command(e,{jsonrpc:"2.0",method:"terminate",params:[],id:M.nanoid.call(void 0)}),b.__privateGet.call(void 0,this,d));t!==w.hasTimedOut&&"OK"===t||I.logError.call(void 0,`Job "${e}" failed to terminate gracefully.`,t)}catch{}Object.values(t.streams).forEach((e=>{try{!e.destroyed&&e.destroy(),e.removeAllListeners()}catch(e){I.logError.call(void 0,"Error while destroying stream",e)}})),this.terminateJob(t),this.jobs.delete(e),b.__privateMethod.call(void 0,this,_,k).call(this,e),y.log.call(void 0,`Job "${e}" terminated.`)}async initJob(e,t){const{streams:r,worker:i}=await this.initStreams(e,t),a=new(0,E.JsonRpcEngine),n=S.createStreamMiddleware.call(void 0);x.pipeline.call(void 0,n.stream,r.command,n.stream,(e=>{e&&I.logError.call(void 0,"Command stream failure.",e)})),a.push(n.middleware);const s={id:e,streams:r,rpcEngine:a,worker:i};return this.jobs.set(e,s),s}async initStreams(e,t){const r=await w.withTimeout.call(void 0,this.initEnvStream(e),t);if(r===w.hasTimedOut)throw this.terminateJob({id:e}),new Error("The Snaps execution environment failed to start.");const{worker:i,stream:a}=r,n=O(a,`Job: "${e}"`),l=n.createStream(I.SNAP_STREAM_NAMES.COMMAND),c=t=>{if(!j.isJsonRpcNotification.call(void 0,t))return;const r=b.__privateGet.call(void 0,this,s).get(e);"OutboundRequest"===t.method?b.__privateGet.call(void 0,this,o).publish("ExecutionService:outboundRequest",r):"OutboundResponse"===t.method?b.__privateGet.call(void 0,this,o).publish("ExecutionService:outboundResponse",r):"UnhandledError"===t.method?j.isObject.call(void 0,t.params)&&t.params.error?(b.__privateGet.call(void 0,this,o).publish("ExecutionService:unhandledError",r,t.params.error),l.removeListener("data",c)):I.logError.call(void 0,new Error(`Received malformed "${t.method}" command stream notification.`)):I.logError.call(void 0,new Error(`Received unexpected command stream notification "${t.method}".`))};l.on("data",c);const d=n.createStream(I.SNAP_STREAM_NAMES.JSON_RPC);return{streams:{command:l,rpc:d,_connection:a},worker:i}}async terminateSnap(e){const t=b.__privateGet.call(void 0,this,n).get(e);t&&await this.terminate(t)}async terminateAllSnaps(){await Promise.all([...this.jobs.keys()].map((async e=>this.terminate(e)))),b.__privateGet.call(void 0,this,a).clear()}getRpcRequestHandler(e){return b.__privateGet.call(void 0,this,a).get(e)}async executeSnap({snapId:e,sourceCode:t,endowments:r}){if(b.__privateGet.call(void 0,this,n).has(e))throw new Error(`Snap "${e}" is already being executed.`);const i=M.nanoid.call(void 0),a=new(0,T.Timer)(b.__privateGet.call(void 0,this,l)),s=await this.initJob(i,a);if(b.__privateMethod.call(void 0,this,v,g).call(this,e,s.id),b.__privateGet.call(void 0,this,u)){if(await w.withTimeout.call(void 0,this.command(s.id,{jsonrpc:"2.0",method:"ping",id:M.nanoid.call(void 0)}),b.__privateGet.call(void 0,this,c))===w.hasTimedOut)throw new Error("The Snaps execution environment failed to start.")}const o=s.streams.rpc;this.setupSnapProvider(e,o);const d=a.remaining,h=await w.withTimeout.call(void 0,this.command(s.id,{jsonrpc:"2.0",method:"executeSnap",params:{snapId:e,sourceCode:t,endowments:r},id:M.nanoid.call(void 0)}),d);if(h===w.hasTimedOut)throw new Error(`${e} failed to start.`);return b.__privateMethod.call(void 0,this,m,f).call(this,e,s.id),h}async command(e,t){j.assertIsJsonRpcRequest.call(void 0,t);const r=this.jobs.get(e);if(!r)throw new Error(`Job with id "${e}" not found.`);y.log.call(void 0,"Parent: Sending Command",t);const i=await r.rpcEngine.handle(t);if(i.error)throw new(0,A.JsonRpcError)(i.error.code,i.error.message,i.error.data);return i.result}async handleRpcRequest(e,t){const r=this.getRpcRequestHandler(e);if(!r)throw new Error(`Snap execution service returned no RPC handler for running snap "${e}".`);return r(t)}},r.setupMultiplex=O}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/chunk-S775IABY.js"}],[1939,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/chunk-VNOCJWOK.js"}],[194,{"@metamask/utils":2253},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){(0,i.hasProperty)(e,"PreferencesController")&&(0,i.isObject)(e.PreferencesController)&&(0,i.hasProperty)(e.PreferencesController,"frequentRpcListDetail")&&(0,i.isObject)(e.NetworkController)&&(0,i.hasProperty)(e.NetworkController,"networkConfigurations")&&delete e.PreferencesController.frequentRpcListDetail;return{...e}};var i=e("@metamask/utils")}}},{package:"$root$",file:"app/scripts/migrations/077-supplements/077-supplement-for-082.ts"}],[1940,{"@metamask/snaps-sdk":2075,"@metamask/snaps-sdk/jsx":2079,"@metamask/snaps-utils":2116},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var i=e("@metamask/snaps-sdk"),a=e("@metamask/snaps-sdk/jsx"),n=e("@metamask/snaps-utils");function s(e,t){i.assert.call(void 0,void 0===e[t],`Duplicate component names are not allowed, found multiple instances of: "${t}".`)}function o(e){if("Dropdown"===e.type){const t=n.getJsxChildren.call(void 0,e);return t[0]?.props.value}return null}function l(e,t,r,i){if("Button"===t.type)return i;const a=(n=t,Array.isArray(n.props.children)?n.props.children[0]:n.props.children);var n;return s(i,a.props.name),i[a.props.name]=function(e,t,r){const i=e[r],a=i?.[t.props.name];return t.props.value??a??o(t)??null}(e,a,r),i}var c=1e6;r.getJsxInterface=function(e){return a.isJSXElementUnsafe.call(void 0,e)?e:n.getJsxElementFromComponent.call(void 0,e)},r.assertNameIsUnique=s,r.constructState=function e(t,r,i={}){if("Box"===r.type){return n.getJsxChildren.call(void 0,r).reduce(((r,i)=>e(t,i,r)),i)}if("Form"===r.type){s(i,r.props.name);const e=n.getJsxChildren.call(void 0,r);return i[r.props.name]=e.reduce(((e,i)=>l(t,i,r.props.name,e)),{}),i}return"Input"!==r.type&&"Dropdown"!==r.type||(s(i,r.props.name),i[r.props.name]=function(e,t){return t.props.value??e[t.props.name]??o(t)??null}(t,r)),i},r.validateInterfaceContext=function(e){if(!e)return;const t=n.getJsonSizeUnsafe.call(void 0,e);i.assert.call(void 0,t<=c,"A Snap interface context may not be larger than 1 MB.")}}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/chunk-WCDDYBFW.js"}],[1941,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/chunk-WEY7ICES.js"}],[1942,{"./chunk-EXN2TFDJ.js":1924,"@metamask/snaps-utils":2116,"@metamask/utils":2253,"browserify-zlib":2964,"concat-stream":1983,"get-npm-tarball-url":3344,"readable-stream":4175,"readable-web-to-node-stream":4176,"tar-stream":4279},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var a,n,s,o,l=e("./chunk-EXN2TFDJ.js"),c=e("@metamask/snaps-utils"),d=e("@metamask/utils"),u=e("browserify-zlib"),h=i(e("concat-stream")),p=i(e("get-npm-tarball-url")),m=e("readable-stream"),f=e("readable-web-to-node-stream"),v=e("tar-stream"),g=new URL("https://registry.npmjs.org"),_=class{constructor(e,t={}){l.__privateAdd.call(void 0,this,s),l.__privateAdd.call(void 0,this,a,void 0),l.__privateAdd.call(void 0,this,n,void 0);const r=t.allowCustomRegistries??!1,i=t.fetch??globalThis.fetch.bind(globalThis),o=t.versionRange??c.DEFAULT_REQUESTED_SNAP_VERSION,u=t.resolveVersion??(async e=>e);let h;d.assertStruct.call(void 0,e.toString(),c.NpmSnapIdStruct,"Invalid Snap Id: "),""===e.host&&""===e.port&&""===e.username&&""===e.password?h=g:(h="https://",e.username&&(h+=e.username,e.password&&(h+=`:${e.password}`),h+="@"),h+=e.host,h=new URL(h),d.assert.call(void 0,r,new TypeError(`Custom NPM registries are disabled, tried to use "${h.toString()}".`))),d.assert.call(void 0,"/"===h.pathname&&""===h.search&&""===h.hash),d.assert.call(void 0,""!==e.pathname&&"/"!==e.pathname,new TypeError("The package name in NPM location is empty."));let p=e.pathname;p.startsWith("/")&&(p=p.slice(1)),this.meta={requestedRange:o,registry:h,packageName:p,fetch:i,resolveVersion:u}}async manifest(){if(l.__privateGet.call(void 0,this,a))return l.__privateGet.call(void 0,this,a).clone();const e=await this.fetch("snap.manifest.json"),t=c.parseJson.call(void 0,e.toString());return e.result=c.createSnapManifest.call(void 0,t),l.__privateSet.call(void 0,this,a,e),this.manifest()}async fetch(e){const t=c.normalizeRelative.call(void 0,e);l.__privateGet.call(void 0,this,n)||(await l.__privateMethod.call(void 0,this,s,o).call(this),d.assert.call(void 0,void 0!==l.__privateGet.call(void 0,this,n)));const r=l.__privateGet.call(void 0,this,n).get(t);return d.assert.call(void 0,void 0!==r,new TypeError(`File "${e}" not found in package.`)),r.clone()}get packageName(){return this.meta.packageName}get version(){return d.assert.call(void 0,void 0!==this.meta.version,"Tried to access version without first fetching NPM package."),this.meta.version}get registry(){return this.meta.registry}get versionRange(){return this.meta.requestedRange}};a=new WeakMap,n=new WeakMap,s=new WeakSet,o=async function(){d.assert.call(void 0,void 0===l.__privateGet.call(void 0,this,n));const e=await this.meta.resolveVersion(this.meta.requestedRange),{tarballURL:t,targetVersion:r}=await async function(e,t,r,i){if(T(r)&&d.isValidSemVerVersion.call(void 0,t))return{tarballURL:p.default.call(void 0,e,t),targetVersion:t};const a=await y(e,r,i),n=Object.keys(a?.versions??{}).map((e=>(d.assertIsSemVerVersion.call(void 0,e),e))),s=c.getTargetVersion.call(void 0,n,t);if(null===s)throw new Error(`Failed to find a matching version in npm metadata for package "${e}" and requested semver range "${t}".`);const o=a?.versions?.[s]?.dist?.tarball;return{tarballURL:o,targetVersion:s}}(this.meta.packageName,e,this.meta.registry,this.meta.fetch);if(!c.isValidUrl.call(void 0,t)||!t.toString().endsWith(".tgz"))throw new Error(`Failed to find valid tarball URL in NPM metadata for package "${this.meta.packageName}".`);const i=new URL(t);i.hostname=this.meta.registry.hostname,i.protocol=this.meta.registry.protocol;const a=await this.fetchNpmTarball(i);l.__privateSet.call(void 0,this,n,a),this.meta.version=r};var k=262144e3;async function y(e,t,r){const i=await r(new URL(e,t).toString(),{headers:{accept:T(t)?"application/vnd.npm.install-v1+json; q=1.0, application/json; q=0.8, */*":"application/json"}});if(!i.ok)throw new Error(`Failed to fetch NPM registry entry. Status code: ${i.status}.`);const a=await i.json();if(!d.isObject.call(void 0,a))throw new Error(`Failed to fetch package "${e}" metadata from npm.`);return a}function w(e,t){let r="npm://";return""!==e.username&&(r+=e.username,""!==e.password&&(r+=`:${e.password}`),r+="@"),`${r}${e.host}/${t}/`}function T(e){return e.toString()===g.toString()}var b=/^package\//u;function E(e){return"function"!=typeof e.getReader?e:new(0,f.ReadableWebToNodeStream)(e)}r.DEFAULT_NPM_REGISTRY=g,r.BaseNpmLocation=_,r.TARBALL_SIZE_SAFETY_LIMIT=k,r.NpmLocation=class extends _{async fetchNpmTarball(e){const t=await this.meta.fetch(e.toString());if(!t.ok||!t.body)throw new Error(`Failed to fetch tarball for package "${this.meta.packageName}".`);const r=t.headers.get("content-length");d.assert.call(void 0,r,"Snap tarball has invalid content-length");const i=parseInt(r,10);return d.assert.call(void 0,i<=k,"Snap tarball exceeds size limit"),new Promise(((e,r)=>{const i=new Map,a=function(e,t){d.assert.call(void 0,e.endsWith("/"),"Base needs to end with '/' for relative paths to be added as children instead of siblings."),d.assert.call(void 0,e.startsWith("npm:"),'Protocol mismatch, expected "npm:".');const r=v.extract.call(void 0);let i=0;return r.on("entry",((a,n,s)=>{const{name:o,type:l}=a;if("file"===l){const a=o.replace(b,"");return n.pipe(h.default.call(void 0,{encoding:"uint8array"},(n=>{try{i+=n.byteLength,d.assert.call(void 0,i<k,"Snap tarball exceeds limit of 262144000 bytes.");const r=new(0,c.VirtualFile)({value:n,path:a,data:{canonicalPath:new URL(a,e).toString()}});return d.assert.call(void 0,!t.has(a),"Malformed tarball, multiple files with the same path."),t.set(a,r),s()}catch(e){return r.destroy(e)}})))}return n.on("end",(()=>s())),n.resume()})),r}(w(this.meta.registry,this.meta.packageName),i),n=t.body;if("pipeThrough"in n&&"DecompressionStream"in globalThis){const t=new DecompressionStream("gzip"),s=n.pipeThrough(t);m.pipeline.call(void 0,E(s),a,(t=>{t?r(t):e(i)}))}else m.pipeline.call(void 0,E(n),u.createGunzip.call(void 0),a,(t=>{t?r(t):e(i)}))}))}},r.fetchNpmMetadata=y,r.getNpmCanonicalBasePath=w}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/chunk-XWDEGRM5.js"}],[1943,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});r.getRunnableSnaps=e=>e.filter((e=>e.enabled&&!e.blocked))}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/chunk-YYPUPKQY.js"}],[1944,{"./chunk-AP7CJ6DA.js":1918,"./chunk-BO2ZDPWV.js":1919,"./chunk-BOFPNIRX.js":1920,"./chunk-CDTGUNSA.js":1921,"./chunk-EXN2TFDJ.js":1924,"./chunk-JQ54YYLU.js":1930,"./chunk-NXZVKBSV.js":1933,"./chunk-PT22IXNS.js":1936,"@metamask/base-controller":1952,"@metamask/permission-controller":1982,"@metamask/rpc-errors":1670,"@metamask/snaps-rpc-methods":2039,"@metamask/snaps-sdk":2075,"@metamask/snaps-utils":2116,"@metamask/utils":2253,"@xstate/fsm":2587,nanoid:1984},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var i=e("./chunk-PT22IXNS.js"),a=e("./chunk-AP7CJ6DA.js"),n=e("./chunk-JQ54YYLU.js"),s=e("./chunk-BO2ZDPWV.js"),o=e("./chunk-NXZVKBSV.js"),l=e("./chunk-CDTGUNSA.js"),c=e("./chunk-BOFPNIRX.js"),d=e("./chunk-EXN2TFDJ.js"),u=e("@metamask/base-controller"),h=e("@metamask/permission-controller"),p=e("@metamask/rpc-errors"),m=e("@metamask/snaps-rpc-methods"),f=e("@metamask/snaps-sdk"),v=e("@metamask/snaps-utils"),g=e("@metamask/utils"),_=e("@xstate/fsm"),k=e("nanoid"),y="SnapController",w="wallet_installSnap",T="wallet_updateSnap",b="wallet_installSnapResult",E=new Set(["initialPermissions","id","version","enabled","blocked"]),S={snaps:{},snapStates:{},unencryptedSnapStates:{}};function P(e){return Object.keys(e).reduce(((t,r)=>(E.has(r)&&(t[r]=e[r]),t)),{})}var C,A,I,j,M,x,N,O,R,G,L,B,F,D,U,H,W,$,V,K,q,Y,X,J,z,Z,Q,ee,te,re,ie,ae,ne,se,oe,le,ce,de,ue,he,pe,me,fe,ve,ge,_e,ke,ye,we,Te,be,Ee,Se,Pe,Ce,Ae,Ie,je,Me,xe,Ne,Oe,Re,Ge,Le,Be,Fe,De,Ue,He,We,$e,Ve,Ke,qe,Ye,Xe,Je,ze,Ze,Qe,et,tt,rt,it,at,nt,st,ot,lt,ct,dt,ut,ht,pt,mt,ft,vt,gt,_t,kt,yt,wt,Tt,bt,Et,St,Pt=class extends u.BaseController{constructor({closeAllConnections:e,messenger:t,state:r,dynamicPermissions:a=["eth_accounts"],environmentEndowmentPermissions:n=[],excludedPermissions:s={},idleTimeCheckInterval:o=g.inMilliseconds.call(void 0,5,g.Duration.Second),maxIdleTime:l=g.inMilliseconds.call(void 0,30,g.Duration.Second),maxRequestTime:c=g.inMilliseconds.call(void 0,60,g.Duration.Second),fetchFunction:u=globalThis.fetch.bind(globalThis),featureFlags:h={},detectSnapLocation:p=i.detectSnapLocation,preinstalledSnaps:m=null,encryptor:_,getMnemonic:k,getFeatureFlags:y=(()=>({}))}){super({messenger:t,metadata:{snapStates:{persist:!0,anonymous:!1},unencryptedSnapStates:{persist:!0,anonymous:!1},snaps:{persist:e=>Object.values(e).filter((e=>e.status!==v.SnapStatus.Installing)).map((e=>({...e,status:v.SnapStatus.Stopped}))).reduce(((e,t)=>(e[t.id]=t,e)),{}),anonymous:!1}},name:"SnapController",state:{...S,...r}}),d.__privateAdd.call(void 0,this,$),d.__privateAdd.call(void 0,this,K),d.__privateAdd.call(void 0,this,Y),d.__privateAdd.call(void 0,this,J),d.__privateAdd.call(void 0,this,Z),d.__privateAdd.call(void 0,this,ee),d.__privateAdd.call(void 0,this,re),d.__privateAdd.call(void 0,this,ae),d.__privateAdd.call(void 0,this,se),d.__privateAdd.call(void 0,this,le),d.__privateAdd.call(void 0,this,de),d.__privateAdd.call(void 0,this,he),d.__privateAdd.call(void 0,this,me),d.__privateAdd.call(void 0,this,ve),d.__privateAdd.call(void 0,this,_e),d.__privateAdd.call(void 0,this,ye),d.__privateAdd.call(void 0,this,Te),d.__privateAdd.call(void 0,this,Ee),d.__privateAdd.call(void 0,this,Pe),d.__privateAdd.call(void 0,this,Ae),d.__privateAdd.call(void 0,this,je),d.__privateAdd.call(void 0,this,xe),d.__privateAdd.call(void 0,this,Oe),d.__privateAdd.call(void 0,this,Ge),d.__privateAdd.call(void 0,this,Be),d.__privateAdd.call(void 0,this,De),d.__privateAdd.call(void 0,this,He),d.__privateAdd.call(void 0,this,$e),d.__privateAdd.call(void 0,this,Ke),d.__privateAdd.call(void 0,this,Ye),d.__privateAdd.call(void 0,this,Je),d.__privateAdd.call(void 0,this,Ze),d.__privateAdd.call(void 0,this,et),d.__privateAdd.call(void 0,this,rt),d.__privateAdd.call(void 0,this,at),d.__privateAdd.call(void 0,this,st),d.__privateAdd.call(void 0,this,lt),d.__privateAdd.call(void 0,this,dt),d.__privateAdd.call(void 0,this,ht),d.__privateAdd.call(void 0,this,mt),d.__privateAdd.call(void 0,this,vt),d.__privateAdd.call(void 0,this,_t),d.__privateAdd.call(void 0,this,yt),d.__privateAdd.call(void 0,this,Tt),d.__privateAdd.call(void 0,this,Et),d.__privateAdd.call(void 0,this,C,void 0),d.__privateAdd.call(void 0,this,A,void 0),d.__privateAdd.call(void 0,this,I,void 0),d.__privateAdd.call(void 0,this,j,void 0),d.__privateAdd.call(void 0,this,M,void 0),d.__privateAdd.call(void 0,this,x,void 0),d.__privateAdd.call(void 0,this,N,void 0),d.__privateAdd.call(void 0,this,O,void 0),d.__privateAdd.call(void 0,this,R,void 0),d.__privateAdd.call(void 0,this,G,void 0),d.__privateAdd.call(void 0,this,L,void 0),d.__privateAdd.call(void 0,this,B,void 0),d.__privateAdd.call(void 0,this,F,void 0),d.__privateAdd.call(void 0,this,D,void 0),d.__privateAdd.call(void 0,this,U,void 0),d.__privateAdd.call(void 0,this,H,void 0),d.__privateAdd.call(void 0,this,W,void 0),d.__privateSet.call(void 0,this,C,e),d.__privateSet.call(void 0,this,A,a),d.__privateSet.call(void 0,this,I,n),d.__privateSet.call(void 0,this,j,s),d.__privateSet.call(void 0,this,M,h),d.__privateSet.call(void 0,this,x,u),d.__privateSet.call(void 0,this,N,o),d.__privateSet.call(void 0,this,O,l),this.maxRequestTime=c,d.__privateSet.call(void 0,this,B,p),d.__privateSet.call(void 0,this,R,_),d.__privateSet.call(void 0,this,G,k),d.__privateSet.call(void 0,this,L,y),d.__privateSet.call(void 0,this,W,m),this._onUnhandledSnapError=this._onUnhandledSnapError.bind(this),this._onOutboundRequest=this._onOutboundRequest.bind(this),this._onOutboundResponse=this._onOutboundResponse.bind(this),d.__privateSet.call(void 0,this,D,new Map),d.__privateSet.call(void 0,this,F,new Map),d.__privateMethod.call(void 0,this,J,z).call(this),this.messagingSystem.subscribe("ExecutionService:unhandledError",this._onUnhandledSnapError),this.messagingSystem.subscribe("ExecutionService:outboundRequest",this._onOutboundRequest),this.messagingSystem.subscribe("ExecutionService:outboundResponse",this._onOutboundResponse),this.messagingSystem.subscribe("SnapController:snapInstalled",(({id:e},t)=>{d.__privateMethod.call(void 0,this,Et,St).call(this,t,e,v.HandlerType.OnInstall).catch((t=>{v.logError.call(void 0,`Error when calling \`onInstall\` lifecycle hook for snap "${e}": ${f.getErrorMessage.call(void 0,t)}`)}))})),this.messagingSystem.subscribe("SnapController:snapUpdated",(({id:e},t,r)=>{d.__privateMethod.call(void 0,this,Et,St).call(this,r,e,v.HandlerType.OnUpdate).catch((t=>{v.logError.call(void 0,`Error when calling \`onUpdate\` lifecycle hook for snap "${e}": ${f.getErrorMessage.call(void 0,t)}`)}))})),d.__privateMethod.call(void 0,this,$,V).call(this),d.__privateMethod.call(void 0,this,K,q).call(this),d.__privateGet.call(void 0,this,W)&&d.__privateMethod.call(void 0,this,Y,X).call(this,d.__privateGet.call(void 0,this,W)),Object.values(this.state?.snaps??{}).forEach((e=>d.__privateMethod.call(void 0,this,vt,gt).call(this,e.id)))}async updateBlockedSnaps(){d.__privateMethod.call(void 0,this,ae,ne).call(this),await this.messagingSystem.call("SnapsRegistry:update");const e=await this.messagingSystem.call("SnapsRegistry:get",Object.values(this.state.snaps).reduce(((e,t)=>(e[t.id]={version:t.version,checksum:t.manifest.source.shasum},e)),{}));await Promise.all(Object.entries(e).map((async([e,{status:t,reason:r}])=>1===t?d.__privateMethod.call(void 0,this,Z,Q).call(this,e,r):d.__privateMethod.call(void 0,this,ee,te).call(this,e))))}_onUnhandledSnapError(e,t){this.stopSnap(e,v.SnapStatusEvents.Crash).catch((e=>{v.logError.call(void 0,e)}))}_onOutboundRequest(e){const t=d.__privateMethod.call(void 0,this,mt,ft).call(this,e);t.pendingInboundRequests.filter((e=>"running"===e.timer.status)).forEach((e=>e.timer.pause())),t.pendingOutboundRequests+=1}_onOutboundResponse(e){const t=d.__privateMethod.call(void 0,this,mt,ft).call(this,e);t.pendingOutboundRequests-=1,0===t.pendingOutboundRequests&&t.pendingInboundRequests.filter((e=>"paused"===e.timer.status)).forEach((e=>e.timer.resume()))}async startSnap(e){d.__privateMethod.call(void 0,this,ae,ne).call(this);const t=this.state.snaps[e];if(!1===t.enabled)throw new Error(`Snap "${e}" is disabled.`);await d.__privateMethod.call(void 0,this,Oe,Re).call(this,{snapId:e,sourceCode:t.sourceCode})}enableSnap(e){if(this.getExpect(e),this.state.snaps[e].blocked)throw new Error(`Snap "${e}" is blocked and cannot be enabled.`);this.update((t=>{t.snaps[e].enabled=!0})),this.messagingSystem.publish("SnapController:snapEnabled",this.getTruncatedExpect(e))}async disableSnap(e){if(!this.has(e))throw new Error(`Snap "${e}" not found.`);this.update((t=>{t.snaps[e].enabled=!1})),this.isRunning(e)&&await this.stopSnap(e,v.SnapStatusEvents.Stop),this.messagingSystem.publish("SnapController:snapDisabled",this.getTruncatedExpect(e))}async stopSnap(e,t=v.SnapStatusEvents.Stop){var r;const i=d.__privateMethod.call(void 0,this,ht,pt).call(this,e);if(!i)throw new Error(`The snap "${e}" is not running.`);if(!i.stopping){i.stopping=!0;try{this.isRunning(e)&&(null==(r=d.__privateGet.call(void 0,this,C))||r.call(this,e),await d.__privateMethod.call(void 0,this,de,ue).call(this,e))}finally{i.lastRequest=null,i.pendingInboundRequests=[],i.pendingOutboundRequests=0,i.stopping=!1,this.isRunning(e)&&d.__privateMethod.call(void 0,this,le,ce).call(this,e,t)}}}isRunning(e){return"running"===this.getExpect(e).status}has(e){return Boolean(this.get(e))}get(e){return this.state.snaps[e]}getExpect(e){const t=this.get(e);return g.assert.call(void 0,void 0!==t,new Error(`Snap "${e}" not found.`)),t}getTruncated(e){const t=this.get(e);return t?P(t):null}getTruncatedExpect(e){return P(this.getExpect(e))}async updateSnapState(e,t,r){if(r){const r=await d.__privateMethod.call(void 0,this,ve,ge).call(this,e,t);this.update((t=>{t.snapStates[e]=r}))}else this.update((r=>{r.unencryptedSnapStates[e]=JSON.stringify(t)}))}clearSnapState(e,t){this.update((r=>{t?r.snapStates[e]=null:r.unencryptedSnapStates[e]=null}))}async getSnapState(e,t){const r=t?this.state.snapStates[e]:this.state.unencryptedSnapStates[e];if(null==r)return null;if(!t)return v.parseJson.call(void 0,r);return await d.__privateMethod.call(void 0,this,me,fe).call(this,e,r)}async getSnapFile(e,t,r=f.AuxiliaryFileEncoding.Base64){const i=this.getExpect(e),a=v.normalizeRelative.call(void 0,t),n=i.auxiliaryFiles?.find((e=>e.path===a))?.value;return n?v.encodeAuxiliaryFile.call(void 0,n,r):null}async clearState(){const e=Object.keys(this.state.snaps);d.__privateGet.call(void 0,this,C)&&e.forEach((e=>{var t;null==(t=d.__privateGet.call(void 0,this,C))||t.call(this,e)})),await this.messagingSystem.call("ExecutionService:terminateAllSnaps"),e.forEach((e=>d.__privateMethod.call(void 0,this,Ee,Se).call(this,e))),this.update((e=>{e.snaps={},e.snapStates={}})),d.__privateGet.call(void 0,this,F).clear(),d.__privateGet.call(void 0,this,W)&&(d.__privateMethod.call(void 0,this,Y,X).call(this,d.__privateGet.call(void 0,this,W)),Object.values(this.state?.snaps).forEach((e=>d.__privateMethod.call(void 0,this,vt,gt).call(this,e.id))))}async removeSnap(e){return this.removeSnaps([e])}async removeSnaps(e){if(!Array.isArray(e))throw new Error("Expected array of snap ids.");e.forEach((e=>{const t=this.getExpect(e);g.assert.call(void 0,!1!==t.removable,`${e} is not removable.`)})),await Promise.all(e.map((async e=>{const t=this.getExpect(e),r=this.getTruncatedExpect(e);await this.disableSnap(e),d.__privateMethod.call(void 0,this,Ee,Se).call(this,e),d.__privateMethod.call(void 0,this,Te,be).call(this,e),d.__privateGet.call(void 0,this,F).delete(e),this.update((t=>{delete t.snaps[e],delete t.snapStates[e],delete t.unencryptedSnapStates[e]})),t.status!==v.SnapStatus.Installing&&this.messagingSystem.publish("SnapController:snapUninstalled",r)})))}removeSnapFromSubject(e,t){const r=this.messagingSystem.call("PermissionController:getPermissions",e),i=r?.[m.WALLET_SNAP_PERMISSION_KEY]?.caveats?.find((e=>e.type===v.SnapCaveatType.SnapIds));if(!i)return;if(Boolean(i.value?.[t])){const r={...i.value};delete r[t],Object.keys(r).length>0?this.messagingSystem.call("PermissionController:updateCaveat",e,m.WALLET_SNAP_PERMISSION_KEY,v.SnapCaveatType.SnapIds,r):this.messagingSystem.call("PermissionController:revokePermissions",{[e]:[m.WALLET_SNAP_PERMISSION_KEY]})}}revokeDynamicSnapPermissions(e,t){g.assert.call(void 0,t.every((e=>d.__privateGet.call(void 0,this,A).includes(e))),"Non-dynamic permissions cannot be revoked"),this.messagingSystem.call("PermissionController:revokePermissions",{[e]:t})}incrementActiveReferences(e){d.__privateMethod.call(void 0,this,mt,ft).call(this,e).activeReferences+=1}decrementActiveReferences(e){const t=d.__privateMethod.call(void 0,this,mt,ft).call(this,e);g.assert.call(void 0,t.activeReferences>0,"SnapController reference management is in an invalid state."),t.activeReferences-=1}getAllSnaps(){return Object.values(this.state.snaps).map(P)}getPermittedSnaps(e){const t=this.messagingSystem.call("PermissionController:getPermissions",e)??{},r=t[m.WALLET_SNAP_PERMISSION_KEY]?.caveats?.find((e=>e.type===v.SnapCaveatType.SnapIds))?.value??{};return Object.keys(r).reduce(((e,t)=>{const r=this.get(t),i=this.getTruncated(t);return i&&r?.status!==v.SnapStatus.Installing&&(e[t]=i),e}),{})}async installSnaps(e,t){d.__privateMethod.call(void 0,this,ae,ne).call(this);const r={},i=Object.keys(t),a=[],n=[];try{for(const[i,{version:s}]of Object.entries(t)){v.assertIsValidSnapId.call(void 0,i);const[t,o]=v.resolveVersionRange.call(void 0,s);if(t)throw p.rpcErrors.invalidParams(`The "version" field must be a valid SemVer version range if specified. Received: "${s}".`);const l=d.__privateGet.call(void 0,this,B).call(this,i,{versionRange:o,fetch:d.__privateGet.call(void 0,this,x),allowLocal:d.__privateGet.call(void 0,this,M).allowLocalSnaps,resolveVersion:async e=>d.__privateGet.call(void 0,this,M).requireAllowlist?await d.__privateMethod.call(void 0,this,je,Me).call(this,i,e):e}),c=this.has(i)&&!l.shouldAlwaysReload;if(c&&d.__privateMethod.call(void 0,this,Tt,bt).call(this,i,o)){const e=this.getExpect(i);a.push({snapId:i,oldVersion:e.version});let t=d.__privateMethod.call(void 0,this,at,nt).call(this,i);if(void 0!==t)throw new Error("This snap is already being updated.");t=d.__privateMethod.call(void 0,this,st,ot).call(this,i),t.newVersion=o}else c||n.push(i);r[i]=await this.processRequestedSnap(e,i,l,o)}n.forEach((t=>this.messagingSystem.publish("SnapController:snapInstalled",this.getTruncatedExpect(t),e))),a.forEach((({snapId:t,oldVersion:r})=>this.messagingSystem.publish("SnapController:snapUpdated",this.getTruncatedExpect(t),r,e))),i.forEach((e=>d.__privateGet.call(void 0,this,D).delete(e)))}catch(e){const t=n.filter((e=>this.has(e)));await this.removeSnaps(t);const r=[...d.__privateGet.call(void 0,this,D).keys()],i=a.map((({snapId:e})=>e)).filter((e=>r.includes(e)));throw await d.__privateMethod.call(void 0,this,dt,ut).call(this,i),e}return r}async processRequestedSnap(e,t,r,i){const a=this.getTruncated(t);if(a&&!r.shouldAlwaysReload)return g.satisfiesVersionRange.call(void 0,a.version,i)?a:await this.updateSnap(e,t,r,i,!1);let n=d.__privateMethod.call(void 0,this,Pe,Ce).call(this,{origin:e,snapId:t,type:w});this.messagingSystem.publish("SnapController:snapInstallStarted",t,e,!1),a&&this.isRunning(t)&&await this.stopSnap(t,v.SnapStatusEvents.Stop),a&&r.shouldAlwaysReload&&d.__privateMethod.call(void 0,this,Ee,Se).call(this,t);try{const{sourceCode:a}=await d.__privateMethod.call(void 0,this,xe,Ne).call(this,{origin:e,id:t,location:r,versionRange:i});await this.authorize(t,n),n=d.__privateMethod.call(void 0,this,Pe,Ce).call(this,{origin:e,snapId:t,type:b}),await d.__privateMethod.call(void 0,this,Oe,Re).call(this,{snapId:t,sourceCode:a});const s=this.getTruncatedExpect(t);return d.__privateMethod.call(void 0,this,Ae,Ie).call(this,n.id,{loading:!1,type:w}),s}catch(r){v.logError.call(void 0,`Error when adding ${t}.`,r);const i=r instanceof Error?r.message:r.toString();throw d.__privateMethod.call(void 0,this,Ae,Ie).call(this,n.id,{loading:!1,type:w,error:i}),this.messagingSystem.publish("SnapController:snapInstallFailed",t,e,!1,i),r}}async updateSnap(e,t,r,i=v.DEFAULT_REQUESTED_SNAP_VERSION,a=!0){if(d.__privateMethod.call(void 0,this,ae,ne).call(this),!g.isValidSemVerRange.call(void 0,i))throw new Error(`Received invalid snap version range: "${i}".`);let n=d.__privateMethod.call(void 0,this,Pe,Ce).call(this,{origin:e,snapId:t,type:T});try{this.messagingSystem.publish("SnapController:snapInstallStarted",t,e,!0);const s=this.getExpect(t),o=s.manifest,c=await l.fetchSnap.call(void 0,t,r),{sourceCode:u,manifest:h}=c,f=h.result,_=f.version;if(!g.gtVersion.call(void 0,_,s.version))throw p.rpcErrors.invalidParams(`Snap "${t}@${s.version}" is already installed. Couldn't update to a version inside requested "${i}" range.`);if(!g.satisfiesVersionRange.call(void 0,_,i))throw new Error(`Version mismatch. Manifest for "${t}" specifies version "${_}" which doesn't satisfy requested version range "${i}".`);await d.__privateMethod.call(void 0,this,re,ie).call(this,t,{version:_,checksum:f.source.shasum,permissions:f.initialPermissions});const k=m.processSnapPermissions.call(void 0,f.initialPermissions);d.__privateMethod.call(void 0,this,De,Ue).call(this,k);const{newPermissions:y,unusedPermissions:w,approvedPermissions:E}=d.__privateMethod.call(void 0,this,_t,kt).call(this,t,k),{newConnections:S,unusedConnections:P,approvedConnections:C}=l.calculateConnectionsChange.call(void 0,o.initialConnections??{},f.initialConnections??{});d.__privateMethod.call(void 0,this,Ae,Ie).call(this,n.id,{permissions:y,newVersion:f.version,newPermissions:y,approvedPermissions:E,unusedPermissions:w,newConnections:S,unusedConnections:P,approvedConnections:C,loading:!1});const{permissions:A,...I}=await n.promise;n=d.__privateMethod.call(void 0,this,Pe,Ce).call(this,{origin:e,snapId:t,type:b}),this.isRunning(t)&&await this.stopSnap(t,v.SnapStatusEvents.Stop),d.__privateMethod.call(void 0,this,le,ce).call(this,t,v.SnapStatusEvents.Update),d.__privateMethod.call(void 0,this,Be,Fe).call(this,{origin:e,id:t,files:c,isUpdate:!0}),d.__privateMethod.call(void 0,this,yt,wt).call(this,{snapId:t,unusedPermissions:w,newPermissions:A,requestData:I}),f.initialConnections&&d.__privateMethod.call(void 0,this,_e,ke).call(this,t,o.initialConnections??null,f.initialConnections);const j=d.__privateMethod.call(void 0,this,at,nt).call(this,t);void 0!==j&&(j.permissions.revoked=w,j.permissions.granted=A,j.permissions.requestData=I);const M=u.toString();g.assert.call(void 0,"string"==typeof M&&M.length>0,`Invalid source code for snap "${t}".`);try{await d.__privateMethod.call(void 0,this,Oe,Re).call(this,{snapId:t,sourceCode:M})}catch{throw new Error(`Snap ${t} crashed with updated source code.`)}const x=this.getTruncatedExpect(t);return a&&this.messagingSystem.publish("SnapController:snapUpdated",x,s.version,e),d.__privateMethod.call(void 0,this,Ae,Ie).call(this,n.id,{loading:!1,type:T}),x}catch(r){v.logError.call(void 0,`Error when updating ${t},`,r);const i=r instanceof Error?r.message:r.toString();throw d.__privateMethod.call(void 0,this,Ae,Ie).call(this,n.id,{loading:!1,error:i,type:T}),this.messagingSystem.publish("SnapController:snapInstallFailed",t,e,!0,i),r}}async getRegistryMetadata(e){return d.__privateMethod.call(void 0,this,ae,ne).call(this),await this.messagingSystem.call("SnapsRegistry:getMetadata",e)}async authorize(e,t){o.log.call(void 0,`Authorizing snap: ${e}`);const r=this.state.snaps[e],{initialPermissions:i,initialConnections:a}=r;try{const n=m.processSnapPermissions.call(void 0,i);d.__privateMethod.call(void 0,this,De,Ue).call(this,n),d.__privateMethod.call(void 0,this,Ae,Ie).call(this,t.id,{loading:!1,connections:a??{},permissions:n});const{permissions:s,...o}=await t.promise;d.__privateMethod.call(void 0,this,yt,wt).call(this,{snapId:e,newPermissions:s,requestData:o}),r.manifest.initialConnections&&d.__privateMethod.call(void 0,this,_e,ke).call(this,e,null,r.manifest.initialConnections)}finally{d.__privateMethod.call(void 0,this,mt,ft).call(this,e).installPromise=null}}destroy(){super.destroy(),d.__privateGet.call(void 0,this,U)&&clearTimeout(d.__privateGet.call(void 0,this,U)),this.messagingSystem.unsubscribe("ExecutionService:unhandledError",this._onUnhandledSnapError),this.messagingSystem.unsubscribe("ExecutionService:outboundRequest",this._onOutboundRequest),this.messagingSystem.unsubscribe("ExecutionService:outboundResponse",this._onOutboundResponse),this.messagingSystem.clearEventSubscriptions("SnapController:snapInstalled"),this.messagingSystem.clearEventSubscriptions("SnapController:snapUpdated")}async handleRequest({snapId:e,origin:t,handler:r,request:i}){d.__privateMethod.call(void 0,this,ae,ne).call(this);const a={jsonrpc:"2.0",id:k.nanoid.call(void 0),...i};g.assertIsJsonRpcRequest.call(void 0,a);const n=m.handlerEndowments[r];g.assert.call(void 0,"string"==typeof n||null===n,"'permissionName' must be either a string or null.");const s=this.messagingSystem.call("PermissionController:getPermissions",e);if(!(null===n||s&&g.hasProperty.call(void 0,s,n)))throw new Error(`Snap "${e}" is not permitted to use "${n}".`);const o=n?s[n]:void 0;if(n===m.SnapEndowments.Rpc||n===m.SnapEndowments.Keyring){g.assert.call(void 0,o);const r=this.messagingSystem.call("SubjectMetadataController:getSubjectMetadata",t),i=n===m.SnapEndowments.Rpc?m.getRpcCaveatOrigins.call(void 0,o):m.getKeyringCaveatOrigins.call(void 0,o);if(g.assert.call(void 0,i),!v.isOriginAllowed.call(void 0,i,r?.subjectType??h.SubjectType.Website,t))throw new Error(`Snap "${e}" is not permitted to handle requests from "${t}".`)}const l=d.__privateMethod.call(void 0,this,$e,Ve).call(this,e);if(!l)throw new Error(`Snap RPC message handler not found for snap "${e}".`);return l({origin:t,handler:r,request:a,timeout:d.__privateMethod.call(void 0,this,He,We).call(this,o)})}};C=new WeakMap,A=new WeakMap,I=new WeakMap,j=new WeakMap,M=new WeakMap,x=new WeakMap,N=new WeakMap,O=new WeakMap,R=new WeakMap,G=new WeakMap,L=new WeakMap,B=new WeakMap,F=new WeakMap,D=new WeakMap,U=new WeakMap,H=new WeakMap,W=new WeakMap,$=new WeakSet,V=function(){const e=({snapId:e})=>this.getExpect(e).enabled,t={initial:v.SnapStatus.Installing,states:{[v.SnapStatus.Installing]:{on:{[v.SnapStatusEvents.Start]:{target:v.SnapStatus.Running,cond:e}}},[v.SnapStatus.Updating]:{on:{[v.SnapStatusEvents.Start]:{target:v.SnapStatus.Running,cond:e},[v.SnapStatusEvents.Stop]:v.SnapStatus.Stopped}},[v.SnapStatus.Running]:{on:{[v.SnapStatusEvents.Stop]:v.SnapStatus.Stopped,[v.SnapStatusEvents.Crash]:v.SnapStatus.Crashed}},[v.SnapStatus.Stopped]:{on:{[v.SnapStatusEvents.Start]:{target:v.SnapStatus.Running,cond:e},[v.SnapStatusEvents.Update]:v.SnapStatus.Updating}},[v.SnapStatus.Crashed]:{on:{[v.SnapStatusEvents.Start]:{target:v.SnapStatus.Running,cond:e},[v.SnapStatusEvents.Update]:v.SnapStatus.Updating}}}};d.__privateSet.call(void 0,this,H,_.createMachine.call(void 0,t)),s.validateMachine.call(void 0,d.__privateGet.call(void 0,this,H))},K=new WeakSet,q=function(){this.messagingSystem.registerActionHandler(`${y}:clearSnapState`,((...e)=>this.clearSnapState(...e))),this.messagingSystem.registerActionHandler(`${y}:get`,((...e)=>this.get(...e))),this.messagingSystem.registerActionHandler(`${y}:getSnapState`,(async(...e)=>this.getSnapState(...e))),this.messagingSystem.registerActionHandler(`${y}:handleRequest`,(async(...e)=>this.handleRequest(...e))),this.messagingSystem.registerActionHandler(`${y}:has`,((...e)=>this.has(...e))),this.messagingSystem.registerActionHandler(`${y}:updateBlockedSnaps`,(async()=>this.updateBlockedSnaps())),this.messagingSystem.registerActionHandler(`${y}:updateSnapState`,(async(...e)=>this.updateSnapState(...e))),this.messagingSystem.registerActionHandler(`${y}:enable`,((...e)=>this.enableSnap(...e))),this.messagingSystem.registerActionHandler(`${y}:disable`,(async(...e)=>this.disableSnap(...e))),this.messagingSystem.registerActionHandler(`${y}:remove`,(async(...e)=>this.removeSnap(...e))),this.messagingSystem.registerActionHandler(`${y}:getPermitted`,((...e)=>this.getPermittedSnaps(...e))),this.messagingSystem.registerActionHandler(`${y}:install`,(async(...e)=>this.installSnaps(...e))),this.messagingSystem.registerActionHandler(`${y}:getAll`,((...e)=>this.getAllSnaps(...e))),this.messagingSystem.registerActionHandler(`${y}:incrementActiveReferences`,((...e)=>this.incrementActiveReferences(...e))),this.messagingSystem.registerActionHandler(`${y}:decrementActiveReferences`,((...e)=>this.decrementActiveReferences(...e))),this.messagingSystem.registerActionHandler(`${y}:getRegistryMetadata`,(async(...e)=>this.getRegistryMetadata(...e))),this.messagingSystem.registerActionHandler(`${y}:disconnectOrigin`,((...e)=>this.removeSnapFromSubject(...e))),this.messagingSystem.registerActionHandler(`${y}:revokeDynamicPermissions`,((...e)=>this.revokeDynamicSnapPermissions(...e))),this.messagingSystem.registerActionHandler(`${y}:getFile`,(async(...e)=>this.getSnapFile(...e)))},Y=new WeakSet,X=function(e){for(const{snapId:t,manifest:r,files:i,removable:a,hidden:n}of e){const e=this.get(t),s=void 0!==e,o=s&&g.gtVersion.call(void 0,r.version,e.version);if(s&&(!o||!0!==e.preinstalled))continue;const l=new(0,v.VirtualFile)({path:v.NpmSnapFileNames.Manifest,value:JSON.stringify(r),result:r}),c=i.map((({path:e,value:t})=>new(0,v.VirtualFile)({value:t,path:e}))),{filePath:u,iconPath:h}=r.source.location.npm,p=c.find((e=>e.path===u)),f=h?c.find((e=>e.path===h)):void 0;g.assert.call(void 0,p,"Source code not provided for preinstalled snap."),g.assert.call(void 0,!h||h&&f,"Icon not provided for preinstalled snap."),g.assert.call(void 0,void 0===r.source.files,"Auxiliary files are not currently supported for preinstalled snaps.");const _=r.source.locales?.map((e=>c.find((t=>t.path===e))))??[],k=v.getValidatedLocalizationFiles.call(void 0,_.filter(Boolean));g.assert.call(void 0,_.length===k.length,"Missing localization files for preinstalled snap.");const y={manifest:l,sourceCode:p,svgIcon:f,auxiliaryFiles:[],localizationFiles:k};d.__privateMethod.call(void 0,this,Be,Fe).call(this,{id:t,origin:"metamask",files:y,removable:a,hidden:n,preinstalled:!0});const w=m.processSnapPermissions.call(void 0,r.initialPermissions);d.__privateMethod.call(void 0,this,De,Ue).call(this,w);const{newPermissions:T,unusedPermissions:b}=d.__privateMethod.call(void 0,this,_t,kt).call(this,t,w);d.__privateMethod.call(void 0,this,yt,wt).call(this,{snapId:t,newPermissions:T,unusedPermissions:b}),this.update((e=>{e.snaps[t].status=v.SnapStatus.Stopped}))}},J=new WeakSet,z=function(){d.__privateSet.call(void 0,this,U,setTimeout((()=>{d.__privateMethod.call(void 0,this,se,oe).call(this).catch((e=>{v.logError.call(void 0,e)})),d.__privateMethod.call(void 0,this,J,z).call(this)}),d.__privateGet.call(void 0,this,N)))},Z=new WeakSet,Q=async function(e,t){if(this.has(e)){try{this.update((r=>{r.snaps[e].blocked=!0,r.snaps[e].blockInformation=t})),await this.disableSnap(e)}catch(t){v.logError.call(void 0,`Encountered error when stopping blocked snap "${e}".`,t)}this.messagingSystem.publish(`${y}:snapBlocked`,e,t)}},ee=new WeakSet,te=function(e){this.has(e)&&this.state.snaps[e].blocked&&(this.update((t=>{t.snaps[e].blocked=!1,delete t.snaps[e].blockInformation})),this.messagingSystem.publish(`${y}:snapUnblocked`,e))},re=new WeakSet,ie=async function(e,t){const r=(await this.messagingSystem.call("SnapsRegistry:get",{[e]:t}))[e];if(1===r.status)throw new Error(`Cannot install version "${t.version}" of snap "${e}": The version is blocked. ${r.reason?.explanation??""}`);const i=Object.keys(t.permissions).some((e=>!n.ALLOWED_PERMISSIONS.includes(e)));if(d.__privateGet.call(void 0,this,M).requireAllowlist&&i&&2!==r.status)throw new Error(`Cannot install version "${t.version}" of snap "${e}": ${3===r.status?"The registry is temporarily unavailable.":"The snap is not on the allowlist."}`)},ae=new WeakSet,ne=function(){const e=d.__privateGet.call(void 0,this,L).call(this);g.assert.call(void 0,!0!==e.disableSnaps,"The Snaps platform requires basic functionality to be used. Enable basic functionality in the settings to use the Snaps platform.")},se=new WeakSet,oe=async function(){const e=[...d.__privateGet.call(void 0,this,F).entries()];return Promise.all(e.filter((([e,t])=>0===t.activeReferences&&0===t.pendingInboundRequests.length&&t.lastRequest&&d.__privateGet.call(void 0,this,O)&&g.timeSince.call(void 0,t.lastRequest)>d.__privateGet.call(void 0,this,O))).map((async([e])=>this.stopSnap(e,v.SnapStatusEvents.Stop))))},le=new WeakSet,ce=function(e,t){const{interpreter:r}=d.__privateMethod.call(void 0,this,mt,ft).call(this,e);r.send(t),this.update((t=>{t.snaps[e].status=r.state.value}))},de=new WeakSet,ue=async function(e){await this.messagingSystem.call("ExecutionService:terminateSnap",e),await new Promise((e=>setTimeout(e,1)));d.__privateMethod.call(void 0,this,mt,ft).call(this,e).pendingInboundRequests.filter((e=>"finished"!==e.timer.status)).forEach((e=>e.timer.finish())),await new Promise((e=>setTimeout(e,1))),this.messagingSystem.publish("SnapController:snapTerminated",this.getTruncatedExpect(e))},he=new WeakSet,pe=async function({snapId:e,salt:t,useCache:r,keyMetadata:i}){const a=d.__privateMethod.call(void 0,this,mt,ft).call(this,e);if(a.encryptionKey&&a.encryptionSalt&&r)return{key:await d.__privateGet.call(void 0,this,R).importKey(a.encryptionKey),salt:a.encryptionSalt};const n=t??d.__privateGet.call(void 0,this,R).generateSalt(),s=await d.__privateGet.call(void 0,this,G).call(this),o=await m.getEncryptionEntropy.call(void 0,{snapId:e,mnemonicPhrase:s}),l=await d.__privateGet.call(void 0,this,R).keyFromPassword(o,n,!0,i),c=await d.__privateGet.call(void 0,this,R).exportKey(l);return r&&(a.encryptionKey=c,a.encryptionSalt=n),{key:l,salt:n}},me=new WeakSet,fe=async function(e,t){try{const r=v.parseJson.call(void 0,t),{salt:i,keyMetadata:a}=r,s=d.__privateGet.call(void 0,this,R).isVaultUpdated(t),{key:o}=await d.__privateMethod.call(void 0,this,he,pe).call(this,{snapId:e,salt:i,useCache:s,keyMetadata:a??n.LEGACY_ENCRYPTION_KEY_DERIVATION_OPTIONS}),l=await d.__privateGet.call(void 0,this,R).decryptWithKey(o,r);return g.assert.call(void 0,g.isValidJson.call(void 0,l)),l}catch{throw p.rpcErrors.internal({message:"Failed to decrypt snap state, the state must be corrupted."})}},ve=new WeakSet,ge=async function(e,t){const{key:r,salt:i}=await d.__privateMethod.call(void 0,this,he,pe).call(this,{snapId:e,useCache:!0}),a=await d.__privateGet.call(void 0,this,R).encryptWithKey(r,t);return a.salt=i,JSON.stringify(a)},_e=new WeakSet,ke=function(e,t,r){if(t){const i=l.setDiff.call(void 0,t,r);for(const t of Object.keys(i))this.removeSnapFromSubject(t,e)}for(const t of Object.keys(r))d.__privateMethod.call(void 0,this,ye,we).call(this,t,e)},ye=new WeakSet,we=function(e,t){const r=this.messagingSystem.call("PermissionController:getPermissions",e),i=r?.[m.WALLET_SNAP_PERMISSION_KEY]?.caveats?.find((e=>e.type===v.SnapCaveatType.SnapIds));if(Boolean(i?.value?.[t]))return;if(i)return void this.messagingSystem.call("PermissionController:updateCaveat",e,m.WALLET_SNAP_PERMISSION_KEY,v.SnapCaveatType.SnapIds,{...i.value,[t]:{}});const a={[m.WALLET_SNAP_PERMISSION_KEY]:{caveats:[{type:v.SnapCaveatType.SnapIds,value:{[t]:{}}}]}};this.messagingSystem.call("PermissionController:grantPermissions",{approvedPermissions:a,subject:{origin:e}})},Te=new WeakSet,be=function(e){const t=this.messagingSystem.call("PermissionController:getSubjectNames");for(const r of t)this.removeSnapFromSubject(r,e)},Ee=new WeakSet,Se=function(e){this.messagingSystem.call("PermissionController:hasPermissions",e)&&this.messagingSystem.call("PermissionController:revokeAllPermissions",e)},Pe=new WeakSet,Ce=function({origin:e,snapId:t,type:r}){const i=k.nanoid.call(void 0);return{id:i,promise:this.messagingSystem.call("ApprovalController:addRequest",{origin:e,id:i,type:r,requestData:{metadata:{id:i,origin:t,dappOrigin:e},snapId:t},requestState:{loading:!0}},!0)}},Ae=new WeakSet,Ie=function(e,t){try{this.messagingSystem.call("ApprovalController:updateRequestState",{id:e,requestState:t})}catch{}},je=new WeakSet,Me=async function(e,t){return await this.messagingSystem.call("SnapsRegistry:resolveVersion",e,t)},xe=new WeakSet,Ne=async function(e){const{id:t,location:r,versionRange:i}=e;d.__privateMethod.call(void 0,this,vt,gt).call(this,t);const a=d.__privateMethod.call(void 0,this,mt,ft).call(this,t);a.installPromise||(o.log.call(void 0,`Adding snap: ${t}`),a.installPromise=(async()=>{const a=await l.fetchSnap.call(void 0,t,r),n=a.manifest.result;if(!g.satisfiesVersionRange.call(void 0,n.version,i))throw new Error(`Version mismatch. Manifest for "${t}" specifies version "${n.version}" which doesn't satisfy requested version range "${i}".`);return await d.__privateMethod.call(void 0,this,re,ie).call(this,t,{version:n.version,checksum:n.source.shasum,permissions:n.initialPermissions}),d.__privateMethod.call(void 0,this,Be,Fe).call(this,{...e,files:a,id:t})})());try{return await a.installPromise}catch(e){throw a.installPromise=null,e}},Oe=new WeakSet,Re=async function(e){const{snapId:t}=e;if(this.isRunning(t))throw new Error(`Snap "${t}" is already started.`);try{const r=d.__privateMethod.call(void 0,this,mt,ft).call(this,t),i=await this.messagingSystem.call("ExecutionService:executeSnap",{...e,endowments:await d.__privateMethod.call(void 0,this,Ge,Le).call(this,t)});return d.__privateMethod.call(void 0,this,le,ce).call(this,t,v.SnapStatusEvents.Start),r.lastRequest=Date.now(),i}catch(e){throw await d.__privateMethod.call(void 0,this,de,ue).call(this,t),e}},Ge=new WeakSet,Le=async function(e){let t=[];for(const r of d.__privateGet.call(void 0,this,I))if(this.messagingSystem.call("PermissionController:hasPermission",e,r)){const i=await this.messagingSystem.call("PermissionController:getEndowments",e,r);if(i){if(!Array.isArray(i)||i.some((e=>"string"!=typeof e)))throw new Error("Expected an array of string endowment names.");t=t.concat(i)}}const r=[...new Set([...v.DEFAULT_ENDOWMENTS,...t])];return r.length<v.DEFAULT_ENDOWMENTS.length+t.length&&v.logError.call(void 0,`Duplicate endowments found for ${e}. Default endowments should not be requested.`,t),r},Be=new WeakSet,Fe=function(e){const{id:t,origin:r,files:i,isUpdate:a=!1,removable:n,preinstalled:s,hidden:o}=e,{manifest:l,sourceCode:c,svgIcon:u,auxiliaryFiles:p,localizationFiles:m}=i;v.assertIsSnapManifest.call(void 0,l.result);const{version:f}=l.result,_=c.toString();g.assert.call(void 0,"string"==typeof _&&_.length>0,`Invalid source code for snap "${t}".`);const k=p.map((e=>(g.assert.call(void 0,"string"==typeof e.data.base64),{path:e.path,value:e.data.base64}))),y=this.state.snaps[t],w=[...y?.versionHistory??[],{version:f,date:Date.now(),origin:r}],T=m.map((e=>e.result)),b={...y,blocked:!1,enabled:!0,removable:n,preinstalled:s,hidden:o,id:t,initialConnections:l.result.initialConnections,initialPermissions:l.result.initialPermissions,manifest:l.result,status:d.__privateGet.call(void 0,this,H).config.initial,sourceCode:_,version:f,versionHistory:w,auxiliaryFiles:k,localizationFiles:T};delete b.blockInformation;const{inversePatches:E}=this.update((e=>{e.snaps[t]=b}));if(a){const e=d.__privateMethod.call(void 0,this,at,nt).call(this,t);void 0!==e&&(e.statePatches=E)}const{proposedName:S}=v.getLocalizedSnapManifest.call(void 0,l.result,"en",T);return this.messagingSystem.call("SubjectMetadataController:addSubjectMetadata",{subjectType:h.SubjectType.Snap,name:S,origin:b.id,version:f,svgIcon:u?.toString()??null}),{...b,sourceCode:_}},De=new WeakSet,Ue=function(e){const t=Object.keys(e),r=Array.from(new Set(Object.values(m.handlerEndowments)));g.assert.call(void 0,t.some((e=>r.includes(e))),`A snap must request at least one of the following permissions: ${r.filter((e=>null!==e)).join(", ")}.`);const i=t.reduce(((e,t)=>(g.hasProperty.call(void 0,d.__privateGet.call(void 0,this,j),t)&&e.push(d.__privateGet.call(void 0,this,j)[t]),e)),[]);g.assert.call(void 0,0===i.length,`One or more permissions are not allowed:\n${i.join("\n")}`)},He=new WeakSet,We=function(e){return m.getMaxRequestTimeCaveat.call(void 0,e)??this.maxRequestTime},$e=new WeakSet,Ve=function(e){const t=d.__privateMethod.call(void 0,this,mt,ft).call(this,e),r=t.rpcHandler;if(r)return r;const i=new(0,a.RequestQueue)(5),n=new Map,s=async({origin:t,handler:r,request:a,timeout:s})=>{if(!1===this.state.snaps[e].enabled)throw new Error(`Snap "${e}" is disabled.`);if(this.state.snaps[e].status===v.SnapStatus.Installing)throw new Error(`Snap "${e}" is currently being installed. Please try again later.`);if(!this.isRunning(e)){let r=n.get(e);if(r){if(i.get(t)>=i.maxQueueSize)throw new Error("Exceeds maximum number of requests waiting to be resolved, please try again.")}else r=this.startSnap(e),n.set(e,r);i.increment(t);try{await r}finally{i.decrement(t),n.get(e)===r&&n.delete(e)}}const o=new(0,c.Timer)(s);d.__privateMethod.call(void 0,this,et,tt).call(this,e,a.id,o);const u=this.messagingSystem.call("ExecutionService:handleRpcRequest",e,{origin:t,handler:r,request:a});try{const t=await l.withTimeout.call(void 0,u,o);if(t===l.hasTimedOut)throw new Error(`${e} failed to respond to the request in time.`);await d.__privateMethod.call(void 0,this,Ze,Qe).call(this,e,r,t);const i=await d.__privateMethod.call(void 0,this,Je,ze).call(this,e,r,t);return d.__privateMethod.call(void 0,this,rt,it).call(this,e,a.id),i}catch(t){d.__privateMethod.call(void 0,this,rt,it).call(this,e,a.id);const[r,i]=v.unwrapError.call(void 0,t);throw i||await this.stopSnap(e,v.SnapStatusEvents.Crash),r}};return t.rpcHandler=s,s},Ke=new WeakSet,qe=async function(e,t){return this.messagingSystem.call("SnapInterfaceController:createInterface",e,t)},Ye=new WeakSet,Xe=function(e,t){g.assert.call(void 0,this.messagingSystem.call("SnapInterfaceController:getInterface",e,t))},Je=new WeakSet,ze=async function(e,t,r){switch(t){case v.HandlerType.OnTransaction:case v.HandlerType.OnSignature:case v.HandlerType.OnHomePage:{const t=r;if(t&&g.hasProperty.call(void 0,t,"content")){const{content:r,...i}=t;return{...i,id:await d.__privateMethod.call(void 0,this,Ke,qe).call(this,e,r)}}return r}default:return r}},Ze=new WeakSet,Qe=async function(e,t,r){switch(t){case v.HandlerType.OnTransaction:g.assertStruct.call(void 0,r,v.OnTransactionResponseStruct),r&&g.hasProperty.call(void 0,r,"id")&&d.__privateMethod.call(void 0,this,Ye,Xe).call(this,e,r.id);break;case v.HandlerType.OnSignature:g.assertStruct.call(void 0,r,v.OnSignatureResponseStruct),r&&g.hasProperty.call(void 0,r,"id")&&d.__privateMethod.call(void 0,this,Ye,Xe).call(this,e,r.id);break;case v.HandlerType.OnHomePage:g.assertStruct.call(void 0,r,v.OnHomePageResponseStruct),r&&g.hasProperty.call(void 0,r,"id")&&d.__privateMethod.call(void 0,this,Ye,Xe).call(this,e,r.id);break;case v.HandlerType.OnNameLookup:g.assertStruct.call(void 0,r,v.OnNameLookupResponseStruct)}},et=new WeakSet,tt=function(e,t,r){const i=d.__privateMethod.call(void 0,this,mt,ft).call(this,e);i.pendingInboundRequests.push({requestId:t,timer:r}),i.lastRequest=null},rt=new WeakSet,it=function(e,t){const r=d.__privateMethod.call(void 0,this,mt,ft).call(this,e);r.pendingInboundRequests=r.pendingInboundRequests.filter((e=>e.requestId!==t)),0===r.pendingInboundRequests.length&&(r.lastRequest=Date.now())},at=new WeakSet,nt=function(e){return d.__privateGet.call(void 0,this,D).get(e)},st=new WeakSet,ot=function(e){g.assert.call(void 0,void 0===d.__privateGet.call(void 0,this,D).get(e),new Error(`Snap "${e}" rollback snapshot already exists.`)),d.__privateGet.call(void 0,this,D).set(e,{statePatches:[],permissions:{},newVersion:""});const t=d.__privateGet.call(void 0,this,D).get(e);return g.assert.call(void 0,void 0!==t,new Error(`Snapshot creation failed for ${e}.`)),t},lt=new WeakSet,ct=async function(e){const t=d.__privateMethod.call(void 0,this,at,nt).call(this,e);if(!t)throw new Error("A snapshot does not exist for this snap.");await this.stopSnap(e,v.SnapStatusEvents.Stop),this.get(e)?.status!==v.SnapStatus.Stopped&&d.__privateMethod.call(void 0,this,le,ce).call(this,e,v.SnapStatusEvents.Stop);const{statePatches:r,permissions:i}=t;r?.length&&this.applyPatches(r),this.get(e)?.status!==v.SnapStatus.Stopped&&this.update((t=>{t.snaps[e].status=v.SnapStatus.Stopped})),d.__privateMethod.call(void 0,this,yt,wt).call(this,{snapId:e,unusedPermissions:i.granted,newPermissions:i.revoked,requestData:i.requestData});const a=this.getTruncatedExpect(e);this.messagingSystem.publish("SnapController:snapRolledback",a,t.newVersion),d.__privateGet.call(void 0,this,D).delete(e)},dt=new WeakSet,ut=async function(e){for(const t of e)await d.__privateMethod.call(void 0,this,lt,ct).call(this,t)},ht=new WeakSet,pt=function(e){return d.__privateGet.call(void 0,this,F).get(e)},mt=new WeakSet,ft=function(e){const t=d.__privateMethod.call(void 0,this,ht,pt).call(this,e);return g.assert.call(void 0,void 0!==t,new Error(`Snap "${e}" runtime data not found`)),t},vt=new WeakSet,gt=function(e){if(d.__privateGet.call(void 0,this,F).has(e))return;const t=this.get(e),r=_.interpret.call(void 0,d.__privateGet.call(void 0,this,H));r.start({context:{snapId:e},value:t?.status??d.__privateGet.call(void 0,this,H).config.initial}),s.forceStrict.call(void 0,r),d.__privateGet.call(void 0,this,F).set(e,{lastRequest:null,rpcHandler:null,installPromise:null,encryptionKey:null,encryptionSalt:null,activeReferences:0,pendingInboundRequests:[],pendingOutboundRequests:0,interpreter:r,stopping:!1})},_t=new WeakSet,kt=function(e,t){const r=this.messagingSystem.call("PermissionController:getPermissions",e)??{},i=l.permissionsDiff.call(void 0,t,r),a=l.permissionsDiff.call(void 0,r,t);return{newPermissions:i,unusedPermissions:a,approvedPermissions:l.permissionsDiff.call(void 0,r,a)}},yt=new WeakSet,wt=function({snapId:e,unusedPermissions:t={},newPermissions:r={},requestData:i}){const a=Object.keys(t);g.isNonEmptyArray.call(void 0,a)&&this.messagingSystem.call("PermissionController:revokePermissions",{[e]:a}),g.isNonEmptyArray.call(void 0,Object.keys(r))&&this.messagingSystem.call("PermissionController:grantPermissions",{approvedPermissions:r,subject:{origin:e},requestData:i})},Tt=new WeakSet,bt=function(e,t){const r=this.getExpect(e);return!g.satisfiesVersionRange.call(void 0,r.version,t)&&!g.gtRange.call(void 0,r.version,t)},Et=new WeakSet,St=async function(e,t,r){const i=m.handlerEndowments[r];g.assert.call(void 0,i,"Lifecycle hook must have an endowment.");this.messagingSystem.call("PermissionController:hasPermission",t,i)&&await this.handleRequest({snapId:t,handler:r,origin:e,request:{jsonrpc:"2.0",method:r}})},r.controllerName=y,r.SNAP_APPROVAL_INSTALL=w,r.SNAP_APPROVAL_UPDATE=T,r.SNAP_APPROVAL_RESULT=b,r.SnapController=Pt}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/chunk-ZBSBCWWM.js"}],[1945,{"./chunk-S775IABY.js":1938,"@metamask/post-message-stream":1622,"@metamask/snaps-utils":2116},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var i=e("./chunk-S775IABY.js"),a=e("@metamask/post-message-stream"),n=e("@metamask/snaps-utils"),s=class extends i.AbstractExecutionService{constructor({iframeUrl:e,messenger:t,setupSnapProvider:r}){super({messenger:t,setupSnapProvider:r}),this.iframeUrl=e}terminateJob(e){document.getElementById(e.id)?.remove()}async initEnvStream(e){const t=await n.createWindow.call(void 0,this.iframeUrl.toString(),e);return{worker:t,stream:new(0,a.WindowPostMessageStream)({name:"parent",target:"child",targetWindow:t,targetOrigin:"*"})}}};r.IframeExecutionService=s}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/chunk-ZRC46TUF.js"}],[1946,{"./chunk-4CA3O64H.js":1913,"./chunk-4URGXJP7.js":1914,"./chunk-6ERB63FH.js":1915,"./chunk-6VGMRXGY.js":1916,"./chunk-7Y6P5FRN.js":1917,"./chunk-AP7CJ6DA.js":1918,"./chunk-BO2ZDPWV.js":1919,"./chunk-BOFPNIRX.js":1920,"./chunk-CDTGUNSA.js":1921,"./chunk-CPUUURMT.js":1922,"./chunk-D74XJG2L.js":1923,"./chunk-EXN2TFDJ.js":1924,"./chunk-G66GQJS6.js":1925,"./chunk-GRBWVPLF.js":1926,"./chunk-HOY6NKQR.js":1927,"./chunk-HQ6HMINL.js":1928,"./chunk-JAUAKTUL.js":1929,"./chunk-JQ54YYLU.js":1930,"./chunk-KH72WRHR.js":1931,"./chunk-LWBPKSU2.js":1932,"./chunk-NXZVKBSV.js":1933,"./chunk-OHMCPTOI.js":1934,"./chunk-OIEUL55W.js":1935,"./chunk-PT22IXNS.js":1936,"./chunk-RDBT3ZJQ.js":1937,"./chunk-S775IABY.js":1938,"./chunk-VNOCJWOK.js":1939,"./chunk-WCDDYBFW.js":1940,"./chunk-WEY7ICES.js":1941,"./chunk-XWDEGRM5.js":1942,"./chunk-YYPUPKQY.js":1943,"./chunk-ZBSBCWWM.js":1944,"./chunk-ZRC46TUF.js":1945},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var i=e("./chunk-GRBWVPLF.js");e("./chunk-JAUAKTUL.js");var a=e("./chunk-ZBSBCWWM.js");e("./chunk-WEY7ICES.js");var n=e("./chunk-PT22IXNS.js"),s=e("./chunk-LWBPKSU2.js"),o=e("./chunk-XWDEGRM5.js");e("./chunk-G66GQJS6.js");var l=e("./chunk-CPUUURMT.js"),c=e("./chunk-4CA3O64H.js"),d=e("./chunk-RDBT3ZJQ.js");e("./chunk-AP7CJ6DA.js"),e("./chunk-JQ54YYLU.js");var u=e("./chunk-YYPUPKQY.js");e("./chunk-VNOCJWOK.js");var h=e("./chunk-6VGMRXGY.js");e("./chunk-WCDDYBFW.js"),e("./chunk-4URGXJP7.js"),e("./chunk-OHMCPTOI.js"),e("./chunk-D74XJG2L.js");var p=e("./chunk-HQ6HMINL.js");e("./chunk-HOY6NKQR.js");var m=e("./chunk-ZRC46TUF.js"),f=e("./chunk-6ERB63FH.js");e("./chunk-KH72WRHR.js");var v=e("./chunk-S775IABY.js");e("./chunk-OIEUL55W.js");var g=e("./chunk-7Y6P5FRN.js");e("./chunk-BO2ZDPWV.js"),e("./chunk-NXZVKBSV.js");var _=e("./chunk-CDTGUNSA.js");e("./chunk-BOFPNIRX.js"),e("./chunk-EXN2TFDJ.js"),r.AbstractExecutionService=v.AbstractExecutionService,r.BaseNpmLocation=o.BaseNpmLocation,r.CronjobController=i.CronjobController,r.DAILY_TIMEOUT=i.DAILY_TIMEOUT,r.DEFAULT_NPM_REGISTRY=o.DEFAULT_NPM_REGISTRY,r.HttpLocation=d.HttpLocation,r.IframeExecutionService=m.IframeExecutionService,r.JsonSnapsRegistry=l.JsonSnapsRegistry,r.LocalLocation=s.LocalLocation,r.NpmLocation=o.NpmLocation,r.OffscreenExecutionService=f.OffscreenExecutionService,r.ProxyPostMessageStream=g.ProxyPostMessageStream,r.SNAP_APPROVAL_INSTALL=a.SNAP_APPROVAL_INSTALL,r.SNAP_APPROVAL_RESULT=a.SNAP_APPROVAL_RESULT,r.SNAP_APPROVAL_UPDATE=a.SNAP_APPROVAL_UPDATE,r.SnapController=a.SnapController,r.SnapInterfaceController=h.SnapInterfaceController,r.SnapsRegistryStatus=c.SnapsRegistryStatus,r.TARBALL_SIZE_SAFETY_LIMIT=o.TARBALL_SIZE_SAFETY_LIMIT,r.WebWorkerExecutionService=p.WebWorkerExecutionService,r.calculateConnectionsChange=_.calculateConnectionsChange,r.controllerName=a.controllerName,r.delay=_.delay,r.delayWithTimer=_.delayWithTimer,r.detectSnapLocation=n.detectSnapLocation,r.fetchNpmMetadata=o.fetchNpmMetadata,r.fetchSnap=_.fetchSnap,r.getNpmCanonicalBasePath=o.getNpmCanonicalBasePath,r.getRunnableSnaps=u.getRunnableSnaps,r.getSnapFiles=_.getSnapFiles,r.hasTimedOut=_.hasTimedOut,r.permissionsDiff=_.permissionsDiff,r.setDiff=_.setDiff,r.setupMultiplex=v.setupMultiplex,r.withTimeout=_.withTimeout}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/index.js"}],[1947,{"./chunk-UJFCPTF3.js":1949,"./chunk-Z4BLTVTB.js":1950},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var i,a,n,s,o=e("./chunk-UJFCPTF3.js"),l=e("./chunk-Z4BLTVTB.js");i=new WeakMap,a=new WeakMap,n=new WeakMap,s=new WeakMap,r.ControllerMessenger=class{constructor(){l.__privateAdd.call(void 0,this,i,new Map),l.__privateAdd.call(void 0,this,a,new Map),l.__privateAdd.call(void 0,this,n,new Map),l.__privateAdd.call(void 0,this,s,new Map)}registerActionHandler(e,t){if(l.__privateGet.call(void 0,this,i).has(e))throw new Error(`A handler for ${e} has already been registered`);l.__privateGet.call(void 0,this,i).set(e,t)}unregisterActionHandler(e){l.__privateGet.call(void 0,this,i).delete(e)}clearActions(){l.__privateGet.call(void 0,this,i).clear()}call(e,...t){const r=l.__privateGet.call(void 0,this,i).get(e);if(!r)throw new Error(`A handler for ${e} has not been registered`);return r(...t)}registerInitialEventPayload({eventType:e,getPayload:t}){l.__privateGet.call(void 0,this,n).set(e,t)}publish(e,...t){const r=l.__privateGet.call(void 0,this,a).get(e);if(r)for(const[e,i]of r.entries())try{if(i){const r=l.__privateGet.call(void 0,this,s).get(e),a=i(...t);a!==r&&(l.__privateGet.call(void 0,this,s).set(e,a),e(a,r))}else e(...t)}catch(e){setTimeout((()=>{throw e}))}}subscribe(e,t,r){let i=l.__privateGet.call(void 0,this,a).get(e);if(i||(i=new Map,l.__privateGet.call(void 0,this,a).set(e,i)),i.set(t,r),r){const i=l.__privateGet.call(void 0,this,n).get(e);if(i){const e=r(...i());l.__privateGet.call(void 0,this,s).set(t,e)}}}unsubscribe(e,t){const r=l.__privateGet.call(void 0,this,a).get(e);if(!r||!r.has(t))throw new Error(`Subscription not found for event: ${e}`);r.get(t)&&l.__privateGet.call(void 0,this,s).delete(t),r.delete(t)}clearEventSubscriptions(e){l.__privateGet.call(void 0,this,a).delete(e)}clearSubscriptions(){l.__privateGet.call(void 0,this,a).clear()}getRestricted({name:e,allowedActions:t,allowedEvents:r}){return new(0,o.RestrictedControllerMessenger)({controllerMessenger:this,name:e,allowedActions:t,allowedEvents:r})}}}}},{package:"@metamask/snaps-controllers>@metamask/base-controller",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/base-controller/dist/chunk-G42723LG.js"}],[1948,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var i=class{constructor(e={},t={}){this.defaultConfig={},this.defaultState={},this.disabled=!1,this.name="BaseController",this.internalConfig=this.defaultConfig,this.internalState=this.defaultState,this.internalListeners=[],this.initialState=t,this.initialConfig=e}initialize(){return this.internalState=this.defaultState,this.internalConfig=this.defaultConfig,this.configure(this.initialConfig),this.update(this.initialState),this}get config(){return this.internalConfig}get state(){return this.internalState}configure(e,t=!1,r=!0){if(r){this.internalConfig=t?e:Object.assign(this.internalConfig,e);for(const e of Object.keys(this.internalConfig)){const t=this.internalConfig[e];void 0!==t&&(this[e]=t)}}else for(const t of Object.keys(e))if(void 0!==this.internalConfig[t]){const r=e[t];this.internalConfig[t]=r,this[t]=r}}notify(){this.disabled||this.internalListeners.forEach((e=>{e(this.internalState)}))}subscribe(e){this.internalListeners.push(e)}unsubscribe(e){const t=this.internalListeners.findIndex((t=>e===t));return t>-1&&this.internalListeners.splice(t,1),t>-1}update(e,t=!1){this.internalState=t?Object.assign({},e):Object.assign({},this.internalState,e),this.notify()}},a=i;r.BaseControllerV1=i,r.BaseControllerV1_default=a}}},{package:"@metamask/snaps-controllers>@metamask/base-controller",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/base-controller/dist/chunk-NINOM2XQ.js"}],[1949,{"./chunk-Z4BLTVTB.js":1950},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var i,a,n,s,o,l,c,d,u,h,p=e("./chunk-Z4BLTVTB.js");i=new WeakMap,a=new WeakMap,n=new WeakMap,s=new WeakMap,o=new WeakSet,l=function(e){const t=p.__privateGet.call(void 0,this,s);return p.__privateMethod.call(void 0,this,u,h).call(this,e)||null!==t&&t.includes(e)},c=new WeakSet,d=function(e){const t=p.__privateGet.call(void 0,this,n);return p.__privateMethod.call(void 0,this,u,h).call(this,e)||null!==t&&t.includes(e)},u=new WeakSet,h=function(e){return e.startsWith(`${p.__privateGet.call(void 0,this,a)}:`)},r.RestrictedControllerMessenger=class{constructor({controllerMessenger:e,name:t,allowedActions:r,allowedEvents:l}){p.__privateAdd.call(void 0,this,o),p.__privateAdd.call(void 0,this,c),p.__privateAdd.call(void 0,this,u),p.__privateAdd.call(void 0,this,i,void 0),p.__privateAdd.call(void 0,this,a,void 0),p.__privateAdd.call(void 0,this,n,void 0),p.__privateAdd.call(void 0,this,s,void 0),p.__privateSet.call(void 0,this,i,e),p.__privateSet.call(void 0,this,a,t),p.__privateSet.call(void 0,this,n,r),p.__privateSet.call(void 0,this,s,l)}registerActionHandler(e,t){if(!p.__privateMethod.call(void 0,this,u,h).call(this,e))throw new Error(`Only allowed registering action handlers prefixed by '${p.__privateGet.call(void 0,this,a)}:'`);p.__privateGet.call(void 0,this,i).registerActionHandler(e,t)}unregisterActionHandler(e){if(!p.__privateMethod.call(void 0,this,u,h).call(this,e))throw new Error(`Only allowed unregistering action handlers prefixed by '${p.__privateGet.call(void 0,this,a)}:'`);p.__privateGet.call(void 0,this,i).unregisterActionHandler(e)}call(e,...t){if(!p.__privateMethod.call(void 0,this,c,d).call(this,e))throw new Error(`Action missing from allow list: ${e}`);return p.__privateGet.call(void 0,this,i).call(e,...t)}registerInitialEventPayload({eventType:e,getPayload:t}){if(!p.__privateMethod.call(void 0,this,u,h).call(this,e))throw new Error(`Only allowed publishing events prefixed by '${p.__privateGet.call(void 0,this,a)}:'`);p.__privateGet.call(void 0,this,i).registerInitialEventPayload({eventType:e,getPayload:t})}publish(e,...t){if(!p.__privateMethod.call(void 0,this,u,h).call(this,e))throw new Error(`Only allowed publishing events prefixed by '${p.__privateGet.call(void 0,this,a)}:'`);p.__privateGet.call(void 0,this,i).publish(e,...t)}subscribe(e,t,r){if(!p.__privateMethod.call(void 0,this,o,l).call(this,e))throw new Error(`Event missing from allow list: ${e}`);return r?p.__privateGet.call(void 0,this,i).subscribe(e,t,r):p.__privateGet.call(void 0,this,i).subscribe(e,t)}unsubscribe(e,t){if(!p.__privateMethod.call(void 0,this,o,l).call(this,e))throw new Error(`Event missing from allow list: ${e}`);p.__privateGet.call(void 0,this,i).unsubscribe(e,t)}clearEventSubscriptions(e){if(!p.__privateMethod.call(void 0,this,u,h).call(this,e))throw new Error(`Only allowed clearing events prefixed by '${p.__privateGet.call(void 0,this,a)}:'`);p.__privateGet.call(void 0,this,i).clearEventSubscriptions(e)}}}}},{package:"@metamask/snaps-controllers>@metamask/base-controller",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/base-controller/dist/chunk-UJFCPTF3.js"}],[195,{"@metamask/utils":2253},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){(0,i.hasProperty)(e,"NetworkController")&&(0,i.isObject)(e.NetworkController)&&(0,i.hasProperty)(e.NetworkController,"network")&&(0,i.hasProperty)(e.NetworkController,"networkId")&&delete e.NetworkController.network;return{...e}};var i=e("@metamask/utils")}}},{package:"$root$",file:"app/scripts/migrations/077-supplements/077-supplement-for-084.ts"}],[1950,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var i=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)};r.__privateGet=(e,t,r)=>(i(e,t,"read from private field"),r?r.call(e):t.get(e)),r.__privateAdd=(e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)},r.__privateSet=(e,t,r,a)=>(i(e,t,"write to private field"),a?a.call(e,r):t.set(e,r),r),r.__privateMethod=(e,t,r)=>(i(e,t,"access private method"),r)}}},{package:"@metamask/snaps-controllers>@metamask/base-controller",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/base-controller/dist/chunk-Z4BLTVTB.js"}],[1951,{"./chunk-Z4BLTVTB.js":1950,immer:3574},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var i,a=e("./chunk-Z4BLTVTB.js"),n=e("immer");n.enablePatches.call(void 0);function s(e,t,r){return Object.keys(e).reduce(((i,a)=>{try{const n=t[a];if(!n)throw new Error(`No metadata found for '${String(a)}'`);const s=n[r],o=e[a];return"function"==typeof s?i[a]=s(o):s&&(i[a]=o),i}catch(e){return setTimeout((()=>{throw e})),i}}),{})}i=new WeakMap,r.BaseController=class{constructor({messenger:e,metadata:t,name:r,state:s}){a.__privateAdd.call(void 0,this,i,void 0),this.messagingSystem=e,this.name=r,a.__privateSet.call(void 0,this,i,n.freeze.call(void 0,s,!0)),this.metadata=t,this.messagingSystem.registerActionHandler(`${r}:getState`,(()=>this.state)),this.messagingSystem.registerInitialEventPayload({eventType:`${r}:stateChange`,getPayload:()=>[this.state,[]]})}get state(){return a.__privateGet.call(void 0,this,i)}set state(e){throw new Error("Controller state cannot be directly mutated; use 'update' method instead.")}update(e){const[t,r,s]=n.produceWithPatches.call(void 0,a.__privateGet.call(void 0,this,i),e);return a.__privateSet.call(void 0,this,i,t),this.messagingSystem.publish(`${this.name}:stateChange`,t,r),{nextState:t,patches:r,inversePatches:s}}applyPatches(e){const t=n.applyPatches.call(void 0,a.__privateGet.call(void 0,this,i),e);a.__privateSet.call(void 0,this,i,t),this.messagingSystem.publish(`${this.name}:stateChange`,t,e)}destroy(){this.messagingSystem.clearEventSubscriptions(`${this.name}:stateChange`)}},r.getAnonymizedState=function(e,t){return s(e,t,"anonymous")},r.getPersistentState=function(e,t){return s(e,t,"persist")}}}},{package:"@metamask/snaps-controllers>@metamask/base-controller",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/base-controller/dist/chunk-ZNOPSWMU.js"}],[1952,{"./chunk-G42723LG.js":1947,"./chunk-NINOM2XQ.js":1948,"./chunk-UJFCPTF3.js":1949,"./chunk-Z4BLTVTB.js":1950,"./chunk-ZNOPSWMU.js":1951},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var i=e("./chunk-NINOM2XQ.js"),a=e("./chunk-ZNOPSWMU.js"),n=e("./chunk-G42723LG.js"),s=e("./chunk-UJFCPTF3.js");e("./chunk-Z4BLTVTB.js"),r.BaseController=a.BaseController,r.BaseControllerV1=i.BaseControllerV1,r.ControllerMessenger=n.ControllerMessenger,r.RestrictedControllerMessenger=s.RestrictedControllerMessenger,r.getAnonymizedState=a.getAnonymizedState,r.getPersistentState=a.getPersistentState}}},{package:"@metamask/snaps-controllers>@metamask/base-controller",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/base-controller/dist/index.js"}],[1953,{"./chunk-RKVNLW2C.js":1957,"@ethereumjs/util":439,"@metamask/ethjs-unit":1334,"@metamask/utils":2253,"bn.js":2922,buffer:2970,"eth-ens-namehash":3160,"fast-deep-equal":3291},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var a=e("./chunk-RKVNLW2C.js"),n=e("@ethereumjs/util"),s=e("@metamask/ethjs-unit"),o=e("@metamask/utils"),l=i(e("bn.js")),c=i(e("eth-ens-namehash")),d=i(e("fast-deep-equal")),u=new Error("timeout"),h=["__proto__","constructor","prototype"];function p(e){return e?new(0,l.default)(o.remove0x.call(void 0,e),16):new(0,l.default)(0)}async function m(e,t){const r=await fetch(e,t);if(!r.ok)throw new Error(`Fetch failed with status '${r.status}' for request '${String(e)}'`);return r}async function f(e,t){const r=await m(e,t);return await r.json()}r.PROTOTYPE_POLLUTION_BLOCKLIST=h,r.isSafeDynamicKey=function(e){return"string"==typeof e&&!h.some((t=>e===t))},r.isSafeChainId=function(e){if(!o.isHexString.call(void 0,e))return!1;const t=Number.parseInt(e,o.isStrictHexString.call(void 0,e)?16:10);return Number.isSafeInteger(t)&&t>0&&t<=a.MAX_SAFE_CHAIN_ID},r.BNToHex=function(e){return o.add0x.call(void 0,e.toString(16))},r.fractionBN=function(e,t,r){const i=new(0,l.default)(t),a=new(0,l.default)(r);return e.mul(i).div(a)},r.gweiDecToWEIBN=function(e){if(Number.isNaN(e))return new(0,l.default)(0);const t=e.toString().split("."),r=t[0]||"0";let i=t[1]||"";if(!i)return s.toWei.call(void 0,r,"gwei");if(i.length<=9)return s.toWei.call(void 0,`${r}.${i}`,"gwei");const a=i.slice(9)[0];i=i.slice(0,9);let n=s.toWei.call(void 0,`${r}.${i}`,"gwei");return Number(a)>=5&&(n=n.add(new(0,l.default)(1))),n},r.weiHexToGweiDec=function(e){const t=new(0,l.default)(o.remove0x.call(void 0,e),16);return s.fromWei.call(void 0,t,"gwei")},r.getBuyURL=function(e="1",t,r=5){switch(e){case"1":return`https://buy.coinbase.com/?code=9ec56d01-7e81-5017-930c-513daa27bb6a&amount=${r}&address=${t}&crypto_currency=ETH`;case"5":return"https://goerli-faucet.slock.it/";case"11155111":return"https://sepoliafaucet.net/";default:return}},r.hexToBN=p,r.hexToText=function(e){try{const r=o.remove0x.call(void 0,e);return t.from(r,"hex").toString("utf8")}catch(t){return e}},r.fromHex=function(e){return l.default.isBN(e)?e:new(0,l.default)(p(e).toString(10))},r.toHex=function(e){return"string"==typeof e&&o.isStrictHexString.call(void 0,e)?e:`0x${l.default.isBN(e)?e.toString(16):new(0,l.default)(e.toString(),10).toString(16)}`},r.safelyExecute=async function(e,t=!1){try{return await e()}catch(e){return void(t&&console.error(e))}},r.safelyExecuteWithTimeout=async function(e,t=!1,r=500){try{return await Promise.race([e(),new Promise(((e,t)=>setTimeout((()=>{t(u)}),r)))])}catch(e){return void(t&&console.error(e))}},r.toChecksumHexAddress=function(e){if("string"!=typeof e)return e;const t=o.add0x.call(void 0,e);return o.isHexString.call(void 0,t)?n.toChecksumAddress.call(void 0,t):t},r.isValidHexAddress=function(e,{allowNonPrefixed:t=!0}={}){const r=t?o.add0x.call(void 0,e):e;return!!o.isStrictHexString.call(void 0,r)&&n.isValidAddress.call(void 0,r)},r.isSmartContractCode=function(e){return!!e&&("0x"!==e&&"0x0"!==e)},r.successfulFetch=m,r.handleFetch=f,r.fetchWithErrorHandling=async function({url:e,options:t,timeout:r,errorCodesToCatch:i}){let a;try{a=r?Promise.race([await f(e,t),new Promise(((e,t)=>setTimeout((()=>{t(u)}),r)))]):await f(e,t)}catch(e){!function(e,t=[]){if(!e)return;if(!(e instanceof Error))throw e;if(!t.some((t=>e.message.includes(`Fetch failed with status '${t}'`)))&&!e.message.includes("Failed to fetch")&&e!==u)throw e;console.error(e)}(e,i)}return a},r.timeoutFetch=async function(e,t,r=500){return Promise.race([m(e,t),new Promise(((e,t)=>setTimeout((()=>{t(u)}),r)))])},r.normalizeEnsName=function(e){if("."===e)return e;if(e&&"string"==typeof e)try{const t=c.default.normalize(e.trim());if(t.match(/^(([\w\d-]+)\.)*[\w\d-]{7,}\.(eth|test)$/u))return t}catch(e){}return null},r.query=function(e,t,r=[]){return new Promise(((i,a)=>{const n=(e,t)=>{e?a(e):i(t)};t in e&&"function"==typeof e[t]?e[t](...r,n):e.sendAsync({method:t,params:r},n)}))},r.convertHexToDecimal=(e="0x0")=>o.isStrictHexString.call(void 0,e)?parseInt(e,16):Number(e)?Number(e):0,r.isPlainObject=function(e){return Boolean(e)&&"object"==typeof e&&!Array.isArray(e)},r.isNonEmptyArray=function(e){return Array.isArray(e)&&e.length>0},r.isValidJson=function(e){try{return d.default.call(void 0,e,JSON.parse(JSON.stringify(e)))}catch(e){return!1}}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/snaps-controllers>@metamask/phishing-controller>@metamask/controller-utils",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/controller-utils/dist/chunk-7C4YHS6A.js"}],[1954,{"@metamask/utils":2253},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var i=e("@metamask/utils"),a=i.createProjectLogger.call(void 0,"controller-utils");r.createModuleLogger=i.createModuleLogger,r.projectLogger=a}}},{package:"@metamask/snaps-controllers>@metamask/phishing-controller>@metamask/controller-utils",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/controller-utils/dist/chunk-DBJSLKNR.js"}],[1955,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var i={mainnet:"mainnet",goerli:"goerli",sepolia:"sepolia","linea-goerli":"linea-goerli","linea-sepolia":"linea-sepolia","linea-mainnet":"linea-mainnet"},a={...i,rpc:"rpc"};var n=(e=>(e.Mainnet="mainnet",e.Goerli="goerli",e.Sepolia="sepolia",e.LineaGoerli="linea-goerli",e.LineaSepolia="linea-sepolia",e.LineaMainnet="linea-mainnet",e.Aurora="aurora",e))(n||{}),s={mainnet:"0x1",goerli:"0x5",sepolia:"0xaa36a7",aurora:"0x4e454152","linea-goerli":"0xe704","linea-sepolia":"0xe705","linea-mainnet":"0xe708"},o=(e=>(e.mainnet="ETH",e.goerli="GoerliETH",e.sepolia="SepoliaETH",e["linea-goerli"]="LineaETH",e["linea-sepolia"]="LineaETH",e["linea-mainnet"]="ETH",e.rpc="",e))(o||{});r.InfuraNetworkType=i,r.NetworkType=a,r.isNetworkType=function(e){return Object.values(a).includes(e)},r.isInfuraNetworkType=function(e){return Object.keys(i).includes(e)},r.BuiltInNetworkName=n,r.ChainId=s,r.NetworksTicker=o}}},{package:"@metamask/snaps-controllers>@metamask/phishing-controller>@metamask/controller-utils",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/controller-utils/dist/chunk-LGGBBU6G.js"}],[1956,{"./chunk-DBJSLKNR.js":1954,"@metamask/utils":2253,"@spruceid/siwe-parser":2468,buffer:2970},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0});var i=e("./chunk-DBJSLKNR.js"),a=e("@metamask/utils"),n=e("@spruceid/siwe-parser"),s=i.createModuleLogger.call(void 0,i.projectLogger,"detect-siwe");function o(e){try{const i="string"!=typeof(r=e)?r:a.remove0x.call(void 0,r),n=t.from(i,"hex");return 32===n.length?e:n.toString("utf8")}catch(t){return s(t),e}var r}var l={"http:":"80","https:":"443"},c=(e,t)=>e.match(/^[^/:]*:\/\//u)?new URL(e):new URL(`${t}//${e}`);r.parseDomainParts=c,r.isValidSIWEOrigin=e=>{try{const{origin:t,siwe:r}=e;if(!t||!r?.parsedMessage?.domain)return!1;const i=new URL(t),a=c(r.parsedMessage.domain,i.protocol);return 0===a.hostname.localeCompare(i.hostname,void 0,{sensitivity:"accent"})&&(""!==a.port&&a.port!==i.port?""===i.port&&a.port===l[i.protocol]:""===a.username||a.username===i.username)}catch(e){return s(e),!1}},r.detectSIWE=e=>{try{const{data:t}=e,r=o(t);return{isSIWEMessage:!0,parsedMessage:new(0,n.ParsedMessage)(r)}}catch(e){return{isSIWEMessage:!1,parsedMessage:null}}}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/snaps-controllers>@metamask/phishing-controller>@metamask/controller-utils",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/controller-utils/dist/chunk-M6G3ISXG.js"}],[1957,{"./chunk-LGGBBU6G.js":1955},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var i=e("./chunk-LGGBBU6G.js"),a={[i.NetworkType.goerli]:{chainId:i.ChainId.goerli,ticker:"GoerliETH",rpcPrefs:{blockExplorerUrl:`https://${i.NetworkType.goerli}.etherscan.io`}},[i.NetworkType.sepolia]:{chainId:i.ChainId.sepolia,ticker:"SepoliaETH",rpcPrefs:{blockExplorerUrl:`https://${i.NetworkType.sepolia}.etherscan.io`}},[i.NetworkType.mainnet]:{chainId:i.ChainId.mainnet,ticker:"ETH",rpcPrefs:{blockExplorerUrl:"https://etherscan.io"}},[i.NetworkType["linea-goerli"]]:{chainId:i.ChainId["linea-goerli"],ticker:"LineaETH",rpcPrefs:{blockExplorerUrl:"https://goerli.lineascan.build"}},[i.NetworkType["linea-sepolia"]]:{chainId:i.ChainId["linea-sepolia"],ticker:"LineaETH",rpcPrefs:{blockExplorerUrl:"https://sepolia.lineascan.build"}},[i.NetworkType["linea-mainnet"]]:{chainId:i.ChainId["linea-mainnet"],ticker:"ETH",rpcPrefs:{blockExplorerUrl:"https://lineascan.build"}},[i.NetworkType.rpc]:{chainId:void 0,blockExplorerUrl:void 0,ticker:void 0,rpcPrefs:void 0}},n=(e=>(e.AddEthereumChain="wallet_addEthereumChain",e.ConnectAccounts="connect_accounts",e.EthDecrypt="eth_decrypt",e.EthGetEncryptionPublicKey="eth_getEncryptionPublicKey",e.EthSignTypedData="eth_signTypedData",e.PersonalSign="personal_sign",e.ResultError="result_error",e.ResultSuccess="result_success",e.SnapDialogAlert="snap_dialog:alert",e.SnapDialogConfirmation="snap_dialog:confirmation",e.SnapDialogPrompt="snap_dialog:prompt",e.SwitchEthereumChain="wallet_switchEthereumChain",e.Transaction="transaction",e.Unlock="unlock",e.WalletConnect="wallet_connect",e.WalletRequestPermissions="wallet_requestPermissions",e.WatchAsset="wallet_watchAsset",e))(n||{}),s={[i.ChainId.goerli]:"goerli",[i.ChainId.sepolia]:"sepolia",[i.ChainId.mainnet]:"mainnet",[i.ChainId["linea-goerli"]]:"linea-goerli",[i.ChainId["linea-sepolia"]]:"linea-sepolia",[i.ChainId["linea-mainnet"]]:"linea-mainnet",[i.ChainId.aurora]:"aurora"};r.RPC="rpc",r.FALL_BACK_VS_CURRENCY="ETH",r.IPFS_DEFAULT_GATEWAY_URL="https://cloudflare-ipfs.com/ipfs/",r.GANACHE_CHAIN_ID="0x539",r.MAX_SAFE_CHAIN_ID=0xfffffffffffec,r.ERC721="ERC721",r.ERC1155="ERC1155",r.ERC20="ERC20",r.ERC721_INTERFACE_ID="0x80ac58cd",r.ERC721_METADATA_INTERFACE_ID="0x5b5e139f",r.ERC721_ENUMERABLE_INTERFACE_ID="0x780e9d63",r.ERC1155_INTERFACE_ID="0xd9b67a26",r.ERC1155_METADATA_URI_INTERFACE_ID="0x0e89341c",r.ERC1155_TOKEN_RECEIVER_INTERFACE_ID="0x4e2312e0",r.GWEI="gwei",r.ASSET_TYPES={NATIVE:"NATIVE",TOKEN:"TOKEN",NFT:"NFT",UNKNOWN:"UNKNOWN"},r.TESTNET_TICKER_SYMBOLS={GOERLI:"GoerliETH",SEPOLIA:"SepoliaETH",LINEA_GOERLI:"LineaETH",LINEA_SEPOLIA:"LineaETH"},r.BUILT_IN_NETWORKS=a,r.OPENSEA_PROXY_URL="https://proxy.api.cx.metamask.io/opensea/v1/api/v2",r.NFT_API_BASE_URL="https://nft.api.cx.metamask.io",r.NFT_API_VERSION="1",r.NFT_API_TIMEOUT=15e3,r.ORIGIN_METAMASK="metamask",r.ApprovalType=n,r.CHAIN_ID_TO_ETHERS_NETWORK_NAME_MAP=s}}},{package:"@metamask/snaps-controllers>@metamask/phishing-controller>@metamask/controller-utils",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/controller-utils/dist/chunk-RKVNLW2C.js"}],[1958,{"./chunk-7C4YHS6A.js":1953,"./chunk-DBJSLKNR.js":1954,"./chunk-LGGBBU6G.js":1955,"./chunk-M6G3ISXG.js":1956,"./chunk-RKVNLW2C.js":1957},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var i=e("./chunk-M6G3ISXG.js");e("./chunk-DBJSLKNR.js");var a=e("./chunk-7C4YHS6A.js"),n=e("./chunk-RKVNLW2C.js"),s=e("./chunk-LGGBBU6G.js");r.ASSET_TYPES=n.ASSET_TYPES,r.ApprovalType=n.ApprovalType,r.BNToHex=a.BNToHex,r.BUILT_IN_NETWORKS=n.BUILT_IN_NETWORKS,r.BuiltInNetworkName=s.BuiltInNetworkName,r.CHAIN_ID_TO_ETHERS_NETWORK_NAME_MAP=n.CHAIN_ID_TO_ETHERS_NETWORK_NAME_MAP,r.ChainId=s.ChainId,r.ERC1155=n.ERC1155,r.ERC1155_INTERFACE_ID=n.ERC1155_INTERFACE_ID,r.ERC1155_METADATA_URI_INTERFACE_ID=n.ERC1155_METADATA_URI_INTERFACE_ID,r.ERC1155_TOKEN_RECEIVER_INTERFACE_ID=n.ERC1155_TOKEN_RECEIVER_INTERFACE_ID,r.ERC20=n.ERC20,r.ERC721=n.ERC721,r.ERC721_ENUMERABLE_INTERFACE_ID=n.ERC721_ENUMERABLE_INTERFACE_ID,r.ERC721_INTERFACE_ID=n.ERC721_INTERFACE_ID,r.ERC721_METADATA_INTERFACE_ID=n.ERC721_METADATA_INTERFACE_ID,r.FALL_BACK_VS_CURRENCY=n.FALL_BACK_VS_CURRENCY,r.GANACHE_CHAIN_ID=n.GANACHE_CHAIN_ID,r.GWEI=n.GWEI,r.IPFS_DEFAULT_GATEWAY_URL=n.IPFS_DEFAULT_GATEWAY_URL,r.InfuraNetworkType=s.InfuraNetworkType,r.MAX_SAFE_CHAIN_ID=n.MAX_SAFE_CHAIN_ID,r.NFT_API_BASE_URL=n.NFT_API_BASE_URL,r.NFT_API_TIMEOUT=n.NFT_API_TIMEOUT,r.NFT_API_VERSION=n.NFT_API_VERSION,r.NetworkType=s.NetworkType,r.NetworksTicker=s.NetworksTicker,r.OPENSEA_PROXY_URL=n.OPENSEA_PROXY_URL,r.ORIGIN_METAMASK=n.ORIGIN_METAMASK,r.RPC=n.RPC,r.TESTNET_TICKER_SYMBOLS=n.TESTNET_TICKER_SYMBOLS,r.convertHexToDecimal=a.convertHexToDecimal,r.detectSIWE=i.detectSIWE,r.fetchWithErrorHandling=a.fetchWithErrorHandling,r.fractionBN=a.fractionBN,r.fromHex=a.fromHex,r.getBuyURL=a.getBuyURL,r.gweiDecToWEIBN=a.gweiDecToWEIBN,r.handleFetch=a.handleFetch,r.hexToBN=a.hexToBN,r.hexToText=a.hexToText,r.isInfuraNetworkType=s.isInfuraNetworkType,r.isNetworkType=s.isNetworkType,r.isNonEmptyArray=a.isNonEmptyArray,r.isPlainObject=a.isPlainObject,r.isSafeChainId=a.isSafeChainId,r.isSafeDynamicKey=a.isSafeDynamicKey,r.isSmartContractCode=a.isSmartContractCode,r.isValidHexAddress=a.isValidHexAddress,r.isValidJson=a.isValidJson,r.isValidSIWEOrigin=i.isValidSIWEOrigin,r.normalizeEnsName=a.normalizeEnsName,r.parseDomainParts=i.parseDomainParts,r.query=a.query,r.safelyExecute=a.safelyExecute,r.safelyExecuteWithTimeout=a.safelyExecuteWithTimeout,r.successfulFetch=a.successfulFetch,r.timeoutFetch=a.timeoutFetch,r.toChecksumHexAddress=a.toChecksumHexAddress,r.toHex=a.toHex,r.weiHexToGweiDec=a.weiHexToGweiDec}}},{package:"@metamask/snaps-controllers>@metamask/phishing-controller>@metamask/controller-utils",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/controller-utils/dist/index.js"}],[1959,{"./chunk-Z4BLTVTB.js":1964,"@metamask/rpc-errors":1670,"@metamask/safe-event-emitter":1671,"@metamask/utils":2253},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var i,a,n,s,o,l,c,d,u,h,p,m,f,v,g,_,k,y,w,T,b=e("./chunk-Z4BLTVTB.js"),E=e("@metamask/rpc-errors"),S=e("@metamask/safe-event-emitter"),P=(i=S)&&i.__esModule?i:{default:i},C=e("@metamask/utils"),A=class e extends P.default{constructor({notificationHandler:e}={}){super(),b.__privateAdd.call(void 0,this,o),b.__privateAdd.call(void 0,this,c),b.__privateAdd.call(void 0,this,u),b.__privateAdd.call(void 0,this,a,!1),b.__privateAdd.call(void 0,this,n,void 0),b.__privateAdd.call(void 0,this,s,void 0),b.__privateSet.call(void 0,this,n,[]),b.__privateSet.call(void 0,this,s,e)}destroy(){b.__privateGet.call(void 0,this,n).forEach((e=>{"destroy"in e&&"function"==typeof e.destroy&&e.destroy()})),b.__privateSet.call(void 0,this,n,[]),b.__privateSet.call(void 0,this,a,!0)}push(e){b.__privateMethod.call(void 0,this,o,l).call(this),b.__privateGet.call(void 0,this,n).push(e)}handle(e,t){if(b.__privateMethod.call(void 0,this,o,l).call(this),t&&"function"!=typeof t)throw new Error('"callback" must be a function if provided.');return Array.isArray(e)?t?b.__privateMethod.call(void 0,this,c,d).call(this,e,t):b.__privateMethod.call(void 0,this,c,d).call(this,e):t?b.__privateMethod.call(void 0,this,u,h).call(this,e,t):this._promiseHandle(e)}asMiddleware(){return b.__privateMethod.call(void 0,this,o,l).call(this),async(t,r,i,a)=>{var s,o;try{const[l,c,d]=await b.__privateMethod.call(void 0,s=e,f,v).call(s,t,r,b.__privateGet.call(void 0,this,n));return c?(await b.__privateMethod.call(void 0,o=e,k,y).call(o,d),a(l)):i((async t=>{var r;try{await b.__privateMethod.call(void 0,r=e,k,y).call(r,d)}catch(e){return t(e)}return t()}))}catch(e){return a(e)}}}async _promiseHandle(e){return new Promise(((t,r)=>{b.__privateMethod.call(void 0,this,u,h).call(this,e,((e,i)=>{e&&void 0===i?r(e):t(i)})).catch(r)}))}};a=new WeakMap,n=new WeakMap,s=new WeakMap,o=new WeakSet,l=function(){if(b.__privateGet.call(void 0,this,a))throw new Error("This engine is destroyed and can no longer be used.")},c=new WeakSet,d=async function(e,t){try{if(0===e.length){const e=[{id:null,jsonrpc:"2.0",error:new(0,E.JsonRpcError)(E.errorCodes.rpc.invalidRequest,"Request batch must contain plain objects. Received an empty array")}];return t?t(null,e):e}const r=(await Promise.all(e.map(this._promiseHandle.bind(this)))).filter((e=>void 0!==e));return t?t(null,r):r}catch(e){if(t)return t(e);throw e}},u=new WeakSet,h=async function(e,t){var r;if(!e||Array.isArray(e)||"object"!=typeof e){const r=new(0,E.JsonRpcError)(E.errorCodes.rpc.invalidRequest,"Requests must be plain objects. Received: "+typeof e,{request:e});return t(r,{id:null,jsonrpc:"2.0",error:r})}if("string"!=typeof e.method){const r=new(0,E.JsonRpcError)(E.errorCodes.rpc.invalidRequest,"Must specify a string method. Received: "+typeof e.method,{request:e});return b.__privateGet.call(void 0,this,s)&&!C.isJsonRpcRequest.call(void 0,e)?t(null):t(r,{id:e.id??null,jsonrpc:"2.0",error:r})}if(b.__privateGet.call(void 0,this,s)&&C.isJsonRpcNotification.call(void 0,e)&&!C.isJsonRpcRequest.call(void 0,e)){try{await b.__privateGet.call(void 0,this,s).call(this,e)}catch(e){return t(e)}return t(null)}let i=null;const a={...e},o={id:a.id,jsonrpc:a.jsonrpc};try{await b.__privateMethod.call(void 0,r=A,p,m).call(r,a,o,b.__privateGet.call(void 0,this,n))}catch(e){i=e}return i&&(delete o.result,o.error||(o.error=E.serializeError.call(void 0,i))),t(i,o)},p=new WeakSet,m=async function(e,t,r){var i,a,n;const[s,o,l]=await b.__privateMethod.call(void 0,i=A,f,v).call(i,e,t,r);if(b.__privateMethod.call(void 0,a=A,w,T).call(a,e,t,o),await b.__privateMethod.call(void 0,n=A,k,y).call(n,l),s)throw s},f=new WeakSet,v=async function(e,t,r){var i;const a=[];let n=null,s=!1;for(const o of r)if([n,s]=await b.__privateMethod.call(void 0,i=A,g,_).call(i,e,t,o,a),s)break;return[n,s,a.reverse()]},g=new WeakSet,_=async function(e,t,r,i){return new Promise((a=>{const n=e=>{const r=e||t.error;r&&(t.error=E.serializeError.call(void 0,r)),a([r,!0])},s=r=>{t.error?n(t.error):(r&&("function"!=typeof r&&n(new(0,E.JsonRpcError)(E.errorCodes.rpc.internal,`JsonRpcEngine: "next" return handlers must be functions. Received "${typeof r}" for request:\n${j(e)}`,{request:e})),i.push(r)),a([null,!1]))};try{r(e,t,s,n)}catch(e){n(e)}}))},k=new WeakSet,y=async function(e){for(const t of e)await new Promise(((e,r)=>{t((t=>t?r(t):e()))}))},w=new WeakSet,T=function(e,t,r){if(!C.hasProperty.call(void 0,t,"result")&&!C.hasProperty.call(void 0,t,"error"))throw new(0,E.JsonRpcError)(E.errorCodes.rpc.internal,`JsonRpcEngine: Response has no error or result for request:\n${j(e)}`,{request:e});if(!r)throw new(0,E.JsonRpcError)(E.errorCodes.rpc.internal,`JsonRpcEngine: Nothing ended request:\n${j(e)}`,{request:e})},b.__privateAdd.call(void 0,A,p),b.__privateAdd.call(void 0,A,f),b.__privateAdd.call(void 0,A,g),b.__privateAdd.call(void 0,A,k),b.__privateAdd.call(void 0,A,w);var I=A;function j(e){return JSON.stringify(e,null,2)}r.JsonRpcEngine=I}}},{package:"@metamask/snaps-controllers>@metamask/json-rpc-engine",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/json-rpc-engine/dist/chunk-2LXAFMJD.js"}],[196,{"@metamask/utils":2253},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){(0,i.hasProperty)(e,"NetworkController")&&(0,i.isObject)(e.NetworkController)&&(0,i.hasProperty)(e.NetworkController,"provider")&&(0,i.hasProperty)(e.NetworkController,"providerConfig")&&delete e.NetworkController.provider;return{...e}};var i=e("@metamask/utils")}}},{package:"$root$",file:"app/scripts/migrations/077-supplements/077-supplement-for-086.ts"}],[1960,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createScaffoldMiddleware=function(e){return(t,r,i,a)=>{const n=e[t.method];return void 0===n?i():"function"==typeof n?n(t,r,i,a):(r.result=n,a())}}}}},{package:"@metamask/snaps-controllers>@metamask/json-rpc-engine",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/json-rpc-engine/dist/chunk-3AC2MIND.js"}],[1961,{"./chunk-XDGWQHNY.js":1963},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var i=e("./chunk-XDGWQHNY.js");r.createIdRemapMiddleware=function(){return(e,t,r,a)=>{const n=e.id,s=i.getUniqueId.call(void 0);e.id=s,t.id=s,r((r=>{e.id=n,t.id=n,r()}))}}}}},{package:"@metamask/snaps-controllers>@metamask/json-rpc-engine",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/json-rpc-engine/dist/chunk-PBQXMZM5.js"}],[1962,{"./chunk-2LXAFMJD.js":1959},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var i=e("./chunk-2LXAFMJD.js");r.mergeMiddleware=function(e){const t=new(0,i.JsonRpcEngine);return e.forEach((e=>t.push(e))),t.asMiddleware()}}}},{package:"@metamask/snaps-controllers>@metamask/json-rpc-engine",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/json-rpc-engine/dist/chunk-VK4MHWJV.js"}],[1963,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var i=4294967295,a=Math.floor(Math.random()*i);r.getUniqueId=function(){return a=(a+1)%i}}}},{package:"@metamask/snaps-controllers>@metamask/json-rpc-engine",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/json-rpc-engine/dist/chunk-XDGWQHNY.js"}],[1964,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var i=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)};r.__privateGet=(e,t,r)=>(i(e,t,"read from private field"),r?r.call(e):t.get(e)),r.__privateAdd=(e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)},r.__privateSet=(e,t,r,a)=>(i(e,t,"write to private field"),a?a.call(e,r):t.set(e,r),r),r.__privateMethod=(e,t,r)=>(i(e,t,"access private method"),r)}}},{package:"@metamask/snaps-controllers>@metamask/json-rpc-engine",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/json-rpc-engine/dist/chunk-Z4BLTVTB.js"}],[1965,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createAsyncMiddleware=function(e){return async(t,r,i,a)=>{let n;const s=new Promise((e=>{n=e}));let o=null,l=!1;const c=async()=>(l=!0,i((e=>{o=e,n()})),s);try{await e(t,r,c),l?(await s,o(null)):a(null)}catch(e){o?o(e):a(e)}}}}}},{package:"@metamask/snaps-controllers>@metamask/json-rpc-engine",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/json-rpc-engine/dist/chunk-ZYXL5TCS.js"}],[1966,{"./chunk-2LXAFMJD.js":1959,"./chunk-3AC2MIND.js":1960,"./chunk-PBQXMZM5.js":1961,"./chunk-VK4MHWJV.js":1962,"./chunk-XDGWQHNY.js":1963,"./chunk-Z4BLTVTB.js":1964,"./chunk-ZYXL5TCS.js":1965},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var i=e("./chunk-ZYXL5TCS.js"),a=e("./chunk-3AC2MIND.js"),n=e("./chunk-PBQXMZM5.js"),s=e("./chunk-XDGWQHNY.js"),o=e("./chunk-VK4MHWJV.js"),l=e("./chunk-2LXAFMJD.js");e("./chunk-Z4BLTVTB.js"),r.JsonRpcEngine=l.JsonRpcEngine,r.createAsyncMiddleware=i.createAsyncMiddleware,r.createIdRemapMiddleware=n.createIdRemapMiddleware,r.createScaffoldMiddleware=a.createScaffoldMiddleware,r.getUniqueId=s.getUniqueId,r.mergeMiddleware=o.mergeMiddleware}}},{package:"@metamask/snaps-controllers>@metamask/json-rpc-engine",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/json-rpc-engine/dist/index.js"}],[1967,{"@metamask/safe-event-emitter":1671,"readable-stream":4175},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var i,a=e("@metamask/safe-event-emitter"),n=(i=a)&&i.__esModule?i:{default:i},s=e("readable-stream");r.createStreamMiddleware=function(e={}){const t={},r=new(0,s.Duplex)({objectMode:!0,read:()=>{},write:function(r,n,s){let o=null;try{!r.id?function(r){e?.retryOnMessage&&r.method===e.retryOnMessage&&Object.values(t).forEach((({req:e,retryCount:r=0})=>{if(!e.id)return;if(r>=3)throw new Error(`StreamMiddleware - Retry limit exceeded for request id "${e.id}"`);const i=t[e.id];i&&(i.retryCount=r+1),a(e)}));i.emit("notification",r)}(r):function(e){const{id:r}=e;if(null===r)return;const i=t[r];if(!i)return void console.warn(`StreamMiddleware - Unknown response id "${r}"`);delete t[r],Object.assign(i.res,e),setTimeout(i.end)}(r)}catch(e){o=e}s(o)}}),i=new(0,n.default);return{events:i,middleware:(e,r,i,n)=>{t[e.id]={req:e,res:r,next:i,end:n},a(e)},stream:r};function a(e){r.push(e)}}}}},{package:"@metamask/snaps-controllers>@metamask/json-rpc-middleware-stream",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/json-rpc-middleware-stream/dist/chunk-3SFZPJR3.js"}],[1968,{"readable-stream":4175},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var i=e("readable-stream");r.createEngineStream=function(e){if(!e?.engine)throw new Error("Missing engine parameter!");const{engine:t}=e,r=new(0,i.Duplex)({objectMode:!0,read:()=>{},write:function(e,i,a){t.handle(e,((e,t)=>{r.push(t)})),a()}});return t.on&&t.on("notification",(e=>{r.push(e)})),r}}}},{package:"@metamask/snaps-controllers>@metamask/json-rpc-middleware-stream",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/json-rpc-middleware-stream/dist/chunk-IDTAZSDC.js"}],[1969,{"./chunk-3SFZPJR3.js":1967,"./chunk-IDTAZSDC.js":1968},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var i=e("./chunk-IDTAZSDC.js"),a=e("./chunk-3SFZPJR3.js");r.createEngineStream=i.createEngineStream,r.createStreamMiddleware=a.createStreamMiddleware}}},{package:"@metamask/snaps-controllers>@metamask/json-rpc-middleware-stream",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/json-rpc-middleware-stream/dist/index.js"}],[197,{"@metamask/utils":2253},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){if((0,i.hasProperty)(e,"NftController")&&(0,i.isObject)(e.NftController)){const t=e.NftController;if((0,i.hasProperty)(t,"allNftContracts")&&(0,i.isObject)(t.allNftContracts)){const{allNftContracts:e}=t;Object.keys(e).every((t=>(0,i.isObject)(e[t])))&&Object.keys(e).forEach((t=>{const r=e[t];if((0,i.isObject)(r)&&a(r))for(const e of Object.keys(r))(0,i.isStrictHexString)(e)||delete r[e]}))}if((0,i.hasProperty)(t,"allNfts")&&(0,i.isObject)(t.allNfts)){const{allNfts:e}=t;Object.keys(e).every((t=>(0,i.isObject)(e[t])))&&Object.keys(e).forEach((t=>{const r=e[t];if((0,i.isObject)(r)&&a(r))for(const e of Object.keys(r))(0,i.isStrictHexString)(e)||delete r[e]}))}e.NftController=t}if((0,i.hasProperty)(e,"TokenListController")&&(0,i.isObject)(e.TokenListController)){const t=e.TokenListController;if((0,i.hasProperty)(t,"tokensChainsCache")&&(0,i.isObject)(t.tokensChainsCache)&&a(t.tokensChainsCache))for(const e of Object.keys(t.tokensChainsCache))(0,i.isStrictHexString)(e)||delete t.tokensChainsCache[e]}if((0,i.hasProperty)(e,"TokensController")&&(0,i.isObject)(e.TokensController)){const t=e.TokensController;if((0,i.hasProperty)(t,"allTokens")&&(0,i.isObject)(t.allTokens)&&a(t.allTokens)){const{allTokens:e}=t;for(const r of Object.keys(e))(0,i.isStrictHexString)(r)||delete t.allTokens[r]}if((0,i.hasProperty)(t,"allIgnoredTokens")&&(0,i.isObject)(t.allIgnoredTokens)&&a(t.allIgnoredTokens)){const{allIgnoredTokens:e}=t;for(const r of Object.keys(e))(0,i.isStrictHexString)(r)||delete t.allIgnoredTokens[r]}if((0,i.hasProperty)(t,"allDetectedTokens")&&(0,i.isObject)(t.allDetectedTokens)&&a(t.allDetectedTokens)){const{allDetectedTokens:e}=t;for(const r of Object.keys(e))(0,i.isStrictHexString)(r)||delete t.allDetectedTokens[r]}e.TokensController=t}return e};var i=e("@metamask/utils");function a(e){return Object.keys(e).some((e=>(0,i.isStrictHexString)(e)))}}}},{package:"$root$",file:"app/scripts/migrations/077-supplements/077-supplement-for-088.ts"}],[1970,{"@metamask/rpc-errors":1670},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var i=e("@metamask/rpc-errors");var a=class extends Error{constructor(e){super(`Invalid subject identifier: "${"string"==typeof e?e:typeof e}"`)}},n=class extends Error{constructor(e){super(`Unrecognized subject: "${e}" has no permissions.`)}},s=class extends Error{constructor(e){super(`Caveat value merger does not exist for type: "${e}"`)}},o=class extends Error{constructor(e,t,r){super(`Invalid merged permissions for subject "${e}":\n${t.message}`),this.cause=t,this.data={diff:r}}},l=class extends Error{constructor(e,t,r){super(`Invalid approved permission for origin "${e}" and target "${t}".`),this.data={origin:e,target:t,approvedPermission:r}}},c=class extends Error{constructor(e,t){super(`Subject "${e}" has no permission for "${t}".`)}},d=class extends Error{constructor(e,t){super(`Subject "${t}" has no permission for "${e}".`),t&&(this.data={origin:t})}},u=class extends Error{constructor(e,t,r){super(`Unrecognized caveat type: "${e}"`),this.data={caveatType:e},void 0!==t&&(this.data.origin=t),void 0!==r&&(this.data.target=r)}},h=class extends Error{constructor(e,t,r){super(`The "caveats" property of permission for "${t}" of subject "${e}" is invalid. It must be a non-empty array if specified.`),this.data={origin:e,target:t,caveatsProperty:r}}},p=class extends Error{constructor(e,t,r){super(`Permission for "${t}" of subject "${e}" has no caveat of type "${r}".`)}},m=class extends Error{constructor(e,t,r){super(`Permission for "${t}" of subject "${e}" already has a caveat of type "${r}".`)}},f=class extends i.JsonRpcError{constructor(e,t,r){super(i.errorCodes.rpc.invalidParams,"Invalid caveat. Caveats must be plain objects.",{receivedCaveat:e}),this.data={origin:t,target:r}}},v=class extends Error{constructor(e,t,r){super(`Caveat types must be strings. Received: "${typeof e.type}"`),this.data={caveat:e,origin:t,target:r}}},g=class extends Error{constructor(e,t,r){super('Caveat is missing "value" field.'),this.data={caveat:e,origin:t,target:r}}},_=class extends Error{constructor(e,t,r){super('Caveat "value" is invalid JSON.'),this.data={caveat:e,origin:t,target:r}}},k=class extends Error{constructor(e,t,r){super(`Caveat has unexpected number of fields: "${Object.keys(e).length}"`),this.data={caveat:e,origin:t,target:r}}},y=class extends Error{constructor(e,t,r){super(`Permissions for target "${r}" may not have caveats of type "${e}".`),this.data={caveatType:e,origin:t,target:r}}},w=class extends Error{constructor(e,t,r){super(`Permissions for target "${r}" contains multiple caveats of type "${e}".`),this.data={caveatType:e,origin:t,target:r}}},T=class extends Error{constructor(e,t){super(`Cannot merge caveats of different types: "${e}" and "${t}".`),this.data={leftCaveatType:e,rightCaveatType:t}}},b=class extends Error{constructor(e,t){super(`Caveat specification uses a mismatched type. Expected caveats for ${t}`),this.data={caveatSpec:e,permissionType:t}}},E=class extends Error{constructor(e){super(`Permissions request with id "${e}" not found.`)}};r.unauthorized=function(e){return i.providerErrors.unauthorized({message:"Unauthorized to perform action. Try requesting the required permission(s) first. For more information, see: https://docs.metamask.io/guide/rpc-api.html#permissions",data:e.data})},r.methodNotFound=function(e,t){const r={message:`The method "${e}" does not exist / is not available.`};return void 0!==t&&(r.data=t),i.rpcErrors.methodNotFound(r)},r.invalidParams=function(e){return i.rpcErrors.invalidParams({data:e.data,message:e.message})},r.userRejectedRequest=function(e){return i.providerErrors.userRejectedRequest({data:e})},r.internalError=function(e,t){return i.rpcErrors.internal({message:e,data:t})},r.InvalidSubjectIdentifierError=a,r.UnrecognizedSubjectError=n,r.CaveatMergerDoesNotExistError=s,r.InvalidMergedPermissionsError=o,r.InvalidApprovedPermissionError=l,r.PermissionDoesNotExistError=c,r.EndowmentPermissionDoesNotExistError=d,r.UnrecognizedCaveatTypeError=u,r.InvalidCaveatsPropertyError=h,r.CaveatDoesNotExistError=p,r.CaveatAlreadyExistsError=m,r.InvalidCaveatError=f,r.InvalidCaveatTypeError=v,r.CaveatMissingValueError=g,r.CaveatInvalidJsonError=_,r.InvalidCaveatFieldsError=k,r.ForbiddenCaveatError=y,r.DuplicateCaveatError=w,r.CaveatMergeTypeMismatchError=T,r.CaveatSpecificationMismatchError=b,r.PermissionsRequestNotFoundError=E}}},{package:"@metamask/snaps-controllers>@metamask/permission-controller",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/permission-controller/dist/chunk-3X6WO7UG.js"}],[1971,{"@metamask/base-controller":1952},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var i=e("@metamask/base-controller"),a=(e=>(e.Extension="extension",e.Internal="internal",e.Unknown="unknown",e.Website="website",e.Snap="snap",e))(a||{}),n={subjectMetadata:{persist:!0,anonymous:!1}},s={subjectMetadata:{}},o=class e extends i.BaseController{constructor({messenger:t,subjectCacheLimit:r,state:i={}}){if(!Number.isInteger(r)||r<1)throw new Error(`subjectCacheLimit must be a positive integer. Received: "${r}"`);const a=e=>t.call("PermissionController:hasPermissions",e);super({name:"SubjectMetadataController",metadata:n,messenger:t,state:{...e.getTrimmedState(i,a)}}),this.subjectHasPermissions=a,this.subjectCacheLimit=r,this.subjectsWithoutPermissionsEncounteredSinceStartup=new Set,this.messagingSystem.registerActionHandler(`${this.name}:getSubjectMetadata`,this.getSubjectMetadata.bind(this)),this.messagingSystem.registerActionHandler(`${this.name}:addSubjectMetadata`,this.addSubjectMetadata.bind(this))}clearState(){this.subjectsWithoutPermissionsEncounteredSinceStartup.clear(),this.update((e=>({...s})))}addSubjectMetadata(e){const{origin:t}=e,r={...e,extensionId:e.extensionId||null,iconUrl:e.iconUrl||null,name:e.name||null,subjectType:e.subjectType||null};let i=null;if(this.subjectsWithoutPermissionsEncounteredSinceStartup.size>=this.subjectCacheLimit){const e=this.subjectsWithoutPermissionsEncounteredSinceStartup.values().next().value;this.subjectsWithoutPermissionsEncounteredSinceStartup.delete(e),this.subjectHasPermissions(e)||(i=e)}this.subjectsWithoutPermissionsEncounteredSinceStartup.add(t),this.update((e=>{e.subjectMetadata[t]=r,"string"==typeof i&&delete e.subjectMetadata[i]}))}getSubjectMetadata(e){return this.state.subjectMetadata[e]}trimMetadataState(){this.update((t=>e.getTrimmedState(t,this.subjectHasPermissions)))}static getTrimmedState(e,t){const{subjectMetadata:r={}}=e;return{subjectMetadata:Object.keys(r).reduce(((e,i)=>(t(i)&&(e[i]=r[i]),e)),{})}}};r.SubjectType=a,r.SubjectMetadataController=o}}},{package:"@metamask/snaps-controllers>@metamask/permission-controller",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/permission-controller/dist/chunk-C73QV75D.js"}],[1972,{"./chunk-GHOOCGN3.js":1973,"./chunk-HRDKMOYS.js":1974,"./chunk-XM622CMP.js":1979,"./chunk-Z2XKIXLS.js":1980},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var i=e("./chunk-HRDKMOYS.js"),a=e("./chunk-XM622CMP.js"),n=e("./chunk-GHOOCGN3.js"),s={};e("./chunk-Z2XKIXLS.js").__export.call(void 0,s,{handlers:()=>o});var o=[a.requestPermissionsHandler,i.getPermissionsHandler,n.revokePermissionsHandler];r.handlers=o,r.rpc_methods_exports=s}}},{package:"@metamask/snaps-controllers>@metamask/permission-controller",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/permission-controller/dist/chunk-DV74ZDGD.js"}],[1973,{"./chunk-3X6WO7UG.js":1970,"@metamask/utils":2253},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var i=e("./chunk-3X6WO7UG.js"),a=e("@metamask/utils"),n={methodNames:["wallet_revokePermissions"],implementation:async function(e,t,r,n,{revokePermissionsForOrigin:s}){const{params:o}=e,l=o?.[0];if(!l)return n(i.invalidParams.call(void 0,{data:{request:e}}));const c=Object.keys(l);if(!a.isNonEmptyArray.call(void 0,c))return n(i.invalidParams.call(void 0,{data:{request:e}}));return s(c),t.result=null,n()},hookNames:{revokePermissionsForOrigin:!0}};r.revokePermissionsHandler=n}}},{package:"@metamask/snaps-controllers>@metamask/permission-controller",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/permission-controller/dist/chunk-GHOOCGN3.js"}],[1974,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var i={methodNames:["wallet_getPermissions"],implementation:async function(e,t,r,i,{getPermissionsForOrigin:a}){return t.result=Object.values(a()||{}),i()},hookNames:{getPermissionsForOrigin:!0}};r.getPermissionsHandler=i}}},{package:"@metamask/snaps-controllers>@metamask/permission-controller",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/permission-controller/dist/chunk-HRDKMOYS.js"}],[1975,{"./chunk-3X6WO7UG.js":1970,"./chunk-PTE4672I.js":1976,"./chunk-RKDXFKNN.js":1977,"./chunk-VM4LI55W.js":1978,"./chunk-Z2XKIXLS.js":1980,"./chunk-ZH4MLSXX.js":1981,"@metamask/base-controller":1952,"@metamask/controller-utils":1958,"@metamask/rpc-errors":1670,"@metamask/utils":2253,"deep-freeze-strict":3115,immer:3574,nanoid:1984},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var i,a=e("./chunk-RKDXFKNN.js"),n=e("./chunk-ZH4MLSXX.js"),s=e("./chunk-VM4LI55W.js"),o=e("./chunk-3X6WO7UG.js"),l=e("./chunk-PTE4672I.js"),c=e("./chunk-Z2XKIXLS.js"),d=e("@metamask/base-controller"),u=e("@metamask/controller-utils"),h=e("@metamask/rpc-errors"),p=e("@metamask/utils"),m=e("deep-freeze-strict"),f=(i=m)&&i.__esModule?i:{default:i},v=e("immer"),g=e("nanoid"),_="PermissionController";var k,y,w,T,b,E,S,P,C,A,I,j,M=(e=>(e[e.noop=0]="noop",e[e.updateValue=1]="updateValue",e[e.deleteCaveat=2]="deleteCaveat",e[e.revokePermission=3]="revokePermission",e))(M||{}),x=class extends d.BaseController{constructor(e){const{caveatSpecifications:t,permissionSpecifications:r,unrestrictedMethods:i,messenger:a,state:n={}}=e;super({name:_,metadata:{subjects:{anonymous:!0,persist:!0}},messenger:a,state:{subjects:{},...n}}),c.__privateAdd.call(void 0,this,k),c.__privateAdd.call(void 0,this,w),c.__privateAdd.call(void 0,this,b),c.__privateAdd.call(void 0,this,S),c.__privateAdd.call(void 0,this,C),c.__privateAdd.call(void 0,this,I),this._unrestrictedMethods=new Set(i),this._caveatSpecifications=f.default.call(void 0,{...t}),this.validatePermissionSpecifications(r,this._caveatSpecifications),this._permissionSpecifications=f.default.call(void 0,{...r}),this.registerMessageHandlers(),this.createPermissionMiddleware=s.getPermissionMiddlewareFactory.call(void 0,{executeRestrictedMethod:this._executeRestrictedMethod.bind(this),getRestrictedMethod:this.getRestrictedMethod.bind(this),isUnrestrictedMethod:this.unrestrictedMethods.has.bind(this.unrestrictedMethods)})}get unrestrictedMethods(){return this._unrestrictedMethods}getPermissionSpecification(e){return this._permissionSpecifications[e]}getCaveatSpecification(e){return this._caveatSpecifications[e]}validatePermissionSpecifications(e,t){Object.entries(e).forEach((([e,{permissionType:r,targetName:i,allowedCaveats:s}])=>{if(!r||!p.hasProperty.call(void 0,n.PermissionType,r))throw new Error(`Invalid permission type: "${r}"`);if(!e)throw new Error(`Invalid permission target name: "${e}"`);if(e!==i)throw new Error(`Invalid permission specification: target name "${e}" must match specification.targetName value "${i}".`);s&&s.forEach((e=>{if(!p.hasProperty.call(void 0,t,e))throw new(0,o.UnrecognizedCaveatTypeError)(e);const i=t[e],n=a.isRestrictedMethodCaveatSpecification.call(void 0,i);if("RestrictedMethod"===r&&!n||"Endowment"===r&&n)throw new(0,o.CaveatSpecificationMismatchError)(i,r)}))}))}registerMessageHandlers(){this.messagingSystem.registerActionHandler(`${_}:clearPermissions`,(()=>this.clearState())),this.messagingSystem.registerActionHandler(`${_}:getEndowments`,((e,t,r)=>this.getEndowments(e,t,r))),this.messagingSystem.registerActionHandler(`${_}:getSubjectNames`,(()=>this.getSubjectNames())),this.messagingSystem.registerActionHandler(`${_}:getPermissions`,(e=>this.getPermissions(e))),this.messagingSystem.registerActionHandler(`${_}:hasPermission`,((e,t)=>this.hasPermission(e,t))),this.messagingSystem.registerActionHandler(`${_}:hasPermissions`,(e=>this.hasPermissions(e))),this.messagingSystem.registerActionHandler(`${_}:grantPermissions`,this.grantPermissions.bind(this)),this.messagingSystem.registerActionHandler(`${_}:grantPermissionsIncremental`,this.grantPermissionsIncremental.bind(this)),this.messagingSystem.registerActionHandler(`${_}:requestPermissions`,((e,t)=>this.requestPermissions(e,t))),this.messagingSystem.registerActionHandler(`${_}:requestPermissionsIncremental`,((e,t)=>this.requestPermissionsIncremental(e,t))),this.messagingSystem.registerActionHandler(`${_}:revokeAllPermissions`,(e=>this.revokeAllPermissions(e))),this.messagingSystem.registerActionHandler(`${_}:revokePermissionForAllSubjects`,(e=>this.revokePermissionForAllSubjects(e))),this.messagingSystem.registerActionHandler(`${_}:revokePermissions`,this.revokePermissions.bind(this)),this.messagingSystem.registerActionHandler(`${_}:updateCaveat`,((e,t,r,i)=>{this.updateCaveat(e,t,r,i)}))}clearState(){this.update((e=>({subjects:{}})))}getTypedPermissionSpecification(e,t,r){const i="RestrictedMethod"===e?o.methodNotFound.call(void 0,t,r?{origin:r}:void 0):new(0,o.EndowmentPermissionDoesNotExistError)(t,r);if(!this.targetExists(t))throw i;const a=this.getPermissionSpecification(t);if(!n.hasSpecificationType.call(void 0,a,e))throw i;return a}getRestrictedMethod(e,t){return this.getTypedPermissionSpecification("RestrictedMethod",e,t).methodImplementation}getSubjectNames(){return Object.keys(this.state.subjects)}getPermission(e,t){return this.state.subjects[e]?.permissions[t]}getPermissions(e){return this.state.subjects[e]?.permissions}hasPermission(e,t){return Boolean(this.getPermission(e,t))}hasPermissions(e){return Boolean(this.state.subjects[e])}revokeAllPermissions(e){this.update((t=>{if(!t.subjects[e])throw new(0,o.UnrecognizedSubjectError)(e);delete t.subjects[e]}))}revokePermission(e,t){this.revokePermissions({[e]:[t]})}revokePermissions(e){this.update((t=>{Object.keys(e).forEach((r=>{if(!p.hasProperty.call(void 0,t.subjects,r))throw new(0,o.UnrecognizedSubjectError)(r);e[r].forEach((e=>{const{permissions:i}=t.subjects[r];if(!p.hasProperty.call(void 0,i,e))throw new(0,o.PermissionDoesNotExistError)(r,e);this.deletePermission(t.subjects,r,e)}))}))}))}revokePermissionForAllSubjects(e){0!==this.getSubjectNames().length&&this.update((t=>{Object.entries(t.subjects).forEach((([r,i])=>{const{permissions:a}=i;p.hasProperty.call(void 0,a,e)&&this.deletePermission(t.subjects,r,e)}))}))}deletePermission(e,t,r){const{permissions:i}=e[t];Object.keys(i).length>1?delete i[r]:delete e[t]}hasCaveat(e,t,r){return Boolean(this.getCaveat(e,t,r))}getCaveat(e,t,r){const i=this.getPermission(e,t);if(!i)throw new(0,o.PermissionDoesNotExistError)(e,t);return n.findCaveat.call(void 0,i,r)}addCaveat(e,t,r,i){if(this.hasCaveat(e,t,r))throw new(0,o.CaveatAlreadyExistsError)(e,t,r);this.setCaveat(e,t,r,i)}updateCaveat(e,t,r,i){if(!this.hasCaveat(e,t,r))throw new(0,o.CaveatDoesNotExistError)(e,t,r);this.setCaveat(e,t,r,i)}setCaveat(e,t,r,i){this.update((a=>{const n=a.subjects[e];if(!n)throw new(0,o.UnrecognizedSubjectError)(e);const s=n.permissions[t];if(!s)throw new(0,o.PermissionDoesNotExistError)(e,t);const l={type:r,value:i};if(this.validateCaveat(l,e,t),s.caveats){const e=s.caveats.findIndex((e=>e.type===l.type));-1===e?s.caveats.push(l):s.caveats.splice(e,1,l)}else s.caveats=[l];this.validateModifiedPermission(s,e)}))}updatePermissionsByCaveat(e,t){0!==Object.keys(this.state.subjects).length&&this.update((r=>{Object.values(r.subjects).forEach((i=>{Object.values(i.permissions).forEach((a=>{const{caveats:n}=a,s=n?.find((({type:t})=>t===e));if(!s)return;const o=t(s.value),{operation:l}=o;switch(l){case 0:break;case 1:s.value=o.value,this.validateCaveat(s,i.origin,a.parentCapability);break;case 2:this.deleteCaveat(a,e,i.origin);break;case 3:this.deletePermission(r.subjects,i.origin,a.parentCapability);break;default:throw new Error(`Unrecognized mutation result: "${l}"`)}}))}))}))}removeCaveat(e,t,r){this.update((i=>{const a=i.subjects[e]?.permissions[t];if(!a)throw new(0,o.PermissionDoesNotExistError)(e,t);if(!a.caveats)throw new(0,o.CaveatDoesNotExistError)(e,t,r);this.deleteCaveat(a,r,e)}))}deleteCaveat(e,t,r){if(!e.caveats)throw new(0,o.CaveatDoesNotExistError)(r,e.parentCapability,t);const i=e.caveats.findIndex((e=>e.type===t));if(-1===i)throw new(0,o.CaveatDoesNotExistError)(r,e.parentCapability,t);1===e.caveats.length?e.caveats=null:e.caveats.splice(i,1),this.validateModifiedPermission(e,r)}validateModifiedPermission(e,t){if(!this.targetExists(e.parentCapability))throw new Error(`Fatal: Existing permission target "${e.parentCapability}" has no specification.`);this.validatePermission(this.getPermissionSpecification(e.parentCapability),e,t)}targetExists(e){return p.hasProperty.call(void 0,this._permissionSpecifications,e)}grantPermissions({approvedPermissions:e,requestData:t,preserveExistingPermissions:r=!0,subject:i}){return c.__privateMethod.call(void 0,this,w,T).call(this,{approvedPermissions:e,subject:i,mergePermissions:!1,preserveExistingPermissions:r,requestData:t})}grantPermissionsIncremental({approvedPermissions:e,requestData:t,subject:r}){return c.__privateMethod.call(void 0,this,w,T).call(this,{approvedPermissions:e,subject:r,mergePermissions:!0,preserveExistingPermissions:!0,requestData:t})}validatePermission(e,t,r,{invokePermissionValidator:i,performCaveatValidation:a}={invokePermissionValidator:!0,performCaveatValidation:!0}){const{allowedCaveats:n,validator:s,targetName:l}=e;if(e.subjectTypes?.length&&e.subjectTypes.length>0){const t=this.messagingSystem.call("SubjectMetadataController:getSubjectMetadata",r);if(!t||null===t.subjectType||!e.subjectTypes.includes(t.subjectType))throw"RestrictedMethod"===e.permissionType?o.methodNotFound.call(void 0,l,{origin:r}):new(0,o.EndowmentPermissionDoesNotExistError)(l,r)}if(p.hasProperty.call(void 0,t,"caveats")){const{caveats:e}=t;if(null!==e&&!(Array.isArray(e)&&e.length>0))throw new(0,o.InvalidCaveatsPropertyError)(r,l,e);const i=new Set;e?.forEach((e=>{if(a&&this.validateCaveat(e,r,l),!n?.includes(e.type))throw new(0,o.ForbiddenCaveatError)(e.type,r,l);if(i.has(e.type))throw new(0,o.DuplicateCaveatError)(e.type,r,l);i.add(e.type)}))}i&&s&&s(t,r,l)}setValidatedPermissions(e,t){this.update((r=>{r.subjects[e]||(r.subjects[e]={origin:e,permissions:{}}),r.subjects[e].permissions=v.castDraft.call(void 0,t)}))}constructCaveats(e,t,r){const i=r?.map((r=>{this.validateCaveat(r,e,t);const{type:i,value:a}=r;return{type:i,value:a}}));return i&&u.isNonEmptyArray.call(void 0,i)?i:void 0}validateCaveat(e,t,r){if(!u.isPlainObject.call(void 0,e))throw new(0,o.InvalidCaveatError)(e,t,r);if(2!==Object.keys(e).length)throw new(0,o.InvalidCaveatFieldsError)(e,t,r);if("string"!=typeof e.type)throw new(0,o.InvalidCaveatTypeError)(e,t,r);const i=this.getCaveatSpecification(e.type);if(!i)throw new(0,o.UnrecognizedCaveatTypeError)(e.type,t,r);if(!p.hasProperty.call(void 0,e,"value")||void 0===e.value)throw new(0,o.CaveatMissingValueError)(e,t,r);if(!u.isValidJson.call(void 0,e.value))throw new(0,o.CaveatInvalidJsonError)(e,t,r);i.validator?.(e,t,r)}async requestPermissions(e,t,r={}){const{origin:i}=e,{id:a=g.nanoid.call(void 0),preserveExistingPermissions:n=!0}=r;this.validateRequestedPermissions(i,t);const s={...r.metadata,id:a,origin:i},o={metadata:s,permissions:t},l=await this.requestUserApproval(o);return await c.__privateMethod.call(void 0,this,I,j).call(this,{subject:e,metadata:s,preserveExistingPermissions:n,approvedRequest:l})}async requestPermissionsIncremental(e,t,r={}){const{origin:i}=e,{id:a=g.nanoid.call(void 0)}=r;this.validateRequestedPermissions(i,t);const n=this.getPermissions(i)??{},[s,l]=c.__privateMethod.call(void 0,this,b,E).call(this,n,t);if(void 0===s||void 0===l)return[];try{this.validateRequestedPermissions(i,s)}catch(e){if(e instanceof Error)throw new(0,o.InvalidMergedPermissionsError)(i,e,l);throw o.internalError.call(void 0,"Unrecognized error type",{error:e})}const d={...r.metadata,id:a,origin:i},u={metadata:d,permissions:s,diff:{currentPermissions:n,permissionDiffMap:l}},h=await this.requestUserApproval(u);return await c.__privateMethod.call(void 0,this,I,j).call(this,{subject:e,metadata:d,preserveExistingPermissions:!1,approvedRequest:h})}validateRequestedPermissions(e,t){if(!u.isPlainObject.call(void 0,t))throw o.invalidParams.call(void 0,{message:`Requested permissions for origin "${e}" is not a plain object.`,data:{origin:e,requestedPermissions:t}});if(0===Object.keys(t).length)throw o.invalidParams.call(void 0,{message:`Permissions request for origin "${e}" contains no permissions.`,data:{requestedPermissions:t}});for(const r of Object.keys(t)){const i=t[r];if(!this.targetExists(r))throw o.methodNotFound.call(void 0,r,{origin:e,requestedPermissions:t});if(!u.isPlainObject.call(void 0,i)||void 0!==i.parentCapability&&r!==i.parentCapability)throw o.invalidParams.call(void 0,{message:`Permissions request for origin "${e}" contains invalid requested permission(s).`,data:{origin:e,requestedPermissions:t}});this.validatePermission(this.getPermissionSpecification(r),i,e,{invokePermissionValidator:!1,performCaveatValidation:!0})}}async requestUserApproval(e){const{origin:t,id:r}=e.metadata,i=await this.messagingSystem.call("ApprovalController:addRequest",{id:r,origin:t,requestData:e,type:"wallet_requestPermissions"},!0);return this.validateApprovedPermissions(i,{id:r,origin:t}),i}getSideEffects(e){return Object.keys(e).reduce(((e,t)=>{if(this.targetExists(t)){const r=this.getPermissionSpecification(t);r.sideEffect&&(e.permittedHandlers[t]=r.sideEffect.onPermitted,r.sideEffect.onFailure&&(e.failureHandlers[t]=r.sideEffect.onFailure))}return e}),{permittedHandlers:{},failureHandlers:{}})}async executeSideEffects(e,t){const{permittedHandlers:r,failureHandlers:i}=e,a={requestData:t,messagingSystem:this.messagingSystem},n=await Promise.allSettled(Object.values(r).map((e=>e(a)))),s=n.filter((e=>"rejected"===e.status));if(s.length>0){const e=Object.values(i);if(e.length>0)try{await Promise.all(e.map((e=>e(a))))}catch(e){throw o.internalError.call(void 0,"Unexpected error in side-effects",{error:e})}const t=s.map((e=>e.reason));throw t.forEach((e=>{console.error(e)})),t.length>1?o.internalError.call(void 0,"Multiple errors occurred during side-effects execution",{errors:t}):t[0]}return n.map((({value:e})=>e))}validateApprovedPermissions(e,t){const{id:r,origin:i}=t;if(!u.isPlainObject.call(void 0,e)||!u.isPlainObject.call(void 0,e.metadata))throw o.internalError.call(void 0,`Approved permissions request for subject "${i}" is invalid.`,{data:{approvedRequest:e}});const{metadata:{id:a,origin:n},permissions:s}=e;if(a!==r)throw o.internalError.call(void 0,`Approved permissions request for subject "${i}" mutated its id.`,{originalId:r,mutatedId:a});if(n!==i)throw o.internalError.call(void 0,`Approved permissions request for subject "${i}" mutated its origin.`,{originalOrigin:i,mutatedOrigin:n});try{this.validateRequestedPermissions(i,s)}catch(e){if(e instanceof Error)throw o.internalError.call(void 0,`Invalid approved permissions request: ${e.message}`,e instanceof h.JsonRpcError?e.data:void 0);throw o.internalError.call(void 0,"Unrecognized error type",{error:e})}}async acceptPermissionsRequest(e){const{id:t}=e.metadata;if(!this.hasApprovalRequest({id:t}))throw new(0,o.PermissionsRequestNotFoundError)(t);if(0!==Object.keys(e.permissions).length)try{this.messagingSystem.call("ApprovalController:acceptRequest",t,e)}catch(e){throw this._rejectPermissionsRequest(t,e),e}else this._rejectPermissionsRequest(t,o.invalidParams.call(void 0,{message:"Must request at least one permission."}))}async rejectPermissionsRequest(e){if(!this.hasApprovalRequest({id:e}))throw new(0,o.PermissionsRequestNotFoundError)(e);this._rejectPermissionsRequest(e,o.userRejectedRequest.call(void 0))}hasApprovalRequest(e){return this.messagingSystem.call("ApprovalController:hasRequest",e)}_rejectPermissionsRequest(e,t){return this.messagingSystem.call("ApprovalController:rejectRequest",e,t)}async getEndowments(e,t,r){if(!this.hasPermission(e,t))throw o.unauthorized.call(void 0,{data:{origin:e,targetName:t}});return this.getTypedPermissionSpecification("Endowment",t,e).endowmentGetter({origin:e,requestData:r})}async executeRestrictedMethod(e,t,r){const i=this.getRestrictedMethod(t,e),a=await this._executeRestrictedMethod(i,{origin:e},t,r);if(void 0===a)throw new Error(`Internal request for method "${t}" as origin "${e}" returned no result.`);return a}_executeRestrictedMethod(e,t,r,i=[]){const{origin:n}=t,s=this.getPermission(n,r);if(!s)throw o.unauthorized.call(void 0,{data:{origin:n,method:r}});return a.decorateWithCaveats.call(void 0,e,s,this._caveatSpecifications)({method:r,params:i,context:{origin:n}})}};k=new WeakSet,y=function(e){const{merger:t}=this.getCaveatSpecification(e);if(void 0===t)throw new(0,o.CaveatMergerDoesNotExistError)(e);return t},w=new WeakSet,T=function({approvedPermissions:e,subject:t,mergePermissions:r,preserveExistingPermissions:i,requestData:a}){const{origin:s}=t;if(!s||"string"!=typeof s)throw new(0,o.InvalidSubjectIdentifierError)(s);const l=i?{...this.getPermissions(s)}:{};for(const[t,i]of Object.entries(e)){if(!this.targetExists(t))throw o.methodNotFound.call(void 0,t);if(void 0!==i.parentCapability&&t!==i.parentCapability)throw new(0,o.InvalidApprovedPermissionError)(s,t,i);const e=t,d=this.getPermissionSpecification(e),u={caveats:this.constructCaveats(s,e,i.caveats),invoker:s,target:e};let h,p=!0;d.factory?h=d.factory(u,a):(h=n.constructPermission.call(void 0,u),p=!1),r&&(h=c.__privateMethod.call(void 0,this,S,P).call(this,l[e],h)[0]),this.validatePermission(d,h,s,{invokePermissionValidator:!0,performCaveatValidation:p}),l[e]=h}return this.setValidatedPermissions(s,l),l},b=new WeakSet,E=function(e,t){const r={},i=v.produce.call(void 0,e,(e=>{const i=e;Object.entries(t).forEach((([e,t])=>{const a=i[e],[n,s]=c.__privateMethod.call(void 0,this,S,P).call(this,a??{},t);(void 0===a||Object.keys(s).length>0)&&(i[e]=n,r[e]=s)}))}));return 0===Object.keys(r).length?[]:[i,r]},S=new WeakSet,P=function(e,t){const{caveatPairs:r,leftUniqueCaveats:i,rightUniqueCaveats:a}=l.collectUniqueAndPairedCaveats.call(void 0,e,t),[n,s]=r.reduce((([e,t],[r,i])=>{const[a,n]=c.__privateMethod.call(void 0,this,C,A).call(this,r,i);return void 0!==a&&void 0!==n?(e.push(a),t[a.type]=n):e.push(r),[e,t]}),[[],{}]),o=[...n,...i,...a.map((e=>{const[t,r]=c.__privateMethod.call(void 0,this,C,A).call(this,void 0,e);return s[t.type]=r,t}))];return[{...e,...t,...o.length>0?{caveats:o}:{}},s]},C=new WeakSet,A=function(e,t){if(void 0!==e&&e.type!==t.type)throw new(0,o.CaveatMergeTypeMismatchError)(e.type,t.type);const r=c.__privateMethod.call(void 0,this,k,y).call(this,t.type);if(void 0===e)return[{...t},t.value];const[i,a]=r(e.value,t.value);return void 0!==i&&void 0!==a?[{type:t.type,value:i},a]:[]},I=new WeakSet,j=async function({subject:e,metadata:t,preserveExistingPermissions:r,approvedRequest:i}){const{permissions:a,...n}=i,s={...t},o=this.getSideEffects(a);if(Object.values(o.permittedHandlers).length>0){const e=await this.executeSideEffects(o,i);s.data=Object.keys(o.permittedHandlers).reduce(((t,r,i)=>({[r]:e[i],...t})),{})}return[this.grantPermissions({subject:e,approvedPermissions:a,preserveExistingPermissions:r,requestData:n}),s]},r.CaveatMutatorOperation=M,r.PermissionController=x}}},{package:"@metamask/snaps-controllers>@metamask/permission-controller",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/permission-controller/dist/chunk-I3DJ23QH.js"}],[1976,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var i=(e=>(e.requestPermissions="wallet_requestPermissions",e.getPermissions="wallet_getPermissions",e.revokePermissions="wallet_revokePermissions",e))(i||{});r.MethodNames=i,r.collectUniqueAndPairedCaveats=function(e,t){const r=e?.caveats?.slice()??[],i=t.caveats?.slice()??[],a=[],n=[];return r.forEach((e=>{const t=i.findIndex((t=>t.type===e.type));-1===t?a.push(e):(n.push([e,i[t]]),i.splice(t,1))})),{caveatPairs:n,leftUniqueCaveats:a,rightUniqueCaveats:[...i]}}}}},{package:"@metamask/snaps-controllers>@metamask/permission-controller",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/permission-controller/dist/chunk-PTE4672I.js"}],[1977,{"./chunk-3X6WO7UG.js":1970,"@metamask/utils":2253},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var i=e("./chunk-3X6WO7UG.js"),a=e("@metamask/utils");function n(e){return a.hasProperty.call(void 0,e,"decorator")}r.isRestrictedMethodCaveatSpecification=n,r.decorateWithCaveats=function(e,t,r){const{caveats:a}=t;if(!a)return e;let s=async t=>e(t);for(const e of a){const t=r[e.type];if(!t)throw new(0,i.UnrecognizedCaveatTypeError)(e.type);if(!n(t))throw new(0,i.CaveatSpecificationMismatchError)(t,"RestrictedMethod");s=t.decorator(s,e)}return s}}}},{package:"@metamask/snaps-controllers>@metamask/permission-controller",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/permission-controller/dist/chunk-RKDXFKNN.js"}],[1978,{"./chunk-3X6WO7UG.js":1970,"@metamask/json-rpc-engine":1966},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var i=e("./chunk-3X6WO7UG.js"),a=e("@metamask/json-rpc-engine");r.getPermissionMiddlewareFactory=function({executeRestrictedMethod:e,getRestrictedMethod:t,isUnrestrictedMethod:r}){return function(n){const{origin:s}=n;if("string"!=typeof s||!s)throw new Error('The subject "origin" must be a non-empty string.');return a.createAsyncMiddleware.call(void 0,(async(a,o,l)=>{const{method:c,params:d}=a;if(r(c))return l();const u=t(c,s),h=await e(u,n,c,d);void 0!==h?o.result=h:o.error=i.internalError.call(void 0,`Request for method "${a.method}" returned undefined result.`,{request:a})}))}}}}},{package:"@metamask/snaps-controllers>@metamask/permission-controller",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/permission-controller/dist/chunk-VM4LI55W.js"}],[1979,{"./chunk-3X6WO7UG.js":1970,"@metamask/controller-utils":1958},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var i=e("./chunk-3X6WO7UG.js"),a=e("@metamask/controller-utils"),n={methodNames:["wallet_requestPermissions"],implementation:async function(e,t,r,n,{requestPermissionsForOrigin:s}){const{params:o}=e;if(!Array.isArray(o)||!a.isPlainObject.call(void 0,o[0]))return n(i.invalidParams.call(void 0,{data:{request:e}}));const[l]=o,[c]=await s(l);return t.result=Object.values(c),n()},hookNames:{requestPermissionsForOrigin:!0}};r.requestPermissionsHandler=n}}},{package:"@metamask/snaps-controllers>@metamask/permission-controller",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/permission-controller/dist/chunk-XM622CMP.js"}],[198,{"./077-supplements/077-supplement-for-082":194,"./077-supplements/077-supplement-for-084":195,"./077-supplements/077-supplement-for-086":196,"./077-supplements/077-supplement-for-088":197,"@metamask/utils":2253,lodash:3770,loglevel:3776},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=e("lodash"),a=d(e("loglevel")),n=e("@metamask/utils"),s=d(e("./077-supplements/077-supplement-for-082")),o=d(e("./077-supplements/077-supplement-for-084")),l=d(e("./077-supplements/077-supplement-for-086")),c=d(e("./077-supplements/077-supplement-for-088"));function d(e){return e&&e.__esModule?e:{default:e}}r.default={version:77,async migrate(e){const t=(0,i.cloneDeep)(e);t.meta.version=77;let r=function(e){if(!(0,n.hasProperty)(e,"TokenListController"))return a.default.warn("Skipping migration, TokenListController state is missing"),e;var t,r;if(!(0,n.isObject)(e.TokenListController))return null===(t=global.sentry)||void 0===t||null===(r=t.captureException)||void 0===r||r.call(t,new Error("typeof state.TokenListController is "+typeof e.TokenListController)),e;if(!(0,n.hasProperty)(e.TokenListController,"tokensChainsCache"))return a.default.warn("Skipping migration, TokenListController.tokensChainsCache state is missing"),e;const{TokenListController:i}=e,{tokensChainsCache:s}=i;let o,l;for(const e in s){var c,d;if(o=s[e].data||{},l={},Array.isArray(o))for(const e of o)l[e.address]=e;else if((null===(c=Object.keys(o)[0])||void 0===c?void 0:c.toLowerCase())!==(null===(d=o[Object.keys(o)[0]])||void 0===d||null===(d=d.address)||void 0===d?void 0:d.toLowerCase()))for(const e in o)l[o[e].address]=o[e];s[e].data=Object.keys(l).length>0?l:o}return i.tokensChainsCache=s,{...e,TokenListController:{...i}}}(t.data);return r=(0,s.default)(r),r=(0,o.default)(r),r=(0,l.default)(r),r=(0,c.default)(r),t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/077.js"}],[1980,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var i=Object.defineProperty;r.__export=(e,t)=>{for(var r in t)i(e,r,{get:t[r],enumerable:!0})},r.__privateAdd=(e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)},r.__privateMethod=(e,t,r)=>(((e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)})(e,t,"access private method"),r)}}},{package:"@metamask/snaps-controllers>@metamask/permission-controller",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/permission-controller/dist/chunk-Z2XKIXLS.js"}],[1981,{nanoid:1984},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var i=e("nanoid");var a=(e=>(e.RestrictedMethod="RestrictedMethod",e.Endowment="Endowment",e))(a||{});r.constructPermission=function(e){const{caveats:t=null,invoker:r,target:a}=e;return{id:i.nanoid.call(void 0),parentCapability:a,invoker:r,caveats:t,date:(new Date).getTime()}},r.findCaveat=function(e,t){return e.caveats?.find((e=>e.type===t))},r.PermissionType=a,r.hasSpecificationType=function(e,t){return e.permissionType===t}}}},{package:"@metamask/snaps-controllers>@metamask/permission-controller",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/permission-controller/dist/chunk-ZH4MLSXX.js"}],[1982,{"./chunk-3X6WO7UG.js":1970,"./chunk-C73QV75D.js":1971,"./chunk-DV74ZDGD.js":1972,"./chunk-GHOOCGN3.js":1973,"./chunk-HRDKMOYS.js":1974,"./chunk-I3DJ23QH.js":1975,"./chunk-PTE4672I.js":1976,"./chunk-RKDXFKNN.js":1977,"./chunk-VM4LI55W.js":1978,"./chunk-XM622CMP.js":1979,"./chunk-Z2XKIXLS.js":1980,"./chunk-ZH4MLSXX.js":1981},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var i=e("./chunk-DV74ZDGD.js");e("./chunk-HRDKMOYS.js"),e("./chunk-XM622CMP.js"),e("./chunk-GHOOCGN3.js");var a=e("./chunk-I3DJ23QH.js"),n=e("./chunk-RKDXFKNN.js"),s=e("./chunk-ZH4MLSXX.js"),o=e("./chunk-C73QV75D.js");e("./chunk-VM4LI55W.js");var l=e("./chunk-3X6WO7UG.js"),c=e("./chunk-PTE4672I.js");e("./chunk-Z2XKIXLS.js"),r.CaveatAlreadyExistsError=l.CaveatAlreadyExistsError,r.CaveatDoesNotExistError=l.CaveatDoesNotExistError,r.CaveatInvalidJsonError=l.CaveatInvalidJsonError,r.CaveatMergeTypeMismatchError=l.CaveatMergeTypeMismatchError,r.CaveatMergerDoesNotExistError=l.CaveatMergerDoesNotExistError,r.CaveatMissingValueError=l.CaveatMissingValueError,r.CaveatMutatorOperation=a.CaveatMutatorOperation,r.CaveatSpecificationMismatchError=l.CaveatSpecificationMismatchError,r.DuplicateCaveatError=l.DuplicateCaveatError,r.EndowmentPermissionDoesNotExistError=l.EndowmentPermissionDoesNotExistError,r.ForbiddenCaveatError=l.ForbiddenCaveatError,r.InvalidApprovedPermissionError=l.InvalidApprovedPermissionError,r.InvalidCaveatError=l.InvalidCaveatError,r.InvalidCaveatFieldsError=l.InvalidCaveatFieldsError,r.InvalidCaveatTypeError=l.InvalidCaveatTypeError,r.InvalidCaveatsPropertyError=l.InvalidCaveatsPropertyError,r.InvalidMergedPermissionsError=l.InvalidMergedPermissionsError,r.InvalidSubjectIdentifierError=l.InvalidSubjectIdentifierError,r.MethodNames=c.MethodNames,r.PermissionController=a.PermissionController,r.PermissionDoesNotExistError=l.PermissionDoesNotExistError,r.PermissionType=s.PermissionType,r.PermissionsRequestNotFoundError=l.PermissionsRequestNotFoundError,r.SubjectMetadataController=o.SubjectMetadataController,r.SubjectType=o.SubjectType,r.UnrecognizedCaveatTypeError=l.UnrecognizedCaveatTypeError,r.UnrecognizedSubjectError=l.UnrecognizedSubjectError,r.constructPermission=s.constructPermission,r.decorateWithCaveats=n.decorateWithCaveats,r.findCaveat=s.findCaveat,r.hasSpecificationType=s.hasSpecificationType,r.internalError=l.internalError,r.invalidParams=l.invalidParams,r.isRestrictedMethodCaveatSpecification=n.isRestrictedMethodCaveatSpecification,r.methodNotFound=l.methodNotFound,r.permissionRpcMethods=i.rpc_methods_exports,r.unauthorized=l.unauthorized,r.userRejectedRequest=l.userRejectedRequest}}},{package:"@metamask/snaps-controllers>@metamask/permission-controller",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/permission-controller/dist/index.js"}],[1983,{buffer:2970,"buffer-from":2975,inherits:3575,"readable-stream":4175,typedarray:4298},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(r){(function(){var i=e("readable-stream").Writable,a=e("inherits"),n=e("buffer-from");if("undefined"==typeof Uint8Array)var s=e("typedarray").Uint8Array;else s=Uint8Array;function o(e,t){if(!(this instanceof o))return new o(e,t);"function"==typeof e&&(t=e,e={}),e||(e={});var r=e.encoding,a=!1;r?"u8"!==(r=String(r).toLowerCase())&&"uint8"!==r||(r="uint8array"):a=!0,i.call(this,{objectMode:!0}),this.encoding=r,this.shouldInferEncoding=a,t&&this.on("finish",(function(){t(this.getBody())})),this.body=[]}t.exports=o,a(o,i),o.prototype._write=function(e,t,r){this.body.push(e),r()},o.prototype.inferEncoding=function(e){var t=e===undefined?this.body[0]:e;return r.isBuffer(t)?"buffer":"undefined"!=typeof Uint8Array&&t instanceof Uint8Array?"uint8array":Array.isArray(t)?"array":"string"==typeof t?"string":"[object Object]"===Object.prototype.toString.call(t)?"object":"buffer"},o.prototype.getBody=function(){return this.encoding||0!==this.body.length?(this.shouldInferEncoding&&(this.encoding=this.inferEncoding()),"array"===this.encoding?function(e){for(var t=[],r=0;r<e.length;r++)t.push.apply(t,e[r]);return t}(this.body):"string"===this.encoding?function(e){for(var t=[],i=0;i<e.length;i++){var a=e[i];"string"==typeof a||r.isBuffer(a)?t.push(a):l(a)?t.push(n(a)):t.push(n(String(a)))}t=r.isBuffer(e[0])?(t=r.concat(t)).toString("utf8"):t.join("");return t}(this.body):"buffer"===this.encoding?function(e){for(var t=[],i=0;i<e.length;i++){var a=e[i];r.isBuffer(a)?t.push(a):l(a)?t.push(n(a)):t.push(n(String(a)))}return r.concat(t)}(this.body):"uint8array"===this.encoding?function(e){for(var t=0,r=0;r<e.length;r++)"string"==typeof e[r]&&(e[r]=n(e[r])),t+=e[r].length;for(var i=new s(t),a=(r=0,0);r<e.length;r++)for(var o=e[r],l=0;l<o.length;l++)i[a++]=o[l];return i}(this.body):this.body):[]};Array.isArray;function l(e){return"string"==typeof e||(t=e,/Array\]$/.test(Object.prototype.toString.call(t)))||e&&"function"==typeof e.subarray;var t}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/snaps-controllers>concat-stream",file:"node_modules/@metamask/snaps-controllers/node_modules/concat-stream/index.js"}],[1984,{"./url-alphabet/index.cjs":1985},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){let{urlAlphabet:i}=e("./url-alphabet/index.cjs"),a=e=>crypto.getRandomValues(new Uint8Array(e)),n=(e,t,r)=>{let i=(2<<Math.log(e.length-1)/Math.LN2)-1,a=-~(1.6*i*t/e.length);return(n=t)=>{let s="";for(;;){let t=r(a),o=a;for(;o--;)if(s+=e[t[o]&i]||"",s.length===n)return s}}};t.exports={nanoid:(e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce(((e,t)=>e+=(t&=63)<36?t.toString(36):t<62?(t-26).toString(36).toUpperCase():t>62?"-":"_"),""),customAlphabet:(e,t=21)=>n(e,t,a),customRandom:n,urlAlphabet:i,random:a}}}},{package:"@metamask/snaps-controllers>nanoid",file:"node_modules/@metamask/snaps-controllers/node_modules/nanoid/index.browser.cjs"}],[1985,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports={urlAlphabet:"useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict"}}}},{package:"@metamask/snaps-controllers>nanoid",file:"node_modules/@metamask/snaps-controllers/node_modules/nanoid/url-alphabet/index.cjs"}],[199,{"@metamask/utils":2253,lodash:3770},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.migrate=async function(e){const t=(0,i.cloneDeep)(e);return t.meta.version=n,t.data=function(e){if(!(0,a.hasProperty)(e,"PhishingController")||!(0,a.isObject)(e.PhishingController))return e;const{PhishingController:t}=e;return delete t.phishing,delete t.lastFetched,e}(t.data),t},r.version=void 0;var i=e("lodash"),a=e("@metamask/utils");const n=r.version=78}}},{package:"$root$",file:"app/scripts/migrations/078.ts"}],[1991,{"./verify":1992,"@metamask/utils":2253,superstruct:4275},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var i=this&&this.__createBinding||(Object.create?function(e,t,r,i){i===undefined&&(i=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,a)}:function(e,t,r,i){i===undefined&&(i=r),e[i]=t[r]}),a=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||i(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),r.SnapsRegistryDatabaseStruct=r.BlockedSnapStruct=r.BlockReasonStruct=r.VerifiedSnapStruct=r.ImagePathStruct=r.AdditionalSourceCodeStruct=r.SupportStruct=r.AuditStruct=r.AuthorStruct=void 0;const n=e("@metamask/utils"),s=e("superstruct"),o=(0,s.refine)((0,s.string)(),"Npm ID",(e=>e.startsWith("npm:"))),l=(0,s.object)({checksum:n.ChecksumStruct});r.AuthorStruct=(0,s.object)({name:(0,s.string)(),website:(0,s.string)()}),r.AuditStruct=(0,s.object)({auditor:(0,s.string)(),report:(0,s.string)()}),r.SupportStruct=(0,s.object)({knowledgeBase:(0,s.optional)((0,s.string)()),faq:(0,s.optional)((0,s.string)()),contact:(0,s.optional)((0,s.string)()),keyRecovery:(0,s.optional)((0,s.string)())}),r.AdditionalSourceCodeStruct=(0,s.object)({name:(0,s.string)(),url:(0,s.string)()}),r.ImagePathStruct=(0,s.pattern)((0,s.string)(),/\.\/images\/.*\/\d+\.(?:png|jpe?g)$/u),r.VerifiedSnapStruct=(0,s.object)({id:o,metadata:(0,s.object)({name:(0,s.string)(),type:(0,s.optional)((0,s.enums)(["account"])),author:(0,s.optional)(r.AuthorStruct),website:(0,s.optional)((0,s.string)()),onboard:(0,s.optional)((0,s.boolean)()),summary:(0,s.optional)((0,s.string)()),description:(0,s.optional)((0,s.string)()),audits:(0,s.optional)((0,s.array)(r.AuditStruct)),category:(0,s.optional)((0,s.enums)(["interoperability","notifications","transaction insights","account management"])),tags:(0,s.optional)((0,s.array)((0,s.string)())),support:(0,s.optional)(r.SupportStruct),sourceCode:(0,s.optional)((0,s.string)()),hidden:(0,s.optional)((0,s.boolean)()),privateCode:(0,s.optional)((0,s.boolean)()),privacyPolicy:(0,s.optional)((0,s.string)()),termsOfUse:(0,s.optional)((0,s.string)()),additionalSourceCode:(0,s.optional)((0,s.array)(r.AdditionalSourceCodeStruct)),screenshots:(0,s.optional)((0,s.size)((0,s.array)(r.ImagePathStruct),3,3))}),versions:(0,s.record)(n.VersionStruct,l)}),r.BlockReasonStruct=(0,s.object)({explanation:(0,s.optional)((0,s.string)()),url:(0,s.optional)((0,s.string)())}),r.BlockedSnapStruct=(0,s.union)([(0,s.object)({id:o,versionRange:n.VersionRangeStruct,reason:(0,s.optional)(r.BlockReasonStruct)}),(0,s.object)({checksum:n.ChecksumStruct,reason:(0,s.optional)(r.BlockReasonStruct)})]),r.SnapsRegistryDatabaseStruct=(0,s.object)({verifiedSnaps:(0,s.record)(o,r.VerifiedSnapStruct),blockedSnaps:(0,s.array)(r.BlockedSnapStruct)}),a(e("./verify"),r)}}},{package:"@metamask/snaps-utils>@metamask/snaps-registry",file:"node_modules/@metamask/snaps-registry/dist/index.js"}],[1992,{"@metamask/utils":2253,"@noble/curves/secp256k1":2283,"@noble/hashes/sha256":2292,superstruct:4275},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.verify=r.SignatureStruct=void 0;const i=e("@metamask/utils"),a=e("@noble/curves/secp256k1"),n=e("@noble/hashes/sha256"),s=e("superstruct");r.SignatureStruct=(0,s.object)({signature:i.StrictHexStruct,curve:(0,s.literal)("secp256k1"),format:(0,s.literal)("DER")}),r.verify=function({registry:e,signature:t,publicKey:s}){(0,i.assertStruct)(t,r.SignatureStruct,"Invalid signature object");const o=(0,i.hexToBytes)(s);return a.secp256k1.verify((0,i.remove0x)(t.signature),(0,n.sha256)((0,i.stringToBytes)(e)),o)}}}},{package:"@metamask/snaps-utils>@metamask/snaps-registry",file:"node_modules/@metamask/snaps-registry/dist/verify.js"}],[20,{"../constants/notification-schema":17,"./process-feature-announcement":19,"./process-onchain-notifications":21},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.processNotification=function(e,t=[]){if(o(e)){const r=(0,n.processFeatureAnnouncement)(e);return r.isRead=(0,n.isFeatureAnnouncementRead)(r,t),r}if(s(e))return(0,a.processOnChainNotification)(e);return(t=>{throw new Error(`No processor found for notification kind ${e.type}`)})()};var i=e("../constants/notification-schema"),a=e("./process-onchain-notifications"),n=e("./process-feature-announcement");const s=e=>Object.values(i.TRIGGER_TYPES).includes(e.type),o=e=>e.type===i.TRIGGER_TYPES.FEATURES_ANNOUNCEMENT}}},{package:"$root$",file:"app/scripts/controllers/metamask-notifications/processors/process-notifications.ts"}],[200,{lodash:3770},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=e("lodash");r.default={version:79,async migrate(e){const t=(0,i.cloneDeep)(e);t.meta.version=79;const r=function(e){var t,r;(null==e||null===(t=e.AppStateController)||void 0===t?void 0:t.collectiblesDetectionNoticeDismissed)!==undefined&&delete e.AppStateController.collectiblesDetectionNoticeDismissed;(null==e||null===(r=e.metamask)||void 0===r?void 0:r.collectiblesDropdownState)!==undefined&&delete e.metamask.collectiblesDropdownState;return e}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/079.js"}],[201,{lodash:3770},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=e("lodash");r.default={version:80,async migrate(e){const t=(0,i.cloneDeep)(e);t.meta.version=80;const r=function(e){var t;(null==e||null===(t=e.metamask)||void 0===t?void 0:t.showPortfolioTooltip)!==undefined&&delete e.metamask.showPortfolioTooltip;return e}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/080.js"}],[202,{"@metamask/utils":2253,lodash:3770},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.migrate=async function(e){const t=(0,i.cloneDeep)(e);t.meta.version=n;const r=function(e){if(!(0,a.hasProperty)(e,"SnapController")||!(0,a.hasProperty)(e,"PermissionController")||!(0,a.isObject)(e.PermissionController))return e;const{PermissionController:t}=e,{subjects:r}=t;if(!(0,a.isObject)(r))return e;const n="wallet_snap_";for(const[t,s]of Object.entries(r)){if(!(0,a.isObject)(s)||!(0,a.isObject)(s.permissions))return e;let r,o=1;const{permissions:l}=s,c={...l};for(const[s,d]of Object.entries(l))if(s.startsWith(n)){if(!(0,a.isObject)(d)||!(0,a.hasProperty)(d,"id")||!(0,a.hasProperty)(d,"date"))return e;if((0,a.hasProperty)(c,"wallet_snap")||(c.wallet_snap={caveats:[{type:"snapIds",value:{}}],invoker:t,parentCapability:"wallet_snap"}),!(0,a.isObject)(c.wallet_snap))return e;if(!(0,i.isArray)(c.wallet_snap.caveats))return e;const l=s.slice(n.length),u=c.wallet_snap.caveats[0];if(!(0,a.isObject)(u))return e;if(!(0,a.hasProperty)(u,"type")||"snapIds"!==u.type||!(0,a.hasProperty)(u,"value")||!(0,a.isObject)(u.value))return e;if(u.value[l]={},"number"!=typeof d.date||"string"!=typeof d.id)return e;d.date>o&&(o=d.date,r=d.id),delete c[s]}c.wallet_snap&&(c.wallet_snap.date=o,c.wallet_snap.id=r,s.permissions=c)}return e}(t.data);return t.data=r,t},r.version=void 0;var i=e("lodash"),a=e("@metamask/utils");const n=r.version=81}}},{package:"$root$",file:"app/scripts/migrations/081.ts"}],[203,{"@metamask/utils":2253,lodash:3770,loglevel:3776,uuid:4341},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.migrate=async function(e){const t=(0,a.cloneDeep)(e);return t.meta.version=l,t.data=function(e){if(!(0,n.hasProperty)(e,"PreferencesController"))return o.default.warn("state.PreferencesController is undefined"),e;if(!(0,n.isObject)(e.PreferencesController)){var t,r;return null===(t=global.sentry)||void 0===t||null===(r=t.captureException)||void 0===r||r.call(t,new Error("typeof state.PreferencesController is "+typeof e.PreferencesController)),e}if(!(0,n.hasProperty)(e,"NetworkController")||!(0,n.isObject)(e.NetworkController)){var i,a;return null===(i=global.sentry)||void 0===i||null===(a=i.captureException)||void 0===a||a.call(i,new Error("typeof state.NetworkController is "+typeof e.NetworkController)),e}if(!(0,n.hasProperty)(e.PreferencesController,"frequentRpcListDetail")||!Array.isArray(e.PreferencesController.frequentRpcListDetail)){var l,c;if(!(e.NetworkController.networkConfigurations&&e.PreferencesController.frequentRpcListDetail===undefined))null===(l=global.sentry)||void 0===l||null===(c=l.captureException)||void 0===c||c.call(l,new Error("typeof state.PreferencesController.frequentRpcListDetail is "+typeof e.PreferencesController.frequentRpcListDetail));return e}if(!e.PreferencesController.frequentRpcListDetail.every(n.isObject)){var d,u;const t=e.PreferencesController.frequentRpcListDetail.find((e=>!(0,n.isObject)(e)));return null===(d=global.sentry)||void 0===d||null===(u=d.captureException)||void 0===u||u.call(d,new Error("state.PreferencesController.frequentRpcListDetail contains an element of type "+typeof t)),e}const{PreferencesController:h,NetworkController:p}=e,{frequentRpcListDetail:m}=h;if(!Array.isArray(m))return e;const f=m.reduce(((e,{rpcUrl:t,chainId:r,ticker:i,nickname:a,rpcPrefs:n})=>({...e,[(0,s.v4)()]:{rpcUrl:t,chainId:r,ticker:i,rpcPrefs:n,nickname:a}})),{});return delete h.frequentRpcListDetail,{...e,NetworkController:{...p,networkConfigurations:f},PreferencesController:{...h}}}(t.data),t},r.version=void 0;var i,a=e("lodash"),n=e("@metamask/utils"),s=e("uuid"),o=(i=e("loglevel"))&&i.__esModule?i:{default:i};const l=r.version=82}}},{package:"$root$",file:"app/scripts/migrations/082.ts"}],[204,{"@metamask/utils":2253,lodash:3770},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.migrate=async function(e){const t=(0,i.cloneDeep)(e);return t.meta.version=n,t.data=function(e){if(!(0,a.isObject)(e.NetworkController)){var t,r;return null===(t=global.sentry)||void 0===t||null===(r=t.captureException)||void 0===r||r.call(t,new Error("typeof state.NetworkController is "+typeof e.NetworkController)),e}const{NetworkController:i}=e;if(!(0,a.isObject)(i.networkConfigurations)){var n,s;return null===(n=global.sentry)||void 0===n||null===(s=n.captureException)||void 0===s||s.call(n,new Error("typeof NetworkController.networkConfigurations is "+typeof i.networkConfigurations)),e}const{networkConfigurations:o}=i,l={};for(const t of Object.keys(o)){const r=o[t];if(!(0,a.isObject)(r))return e;l[t]={...r,id:t}}return{...e,NetworkController:{...i,networkConfigurations:l}}}(t.data),t},r.version=void 0;var i=e("lodash"),a=e("@metamask/utils");const n=r.version=83}}},{package:"$root$",file:"app/scripts/migrations/083.ts"}],[205,{"@metamask/utils":2253,lodash:3770},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.migrate=async function(e){const t=(0,i.cloneDeep)(e);return t.meta.version=n,t.data=function(e){if(!(0,a.hasProperty)(e,"NetworkController")||!(0,a.isObject)(e.NetworkController)){var t,r;return null===(t=global.sentry)||void 0===t||null===(r=t.captureException)||void 0===r||r.call(t,new Error("typeof state.NetworkController is "+typeof e.NetworkController)),e}if(!(0,a.hasProperty)(e.NetworkController,"network")){var i,n;if(e.NetworkController.networkId===undefined)null===(i=global.sentry)||void 0===i||null===(n=i.captureException)||void 0===n||n.call(i,new Error("typeof state.NetworkController.network is "+typeof e.NetworkController.network));return e}const s={...e.NetworkController};"loading"===s.network?(s.networkId=null,s.networkStatus="unknown"):(s.networkId=s.network,s.networkStatus="available");return delete s.network,{...e,NetworkController:s}}(t.data),t},r.version=void 0;var i=e("lodash"),a=e("@metamask/utils");const n=r.version=84}}},{package:"$root$",file:"app/scripts/migrations/084.ts"}],[206,{"@metamask/utils":2253,lodash:3770},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.migrate=async function(e){const t=(0,i.cloneDeep)(e);return t.meta.version=n,t.data=function(e){if(!(0,a.isObject)(e.NetworkController)){var t,r;return null===(t=global.sentry)||void 0===t||null===(r=t.captureException)||void 0===r||r.call(t,new Error("typeof state.NetworkController is "+typeof e.NetworkController)),e}return delete e.NetworkController.previousProviderStore,e}(t.data),t},r.version=void 0;var i=e("lodash"),a=e("@metamask/utils");const n=r.version=85}}},{package:"$root$",file:"app/scripts/migrations/085.ts"}],[207,{"@metamask/utils":2253,lodash:3770},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.migrate=async function(e){const t=(0,a.cloneDeep)(e);return t.meta.version=n,t.data=function(e){if((0,i.hasProperty)(e,"NetworkController")&&(0,i.isObject)(e.NetworkController)&&(0,i.hasProperty)(e.NetworkController,"provider")){const t=e.NetworkController;return t.providerConfig=t.provider,delete t.provider,{...e,NetworkController:t}}var t,r;if((0,i.isObject)(e.NetworkController)){if(!(0,i.hasProperty)(e.NetworkController,"provider")){var a,n;if(e.NetworkController.providerConfig===undefined)null===(a=global.sentry)||void 0===a||null===(n=a.captureException)||void 0===n||n.call(a,new Error("typeof state.NetworkController.provider is "+typeof e.NetworkController.provider))}}else null===(t=global.sentry)||void 0===t||null===(r=t.captureException)||void 0===r||r.call(t,new Error("typeof state.NetworkController is "+typeof e.NetworkController));return e}(t.data),t},r.version=void 0;var i=e("@metamask/utils"),a=e("lodash");const n=r.version=86}}},{package:"$root$",file:"app/scripts/migrations/086.ts"}],[208,{"@metamask/utils":2253,lodash:3770},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.migrate=async function(e){const t=(0,a.cloneDeep)(e);return t.meta.version=n,t.data=function(e){if(!(0,i.isObject)(e.TokensController)){var t,r;return null===(t=global.sentry)||void 0===t||null===(r=t.captureException)||void 0===r||r.call(t,new Error("typeof state.TokensController is "+typeof e.TokensController)),e}return delete e.TokensController.suggestedAssets,e}(t.data),t},r.version=void 0;var i=e("@metamask/utils"),a=e("lodash");const n=r.version=87}}},{package:"$root$",file:"app/scripts/migrations/087.ts"}],[209,{"@metamask/utils":2253,"ethereumjs-util":3223,lodash:3770,loglevel:3776},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.migrate=async function(e){const t=(0,s.cloneDeep)(e);return t.meta.version=l,function(e){if((0,a.hasProperty)(e,"NftController")&&(0,a.isObject)(e.NftController)){const l=e.NftController;if((0,a.hasProperty)(l,"allNftContracts")&&(0,a.isObject)(l.allNftContracts)){const{allNftContracts:e}=l;Object.keys(e).every((t=>(0,a.isObject)(e[t])))&&Object.keys(e).forEach((t=>{const r=e[t];if((0,a.isObject)(r)){for(const e of Object.keys(r))"undefined"!==e&&e!==undefined&&"null"!==e||delete r[e];e[t]=(0,s.mapKeys)(r,((e,t)=>c(t)))}}))}else if((0,a.hasProperty)(l,"allNftContracts")){var t,r;null===(t=global.sentry)||void 0===t||null===(r=t.captureException)||void 0===r||r.call(t,new Error("typeof state.NftController.allNftContracts is "+typeof l.allNftContracts))}else o.default.warn("typeof state.NftController.allNftContracts is "+typeof l.allNftContracts);if((0,a.hasProperty)(l,"allNfts")&&(0,a.isObject)(l.allNfts)){const{allNfts:e}=l;Object.keys(e).every((t=>(0,a.isObject)(e[t])))&&Object.keys(e).forEach((t=>{const r=e[t];if((0,a.isObject)(r)){for(const e of Object.keys(r))"undefined"!==e&&e!==undefined&&"null"!==e||delete r[e];e[t]=(0,s.mapKeys)(r,((e,t)=>c(t)))}}))}else if((0,a.hasProperty)(l,"allNfts")){var i,n;null===(i=global.sentry)||void 0===i||null===(n=i.captureException)||void 0===n||n.call(i,new Error("typeof state.NftController.allNfts is "+typeof l.allNfts))}else o.default.warn("typeof state.NftController.allNfts is "+typeof l.allNfts);e.NftController=l}else if((0,a.hasProperty)(e,"NftController")){var l,d;null===(l=global.sentry)||void 0===l||null===(d=l.captureException)||void 0===d||d.call(l,new Error("typeof state.NftController is "+typeof e.NftController))}else o.default.warn("typeof state.NftController is undefined");if((0,a.hasProperty)(e,"TokenListController")&&(0,a.isObject)(e.TokenListController)){const t=e.TokenListController;if((0,a.hasProperty)(t,"tokensChainsCache")&&(0,a.isObject)(t.tokensChainsCache)){for(const e of Object.keys(t.tokensChainsCache))"undefined"!==e&&e!==undefined&&"null"!==e||delete t.tokensChainsCache[e];t.tokensChainsCache=(0,s.mapKeys)(t.tokensChainsCache,((e,t)=>c(t)))}else if((0,a.hasProperty)(t,"tokensChainsCache")){var u,h;null===(u=global.sentry)||void 0===u||null===(h=u.captureException)||void 0===h||h.call(u,new Error("typeof state.TokenListController.tokensChainsCache is "+typeof e.TokenListController.tokensChainsCache))}else o.default.warn("typeof state.TokenListController.tokensChainsCache is undefined")}else o.default.warn("typeof state.TokenListController is "+typeof e.TokenListController);if((0,a.hasProperty)(e,"TokensController")&&(0,a.isObject)(e.TokensController)){const t=e.TokensController;if((0,a.hasProperty)(t,"allTokens")&&(0,a.isObject)(t.allTokens)){const{allTokens:e}=t;for(const t of Object.keys(e))"undefined"!==t&&t!==undefined&&"null"!==t||delete e[t];t.allTokens=(0,s.mapKeys)(e,((e,t)=>c(t)))}else if((0,a.hasProperty)(t,"allTokens")){var p,m;null===(p=global.sentry)||void 0===p||null===(m=p.captureException)||void 0===m||m.call(p,new Error("typeof state.TokensController.allTokens is "+typeof t.allTokens))}else o.default.warn("typeof state.TokensController.allTokens is "+typeof t.allTokens);if((0,a.hasProperty)(t,"allIgnoredTokens")&&(0,a.isObject)(t.allIgnoredTokens)){const{allIgnoredTokens:e}=t;for(const t of Object.keys(e))"undefined"!==t&&t!==undefined&&"null"!==t||delete e[t];t.allIgnoredTokens=(0,s.mapKeys)(e,((e,t)=>c(t)))}else if((0,a.hasProperty)(t,"allIgnoredTokens")){var f,v;null===(f=global.sentry)||void 0===f||null===(v=f.captureException)||void 0===v||v.call(f,new Error("typeof state.TokensController.allIgnoredTokens is "+typeof t.allIgnoredTokens))}else o.default.warn("typeof state.TokensController.allIgnoredTokens is "+typeof t.allIgnoredTokens);if((0,a.hasProperty)(t,"allDetectedTokens")&&(0,a.isObject)(t.allDetectedTokens)){const{allDetectedTokens:e}=t;for(const t of Object.keys(e))"undefined"!==t&&t!==undefined&&"null"!==t||delete e[t];t.allDetectedTokens=(0,s.mapKeys)(e,((e,t)=>c(t)))}else if((0,a.hasProperty)(t,"allDetectedTokens")){var g,_;null===(g=global.sentry)||void 0===g||null===(_=g.captureException)||void 0===_||_.call(g,new Error("typeof state.TokensController.allDetectedTokens is "+typeof t.allDetectedTokens))}else o.default.warn("typeof state.TokensController.allDetectedTokens is "+typeof t.allDetectedTokens);e.TokensController=t}else{var k,y;null===(k=global.sentry)||void 0===k||null===(y=k.captureException)||void 0===y||y.call(k,new Error("typeof state.TokensController is "+typeof e.TokensController))}}(t.data),t},r.version=void 0;var i,a=e("@metamask/utils"),n=e("ethereumjs-util"),s=e("lodash"),o=(i=e("loglevel"))&&i.__esModule?i:{default:i};const l=r.version=88;function c(e){if("string"==typeof e&&(0,a.isStrictHexString)(e))return e;return`0x${n.BN.isBN(e)?e.toString(16):new n.BN(e.toString(),10).toString(16)}`}}}},{package:"$root$",file:"app/scripts/migrations/088.ts"}],[21,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.processOnChainNotification=function(e){return{...e,id:e.id,createdAt:new Date(e.created_at).toISOString(),isRead:!e.unread}}}}},{package:"$root$",file:"app/scripts/controllers/metamask-notifications/processors/process-onchain-notifications.ts"}],[210,{"@metamask/utils":2253,lodash:3770},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.migrate=async function(e){const t=(0,a.cloneDeep)(e);return t.meta.version=n,t.data=function(e){if((0,i.hasProperty)(e,"NetworkController")&&(0,i.isObject)(e.NetworkController)&&(0,i.hasProperty)(e.NetworkController,"providerConfig")&&(0,i.isObject)(e.NetworkController.providerConfig)){const{networkConfigurations:t,providerConfig:r}=e.NetworkController;if(!(0,i.isObject)(t))return e;if(r.id)return e;let a;for(const n of Object.keys(t)){const s=t[n];if(!(0,i.isObject)(s))return e;if(s.rpcUrl===r.rpcUrl){a=s.id;break}}return a?(e.NetworkController.providerConfig={...r,id:a},{...e,NetworkController:e.NetworkController}):e}var t,r;if((0,i.isObject)(e.NetworkController)){if(!(0,i.isObject)(e.NetworkController.providerConfig)){var a,n;null===(a=global.sentry)||void 0===a||null===(n=a.captureException)||void 0===n||n.call(a,new Error("typeof state.NetworkController.providerConfig is "+typeof e.NetworkController.providerConfig))}}else null===(t=global.sentry)||void 0===t||null===(r=t.captureException)||void 0===r||r.call(t,new Error("typeof state.NetworkController is "+typeof e.NetworkController));return e}(t.data),t},r.version=void 0;var i=e("@metamask/utils"),a=e("lodash");const n=r.version=89}}},{package:"$root$",file:"app/scripts/migrations/089.ts"}],[211,{"@metamask/utils":2253,lodash:3770,loglevel:3776},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.migrate=async function(e){const t=(0,a.cloneDeep)(e);return t.meta.version=o,t.data=function(e){if(!(0,n.hasProperty)(e,"PhishingController"))return s.default.warn("typeof state.PhishingController is undefined"),e;if(!(0,n.isObject)(e.PhishingController)){var t,r;return null===(t=global.sentry)||void 0===t||null===(r=t.captureException)||void 0===r||r.call(t,new Error("typeof state.PhishingController is "+typeof e.PhishingController)),e}if(!(0,n.hasProperty)(e.PhishingController,"listState"))return s.default.warn("typeof state.PhishingController.listState is "+typeof e.PhishingController),e;return delete e.PhishingController.listState,e}(t.data),t},r.version=void 0;var i,a=e("lodash"),n=e("@metamask/utils"),s=(i=e("loglevel"))&&i.__esModule?i:{default:i};const o=r.version=90}}},{package:"$root$",file:"app/scripts/migrations/090.ts"}],[212,{"@metamask/utils":2253,lodash:3770},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.migrate=async function(e){const t=(0,a.cloneDeep)(e);return t.meta.version=n,t.data=function(e){if((0,i.hasProperty)(e,"NetworkController")&&(0,i.isObject)(e.NetworkController)&&(0,i.hasProperty)(e.NetworkController,"networkConfigurations")&&(0,i.isObject)(e.NetworkController.networkConfigurations)){const{networkConfigurations:t}=e.NetworkController;for(const[e,r]of Object.entries(t))(0,i.isObject)(r)&&(r.chainId||delete t[e]);return e.NetworkController={...e.NetworkController,networkConfigurations:t},{...e,NetworkController:e.NetworkController}}var t,r;if((0,i.isObject)(e.NetworkController)){if(!(0,i.isObject)(e.NetworkController.networkConfigurations)){var a,n;null===(a=global.sentry)||void 0===a||null===(n=a.captureException)||void 0===n||n.call(a,new Error("typeof state.NetworkController.networkConfigurations is "+typeof e.NetworkController.networkConfigurations))}}else null===(t=global.sentry)||void 0===t||null===(r=t.captureException)||void 0===r||r.call(t,new Error("typeof state.NetworkController is "+typeof e.NetworkController));return e}(t.data),t},r.version=void 0;var i=e("@metamask/utils"),a=e("lodash");const n=r.version=91}}},{package:"$root$",file:"app/scripts/migrations/091.ts"}],[213,{"@metamask/utils":2253,lodash:3770,loglevel:3776},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.migrate=async function(e){const t=(0,a.cloneDeep)(e);return t.meta.version=o,t.data=function(e){if(!(0,n.hasProperty)(e,"TokenListController"))return s.default.warn("Skipping migration, TokenListController state is missing"),e;var t,r;if(!(0,n.isObject)(e.TokenListController))return null===(t=global.sentry)||void 0===t||null===(r=t.captureException)||void 0===r||r.call(t,new Error("typeof state.TokenListController is "+typeof e.TokenListController)),e;if(!(0,n.hasProperty)(e.TokenListController,"tokensChainsCache"))return s.default.warn("Skipping migration, TokenListController.tokensChainsCache state is missing"),e;e.TokenListController.tokensChainsCache===undefined&&delete e.TokenListController.tokensChainsCache;return e}(t.data),t},r.version=void 0;var i,a=e("lodash"),n=e("@metamask/utils"),s=(i=e("loglevel"))&&i.__esModule?i:{default:i};const o=r.version=92.1}}},{package:"$root$",file:"app/scripts/migrations/092.1.ts"}],[214,{"@metamask/utils":2253,"@sentry/browser":2362,lodash:3770},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.migrate=async function(e){const t=(0,n.cloneDeep)(e);return t.meta.version=s,t.data=function(e){return function(e){const t=["networkId","networkStatus","providerConfig","networkDetails","networkConfigurations"];if(!(0,i.hasProperty)(e,"NetworkController")||!(0,n.isObject)(e.NetworkController))return(0,a.captureException)(`Migration ${s}: Invalid NetworkController state: ${typeof e.NetworkController}`),e;const r=e.NetworkController,o=(0,n.pick)(r,t);return{...e,NetworkController:o}}(e)}(t.data),t},r.version=void 0;var i=e("@metamask/utils"),a=e("@sentry/browser"),n=e("lodash");const s=r.version=92.2}}},{package:"$root$",file:"app/scripts/migrations/092.2.ts"}],[215,{"@metamask/utils":2253,lodash:3770,loglevel:3776},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.migrate=async function(e){const t=(0,n.cloneDeep)(e);return t.meta.version=o,function(e){!function(e){if((0,a.isNullOrUndefined)(e.PreferencesController))return void s.default.warn(`Migration #${o}: preferences controller null or undefined, skipping migration`);if((0,a.hasProperty)(e,"AppStateController")&&(0,a.isObject)(e.AppStateController)&&(0,a.hasProperty)(e,"PreferencesController")&&(0,a.isObject)(e.PreferencesController)){var t;const r=null===(t=e.PreferencesController)||void 0===t?void 0:t.advancedGasFee,i=(0,a.isObject)(r)&&l(r);e.AppStateController.hadAdvancedGasFeesSetPriorToMigration92_3=i,(null===e.PreferencesController.advancedGasFee||(0,a.isObject)(e.PreferencesController.advancedGasFee)&&l(e.PreferencesController.advancedGasFee))&&(e.PreferencesController.advancedGasFee={})}else if(!1===(0,a.isObject)(e.AppStateController)){var r,i;null===(r=global.sentry)||void 0===r||null===(i=r.captureException)||void 0===i||i.call(r,new Error("typeof state.AppStateController is "+typeof e.AppStateController))}else if(!1===(0,a.isObject)(e.PreferencesController)){var n,c;null===(n=global.sentry)||void 0===n||null===(c=n.captureException)||void 0===c||c.call(n,new Error("typeof state.PreferencesController is "+typeof e.PreferencesController))}}(e)}(t.data),t},r.version=void 0;var i,a=e("@metamask/utils"),n=e("lodash"),s=(i=e("loglevel"))&&i.__esModule?i:{default:i};const o=r.version=92.3;function l(e){const t=Object.keys(e);return!(!t.includes("maxBaseFee")&&!t.includes("priorityFee"))}}}},{package:"$root$",file:"app/scripts/migrations/092.3.ts"}],[216,{"@metamask/utils":2253,lodash:3770,loglevel:3776},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.migrate=async function(e){const t=(0,a.cloneDeep)(e);return t.meta.version=o,t.data=function(e){if((0,n.hasProperty)(e,"PhishingController")&&(0,n.isObject)(e.PhishingController))delete e.PhishingController.stalelistLastFetched,delete e.PhishingController.hotlistLastFetched;else if((0,n.hasProperty)(e,"PhishingController")){var t,r;null===(t=global.sentry)||void 0===t||null===(r=t.captureException)||void 0===r||r.call(t,new Error("typeof state.PhishingController is "+typeof e.PhishingController))}else s.default.warn("typeof state.PhishingController is undefined");return e}(t.data),t},r.version=void 0;var i,a=e("lodash"),n=e("@metamask/utils"),s=(i=e("loglevel"))&&i.__esModule?i:{default:i};const o=r.version=92}}},{package:"$root$",file:"app/scripts/migrations/092.ts"}],[217,{"@metamask/utils":2253,lodash:3770},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.migrate=async function(e){const t=(0,i.cloneDeep)(e);return t.meta.version=n,t.data=function(e){if((0,a.hasProperty)(e,"NetworkController")&&(0,a.isObject)(e.NetworkController)&&(0,a.hasProperty)(e.NetworkController,"providerConfig")&&(0,a.isObject)(e.NetworkController.providerConfig)){const{providerConfig:t}=e.NetworkController;return t.ticker?e:(e.NetworkController.providerConfig={ticker:"ETH",...t},{...e,NetworkController:e.NetworkController})}var t,r;if((0,a.isObject)(e.NetworkController)){if((0,a.isObject)(e.NetworkController)&&!(0,a.isObject)(e.NetworkController.providerConfig)){var i,n;null===(i=global.sentry)||void 0===i||null===(n=i.captureException)||void 0===n||n.call(i,new Error("typeof state.NetworkController.providerConfig is "+typeof e.NetworkController.providerConfig))}}else null===(t=global.sentry)||void 0===t||null===(r=t.captureException)||void 0===r||r.call(t,new Error("typeof state.NetworkController is "+typeof e.NetworkController));return e}(t.data),t},r.version=void 0;var i=e("lodash"),a=e("@metamask/utils");const n=r.version=93}}},{package:"$root$",file:"app/scripts/migrations/093.ts"}],[218,{"@metamask/controller-utils":1164,"@metamask/network-controller":1508,"@metamask/utils":2253,lodash:3770},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.migrate=async function(e){const t=(0,i.cloneDeep)(e);return t.meta.version=o,t.data=function(e){if((0,a.hasProperty)(e,"NetworkController")&&(0,a.isObject)(e.NetworkController)&&(0,a.hasProperty)(e.NetworkController,"providerConfig")&&(0,a.isObject)(e.NetworkController.providerConfig)&&((0,a.hasProperty)(e.NetworkController.providerConfig,"id")||(0,a.hasProperty)(e.NetworkController.providerConfig,"type")&&e.NetworkController.providerConfig.type!==s.NetworkType.rpc)){const t=e.NetworkController.providerConfig.id||e.NetworkController.providerConfig.type;if(!t||"string"!=typeof t)return e;const r={[t]:{EIPS:{},status:n.NetworkStatus.Unknown}};if((0,a.hasProperty)(e.NetworkController,"networkDetails")&&(0,a.isObject)(e.NetworkController.networkDetails)){const{networkDetails:i}=e.NetworkController;i.EIPS&&(0,a.isObject)(i.EIPS)&&(r[t].EIPS={...i.EIPS}),delete e.NetworkController.networkDetails}return(0,a.hasProperty)(e.NetworkController,"networkStatus")&&"string"==typeof e.NetworkController.networkStatus&&(r[t].status=e.NetworkController.networkStatus,delete e.NetworkController.networkStatus),{...e,NetworkController:{...e.NetworkController,networksMetadata:r,selectedNetworkClientId:t}}}var t,r;if((0,a.isObject)(e.NetworkController)){if((0,a.isObject)(e.NetworkController)&&!(0,a.isObject)(e.NetworkController.providerConfig)){var i,o;null===(i=global.sentry)||void 0===i||null===(o=i.captureException)||void 0===o||o.call(i,new Error("typeof state.NetworkController.providerConfig is "+typeof e.NetworkController.providerConfig))}else if((0,a.isObject)(e.NetworkController)&&(0,a.isObject)(e.NetworkController.providerConfig)){var l,c;null===(l=global.sentry)||void 0===l||null===(c=l.captureException)||void 0===c||c.call(l,new Error(`typeof state.NetworkController.providerConfig.id is ${typeof e.NetworkController.providerConfig.id} and state.NetworkController.providerConfig.type is ${e.NetworkController.providerConfig.type}`))}}else null===(t=global.sentry)||void 0===t||null===(r=t.captureException)||void 0===r||r.call(t,new Error("typeof state.NetworkController is "+typeof e.NetworkController));return e}(t.data),t},r.version=void 0;var i=e("lodash"),a=e("@metamask/utils"),n=e("@metamask/network-controller"),s=e("@metamask/controller-utils");const o=r.version=94}}},{package:"$root$",file:"app/scripts/migrations/094.ts"}],[219,{lodash:3770},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.migrate=async function(e){const t=(0,i.cloneDeep)(e);return t.meta.version=a,function(e){(function(e){var t,r;const i=(null===(t=e.IncomingTransactionsController)||void 0===t?void 0:t.incomingTransactions)||{};if(0===Object.keys(i).length)return;const a=(null===(r=e.TransactionController)||void 0===r?void 0:r.transactions)||{},n=Object.values(i).reduce(((e,t)=>(e[t.id]=t,e)),a);e.TransactionController={...e.TransactionController||{},transactions:n}})(e),function(e){var t;const r=(null===(t=e.IncomingTransactionsController)||void 0===t?void 0:t.incomingTransactions)||{};if(0===Object.keys(r).length)return;const i={};for(const e of Object.values(r)){if(!e.blockNumber||!e.chainId||!e.txParams.to)continue;const t=parseInt(e.blockNumber,10),r=`${e.chainId}#${e.txParams.to.toLowerCase()}`,a=i[r]||-1;i[r]=Math.max(a,t)}e.TransactionController={...e.TransactionController,lastFetchedBlockNumbers:i}}(e),function(e){delete e.IncomingTransactionsController}(e)}(t.data),t},r.version=void 0;var i=e("lodash");const a=r.version=95}}},{package:"$root$",file:"app/scripts/migrations/095.ts"}],[22,{"../constants/notification-schema":17,"../processors/process-feature-announcement":19,"@contentful/rich-text-html-renderer":352,loglevel:3776},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.FEATURE_ANNOUNCEMENT_URL=r.FEATURE_ANNOUNCEMENT_API=void 0,r.getFeatureAnnouncementNotifications=async function(){return(await async function(){const e=await async function(e,t=1,r=1e3){let i=null;for(let a=0;a<t;a++)try{const t=await fetch(e);if(!t.ok)throw new Error(`Fetch failed with status: ${t.status}`);return await t.json()}catch(e){e instanceof Error&&(i=e),a<t-1&&await new Promise((e=>setTimeout(e,r)))}return n.default.error(`Error fetching from Contentful after ${t} retries: ${i}`),null}(c);if(!e)return[];const t=t=>{var r,i;const a=(null==e||null===(r=e.includes)||void 0===r||null===(r=r.Entry)||void 0===r?void 0:r.find((e=>{var r;return(null==e||null===(r=e.sys)||void 0===r?void 0:r.id)===t})))||(null==e||null===(i=e.includes)||void 0===i||null===(i=i.Asset)||void 0===i?void 0:i.find((e=>{var r;return(null==e||null===(r=e.sys)||void 0===r?void 0:r.id)===t})));return a?null==a?void 0:a.fields:null},r=((null==e?void 0:e.items)??[]).map((e=>{var r;const{fields:i}=e,n=i.image?t(i.image.sys.id):undefined,s=i.extensionLink?t(i.extensionLink.sys.id):undefined;return{type:o.TRIGGER_TYPES.FEATURES_ANNOUNCEMENT,createdAt:new Date(e.sys.createdAt).toString(),data:{id:i.id,category:i.category,title:i.title,longDescription:(0,a.documentToHtmlString)(i.longDescription),shortDescription:i.shortDescription,image:{title:null==n?void 0:n.title,description:null==n?void 0:n.description,url:(null==n||null===(r=n.file)||void 0===r?void 0:r.url)??""},extensionLink:s&&{extensionLinkText:null==s?void 0:s.extensionLinkText,extensionLinkRoute:null==s?void 0:s.extensionLinkRoute}}}}));return r}()).map((e=>(0,s.processFeatureAnnouncement)(e)));return[]};var i,a=e("@contentful/rich-text-html-renderer"),n=(i=e("loglevel"))&&i.__esModule?i:{default:i},s=e("../processors/process-feature-announcement"),o=e("../constants/notification-schema");const l=r.FEATURE_ANNOUNCEMENT_API="https://cdn.contentful.com/spaces/jdkgyfmyd9sw/environments/master/entries",c=r.FEATURE_ANNOUNCEMENT_URL=`${l}?access_token=mAYNB_k65snv4AXW4o8ksZN8BwWDQF9702HKV7yBDZI&content_type=productAnnouncement&include=10&fields.clients=extension`}}},{package:"$root$",file:"app/scripts/controllers/metamask-notifications/services/feature-announcements.ts"}],[220,{"../../../shared/constants/network":4423,"@metamask/utils":2253,lodash:3770},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.migrate=async function(e){const t=(0,i.cloneDeep)(e);return t.meta.version=s,function(e){if(!((0,a.hasProperty)(e,"PreferencesController")&&(0,a.isObject)(e.PreferencesController)&&(0,a.isObject)(e.NetworkController)&&(0,a.hasProperty)(e.PreferencesController,"featureFlags")&&(0,a.hasProperty)(e.NetworkController,"networkConfigurations")))return e;const{PreferencesController:t,NetworkController:r}=e,{featureFlags:s}=t,{showIncomingTransactions:o}=s,{networkConfigurations:l}=r,c=Object.values(l).map((e=>e.chainId)),d=[n.CHAIN_IDS.MAINNET,n.CHAIN_IDS.LINEA_MAINNET],u=[n.CHAIN_IDS.GOERLI,n.CHAIN_IDS.SEPOLIA,n.CHAIN_IDS.LINEA_GOERLI],h=[...d,...c,...u],p=(0,i.fromPairs)((0,i.map)(h,(e=>[e,o])));(null==s?void 0:s.showIncomingTransactions)!==undefined&&delete s.showIncomingTransactions;e.PreferencesController.incomingTransactionsPreferences=p}(t.data),t},r.version=void 0;var i=e("lodash"),a=e("@metamask/utils"),n=e("../../../shared/constants/network");const s=r.version=96}}},{package:"$root$",file:"app/scripts/migrations/096.ts"}],[2206,{"./chunk-BTR56Y3F.js":2207,"./chunk-K6XMMCKJ.js":2210,"./chunk-KQMYR73X.js":2212,"@metamask/controller-utils":2231,"@metamask/utils":2253,"bn.js":2922},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var i,a=e("./chunk-K6XMMCKJ.js"),n=e("./chunk-KQMYR73X.js"),s=e("./chunk-BTR56Y3F.js"),o=e("@metamask/controller-utils"),l=e("@metamask/utils"),c=e("bn.js"),d=(i=c)&&i.__esModule?i:{default:i},u=n.createModuleLogger.call(void 0,n.projectLogger,"gas"),h=1.5;function p(e){const t=("string"==typeof e?o.hexToBN.call(void 0,e):new(0,d.default)(e)).muln(h);return l.add0x.call(void 0,t.toString(16))}r.updateGas=async function(e,t,r){const{userOperation:i}=e;if(t.gas)return i.callGasLimit=t.gas.callGasLimit,i.preVerificationGas=t.gas.preVerificationGas,i.verificationGasLimit=t.gas.verificationGasLimit,void u("Using gas values from smart contract account",{callGasLimit:i.callGasLimit,preVerificationGas:i.preVerificationGas,verificationGasLimit:i.verificationGasLimit});const n={...i,maxFeePerGas:s.VALUE_ZERO,maxPriorityFeePerGas:s.VALUE_ZERO,callGasLimit:s.VALUE_ZERO,preVerificationGas:s.VALUE_ZERO,verificationGasLimit:"0xF4240"},o=new(0,a.Bundler)(e.bundlerUrl),l=await o.estimateUserOperationGas(n,r);i.callGasLimit=p(l.callGasLimit),i.preVerificationGas=p(l.preVerificationGas),i.verificationGasLimit=p(l.verificationGasLimit??l.verificationGas),u("Using buffered gas values from bundler estimate",{callGasLimit:i.callGasLimit,preVerificationGas:i.preVerificationGas,verificationGasLimit:i.verificationGasLimit,multiplier:h,estimate:l})}}}},{package:"@metamask/user-operation-controller",file:"node_modules/@metamask/user-operation-controller/dist/chunk-7JPKNM2X.js"}],[2207,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});r.EMPTY_BYTES="0x",r.ADDRESS_ZERO="0x0000000000000000000000000000000000000000",r.VALUE_ZERO="0x0"}}},{package:"@metamask/user-operation-controller",file:"node_modules/@metamask/user-operation-controller/dist/chunk-BTR56Y3F.js"}],[2208,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var i=(e=>(e.Unapproved="unapproved",e.Approved="approved",e.Signed="signed",e.Submitted="submitted",e.Failed="failed",e.Confirmed="confirmed",e))(i||{});r.UserOperationStatus=i}}},{package:"@metamask/user-operation-controller",file:"node_modules/@metamask/user-operation-controller/dist/chunk-EKSYIL4U.js"}],[2209,{"./chunk-7JPKNM2X.js":2206,"./chunk-BTR56Y3F.js":2207,"./chunk-K6XMMCKJ.js":2210,"./chunk-KBGSERJ2.js":2211,"./chunk-KQMYR73X.js":2212,"./chunk-MRVTCZLI.js":2213,"./chunk-O3AO62RJ.js":2214,"./chunk-SSHRMBLI.js":2216,"./chunk-WF3VLEGJ.js":2217,"./chunk-Z4BLTVTB.js":2218,"@metamask/base-controller":2225,"@metamask/controller-utils":2231,"@metamask/eth-query":1269,"@metamask/rpc-errors":1670,"@metamask/transaction-controller":2187,"@metamask/utils":2253,events:3263,lodash:3770,uuid:4341},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var a,n,s,o,l,c,d,u,h,p,m,f,v,g,_,k,y,w,T,b,E,S,P,C,A,I,j,M,x,N,O,R,G,L,B,F,D,U,H,W,$,V,K,q=e("./chunk-SSHRMBLI.js"),Y=e("./chunk-7JPKNM2X.js"),X=e("./chunk-WF3VLEGJ.js"),J=e("./chunk-O3AO62RJ.js"),z=e("./chunk-KBGSERJ2.js"),Z=e("./chunk-K6XMMCKJ.js"),Q=e("./chunk-KQMYR73X.js"),ee=e("./chunk-MRVTCZLI.js"),te=e("./chunk-BTR56Y3F.js"),re=e("./chunk-Z4BLTVTB.js"),ie=e("@metamask/base-controller"),ae=e("@metamask/controller-utils"),ne=i(e("@metamask/eth-query")),se=e("@metamask/rpc-errors"),oe=e("@metamask/transaction-controller"),le=e("@metamask/utils"),ce=i(e("events")),de=e("lodash"),ue=e("uuid"),he={userOperations:{persist:!0,anonymous:!1}},pe=class extends ie.BaseController{constructor({entrypoint:e,getGasFeeEstimates:t,messenger:r,state:i}){super({name:"UserOperationController",metadata:he,messenger:r,state:{userOperations:{},...i}}),re.__privateAdd.call(void 0,this,o),re.__privateAdd.call(void 0,this,c),re.__privateAdd.call(void 0,this,u),re.__privateAdd.call(void 0,this,p),re.__privateAdd.call(void 0,this,f),re.__privateAdd.call(void 0,this,g),re.__privateAdd.call(void 0,this,k),re.__privateAdd.call(void 0,this,w),re.__privateAdd.call(void 0,this,b),re.__privateAdd.call(void 0,this,S),re.__privateAdd.call(void 0,this,C),re.__privateAdd.call(void 0,this,I),re.__privateAdd.call(void 0,this,M),re.__privateAdd.call(void 0,this,N),re.__privateAdd.call(void 0,this,R),re.__privateAdd.call(void 0,this,L),re.__privateAdd.call(void 0,this,F),re.__privateAdd.call(void 0,this,U),re.__privateAdd.call(void 0,this,W),re.__privateAdd.call(void 0,this,V),re.__privateAdd.call(void 0,this,a,void 0),re.__privateAdd.call(void 0,this,n,void 0),re.__privateAdd.call(void 0,this,s,void 0),this.hub=new(0,ce.default),re.__privateSet.call(void 0,this,a,e),re.__privateSet.call(void 0,this,n,t),re.__privateSet.call(void 0,this,s,new(0,z.PendingUserOperationTracker)({getUserOperations:()=>de.cloneDeep.call(void 0,Object.values(this.state.userOperations)),messenger:r})),re.__privateMethod.call(void 0,this,R,G).call(this)}async addUserOperation(e,t){return J.validateAddUserOperationRequest.call(void 0,e),J.validateAddUserOperationOptions.call(void 0,t),await re.__privateMethod.call(void 0,this,o,l).call(this,e,t)}async addUserOperationFromTransaction(e,t){J.validateAddUserOperationOptions.call(void 0,t);const{data:r,from:i,maxFeePerGas:a,maxPriorityFeePerGas:n,to:s,value:c}=e,d={data:""===r?void 0:r,from:i,maxFeePerGas:a,maxPriorityFeePerGas:n,to:s,value:c};return J.validateAddUserOperationRequest.call(void 0,d),await re.__privateMethod.call(void 0,this,o,l).call(this,d,{...t,transaction:e})}startPollingByNetworkClientId(e){return re.__privateGet.call(void 0,this,s).startPollingByNetworkClientId(e)}};a=new WeakMap,n=new WeakMap,s=new WeakMap,o=new WeakSet,l=async function(e,t){Q.projectLogger.call(void 0,"Adding user operation",{request:e,options:t});const{networkClientId:r,origin:i,smartContractAccount:a,swaps:n,transaction:s}=t,{chainId:o,provider:l}=await re.__privateMethod.call(void 0,this,U,H).call(this,r),f=await re.__privateMethod.call(void 0,this,p,m).call(this,o,i,s,n),v=a??new(0,ee.SnapSmartContractAccount)(this.messagingSystem),g={chainId:o,metadata:f,options:{...t,smartContractAccount:v},provider:l,request:e,transaction:s},{id:_}=f;let k=!1;const y=(async()=>{try{return await re.__privateMethod.call(void 0,this,c,d).call(this,g)}catch(e){if(re.__privateMethod.call(void 0,this,S,P).call(this,f,e),k)throw e;return}})(),w=async()=>(k=!0,await y);return{id:_,hash:w,transactionHash:async()=>{await w();const{transactionHash:e}=await re.__privateMethod.call(void 0,this,u,h).call(this,f);return e}}},c=new WeakSet,d=async function(e){const{metadata:t,options:r}=e,{requireApproval:i,smartContractAccount:a}=r;let n;try{return await re.__privateMethod.call(void 0,this,f,v).call(this,e),await re.__privateMethod.call(void 0,this,g,_).call(this,t,a),this.hub.emit("user-operation-added",t),!1!==i&&(n=await re.__privateMethod.call(void 0,this,k,y).call(this,e)),await re.__privateMethod.call(void 0,this,w,T).call(this,t,a),await re.__privateMethod.call(void 0,this,b,E).call(this,t),n?.success(),t.hash}catch(e){throw n?.error(e),e}},u=new WeakSet,h=async function(e){const{id:t,hash:r}=e;return Q.projectLogger.call(void 0,"Waiting for confirmation",t,r),new Promise(((e,r)=>{this.hub.once(`${t}:confirmed`,(t=>{e(t)})),this.hub.once(`${t}:failed`,((e,t)=>{r(t)}))}))},p=new WeakSet,m=async function(e,t,r,i){const a={actualGasCost:null,actualGasUsed:null,baseFeePerGas:null,bundlerUrl:null,chainId:e,error:null,hash:null,id:ue.v1.call(void 0),origin:t,status:"unapproved",swapsMetadata:i?{approvalTxId:i.approvalTxId??null,destinationTokenAddress:i.destinationTokenAddress??null,destinationTokenDecimals:i.destinationTokenDecimals??null,destinationTokenSymbol:i.destinationTokenSymbol??null,estimatedBaseFee:i.estimatedBaseFee??null,sourceTokenSymbol:i.sourceTokenSymbol??null,swapMetaData:i.swapMetaData??null,swapTokenValue:i.swapTokenValue??null}:null,time:Date.now(),transactionHash:null,transactionParams:r??null,transactionType:null,userFeeLevel:null,userOperation:re.__privateMethod.call(void 0,this,C,A).call(this,r)};return re.__privateMethod.call(void 0,this,I,j).call(this,a),Q.projectLogger.call(void 0,"Added user operation",a.id),a},f=new WeakSet,v=async function(e){const{chainId:t,metadata:r,options:i,provider:s,request:o,transaction:l}=e,{data:c,from:d,to:u,value:h}=o,{id:p,transactionParams:m,userOperation:f}=r,{smartContractAccount:v}=i;Q.projectLogger.call(void 0,"Preparing user operation",{id:p});const g=await re.__privateMethod.call(void 0,this,F,D).call(this,l,s,i);r.transactionType=g??null,Q.projectLogger.call(void 0,"Determined transaction type",g),await q.updateGasFees.call(void 0,{getGasFeeEstimates:re.__privateGet.call(void 0,this,n),metadata:r,originalRequest:o,provider:s,transaction:m??void 0});const _=await v.prepareUserOperation({chainId:t,data:c,from:d,to:u,value:h});J.validatePrepareUserOperationResponse.call(void 0,_);const{bundler:k,callData:y,dummyPaymasterAndData:w,dummySignature:T,initCode:b,nonce:E,sender:S}=_;f.callData=y,f.initCode=b??te.EMPTY_BYTES,f.nonce=E,f.paymasterAndData=w??te.EMPTY_BYTES,f.sender=S,f.signature=T??te.EMPTY_BYTES,r.bundlerUrl=k,await Y.updateGas.call(void 0,r,_,re.__privateGet.call(void 0,this,a)),re.__privateMethod.call(void 0,this,I,j).call(this,r)},g=new WeakSet,_=async function(e,t){const{id:r,userOperation:i,chainId:a}=e;Q.projectLogger.call(void 0,"Requesting paymaster data",{id:r});const n=await t.updateUserOperation({userOperation:i,chainId:a});J.validateUpdateUserOperationResponse.call(void 0,n),i.paymasterAndData=n.paymasterAndData??te.EMPTY_BYTES,n.callGasLimit&&(i.callGasLimit=n.callGasLimit),n.preVerificationGas&&(i.preVerificationGas=n.preVerificationGas),n.verificationGasLimit&&(i.verificationGasLimit=n.verificationGasLimit),re.__privateMethod.call(void 0,this,I,j).call(this,e)},k=new WeakSet,y=async function(e){Q.projectLogger.call(void 0,"Requesting approval");const{metadata:t}=e,{resultCallbacks:r,value:i}=await re.__privateMethod.call(void 0,this,L,B).call(this,t),a=i?.txMeta;return a&&await re.__privateMethod.call(void 0,this,W,$).call(this,e,a),t.status="approved",re.__privateMethod.call(void 0,this,I,j).call(this,t),r},w=new WeakSet,T=async function(e,t){const{id:r,chainId:i,userOperation:a}=e;Q.projectLogger.call(void 0,"Signing user operation",r,a);const n=await t.signUserOperation({userOperation:a,chainId:i});J.validateSignUserOperationResponse.call(void 0,n);const{signature:s}=n;a.signature=s,Q.projectLogger.call(void 0,"Signed user operation",s),e.status="signed",re.__privateMethod.call(void 0,this,I,j).call(this,e)},b=new WeakSet,E=async function(e){const{userOperation:t}=e;Q.projectLogger.call(void 0,"Submitting user operation",t);const r=new(0,Z.Bundler)(e.bundlerUrl),i=await r.sendUserOperation(t,re.__privateGet.call(void 0,this,a));e.hash=i,e.status="submitted",re.__privateMethod.call(void 0,this,I,j).call(this,e)},S=new WeakSet,P=function(e,t){const{id:r}=e,i=t;Q.projectLogger.call(void 0,"User operation failed",r,t),e.error={name:i.name,message:i.message,stack:i.stack,code:i.code,rpc:i.value},e.status="failed",re.__privateMethod.call(void 0,this,I,j).call(this,e),String(i.code)===String(se.errorCodes.provider.userRejectedRequest)&&re.__privateMethod.call(void 0,this,M,x).call(this,r)},C=new WeakSet,A=function(e){return{callData:te.EMPTY_BYTES,callGasLimit:te.EMPTY_BYTES,initCode:te.EMPTY_BYTES,maxFeePerGas:e?.maxFeePerGas??te.EMPTY_BYTES,maxPriorityFeePerGas:e?.maxPriorityFeePerGas??te.EMPTY_BYTES,nonce:te.EMPTY_BYTES,paymasterAndData:te.EMPTY_BYTES,preVerificationGas:te.EMPTY_BYTES,sender:te.ADDRESS_ZERO,signature:te.EMPTY_BYTES,verificationGasLimit:te.EMPTY_BYTES}},I=new WeakSet,j=function(e){const{id:t}=e;this.update((r=>{r.userOperations[t]=de.cloneDeep.call(void 0,e)})),re.__privateMethod.call(void 0,this,N,O).call(this,e)},M=new WeakSet,x=function(e){this.update((t=>{delete t.userOperations[e]}))},N=new WeakSet,O=function(e){if(!e.transactionParams)return;const t=X.getTransactionMetadata.call(void 0,e);this.hub.emit("transaction-updated",t)},R=new WeakSet,G=function(){re.__privateGet.call(void 0,this,s).hub.on("user-operation-confirmed",(e=>{Q.projectLogger.call(void 0,"In listener..."),this.hub.emit("user-operation-confirmed",e),this.hub.emit(`${e.id}:confirmed`,e)})),re.__privateGet.call(void 0,this,s).hub.on("user-operation-failed",((e,t)=>{this.hub.emit("user-operation-failed",e,t),this.hub.emit(`${e.id}:failed`,e,t)})),re.__privateGet.call(void 0,this,s).hub.on("user-operation-updated",(e=>{re.__privateMethod.call(void 0,this,I,j).call(this,e)}))},L=new WeakSet,B=async function(e){const{id:t,origin:r}=e,i=ae.ApprovalType.Transaction,a={txId:t};return await this.messagingSystem.call("ApprovalController:addRequest",{id:t,origin:r,type:i,requestData:a,expectsResult:!0},!0)},F=new WeakSet,D=async function(e,t,r){if(!e)return;if(r.type)return r.type;const i=new(0,ne.default)(t),a=oe.determineTransactionType.call(void 0,e,i);return(await a).type},U=new WeakSet,H=async function(e){const{provider:t,configuration:r}=this.messagingSystem.call("NetworkController:getNetworkClientById",e),{chainId:i}=r;return{provider:t,chainId:i}},W=new WeakSet,$=async function(e,t){Q.projectLogger.call(void 0,"Found updated transaction in approval",{updatedTransaction:t});const{metadata:r,request:i}=e,{userOperation:a}=r,n=a.paymasterAndData!==te.EMPTY_BYTES,s=le.add0x.call(void 0,t.txParams.maxFeePerGas),o=le.add0x.call(void 0,t.txParams.maxPriorityFeePerGas);let l=!1;const c=a.maxFeePerGas,d=a.maxPriorityFeePerGas,u=c!==s||d!==o,h=n&&s===te.VALUE_ZERO&&o===te.VALUE_ZERO;u&&!h&&(Q.projectLogger.call(void 0,"Gas fees updated during approval",{previousMaxFeePerGas:c,previousMaxPriorityFeePerGas:d,updatedMaxFeePerGas:s,updatedMaxPriorityFeePerGas:o}),a.maxFeePerGas=s,a.maxPriorityFeePerGas=o,l=n);const p=i.data??te.EMPTY_BYTES,m=t.txParams.data??te.EMPTY_BYTES;p!==m&&(Q.projectLogger.call(void 0,"Data updated during approval",{previousData:p,updatedData:m}),l=!0);const f=i.value??te.VALUE_ZERO,v=t.txParams.value??te.VALUE_ZERO;if(f!==v&&(Q.projectLogger.call(void 0,"Value updated during approval",{previousValue:f,updatedValue:v}),l=!0),l){const t={...i,data:m,maxFeePerGas:s,maxPriorityFeePerGas:o,value:v};await re.__privateMethod.call(void 0,this,V,K).call(this,{...e,request:t})}},V=new WeakSet,K=async function(e){Q.projectLogger.call(void 0,"Regenerating user operation as parameters were updated during approval");const{options:{smartContractAccount:t},metadata:r}=e;await re.__privateMethod.call(void 0,this,f,v).call(this,e),await re.__privateMethod.call(void 0,this,g,_).call(this,r,t),Q.projectLogger.call(void 0,"Regenerated user operation",r.userOperation)},r.UserOperationController=pe}}},{package:"@metamask/user-operation-controller",file:"node_modules/@metamask/user-operation-controller/dist/chunk-F7MQQF7R.js"}],[221,{lodash:3770},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.migrate=async function(e){const t=(0,i.cloneDeep)(e);return t.meta.version=a,function(e){const t=(null==e?void 0:e.TransactionController)||{},r=(null==t?void 0:t.transactions)||{};if((0,i.isEmpty)(r))return;const a=Object.keys(r).reduce(((e,t)=>{const i=r[t];return null!=i&&i.nonceDetails&&delete i.nonceDetails,{...e,[t]:i}}),{});e.TransactionController={...t,transactions:a}}(t.data),t},r.version=void 0;var i=e("lodash");const a=r.version=97}}},{package:"$root$",file:"app/scripts/migrations/097.ts"}],[2210,{"./chunk-KQMYR73X.js":2212,"./chunk-Z4BLTVTB.js":2218},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var i,a,n,s=e("./chunk-KQMYR73X.js"),o=e("./chunk-Z4BLTVTB.js"),l=s.createModuleLogger.call(void 0,s.projectLogger,"bundler");i=new WeakMap,a=new WeakSet,n=async function(e,t){const r={method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({jsonrpc:"2.0",id:1,method:e,params:t})},a=await fetch(o.__privateGet.call(void 0,this,i),r),n=await a.json();if(n.error){const e=new Error(n.error.message||n.error);throw e.code=n.error.code,e}return n.result},r.Bundler=class{constructor(e){o.__privateAdd.call(void 0,this,a),o.__privateAdd.call(void 0,this,i,void 0),o.__privateSet.call(void 0,this,i,e)}async estimateUserOperationGas(e,t){l("Estimating gas",{url:o.__privateGet.call(void 0,this,i),userOperation:e,entrypoint:t});const r=await o.__privateMethod.call(void 0,this,a,n).call(this,"eth_estimateUserOperationGas",[e,t]);return l("Estimated gas",{response:r}),r}async getUserOperationReceipt(e){return l("Getting user operation receipt",{url:o.__privateGet.call(void 0,this,i),hash:e}),await o.__privateMethod.call(void 0,this,a,n).call(this,"eth_getUserOperationReceipt",[e])}async sendUserOperation(e,t){l("Sending user operation",{url:o.__privateGet.call(void 0,this,i),userOperation:e,entrypoint:t});const r=await o.__privateMethod.call(void 0,this,a,n).call(this,"eth_sendUserOperation",[e,t]);return l("Sent user operation",r),r}}}}},{package:"@metamask/user-operation-controller",file:"node_modules/@metamask/user-operation-controller/dist/chunk-K6XMMCKJ.js"}],[2211,{"./chunk-K6XMMCKJ.js":2210,"./chunk-KQMYR73X.js":2212,"./chunk-Z4BLTVTB.js":2218,"@metamask/controller-utils":2231,"@metamask/eth-query":1269,"@metamask/polling-controller":1612,"@metamask/utils":2253,events:3263},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var a,n,s,o,l,c,d,u,h,p,m,f,v,g,_,k,y,w,T=e("./chunk-K6XMMCKJ.js"),b=e("./chunk-KQMYR73X.js"),E=e("./chunk-Z4BLTVTB.js"),S=e("@metamask/controller-utils"),P=i(e("@metamask/eth-query")),C=e("@metamask/polling-controller"),A=e("@metamask/utils"),I=i(e("events")),j=A.createModuleLogger.call(void 0,b.projectLogger,"pending-user-operations"),M=class extends C.BlockTrackerPollingControllerOnly{constructor({getUserOperations:e,messenger:t}){super(),E.__privateAdd.call(void 0,this,s),E.__privateAdd.call(void 0,this,l),E.__privateAdd.call(void 0,this,d),E.__privateAdd.call(void 0,this,h),E.__privateAdd.call(void 0,this,m),E.__privateAdd.call(void 0,this,v),E.__privateAdd.call(void 0,this,_),E.__privateAdd.call(void 0,this,y),E.__privateAdd.call(void 0,this,a,void 0),E.__privateAdd.call(void 0,this,n,void 0),this.hub=new(0,I.default),E.__privateSet.call(void 0,this,a,e),E.__privateSet.call(void 0,this,n,t)}async _executePoll(e,t){try{const{blockTracker:t,configuration:r,provider:i}=this._getNetworkClientById(e);j("Polling",{blockNumber:t.getCurrentBlock(),chainId:r.chainId}),await E.__privateMethod.call(void 0,this,s,o).call(this,r.chainId,i)}catch(e){j("Failed to check user operations",e)}}_getNetworkClientById(e){return E.__privateGet.call(void 0,this,n).call("NetworkController:getNetworkClientById",e)}};a=new WeakMap,n=new WeakMap,s=new WeakSet,o=async function(e,t){const r=E.__privateMethod.call(void 0,this,m,f).call(this).filter((t=>t.chainId===e));r.length?(j("Found pending user operations to check",{count:r.length,ids:r.map((e=>e.id))}),await Promise.all(r.map((e=>E.__privateMethod.call(void 0,this,l,c).call(this,e,t))))):j("No pending user operations to check")},l=new WeakSet,c=async function(e,t){const{bundlerUrl:r,hash:i,id:a}=e;if(i&&r)try{const n=await E.__privateMethod.call(void 0,this,_,k).call(this,i,r),s=n?.success;if(n&&!s)return void E.__privateMethod.call(void 0,this,h,p).call(this,e,n);if(s)return void await E.__privateMethod.call(void 0,this,d,u).call(this,e,n,t);j("No receipt found for user operation",{id:a,hash:i})}catch(e){j("Failed to check user operation",a,e)}else j("Skipping user operation as missing hash or bundler",a)},d=new WeakSet,u=async function(e,t,r){const{id:i}=e,{actualGasCost:a,actualGasUsed:n,receipt:{blockHash:s,transactionHash:o}}=t;j("User operation confirmed",i,o);const{baseFeePerGas:l}=await S.query.call(void 0,new(0,P.default)(r),"getBlockByHash",[s,!1]);e.actualGasCost=E.__privateMethod.call(void 0,this,y,w).call(this,a),e.actualGasUsed=E.__privateMethod.call(void 0,this,y,w).call(this,n),e.baseFeePerGas=l,e.status="confirmed",e.transactionHash=o,E.__privateMethod.call(void 0,this,v,g).call(this,e),this.hub.emit("user-operation-confirmed",e)},h=new WeakSet,p=function(e,t){const{id:r}=e;j("User operation failed",r),e.status="failed",E.__privateMethod.call(void 0,this,v,g).call(this,e),this.hub.emit("user-operation-failed",e,new Error("User operation receipt has failed status"))},m=new WeakSet,f=function(){return E.__privateGet.call(void 0,this,a).call(this).filter((e=>"submitted"===e.status))},v=new WeakSet,g=function(e){this.hub.emit("user-operation-updated",e)},_=new WeakSet,k=async function(e,t){return new(0,T.Bundler)(t).getUserOperationReceipt(e)},y=new WeakSet,w=function(e){return"number"==typeof e?S.toHex.call(void 0,e):e},r.PendingUserOperationTracker=M}}},{package:"@metamask/user-operation-controller",file:"node_modules/@metamask/user-operation-controller/dist/chunk-KBGSERJ2.js"}],[2212,{"@metamask/utils":2253},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var i=e("@metamask/utils"),a=i.createProjectLogger.call(void 0,"user-operation-controller");r.createModuleLogger=i.createModuleLogger,r.projectLogger=a}}},{package:"@metamask/user-operation-controller",file:"node_modules/@metamask/user-operation-controller/dist/chunk-KQMYR73X.js"}],[2213,{"./chunk-BTR56Y3F.js":2207,"./chunk-OIJGGQRQ.js":2215,"./chunk-Z4BLTVTB.js":2218},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var i,a=e("./chunk-OIJGGQRQ.js"),n=e("./chunk-BTR56Y3F.js"),s=e("./chunk-Z4BLTVTB.js");i=new WeakMap,r.SnapSmartContractAccount=class{constructor(e){s.__privateAdd.call(void 0,this,i,void 0),s.__privateSet.call(void 0,this,i,e)}async prepareUserOperation(e){const{chainId:t,data:r,from:o,to:l,value:c}=e,d=r??n.EMPTY_BYTES,u=l??n.ADDRESS_ZERO,h=c??n.VALUE_ZERO,p=await s.__privateGet.call(void 0,this,i).call("KeyringController:prepareUserOperation",o,[{data:d,to:u,value:h}],{chainId:a.toEip155ChainId.call(void 0,t)}),{bundlerUrl:m,callData:f,dummyPaymasterAndData:v,dummySignature:g,gasLimits:_,initCode:k,nonce:y}=p;return{bundler:m,callData:f,dummyPaymasterAndData:v,dummySignature:g,gas:_,initCode:k,nonce:y,sender:o}}async updateUserOperation(e){const{userOperation:t,chainId:r}=e,{sender:o}=t,{paymasterAndData:l,verificationGasLimit:c,preVerificationGas:d,callGasLimit:u}=await s.__privateGet.call(void 0,this,i).call("KeyringController:patchUserOperation",o,t,{chainId:a.toEip155ChainId.call(void 0,r)});return{paymasterAndData:l===n.EMPTY_BYTES?void 0:l,verificationGasLimit:c,preVerificationGas:d,callGasLimit:u}}async signUserOperation(e){const{userOperation:t,chainId:r}=e,{sender:n}=t;return{signature:await s.__privateGet.call(void 0,this,i).call("KeyringController:signUserOperation",n,t,{chainId:a.toEip155ChainId.call(void 0,r)})}}}}}},{package:"@metamask/user-operation-controller",file:"node_modules/@metamask/user-operation-controller/dist/chunk-MRVTCZLI.js"}],[2214,{"./chunk-BTR56Y3F.js":2207,"@metamask/transaction-controller":2187,"@metamask/utils":2253,superstruct:4275},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var i=e("./chunk-BTR56Y3F.js"),a=e("@metamask/transaction-controller"),n=e("@metamask/utils"),s=e("superstruct");function o(e,t,r){try{s.assert.call(void 0,e,t,r)}catch(e){const t=e.failures().map((e=>e.path.length?`${e.path.join(".")} - ${e.message}`:e.message)).join("\n");throw new Error(`${r}\n${t}`)}}function l(){return s.define.call(void 0,"Hexadecimal String",(e=>n.isStrictHexString.call(void 0,e)))}function c(){return s.define.call(void 0,"Hexadecimal String or 0x",(e=>n.isStrictHexString.call(void 0,e)||e===i.EMPTY_BYTES))}r.validateAddUserOperationRequest=function(e){const t=l(),r=c();o(e,s.object.call(void 0,{data:s.optional.call(void 0,r),from:t,maxFeePerGas:s.optional.call(void 0,t),maxPriorityFeePerGas:s.optional.call(void 0,t),to:s.optional.call(void 0,t),value:s.optional.call(void 0,t)}),"Invalid request to add user operation")},r.validateAddUserOperationOptions=function(e){o(e,s.object.call(void 0,{networkClientId:s.string.call(void 0),origin:s.string.call(void 0),requireApproval:s.optional.call(void 0,s.boolean.call(void 0)),smartContractAccount:s.optional.call(void 0,s.object.call(void 0,{prepareUserOperation:s.func.call(void 0),updateUserOperation:s.func.call(void 0),signUserOperation:s.func.call(void 0)})),swaps:s.optional.call(void 0,s.object.call(void 0,{approvalTxId:s.optional.call(void 0,s.string.call(void 0)),destinationTokenAddress:s.optional.call(void 0,s.string.call(void 0)),destinationTokenDecimals:s.optional.call(void 0,s.number.call(void 0)),destinationTokenSymbol:s.optional.call(void 0,s.string.call(void 0)),estimatedBaseFee:s.optional.call(void 0,s.string.call(void 0)),sourceTokenSymbol:s.optional.call(void 0,s.string.call(void 0)),swapMetaData:s.optional.call(void 0,s.object.call(void 0)),swapTokenValue:s.optional.call(void 0,s.string.call(void 0))})),type:s.optional.call(void 0,s.enums.call(void 0,Object.values(a.TransactionType)))}),"Invalid options to add user operation")},r.validatePrepareUserOperationResponse=function(e){const t=l(),r=c();o(e,s.refine.call(void 0,s.object.call(void 0,{bundler:s.string.call(void 0),callData:t,dummyPaymasterAndData:s.optional.call(void 0,r),dummySignature:s.optional.call(void 0,r),gas:s.optional.call(void 0,s.object.call(void 0,{callGasLimit:t,preVerificationGas:t,verificationGasLimit:t})),initCode:s.optional.call(void 0,r),nonce:t,sender:t}),"ValidPrepareUserOperationResponse",(({gas:e,dummySignature:t})=>!!(e||t&&t!==i.EMPTY_BYTES)||"Must specify dummySignature if not specifying gas")),"Invalid response when preparing user operation")},r.validateUpdateUserOperationResponse=function(e){o(e,s.optional.call(void 0,s.object.call(void 0,{paymasterAndData:s.optional.call(void 0,c()),callGasLimit:s.optional.call(void 0,c()),preVerificationGas:s.optional.call(void 0,c()),verificationGasLimit:s.optional.call(void 0,c())})),"Invalid response when updating user operation")},r.validateSignUserOperationResponse=function(e){const t=l();o(e,s.object.call(void 0,{signature:t}),"Invalid response when signing user operation")}}}},{package:"@metamask/user-operation-controller",file:"node_modules/@metamask/user-operation-controller/dist/chunk-O3AO62RJ.js"}],[2215,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.toEip155ChainId=function(e){const t=Number(e);return Number.isInteger(t)?t.toString():e}}}},{package:"@metamask/user-operation-controller",file:"node_modules/@metamask/user-operation-controller/dist/chunk-OIJGGQRQ.js"}],[2216,{"./chunk-BTR56Y3F.js":2207,"./chunk-KQMYR73X.js":2212,"@metamask/controller-utils":2231,"@metamask/eth-query":1269,"@metamask/gas-fee-controller":1340,"@metamask/transaction-controller":2187,"@metamask/utils":2253},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var i,a=e("./chunk-KQMYR73X.js"),n=e("./chunk-BTR56Y3F.js"),s=e("@metamask/controller-utils"),o=e("@metamask/eth-query"),l=(i=o)&&i.__esModule?i:{default:i},c=e("@metamask/gas-fee-controller"),d=e("@metamask/transaction-controller"),u=e("@metamask/utils"),h=a.createModuleLogger.call(void 0,a.projectLogger,"gas-fees");function p(e){return s.toHex.call(void 0,s.gweiDecToWEIBN.call(void 0,e))}function m(e){return!e||e===n.EMPTY_BYTES}r.updateGasFees=async function(e){const{metadata:t,originalRequest:r,transaction:i}=e,{userOperation:a}=t;let n;const o=async()=>(n||(n=await async function(e){const{getGasFeeEstimates:t,provider:r}=e;try{const{gasFeeEstimates:e,gasEstimateType:r}=await t();if(r===c.GAS_ESTIMATE_TYPES.FEE_MARKET){const{medium:{suggestedMaxPriorityFeePerGas:t,suggestedMaxFeePerGas:r}={}}=e;if(t&&r){const e={maxFeePerGas:p(r),maxPriorityFeePerGas:p(t)};return h("Using medium values from fee market estimate",e),e}}if(r===c.GAS_ESTIMATE_TYPES.LEGACY){const t=p(e.medium);return h("Using medium value from legacy estimate",t),{maxFeePerGas:t}}if(r===c.GAS_ESTIMATE_TYPES.ETH_GASPRICE){const t=p(e.gasPrice);return h("Using gasPrice from estimate",t),{maxFeePerGas:t}}}catch(e){h("Failed to get estimate",e)}const i=await s.query.call(void 0,new(0,l.default)(r),"gasPrice");if(!i)return{};const a=u.add0x.call(void 0,i.toString(16));return h("Using gasPrice from network as fallback",a),{maxFeePerGas:a}}(e)),n);a.maxFeePerGas=await async function(e,t,r){const{maxFeePerGas:i,maxPriorityFeePerGas:a}=e,{gasPrice:n}=r??{};if(!m(i))return h("Using maxFeePerGas from request",i),i;if(m(a)&&n)return h("Setting maxFeePerGas to transaction gasPrice",n),n;const{maxFeePerGas:s}=await t();if(!s)throw new Error("Failed to get gas fee estimate for maxFeePerGas");return h("Using maxFeePerGas from estimate",s),s}(r,o,i),a.maxPriorityFeePerGas=await async function(e,t,r,i){const{maxFeePerGas:a,maxPriorityFeePerGas:n}=e,{gasPrice:s}=i??{},{maxFeePerGas:o}=r;if(!m(n))return h("Using maxPriorityFeePerGas from request",n),n;if(m(a)&&s)return h("Setting maxPriorityFeePerGas to transaction gasPrice",s),s;const{maxPriorityFeePerGas:l}=await t();if(l)return h("Using maxPriorityFeePerGas from estimate",l),l;return h("Setting maxPriorityFeePerGas to maxFeePerGas",o),o}(r,o,a,i),t.userFeeLevel=function(e,t,r,i){const{origin:a}=e,{maxFeePerGas:n,maxPriorityFeePerGas:o}=t,{maxFeePerGas:l,maxPriorityFeePerGas:c}=r||{};if(m(n)&&m(o)&&i?.gasPrice)return a===s.ORIGIN_METAMASK?d.UserFeeLevel.CUSTOM:d.UserFeeLevel.DAPP_SUGGESTED;if(m(n)&&m(o)&&l&&c)return d.UserFeeLevel.MEDIUM;if(a===s.ORIGIN_METAMASK)return d.UserFeeLevel.CUSTOM;return d.UserFeeLevel.DAPP_SUGGESTED}(t,r,n,i)}}}},{package:"@metamask/user-operation-controller",file:"node_modules/@metamask/user-operation-controller/dist/chunk-SSHRMBLI.js"}],[2217,{"./chunk-BTR56Y3F.js":2207,"@metamask/transaction-controller":2187,"@metamask/utils":2253,"bn.js":2922},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var i,a=e("./chunk-BTR56Y3F.js"),n=e("@metamask/transaction-controller"),s=e("@metamask/utils"),o=e("bn.js"),l=(i=o)&&i.__esModule?i:{default:i};r.getTransactionMetadata=function(e){const{actualGasCost:t,actualGasUsed:r,baseFeePerGas:i,chainId:o,error:c,origin:d,transactionHash:u,id:h,swapsMetadata:p,time:m,transactionParams:f,transactionType:v,userFeeLevel:g,userOperation:_}=e;if(!f)return;const k=t&&r?s.add0x.call(void 0,new(0,l.default)(s.remove0x.call(void 0,t),16).div(new(0,l.default)(s.remove0x.call(void 0,r),16)).toString(16)):void 0,y=c?{name:c.name,message:c.message,stack:c.stack,code:c.code,rpc:c.rpc}:void 0,w={unapproved:n.TransactionStatus.unapproved,approved:n.TransactionStatus.approved,signed:n.TransactionStatus.signed,submitted:n.TransactionStatus.submitted,confirmed:n.TransactionStatus.confirmed,failed:n.TransactionStatus.failed}[e.status],T=function(...e){const t=new(0,l.default)(0);for(const r of e)r&&t.iadd(new(0,l.default)(s.remove0x.call(void 0,r),16));return s.add0x.call(void 0,t.toString(16))}(_.preVerificationGas,_.verificationGasLimit,_.callGasLimit),b=_.paymasterAndData!==a.EMPTY_BYTES,E=b?a.VALUE_ZERO:_.maxFeePerGas,S=b?a.VALUE_ZERO:_.maxPriorityFeePerGas,P=_.nonce===a.EMPTY_BYTES?void 0:_.nonce,C={...f,from:_.sender,gas:T,nonce:P,maxFeePerGas:E,maxPriorityFeePerGas:S};delete C.gasPrice;const A={approvalTxId:p?.approvalTxId??void 0,destinationTokenAddress:p?.destinationTokenAddress??void 0,destinationTokenDecimals:p?.destinationTokenDecimals??void 0,destinationTokenSymbol:p?.destinationTokenSymbol??void 0,estimatedBaseFee:p?.estimatedBaseFee??void 0,sourceTokenSymbol:p?.sourceTokenSymbol??void 0,swapMetaData:p?.swapMetaData??void 0,swapTokenValue:p?.swapTokenValue??void 0};return{baseFeePerGas:i??void 0,chainId:o,error:y,hash:u??void 0,id:h,isUserOperation:!0,origin:d,status:w,time:m,txParams:C,txReceipt:{effectiveGasPrice:k??void 0,gasUsed:r??void 0},type:v??void 0,userFeeLevel:b?n.UserFeeLevel.CUSTOM:g,...A}}}}},{package:"@metamask/user-operation-controller",file:"node_modules/@metamask/user-operation-controller/dist/chunk-WF3VLEGJ.js"}],[2218,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var i=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)};r.__privateGet=(e,t,r)=>(i(e,t,"read from private field"),r?r.call(e):t.get(e)),r.__privateAdd=(e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)},r.__privateSet=(e,t,r,a)=>(i(e,t,"write to private field"),a?a.call(e,r):t.set(e,r),r),r.__privateMethod=(e,t,r)=>(i(e,t,"access private method"),r)}}},{package:"@metamask/user-operation-controller",file:"node_modules/@metamask/user-operation-controller/dist/chunk-Z4BLTVTB.js"}],[2219,{"./chunk-7JPKNM2X.js":2206,"./chunk-BTR56Y3F.js":2207,"./chunk-EKSYIL4U.js":2208,"./chunk-F7MQQF7R.js":2209,"./chunk-K6XMMCKJ.js":2210,"./chunk-KBGSERJ2.js":2211,"./chunk-KQMYR73X.js":2212,"./chunk-MRVTCZLI.js":2213,"./chunk-O3AO62RJ.js":2214,"./chunk-OIJGGQRQ.js":2215,"./chunk-SSHRMBLI.js":2216,"./chunk-WF3VLEGJ.js":2217,"./chunk-Z4BLTVTB.js":2218},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var i=e("./chunk-F7MQQF7R.js");e("./chunk-SSHRMBLI.js"),e("./chunk-7JPKNM2X.js"),e("./chunk-WF3VLEGJ.js"),e("./chunk-O3AO62RJ.js"),e("./chunk-KBGSERJ2.js");var a=e("./chunk-EKSYIL4U.js");e("./chunk-K6XMMCKJ.js"),e("./chunk-KQMYR73X.js"),e("./chunk-MRVTCZLI.js"),e("./chunk-OIJGGQRQ.js"),e("./chunk-BTR56Y3F.js"),e("./chunk-Z4BLTVTB.js"),r.UserOperationController=i.UserOperationController,r.UserOperationStatus=a.UserOperationStatus}}},{package:"@metamask/user-operation-controller",file:"node_modules/@metamask/user-operation-controller/dist/index.js"}],[222,{lodash:3770},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.migrate=async function(e){const t=(0,i.cloneDeep)(e);return t.meta.version=a,function(e){const t=(null==e?void 0:e.TransactionController)||{},r=(null==t?void 0:t.transactions)||{};if((0,i.isEmpty)(r))return;const a=Object.keys(r).reduce(((e,t)=>{const i=r[t];return i.verifiedOnBlockchain=Boolean(i.txReceipt),{...e,[t]:i}}),{});e.TransactionController={...t,transactions:a}}(t.data),t},r.version=void 0;var i=e("lodash");const a=r.version=98}}},{package:"$root$",file:"app/scripts/migrations/098.ts"}],[2220,{"./chunk-UJFCPTF3.js":2222,"./chunk-Z4BLTVTB.js":2223},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var i,a,n,s,o=e("./chunk-UJFCPTF3.js"),l=e("./chunk-Z4BLTVTB.js");i=new WeakMap,a=new WeakMap,n=new WeakMap,s=new WeakMap,r.ControllerMessenger=class{constructor(){l.__privateAdd.call(void 0,this,i,new Map),l.__privateAdd.call(void 0,this,a,new Map),l.__privateAdd.call(void 0,this,n,new Map),l.__privateAdd.call(void 0,this,s,new Map)}registerActionHandler(e,t){if(l.__privateGet.call(void 0,this,i).has(e))throw new Error(`A handler for ${e} has already been registered`);l.__privateGet.call(void 0,this,i).set(e,t)}unregisterActionHandler(e){l.__privateGet.call(void 0,this,i).delete(e)}clearActions(){l.__privateGet.call(void 0,this,i).clear()}call(e,...t){const r=l.__privateGet.call(void 0,this,i).get(e);if(!r)throw new Error(`A handler for ${e} has not been registered`);return r(...t)}registerInitialEventPayload({eventType:e,getPayload:t}){l.__privateGet.call(void 0,this,n).set(e,t)}publish(e,...t){const r=l.__privateGet.call(void 0,this,a).get(e);if(r)for(const[e,i]of r.entries())try{if(i){const r=l.__privateGet.call(void 0,this,s).get(e),a=i(...t);a!==r&&(l.__privateGet.call(void 0,this,s).set(e,a),e(a,r))}else e(...t)}catch(e){setTimeout((()=>{throw e}))}}subscribe(e,t,r){let i=l.__privateGet.call(void 0,this,a).get(e);if(i||(i=new Map,l.__privateGet.call(void 0,this,a).set(e,i)),i.set(t,r),r){const i=l.__privateGet.call(void 0,this,n).get(e);if(i){const e=r(...i());l.__privateGet.call(void 0,this,s).set(t,e)}}}unsubscribe(e,t){const r=l.__privateGet.call(void 0,this,a).get(e);if(!r||!r.has(t))throw new Error(`Subscription not found for event: ${e}`);r.get(t)&&l.__privateGet.call(void 0,this,s).delete(t),r.delete(t)}clearEventSubscriptions(e){l.__privateGet.call(void 0,this,a).delete(e)}clearSubscriptions(){l.__privateGet.call(void 0,this,a).clear()}getRestricted({name:e,allowedActions:t,allowedEvents:r}){return new(0,o.RestrictedControllerMessenger)({controllerMessenger:this,name:e,allowedActions:t,allowedEvents:r})}}}}},{package:"@metamask/user-operation-controller>@metamask/base-controller",file:"node_modules/@metamask/user-operation-controller/node_modules/@metamask/base-controller/dist/chunk-G42723LG.js"}],[2221,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var i=class{constructor(e={},t={}){this.defaultConfig={},this.defaultState={},this.disabled=!1,this.name="BaseController",this.internalConfig=this.defaultConfig,this.internalState=this.defaultState,this.internalListeners=[],this.initialState=t,this.initialConfig=e}initialize(){return this.internalState=this.defaultState,this.internalConfig=this.defaultConfig,this.configure(this.initialConfig),this.update(this.initialState),this}get config(){return this.internalConfig}get state(){return this.internalState}configure(e,t=!1,r=!0){if(r){this.internalConfig=t?e:Object.assign(this.internalConfig,e);for(const e of Object.keys(this.internalConfig)){const t=this.internalConfig[e];void 0!==t&&(this[e]=t)}}else for(const t of Object.keys(e))if(void 0!==this.internalConfig[t]){const r=e[t];this.internalConfig[t]=r,this[t]=r}}notify(){this.disabled||this.internalListeners.forEach((e=>{e(this.internalState)}))}subscribe(e){this.internalListeners.push(e)}unsubscribe(e){const t=this.internalListeners.findIndex((t=>e===t));return t>-1&&this.internalListeners.splice(t,1),t>-1}update(e,t=!1){this.internalState=t?Object.assign({},e):Object.assign({},this.internalState,e),this.notify()}},a=i;r.BaseControllerV1=i,r.BaseControllerV1_default=a}}},{package:"@metamask/user-operation-controller>@metamask/base-controller",file:"node_modules/@metamask/user-operation-controller/node_modules/@metamask/base-controller/dist/chunk-NINOM2XQ.js"}],[2222,{"./chunk-Z4BLTVTB.js":2223},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var i,a,n,s,o,l,c,d,u,h,p=e("./chunk-Z4BLTVTB.js");i=new WeakMap,a=new WeakMap,n=new WeakMap,s=new WeakMap,o=new WeakSet,l=function(e){const t=p.__privateGet.call(void 0,this,s);return p.__privateMethod.call(void 0,this,u,h).call(this,e)||null!==t&&t.includes(e)},c=new WeakSet,d=function(e){const t=p.__privateGet.call(void 0,this,n);return p.__privateMethod.call(void 0,this,u,h).call(this,e)||null!==t&&t.includes(e)},u=new WeakSet,h=function(e){return e.startsWith(`${p.__privateGet.call(void 0,this,a)}:`)},r.RestrictedControllerMessenger=class{constructor({controllerMessenger:e,name:t,allowedActions:r,allowedEvents:l}){p.__privateAdd.call(void 0,this,o),p.__privateAdd.call(void 0,this,c),p.__privateAdd.call(void 0,this,u),p.__privateAdd.call(void 0,this,i,void 0),p.__privateAdd.call(void 0,this,a,void 0),p.__privateAdd.call(void 0,this,n,void 0),p.__privateAdd.call(void 0,this,s,void 0),p.__privateSet.call(void 0,this,i,e),p.__privateSet.call(void 0,this,a,t),p.__privateSet.call(void 0,this,n,r),p.__privateSet.call(void 0,this,s,l)}registerActionHandler(e,t){if(!p.__privateMethod.call(void 0,this,u,h).call(this,e))throw new Error(`Only allowed registering action handlers prefixed by '${p.__privateGet.call(void 0,this,a)}:'`);p.__privateGet.call(void 0,this,i).registerActionHandler(e,t)}unregisterActionHandler(e){if(!p.__privateMethod.call(void 0,this,u,h).call(this,e))throw new Error(`Only allowed unregistering action handlers prefixed by '${p.__privateGet.call(void 0,this,a)}:'`);p.__privateGet.call(void 0,this,i).unregisterActionHandler(e)}call(e,...t){if(!p.__privateMethod.call(void 0,this,c,d).call(this,e))throw new Error(`Action missing from allow list: ${e}`);return p.__privateGet.call(void 0,this,i).call(e,...t)}registerInitialEventPayload({eventType:e,getPayload:t}){if(!p.__privateMethod.call(void 0,this,u,h).call(this,e))throw new Error(`Only allowed publishing events prefixed by '${p.__privateGet.call(void 0,this,a)}:'`);p.__privateGet.call(void 0,this,i).registerInitialEventPayload({eventType:e,getPayload:t})}publish(e,...t){if(!p.__privateMethod.call(void 0,this,u,h).call(this,e))throw new Error(`Only allowed publishing events prefixed by '${p.__privateGet.call(void 0,this,a)}:'`);p.__privateGet.call(void 0,this,i).publish(e,...t)}subscribe(e,t,r){if(!p.__privateMethod.call(void 0,this,o,l).call(this,e))throw new Error(`Event missing from allow list: ${e}`);return r?p.__privateGet.call(void 0,this,i).subscribe(e,t,r):p.__privateGet.call(void 0,this,i).subscribe(e,t)}unsubscribe(e,t){if(!p.__privateMethod.call(void 0,this,o,l).call(this,e))throw new Error(`Event missing from allow list: ${e}`);p.__privateGet.call(void 0,this,i).unsubscribe(e,t)}clearEventSubscriptions(e){if(!p.__privateMethod.call(void 0,this,u,h).call(this,e))throw new Error(`Only allowed clearing events prefixed by '${p.__privateGet.call(void 0,this,a)}:'`);p.__privateGet.call(void 0,this,i).clearEventSubscriptions(e)}}}}},{package:"@metamask/user-operation-controller>@metamask/base-controller",file:"node_modules/@metamask/user-operation-controller/node_modules/@metamask/base-controller/dist/chunk-UJFCPTF3.js"}],[2223,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var i=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)};r.__privateGet=(e,t,r)=>(i(e,t,"read from private field"),r?r.call(e):t.get(e)),r.__privateAdd=(e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)},r.__privateSet=(e,t,r,a)=>(i(e,t,"write to private field"),a?a.call(e,r):t.set(e,r),r),r.__privateMethod=(e,t,r)=>(i(e,t,"access private method"),r)}}},{package:"@metamask/user-operation-controller>@metamask/base-controller",file:"node_modules/@metamask/user-operation-controller/node_modules/@metamask/base-controller/dist/chunk-Z4BLTVTB.js"}],[2224,{"./chunk-Z4BLTVTB.js":2223,immer:3574},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var i,a=e("./chunk-Z4BLTVTB.js"),n=e("immer");n.enablePatches.call(void 0);function s(e,t,r){return Object.keys(e).reduce(((i,a)=>{try{const n=t[a];if(!n)throw new Error(`No metadata found for '${String(a)}'`);const s=n[r],o=e[a];return"function"==typeof s?i[a]=s(o):s&&(i[a]=o),i}catch(e){return setTimeout((()=>{throw e})),i}}),{})}i=new WeakMap,r.BaseController=class{constructor({messenger:e,metadata:t,name:r,state:s}){a.__privateAdd.call(void 0,this,i,void 0),this.messagingSystem=e,this.name=r,a.__privateSet.call(void 0,this,i,n.freeze.call(void 0,s,!0)),this.metadata=t,this.messagingSystem.registerActionHandler(`${r}:getState`,(()=>this.state)),this.messagingSystem.registerInitialEventPayload({eventType:`${r}:stateChange`,getPayload:()=>[this.state,[]]})}get state(){return a.__privateGet.call(void 0,this,i)}set state(e){throw new Error("Controller state cannot be directly mutated; use 'update' method instead.")}update(e){const[t,r,s]=n.produceWithPatches.call(void 0,a.__privateGet.call(void 0,this,i),e);return a.__privateSet.call(void 0,this,i,t),this.messagingSystem.publish(`${this.name}:stateChange`,t,r),{nextState:t,patches:r,inversePatches:s}}applyPatches(e){const t=n.applyPatches.call(void 0,a.__privateGet.call(void 0,this,i),e);a.__privateSet.call(void 0,this,i,t),this.messagingSystem.publish(`${this.name}:stateChange`,t,e)}destroy(){this.messagingSystem.clearEventSubscriptions(`${this.name}:stateChange`)}},r.getAnonymizedState=function(e,t){return s(e,t,"anonymous")},r.getPersistentState=function(e,t){return s(e,t,"persist")}}}},{package:"@metamask/user-operation-controller>@metamask/base-controller",file:"node_modules/@metamask/user-operation-controller/node_modules/@metamask/base-controller/dist/chunk-ZNOPSWMU.js"}],[2225,{"./chunk-G42723LG.js":2220,"./chunk-NINOM2XQ.js":2221,"./chunk-UJFCPTF3.js":2222,"./chunk-Z4BLTVTB.js":2223,"./chunk-ZNOPSWMU.js":2224},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var i=e("./chunk-NINOM2XQ.js"),a=e("./chunk-ZNOPSWMU.js"),n=e("./chunk-G42723LG.js"),s=e("./chunk-UJFCPTF3.js");e("./chunk-Z4BLTVTB.js"),r.BaseController=a.BaseController,r.BaseControllerV1=i.BaseControllerV1,r.ControllerMessenger=n.ControllerMessenger,r.RestrictedControllerMessenger=s.RestrictedControllerMessenger,r.getAnonymizedState=a.getAnonymizedState,r.getPersistentState=a.getPersistentState}}},{package:"@metamask/user-operation-controller>@metamask/base-controller",file:"node_modules/@metamask/user-operation-controller/node_modules/@metamask/base-controller/dist/index.js"}],[2226,{"@metamask/utils":2253},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var i=e("@metamask/utils"),a=i.createProjectLogger.call(void 0,"controller-utils");r.createModuleLogger=i.createModuleLogger,r.projectLogger=a}}},{package:"@metamask/user-operation-controller>@metamask/controller-utils",file:"node_modules/@metamask/user-operation-controller/node_modules/@metamask/controller-utils/dist/chunk-DBJSLKNR.js"}],[2227,{"./chunk-X4PYR7CK.js":2230,"@ethereumjs/util":439,"@metamask/ethjs-unit":1334,"@metamask/utils":2253,"bn.js":2922,buffer:2970,"eth-ens-namehash":3160,"fast-deep-equal":3291},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var a=e("./chunk-X4PYR7CK.js"),n=e("@ethereumjs/util"),s=e("@metamask/ethjs-unit"),o=e("@metamask/utils"),l=i(e("bn.js")),c=i(e("eth-ens-namehash")),d=i(e("fast-deep-equal")),u=new Error("timeout"),h=["__proto__","constructor","prototype"];function p(e){return e?new(0,l.default)(o.remove0x.call(void 0,e),16):new(0,l.default)(0)}async function m(e,t){const r=await fetch(e,t);if(!r.ok)throw new Error(`Fetch failed with status '${r.status}' for request '${String(e)}'`);return r}async function f(e,t){const r=await m(e,t);return await r.json()}r.PROTOTYPE_POLLUTION_BLOCKLIST=h,r.isSafeDynamicKey=function(e){return"string"==typeof e&&!h.some((t=>e===t))},r.isSafeChainId=function(e){if(!o.isHexString.call(void 0,e))return!1;const t=Number.parseInt(e,o.isStrictHexString.call(void 0,e)?16:10);return Number.isSafeInteger(t)&&t>0&&t<=a.MAX_SAFE_CHAIN_ID},r.BNToHex=function(e){return o.add0x.call(void 0,e.toString(16))},r.fractionBN=function(e,t,r){const i=new(0,l.default)(t),a=new(0,l.default)(r);return e.mul(i).div(a)},r.gweiDecToWEIBN=function(e){if(Number.isNaN(e))return new(0,l.default)(0);const t=e.toString().split("."),r=t[0]||"0";let i=t[1]||"";if(!i)return s.toWei.call(void 0,r,"gwei");if(i.length<=9)return s.toWei.call(void 0,`${r}.${i}`,"gwei");const a=i.slice(9)[0];i=i.slice(0,9);let n=s.toWei.call(void 0,`${r}.${i}`,"gwei");return Number(a)>=5&&(n=n.add(new(0,l.default)(1))),n},r.weiHexToGweiDec=function(e){const t=new(0,l.default)(o.remove0x.call(void 0,e),16);return s.fromWei.call(void 0,t,"gwei")},r.getBuyURL=function(e="1",t,r=5){switch(e){case"1":return`https://buy.coinbase.com/?code=9ec56d01-7e81-5017-930c-513daa27bb6a&amount=${r}&address=${t}&crypto_currency=ETH`;case"5":return"https://goerli-faucet.slock.it/";case"11155111":return"https://sepoliafaucet.net/";default:return}},r.hexToBN=p,r.hexToText=function(e){try{const r=o.remove0x.call(void 0,e);return t.from(r,"hex").toString("utf8")}catch(t){return e}},r.fromHex=function(e){return l.default.isBN(e)?e:new(0,l.default)(p(e).toString(10))},r.toHex=function(e){return"string"==typeof e&&o.isStrictHexString.call(void 0,e)?e:`0x${l.default.isBN(e)?e.toString(16):new(0,l.default)(e.toString(),10).toString(16)}`},r.safelyExecute=async function(e,t=!1){try{return await e()}catch(e){return void(t&&console.error(e))}},r.safelyExecuteWithTimeout=async function(e,t=!1,r=500){try{return await Promise.race([e(),new Promise(((e,t)=>setTimeout((()=>{t(u)}),r)))])}catch(e){return void(t&&console.error(e))}},r.toChecksumHexAddress=function(e){if("string"!=typeof e)return e;const t=o.add0x.call(void 0,e);return o.isHexString.call(void 0,t)?n.toChecksumAddress.call(void 0,t):t},r.isValidHexAddress=function(e,{allowNonPrefixed:t=!0}={}){const r=t?o.add0x.call(void 0,e):e;return!!o.isStrictHexString.call(void 0,r)&&n.isValidAddress.call(void 0,r)},r.isSmartContractCode=function(e){return!!e&&("0x"!==e&&"0x0"!==e)},r.successfulFetch=m,r.handleFetch=f,r.fetchWithErrorHandling=async function({url:e,options:t,timeout:r,errorCodesToCatch:i}){let a;try{a=r?Promise.race([await f(e,t),new Promise(((e,t)=>setTimeout((()=>{t(u)}),r)))]):await f(e,t)}catch(e){!function(e,t=[]){if(!e)return;if(!(e instanceof Error))throw e;if(!t.some((t=>e.message.includes(`Fetch failed with status '${t}'`)))&&!e.message.includes("Failed to fetch")&&e!==u)throw e;console.error(e)}(e,i)}return a},r.timeoutFetch=async function(e,t,r=500){return Promise.race([m(e,t),new Promise(((e,t)=>setTimeout((()=>{t(u)}),r)))])},r.normalizeEnsName=function(e){if("."===e)return e;if(e&&"string"==typeof e)try{const t=c.default.normalize(e.trim());if(t.match(/^(([\w\d-]+)\.)*[\w\d-]{7,}\.(eth|test)$/u))return t}catch(e){}return null},r.query=function(e,t,r=[]){return new Promise(((i,a)=>{const n=(e,t)=>{e?a(e):i(t)};t in e&&"function"==typeof e[t]?e[t](...r,n):e.sendAsync({method:t,params:r},n)}))},r.convertHexToDecimal=(e="0x0")=>o.isStrictHexString.call(void 0,e)?parseInt(e,16):Number(e)?Number(e):0,r.isPlainObject=function(e){return Boolean(e)&&"object"==typeof e&&!Array.isArray(e)},r.isNonEmptyArray=function(e){return Array.isArray(e)&&e.length>0},r.isValidJson=function(e){try{return d.default.call(void 0,e,JSON.parse(JSON.stringify(e)))}catch(e){return!1}}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/user-operation-controller>@metamask/controller-utils",file:"node_modules/@metamask/user-operation-controller/node_modules/@metamask/controller-utils/dist/chunk-EDY72VWL.js"}],[2228,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var i={mainnet:"mainnet",goerli:"goerli",sepolia:"sepolia","linea-goerli":"linea-goerli","linea-sepolia":"linea-sepolia","linea-mainnet":"linea-mainnet"},a={...i,rpc:"rpc"};var n=(e=>(e.Mainnet="mainnet",e.Goerli="goerli",e.Sepolia="sepolia",e.LineaGoerli="linea-goerli",e.LineaSepolia="linea-sepolia",e.LineaMainnet="linea-mainnet",e.Aurora="aurora",e))(n||{}),s={mainnet:"0x1",goerli:"0x5",sepolia:"0xaa36a7",aurora:"0x4e454152","linea-goerli":"0xe704","linea-sepolia":"0xe705","linea-mainnet":"0xe708"},o=(e=>(e.mainnet="ETH",e.goerli="GoerliETH",e.sepolia="SepoliaETH",e["linea-goerli"]="LineaETH",e["linea-sepolia"]="LineaETH",e["linea-mainnet"]="ETH",e.rpc="",e))(o||{});r.InfuraNetworkType=i,r.NetworkType=a,r.isNetworkType=function(e){return Object.values(a).includes(e)},r.isInfuraNetworkType=function(e){return Object.keys(i).includes(e)},r.BuiltInNetworkName=n,r.ChainId=s,r.NetworksTicker=o}}},{package:"@metamask/user-operation-controller>@metamask/controller-utils",file:"node_modules/@metamask/user-operation-controller/node_modules/@metamask/controller-utils/dist/chunk-LGGBBU6G.js"}],[2229,{"./chunk-DBJSLKNR.js":2226,"@metamask/utils":2253,"@spruceid/siwe-parser":2468,buffer:2970},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0});var i=e("./chunk-DBJSLKNR.js"),a=e("@metamask/utils"),n=e("@spruceid/siwe-parser"),s=i.createModuleLogger.call(void 0,i.projectLogger,"detect-siwe");function o(e){try{const i="string"!=typeof(r=e)?r:a.remove0x.call(void 0,r),n=t.from(i,"hex");return 32===n.length?e:n.toString("utf8")}catch(t){return s(t),e}var r}var l={"http:":"80","https:":"443"},c=(e,t)=>e.match(/^[^/:]*:\/\//u)?new URL(e):new URL(`${t}//${e}`);r.parseDomainParts=c,r.isValidSIWEOrigin=e=>{try{const{origin:t,siwe:r}=e;if(!t||!r?.parsedMessage?.domain)return!1;const i=new URL(t),a=c(r.parsedMessage.domain,i.protocol);return 0===a.hostname.localeCompare(i.hostname,void 0,{sensitivity:"accent"})&&(""!==a.port&&a.port!==i.port?""===i.port&&a.port===l[i.protocol]:""===a.username||a.username===i.username)}catch(e){return s(e),!1}},r.detectSIWE=e=>{try{const{data:t}=e,r=o(t);return{isSIWEMessage:!0,parsedMessage:new(0,n.ParsedMessage)(r)}}catch(e){return{isSIWEMessage:!1,parsedMessage:null}}}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/user-operation-controller>@metamask/controller-utils",file:"node_modules/@metamask/user-operation-controller/node_modules/@metamask/controller-utils/dist/chunk-M6G3ISXG.js"}],[223,{lodash:3770,uuid:4341},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.migrate=async function(e){const t=(0,i.cloneDeep)(e);return t.meta.version=n,function(e){const t=(null==e?void 0:e.TransactionController)||{},r=(null==t?void 0:t.transactions)||{};if((0,i.isEmpty)(r))return;const n=Object.keys(r).reduce(((e,t)=>{const n=(0,i.cloneDeep)(r[t]),s=(0,a.v1)();return n.id=s,{...e,[s]:n}}),{});e.TransactionController={...t,transactions:n}}(t.data),t},r.version=void 0;var i=e("lodash"),a=e("uuid");const n=r.version=99}}},{package:"$root$",file:"app/scripts/migrations/099.ts"}],[2230,{"./chunk-LGGBBU6G.js":2228},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var i=e("./chunk-LGGBBU6G.js"),a={[i.NetworkType.goerli]:{chainId:i.ChainId.goerli,ticker:"GoerliETH",rpcPrefs:{blockExplorerUrl:`https://${i.NetworkType.goerli}.etherscan.io`}},[i.NetworkType.sepolia]:{chainId:i.ChainId.sepolia,ticker:"SepoliaETH",rpcPrefs:{blockExplorerUrl:`https://${i.NetworkType.sepolia}.etherscan.io`}},[i.NetworkType.mainnet]:{chainId:i.ChainId.mainnet,ticker:"ETH",rpcPrefs:{blockExplorerUrl:"https://etherscan.io"}},[i.NetworkType["linea-goerli"]]:{chainId:i.ChainId["linea-goerli"],ticker:"LineaETH",rpcPrefs:{blockExplorerUrl:"https://goerli.lineascan.build"}},[i.NetworkType["linea-sepolia"]]:{chainId:i.ChainId["linea-sepolia"],ticker:"LineaETH",rpcPrefs:{blockExplorerUrl:"https://sepolia.lineascan.build"}},[i.NetworkType["linea-mainnet"]]:{chainId:i.ChainId["linea-mainnet"],ticker:"ETH",rpcPrefs:{blockExplorerUrl:"https://lineascan.build"}},[i.NetworkType.rpc]:{chainId:void 0,blockExplorerUrl:void 0,ticker:void 0,rpcPrefs:void 0}},n=(e=>(e.AddEthereumChain="wallet_addEthereumChain",e.ConnectAccounts="connect_accounts",e.EthDecrypt="eth_decrypt",e.EthGetEncryptionPublicKey="eth_getEncryptionPublicKey",e.EthSign="eth_sign",e.EthSignTypedData="eth_signTypedData",e.PersonalSign="personal_sign",e.ResultError="result_error",e.ResultSuccess="result_success",e.SnapDialogAlert="snap_dialog:alert",e.SnapDialogConfirmation="snap_dialog:confirmation",e.SnapDialogPrompt="snap_dialog:prompt",e.SwitchEthereumChain="wallet_switchEthereumChain",e.Transaction="transaction",e.Unlock="unlock",e.WalletConnect="wallet_connect",e.WalletRequestPermissions="wallet_requestPermissions",e.WatchAsset="wallet_watchAsset",e))(n||{}),s={[i.ChainId.goerli]:"goerli",[i.ChainId.sepolia]:"sepolia",[i.ChainId.mainnet]:"mainnet",[i.ChainId["linea-goerli"]]:"linea-goerli",[i.ChainId["linea-sepolia"]]:"linea-sepolia",[i.ChainId["linea-mainnet"]]:"linea-mainnet",[i.ChainId.aurora]:"aurora"};r.RPC="rpc",r.FALL_BACK_VS_CURRENCY="ETH",r.IPFS_DEFAULT_GATEWAY_URL="https://cloudflare-ipfs.com/ipfs/",r.GANACHE_CHAIN_ID="0x539",r.MAX_SAFE_CHAIN_ID=0xfffffffffffec,r.ERC721="ERC721",r.ERC1155="ERC1155",r.ERC20="ERC20",r.ERC721_INTERFACE_ID="0x80ac58cd",r.ERC721_METADATA_INTERFACE_ID="0x5b5e139f",r.ERC721_ENUMERABLE_INTERFACE_ID="0x780e9d63",r.ERC1155_INTERFACE_ID="0xd9b67a26",r.ERC1155_METADATA_URI_INTERFACE_ID="0x0e89341c",r.ERC1155_TOKEN_RECEIVER_INTERFACE_ID="0x4e2312e0",r.GWEI="gwei",r.ASSET_TYPES={NATIVE:"NATIVE",TOKEN:"TOKEN",NFT:"NFT",UNKNOWN:"UNKNOWN"},r.TESTNET_TICKER_SYMBOLS={GOERLI:"GoerliETH",SEPOLIA:"SepoliaETH",LINEA_GOERLI:"LineaETH",LINEA_SEPOLIA:"LineaETH"},r.BUILT_IN_NETWORKS=a,r.OPENSEA_PROXY_URL="https://proxy.metafi.codefi.network/opensea/v1/api/v2",r.NFT_API_BASE_URL="https://nft.api.cx.metamask.io",r.ORIGIN_METAMASK="metamask",r.ApprovalType=n,r.CHAIN_ID_TO_ETHERS_NETWORK_NAME_MAP=s}}},{package:"@metamask/user-operation-controller>@metamask/controller-utils",file:"node_modules/@metamask/user-operation-controller/node_modules/@metamask/controller-utils/dist/chunk-X4PYR7CK.js"}],[2231,{"./chunk-DBJSLKNR.js":2226,"./chunk-EDY72VWL.js":2227,"./chunk-LGGBBU6G.js":2228,"./chunk-M6G3ISXG.js":2229,"./chunk-X4PYR7CK.js":2230},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var i=e("./chunk-M6G3ISXG.js");e("./chunk-DBJSLKNR.js");var a=e("./chunk-EDY72VWL.js"),n=e("./chunk-X4PYR7CK.js"),s=e("./chunk-LGGBBU6G.js");r.ASSET_TYPES=n.ASSET_TYPES,r.ApprovalType=n.ApprovalType,r.BNToHex=a.BNToHex,r.BUILT_IN_NETWORKS=n.BUILT_IN_NETWORKS,r.BuiltInNetworkName=s.BuiltInNetworkName,r.CHAIN_ID_TO_ETHERS_NETWORK_NAME_MAP=n.CHAIN_ID_TO_ETHERS_NETWORK_NAME_MAP,r.ChainId=s.ChainId,r.ERC1155=n.ERC1155,r.ERC1155_INTERFACE_ID=n.ERC1155_INTERFACE_ID,r.ERC1155_METADATA_URI_INTERFACE_ID=n.ERC1155_METADATA_URI_INTERFACE_ID,r.ERC1155_TOKEN_RECEIVER_INTERFACE_ID=n.ERC1155_TOKEN_RECEIVER_INTERFACE_ID,r.ERC20=n.ERC20,r.ERC721=n.ERC721,r.ERC721_ENUMERABLE_INTERFACE_ID=n.ERC721_ENUMERABLE_INTERFACE_ID,r.ERC721_INTERFACE_ID=n.ERC721_INTERFACE_ID,r.ERC721_METADATA_INTERFACE_ID=n.ERC721_METADATA_INTERFACE_ID,r.FALL_BACK_VS_CURRENCY=n.FALL_BACK_VS_CURRENCY,r.GANACHE_CHAIN_ID=n.GANACHE_CHAIN_ID,r.GWEI=n.GWEI,r.IPFS_DEFAULT_GATEWAY_URL=n.IPFS_DEFAULT_GATEWAY_URL,r.InfuraNetworkType=s.InfuraNetworkType,r.MAX_SAFE_CHAIN_ID=n.MAX_SAFE_CHAIN_ID,r.NFT_API_BASE_URL=n.NFT_API_BASE_URL,r.NetworkType=s.NetworkType,r.NetworksTicker=s.NetworksTicker,r.OPENSEA_PROXY_URL=n.OPENSEA_PROXY_URL,r.ORIGIN_METAMASK=n.ORIGIN_METAMASK,r.RPC=n.RPC,r.TESTNET_TICKER_SYMBOLS=n.TESTNET_TICKER_SYMBOLS,r.convertHexToDecimal=a.convertHexToDecimal,r.detectSIWE=i.detectSIWE,r.fetchWithErrorHandling=a.fetchWithErrorHandling,r.fractionBN=a.fractionBN,r.fromHex=a.fromHex,r.getBuyURL=a.getBuyURL,r.gweiDecToWEIBN=a.gweiDecToWEIBN,r.handleFetch=a.handleFetch,r.hexToBN=a.hexToBN,r.hexToText=a.hexToText,r.isInfuraNetworkType=s.isInfuraNetworkType,r.isNetworkType=s.isNetworkType,r.isNonEmptyArray=a.isNonEmptyArray,r.isPlainObject=a.isPlainObject,r.isSafeChainId=a.isSafeChainId,r.isSafeDynamicKey=a.isSafeDynamicKey,r.isSmartContractCode=a.isSmartContractCode,r.isValidHexAddress=a.isValidHexAddress,r.isValidJson=a.isValidJson,r.isValidSIWEOrigin=i.isValidSIWEOrigin,r.normalizeEnsName=a.normalizeEnsName,r.parseDomainParts=i.parseDomainParts,r.query=a.query,r.safelyExecute=a.safelyExecute,r.safelyExecuteWithTimeout=a.safelyExecuteWithTimeout,r.successfulFetch=a.successfulFetch,r.timeoutFetch=a.timeoutFetch,r.toChecksumHexAddress=a.toChecksumHexAddress,r.toHex=a.toHex,r.weiHexToGweiDec=a.weiHexToGweiDec}}},{package:"@metamask/user-operation-controller>@metamask/controller-utils",file:"node_modules/@metamask/user-operation-controller/node_modules/@metamask/controller-utils/dist/index.js"}],[224,{lodash:3770},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.migrate=async function(e){const t=(0,i.cloneDeep)(e);return t.meta.version=a,function(e){var t,r;const a=(null==e||null===(t=e.AddressBookController)||void 0===t?void 0:t.addressBook)??{},n=(null==e||null===(r=e.NameController)||void 0===r||null===(r=r.names)||void 0===r?void 0:r.ethereumAddress)??{};if((0,i.isEmpty)(Object.keys(a)))return;for(const e of Object.keys(a)){const t=a[e];for(const r of Object.keys(t)){var s,o;const i=t[r],a=r.toLowerCase(),l=n[a]??{};null!==(s=(l[e]??{}).name)&&void 0!==s&&s.length||null===(o=i.name)||void 0===o||!o.length||null==a||!a.length||(n[a]=l,l[e]={name:i.name,sourceId:i.isEns?"ens":null,proposedNames:{}})}}e.NameController={...e.NameController,names:{ethereumAddress:n}}}(t.data),t},r.version=void 0;var i=e("lodash");const a=r.version=100}}},{package:"$root$",file:"app/scripts/migrations/100.ts"}],[225,{"@metamask/utils":2253,lodash:3770},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.migrate=async function(e){const t=(0,a.cloneDeep)(e);return t.meta.version=n,function(e){if((0,i.hasProperty)(e,"NetworkController")&&(0,i.isObject)(e.NetworkController)&&(0,i.hasProperty)(e.NetworkController,"networkId")){const t=e.NetworkController;return delete t.networkId,{...e,NetworkController:t}}var t,r;(0,i.isObject)(e.NetworkController)||null===(t=global.sentry)||void 0===t||null===(r=t.captureException)||void 0===r||r.call(t,new Error("typeof state.NetworkController is "+typeof e.NetworkController))}(t.data),t},r.version=void 0;var i=e("@metamask/utils"),a=e("lodash");const n=r.version=101}}},{package:"$root$",file:"app/scripts/migrations/101.ts"}],[2254,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=function(e){if(e.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),r=0;r<t.length;r++)t[r]=255;for(var i=0;i<e.length;i++){var a=e.charAt(i),n=a.charCodeAt(0);if(255!==t[n])throw new TypeError(a+" is ambiguous");t[n]=i}var s=e.length,o=e.charAt(0),l=Math.log(s)/Math.log(256),c=Math.log(256)/Math.log(s);function d(e){if("string"!=typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;var r=0;if(" "!==e[r]){for(var i=0,a=0;e[r]===o;)i++,r++;for(var n=(e.length-r)*l+1>>>0,c=new Uint8Array(n);e[r];){var d=t[e.charCodeAt(r)];if(255===d)return;for(var u=0,h=n-1;(0!==d||u<a)&&-1!==h;h--,u++)d+=s*c[h]>>>0,c[h]=d%256>>>0,d=d/256>>>0;if(0!==d)throw new Error("Non-zero carry");a=u,r++}if(" "!==e[r]){for(var p=n-a;p!==n&&0===c[p];)p++;for(var m=new Uint8Array(i+(n-p)),f=i;p!==n;)m[f++]=c[p++];return m}}}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";for(var r=0,i=0,a=0,n=t.length;a!==n&&0===t[a];)a++,r++;for(var l=(n-a)*c+1>>>0,d=new Uint8Array(l);a!==n;){for(var u=t[a],h=0,p=l-1;(0!==u||h<i)&&-1!==p;p--,h++)u+=256*d[p]>>>0,d[p]=u%s>>>0,u=u/s>>>0;if(0!==u)throw new Error("Non-zero carry");i=h,a++}for(var m=l-i;m!==l&&0===d[m];)m++;for(var f=o.repeat(r);m<l;++m)f+=e.charAt(d[m]);return f},decodeUnsafe:d,decode:function(e){var t=d(e);if(t)return t;throw new Error("Non-base"+s+" character")}}}}}},{package:"@ensdomains/content-hash>cids>multibase>@multiformats/base-x",file:"node_modules/@multiformats/base-x/src/index.js"}],[226,{lodash:3770},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.migrate=async function(e){const t=(0,i.cloneDeep)(e);return t.meta.version=a,function(e){const t=(null==e?void 0:e.TransactionController)||{},r=(null==t?void 0:t.transactions)||{};if((0,i.isEmpty)(r))return;const a=Object.keys(r).reduce(((e,t)=>{const a=(0,i.cloneDeep)(r[t]);return null!=a&&a.err&&(a.error=a.err,delete a.err),{...e,[t]:a}}),{});e.TransactionController={...t,transactions:a}}(t.data),t},r.version=void 0;var i=e("lodash");const a=r.version=102}}},{package:"$root$",file:"app/scripts/migrations/102.ts"}],[2268,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){function i(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`positive integer expected, not ${e}`)}function a(e){if("boolean"!=typeof e)throw new Error(`boolean expected, not ${e}`)}function n(e){return e instanceof Uint8Array||null!=e&&"object"==typeof e&&"Uint8Array"===e.constructor.name}function s(e,...t){if(!n(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error(`Uint8Array expected of length ${t}, not of length=${e.length}`)}function o(e){if("function"!=typeof e||"function"!=typeof e.create)throw new Error("hash must be wrapped by utils.wrapConstructor");i(e.outputLen),i(e.blockLen)}function l(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function c(e,t){s(e);const r=t.outputLen;if(e.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}Object.defineProperty(r,"__esModule",{value:!0}),r.output=r.exists=r.hash=r.bytes=r.bool=r.number=r.isBytes=void 0,r.number=i,r.bool=a,r.isBytes=n,r.bytes=s,r.hash=o,r.exists=l,r.output=c;const d={number:i,bool:a,bytes:s,hash:o,exists:l,output:c};r.default=d}}},{package:"@noble/ciphers",file:"node_modules/@noble/ciphers/_assert.js"}],[2269,{"./_assert.js":2268,"./utils.js":2272},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.polyval=r.ghash=r._toGHASHKey=void 0;const i=e("./utils.js"),a=e("./_assert.js"),n=16,s=new Uint8Array(16),o=(0,i.u32)(s),l=e=>(e>>>0&255)<<24|(e>>>8&255)<<16|(e>>>16&255)<<8|e>>>24&255;function c(e){e.reverse();const t=1&e[15];let r=0;for(let t=0;t<e.length;t++){const i=e[t];e[t]=i>>>1|r,r=(1&i)<<7}return e[0]^=225&-t,e}r._toGHASHKey=c;class d{constructor(e,t){this.blockLen=n,this.outputLen=n,this.s0=0,this.s1=0,this.s2=0,this.s3=0,this.finished=!1,e=(0,i.toBytes)(e),(0,a.bytes)(e,16);const r=(0,i.createView)(e);let s=r.getUint32(0,!1),o=r.getUint32(4,!1),c=r.getUint32(8,!1),d=r.getUint32(12,!1);const u=[];for(let e=0;e<128;e++)u.push({s0:l(s),s1:l(o),s2:l(c),s3:l(d)}),({s0:s,s1:o,s2:c,s3:d}={s3:(m=c)<<31|(f=d)>>>1,s2:(p=o)<<31|m>>>1,s1:(h=s)<<31|p>>>1,s0:h>>>1^225<<24&-(1&f)});var h,p,m,f;const v=(g=t||1024)>65536?8:g>1024?4:2;var g;if(![1,2,4,8].includes(v))throw new Error(`ghash: wrong window size=${v}, should be 2, 4 or 8`);this.W=v;const _=128/v,k=this.windowSize=2**v,y=[];for(let e=0;e<_;e++)for(let t=0;t<k;t++){let r=0,i=0,a=0,n=0;for(let s=0;s<v;s++){if(!(t>>>v-s-1&1))continue;const{s0:o,s1:l,s2:c,s3:d}=u[v*e+s];r^=o,i^=l,a^=c,n^=d}y.push({s0:r,s1:i,s2:a,s3:n})}this.t=y}_updateBlock(e,t,r,i){e^=this.s0,t^=this.s1,r^=this.s2,i^=this.s3;const{W:a,t:n,windowSize:s}=this;let o=0,l=0,c=0,d=0;const u=(1<<a)-1;let h=0;for(const p of[e,t,r,i])for(let e=0;e<4;e++){const t=p>>>8*e&255;for(let e=8/a-1;e>=0;e--){const r=t>>>a*e&u,{s0:i,s1:p,s2:m,s3:f}=n[h*s+r];o^=i,l^=p,c^=m,d^=f,h+=1}}this.s0=o,this.s1=l,this.s2=c,this.s3=d}update(e){e=(0,i.toBytes)(e),(0,a.exists)(this);const t=(0,i.u32)(e),r=Math.floor(e.length/n),l=e.length%n;for(let e=0;e<r;e++)this._updateBlock(t[4*e+0],t[4*e+1],t[4*e+2],t[4*e+3]);return l&&(s.set(e.subarray(r*n)),this._updateBlock(o[0],o[1],o[2],o[3]),o.fill(0)),this}destroy(){const{t:e}=this;for(const t of e)t.s0=0,t.s1=0,t.s2=0,t.s3=0}digestInto(e){(0,a.exists)(this),(0,a.output)(e,this),this.finished=!0;const{s0:t,s1:r,s2:n,s3:s}=this,o=(0,i.u32)(e);return o[0]=t,o[1]=r,o[2]=n,o[3]=s,e}digest(){const e=new Uint8Array(n);return this.digestInto(e),this.destroy(),e}}class u extends d{constructor(e,t){const r=c((e=(0,i.toBytes)(e)).slice());super(r,t),r.fill(0)}update(e){e=(0,i.toBytes)(e),(0,a.exists)(this);const t=(0,i.u32)(e),r=e.length%n,c=Math.floor(e.length/n);for(let e=0;e<c;e++)this._updateBlock(l(t[4*e+3]),l(t[4*e+2]),l(t[4*e+1]),l(t[4*e+0]));return r&&(s.set(e.subarray(c*n)),this._updateBlock(l(o[3]),l(o[2]),l(o[1]),l(o[0])),o.fill(0)),this}digestInto(e){(0,a.exists)(this),(0,a.output)(e,this),this.finished=!0;const{s0:t,s1:r,s2:n,s3:s}=this,o=(0,i.u32)(e);return o[0]=t,o[1]=r,o[2]=n,o[3]=s,e.reverse()}}function h(e){const t=(t,r)=>e(r,t.length).update((0,i.toBytes)(t)).digest(),r=e(new Uint8Array(16),0);return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=(t,r)=>e(t,r),t}r.ghash=h(((e,t)=>new d(e,t))),r.polyval=h(((e,t)=>new u(e,t)))}}},{package:"@noble/ciphers",file:"node_modules/@noble/ciphers/_polyval.js"}],[227,{"../../../shared/constants/hardware-wallets":4417,"@metamask/utils":2253,lodash:3770},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.migrate=async function(e){const t=(0,a.cloneDeep)(e);return t.meta.version=s,t.data=function(e){if((0,i.hasProperty)(e,"PreferencesController")&&(0,i.isObject)(e.PreferencesController)&&window.navigator.userAgent.includes("Chrome")){const t=e.PreferencesController;return t.ledgerTransportType=n.LedgerTransportTypes.webhid,{...e,PreferencesController:t}}return e}(t.data),t},r.version=void 0;var i=e("@metamask/utils"),a=e("lodash"),n=e("../../../shared/constants/hardware-wallets");const s=r.version=103}}},{package:"$root$",file:"app/scripts/migrations/103.ts"}],[2270,{"./_assert.js":2268,"./_polyval.js":2269,"./utils.js":2272},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.unsafe=r.siv=r.gcm=r.cfb=r.cbc=r.ecb=r.ctr=r.expandKeyDecLE=r.expandKeyLE=void 0;const i=e("./utils.js"),a=e("./_polyval.js"),n=e("./_assert.js"),s=16,o=new Uint8Array(s),l=283;function c(e){return e<<1^l&-(e>>7)}function d(e,t){let r=0;for(;t>0;t>>=1)r^=e&-(1&t),e=c(e);return r}const u=(()=>{let e=new Uint8Array(256);for(let t=0,r=1;t<256;t++,r^=c(r))e[t]=r;const t=new Uint8Array(256);t[0]=99;for(let r=0;r<255;r++){let i=e[255-r];i|=i<<8,t[e[r]]=255&(i^i>>4^i>>5^i>>6^i>>7^99)}return t})(),h=u.map(((e,t)=>u.indexOf(t))),p=e=>e<<24|e>>>8,m=e=>e<<8|e>>>24;function f(e,t){if(256!==e.length)throw new Error("Wrong sbox length");const r=new Uint32Array(256).map(((r,i)=>t(e[i]))),i=r.map(m),a=i.map(m),n=a.map(m),s=new Uint32Array(65536),o=new Uint32Array(65536),l=new Uint16Array(65536);for(let t=0;t<256;t++)for(let c=0;c<256;c++){const d=256*t+c;s[d]=r[t]^i[c],o[d]=a[t]^n[c],l[d]=e[t]<<8|e[c]}return{sbox:e,sbox2:l,T0:r,T1:i,T2:a,T3:n,T01:s,T23:o}}const v=f(u,(e=>d(e,3)<<24|e<<16|e<<8|d(e,2))),g=f(h,(e=>d(e,11)<<24|d(e,13)<<16|d(e,9)<<8|d(e,14))),_=(()=>{const e=new Uint8Array(16);for(let t=0,r=1;t<16;t++,r=c(r))e[t]=r;return e})();function k(e){(0,n.bytes)(e);const t=e.length;if(![16,24,32].includes(t))throw new Error(`aes: wrong key size: should be 16, 24 or 32, got: ${t}`);const{sbox2:r}=v,a=(0,i.u32)(e),s=a.length,o=e=>T(r,e,e,e,e),l=new Uint32Array(t+28);l.set(a);for(let e=s;e<l.length;e++){let t=l[e-1];e%s==0?t=o(p(t))^_[e/s-1]:s>6&&e%s==4&&(t=o(t)),l[e]=l[e-s]^t}return l}function y(e){const t=k(e),r=t.slice(),i=t.length,{sbox2:a}=v,{T0:n,T1:s,T2:o,T3:l}=g;for(let e=0;e<i;e+=4)for(let a=0;a<4;a++)r[e+a]=t[i-e-4+a];t.fill(0);for(let e=4;e<i-4;e++){const t=r[e],i=T(a,t,t,t,t);r[e]=n[255&i]^s[i>>>8&255]^o[i>>>16&255]^l[i>>>24]}return r}function w(e,t,r,i,a,n){return e[r<<8&65280|i>>>8&255]^t[a>>>8&65280|n>>>24&255]}function T(e,t,r,i,a){return e[255&t|65280&r]|e[i>>>16&255|a>>>16&65280]<<16}function b(e,t,r,i,a){const{sbox2:n,T01:s,T23:o}=v;let l=0;t^=e[l++],r^=e[l++],i^=e[l++],a^=e[l++];const c=e.length/4-2;for(let n=0;n<c;n++){const n=e[l++]^w(s,o,t,r,i,a),c=e[l++]^w(s,o,r,i,a,t),d=e[l++]^w(s,o,i,a,t,r),u=e[l++]^w(s,o,a,t,r,i);t=n,r=c,i=d,a=u}return{s0:e[l++]^T(n,t,r,i,a),s1:e[l++]^T(n,r,i,a,t),s2:e[l++]^T(n,i,a,t,r),s3:e[l++]^T(n,a,t,r,i)}}function E(e,t,r,i,a){const{sbox2:n,T01:s,T23:o}=g;let l=0;t^=e[l++],r^=e[l++],i^=e[l++],a^=e[l++];const c=e.length/4-2;for(let n=0;n<c;n++){const n=e[l++]^w(s,o,t,a,i,r),c=e[l++]^w(s,o,r,t,a,i),d=e[l++]^w(s,o,i,r,t,a),u=e[l++]^w(s,o,a,i,r,t);t=n,r=c,i=d,a=u}return{s0:e[l++]^T(n,t,a,i,r),s1:e[l++]^T(n,r,t,a,i),s2:e[l++]^T(n,i,r,t,a),s3:e[l++]^T(n,a,i,r,t)}}function S(e,t){if(!t)return new Uint8Array(e);if((0,n.bytes)(t),t.length<e)throw new Error(`aes: wrong destination length, expected at least ${e}, got: ${t.length}`);return t}function P(e,t,r,a){(0,n.bytes)(t,s),(0,n.bytes)(r);const o=r.length;a=S(o,a);const l=t,c=(0,i.u32)(l);let{s0:d,s1:u,s2:h,s3:p}=b(e,c[0],c[1],c[2],c[3]);const m=(0,i.u32)(r),f=(0,i.u32)(a);for(let t=0;t+4<=m.length;t+=4){f[t+0]=m[t+0]^d,f[t+1]=m[t+1]^u,f[t+2]=m[t+2]^h,f[t+3]=m[t+3]^p;let r=1;for(let e=l.length-1;e>=0;e--)r=r+(255&l[e])|0,l[e]=255&r,r>>>=8;({s0:d,s1:u,s2:h,s3:p}=b(e,c[0],c[1],c[2],c[3]))}const v=s*Math.floor(m.length/4);if(v<o){const e=new Uint32Array([d,u,h,p]),t=(0,i.u8)(e);for(let e=v,i=0;e<o;e++,i++)a[e]=r[e]^t[i]}return a}function C(e,t,r,a,o){(0,n.bytes)(r,s),(0,n.bytes)(a),o=S(a.length,o);const l=r,c=(0,i.u32)(l),d=(0,i.createView)(l),u=(0,i.u32)(a),h=(0,i.u32)(o),p=t?0:12,m=a.length;let f=d.getUint32(p,t),{s0:v,s1:g,s2:_,s3:k}=b(e,c[0],c[1],c[2],c[3]);for(let r=0;r+4<=u.length;r+=4)h[r+0]=u[r+0]^v,h[r+1]=u[r+1]^g,h[r+2]=u[r+2]^_,h[r+3]=u[r+3]^k,f=f+1>>>0,d.setUint32(p,f,t),({s0:v,s1:g,s2:_,s3:k}=b(e,c[0],c[1],c[2],c[3]));const y=s*Math.floor(u.length/4);if(y<m){const e=new Uint32Array([v,g,_,k]),t=(0,i.u8)(e);for(let e=y,r=0;e<m;e++,r++)o[e]=a[e]^t[r]}return o}function A(e){if((0,n.bytes)(e),e.length%s!=0)throw new Error("aes/(cbc-ecb).decrypt ciphertext should consist of blocks with size 16")}function I(e,t,r){let a=e.length;const n=a%s;if(!t&&0!==n)throw new Error("aec/(cbc-ecb): unpadded plaintext with disabled padding");const o=(0,i.u32)(e);if(t){let e=s-n;e||(e=s),a+=e}const l=S(a,r);return{b:o,o:(0,i.u32)(l),out:l}}function j(e,t){if(!t)return e;const r=e.length;if(!r)throw new Error("aes/pcks5: empty ciphertext not allowed");const i=e[r-1];if(i<=0||i>16)throw new Error(`aes/pcks5: wrong padding byte: ${i}`);const a=e.subarray(0,-i);for(let t=0;t<i;t++)if(e[r-t-1]!==i)throw new Error("aes/pcks5: wrong padding");return a}function M(e){const t=new Uint8Array(16),r=(0,i.u32)(t);t.set(e);const a=s-e.length;for(let e=s-a;e<s;e++)t[e]=a;return r}function x(e,t,r,a,n){const s=e.create(r,a.length+(n?.length||0));n&&s.update(n),s.update(a);const o=new Uint8Array(16),l=(0,i.createView)(o);return n&&(0,i.setBigUint64)(l,0,BigInt(8*n.length),t),(0,i.setBigUint64)(l,8,BigInt(8*a.length),t),s.update(o),s.digest()}r.expandKeyLE=k,r.expandKeyDecLE=y,r.ctr=(0,i.wrapCipher)({blockSize:16,nonceLength:16},(function(e,t){function r(r,i){const a=k(e),n=t.slice(),s=P(a,n,r,i);return a.fill(0),n.fill(0),s}return(0,n.bytes)(e),(0,n.bytes)(t,s),{encrypt:(e,t)=>r(e,t),decrypt:(e,t)=>r(e,t)}})),r.ecb=(0,i.wrapCipher)({blockSize:16},(function(e,t={}){(0,n.bytes)(e);const r=!t.disablePadding;return{encrypt:(t,i)=>{(0,n.bytes)(t);const{b:a,o:s,out:o}=I(t,r,i),l=k(e);let c=0;for(;c+4<=a.length;){const{s0:e,s1:t,s2:r,s3:i}=b(l,a[c+0],a[c+1],a[c+2],a[c+3]);s[c++]=e,s[c++]=t,s[c++]=r,s[c++]=i}if(r){const e=M(t.subarray(4*c)),{s0:r,s1:i,s2:a,s3:n}=b(l,e[0],e[1],e[2],e[3]);s[c++]=r,s[c++]=i,s[c++]=a,s[c++]=n}return l.fill(0),o},decrypt:(t,a)=>{A(t);const n=y(e),s=S(t.length,a),o=(0,i.u32)(t),l=(0,i.u32)(s);for(let e=0;e+4<=o.length;){const{s0:t,s1:r,s2:i,s3:a}=E(n,o[e+0],o[e+1],o[e+2],o[e+3]);l[e++]=t,l[e++]=r,l[e++]=i,l[e++]=a}return n.fill(0),j(s,r)}}})),r.cbc=(0,i.wrapCipher)({blockSize:16,nonceLength:16},(function(e,t,r={}){(0,n.bytes)(e),(0,n.bytes)(t,16);const a=!r.disablePadding;return{encrypt:(r,n)=>{const s=k(e),{b:o,o:l,out:c}=I(r,a,n),d=(0,i.u32)(t);let u=d[0],h=d[1],p=d[2],m=d[3],f=0;for(;f+4<=o.length;)u^=o[f+0],h^=o[f+1],p^=o[f+2],m^=o[f+3],({s0:u,s1:h,s2:p,s3:m}=b(s,u,h,p,m)),l[f++]=u,l[f++]=h,l[f++]=p,l[f++]=m;if(a){const e=M(r.subarray(4*f));u^=e[0],h^=e[1],p^=e[2],m^=e[3],({s0:u,s1:h,s2:p,s3:m}=b(s,u,h,p,m)),l[f++]=u,l[f++]=h,l[f++]=p,l[f++]=m}return s.fill(0),c},decrypt:(r,n)=>{A(r);const s=y(e),o=(0,i.u32)(t),l=S(r.length,n),c=(0,i.u32)(r),d=(0,i.u32)(l);let u=o[0],h=o[1],p=o[2],m=o[3];for(let e=0;e+4<=c.length;){const t=u,r=h,i=p,a=m;u=c[e+0],h=c[e+1],p=c[e+2],m=c[e+3];const{s0:n,s1:o,s2:l,s3:f}=E(s,u,h,p,m);d[e++]=n^t,d[e++]=o^r,d[e++]=l^i,d[e++]=f^a}return s.fill(0),j(l,a)}}})),r.cfb=(0,i.wrapCipher)({blockSize:16,nonceLength:16},(function(e,t){function r(r,a,n){const o=k(e),l=r.length;n=S(l,n);const c=(0,i.u32)(r),d=(0,i.u32)(n),u=a?d:c,h=(0,i.u32)(t);let p=h[0],m=h[1],f=h[2],v=h[3];for(let e=0;e+4<=c.length;){const{s0:t,s1:r,s2:i,s3:a}=b(o,p,m,f,v);d[e+0]=c[e+0]^t,d[e+1]=c[e+1]^r,d[e+2]=c[e+2]^i,d[e+3]=c[e+3]^a,p=u[e++],m=u[e++],f=u[e++],v=u[e++]}const g=s*Math.floor(c.length/4);if(g<l){({s0:p,s1:m,s2:f,s3:v}=b(o,p,m,f,v));const e=(0,i.u8)(new Uint32Array([p,m,f,v]));for(let t=g,i=0;t<l;t++,i++)n[t]=r[t]^e[i];e.fill(0)}return o.fill(0),n}return(0,n.bytes)(e),(0,n.bytes)(t,16),{encrypt:(e,t)=>r(e,!0,t),decrypt:(e,t)=>r(e,!1,t)}})),r.gcm=(0,i.wrapCipher)({blockSize:16,nonceLength:12,tagLength:16},(function(e,t,r){if((0,n.bytes)(t),0===t.length)throw new Error("aes/gcm: empty nonce");const s=16;function l(e,t,i){const n=x(a.ghash,!1,e,i,r);for(let e=0;e<t.length;e++)n[e]^=t[e];return n}function c(){const r=k(e),n=o.slice(),s=o.slice();if(C(r,!1,s,s,n),12===t.length)s.set(t);else{const e=o.slice(),r=(0,i.createView)(e);(0,i.setBigUint64)(r,8,BigInt(8*t.length),!1),a.ghash.create(n).update(t).update(e).digestInto(s)}return{xk:r,authKey:n,counter:s,tagMask:C(r,!1,s,o)}}return{encrypt:e=>{(0,n.bytes)(e);const{xk:t,authKey:r,counter:i,tagMask:a}=c(),o=new Uint8Array(e.length+s);C(t,!1,i,e,o);const d=l(r,a,o.subarray(0,o.length-s));return o.set(d,e.length),t.fill(0),o},decrypt:e=>{if((0,n.bytes)(e),e.length<s)throw new Error("aes/gcm: ciphertext less than tagLen (16)");const{xk:t,authKey:r,counter:a,tagMask:o}=c(),d=e.subarray(0,-16),u=e.subarray(-16),h=l(r,o,d);if(!(0,i.equalBytes)(h,u))throw new Error("aes/gcm: invalid ghash tag");const p=C(t,!1,a,d);return r.fill(0),o.fill(0),t.fill(0),p}}}));const N=(e,t,r)=>i=>{if(!Number.isSafeInteger(i)||t>i||i>r)throw new Error(`${e}: invalid value=${i}, must be [${t}..${r}]`)};function O(e){return null!=e&&"object"==typeof e&&(e instanceof Uint32Array||"Uint32Array"===e.constructor.name)}r.siv=(0,i.wrapCipher)({blockSize:16,nonceLength:12,tagLength:16},(function(e,t,r){const s=N("AAD",0,2**36),o=N("plaintext",0,2**36),l=N("nonce",12,12),c=N("ciphertext",16,2**36+16);function d(){const r=e.length;if(16!==r&&24!==r&&32!==r)throw new Error(`key length must be 16, 24 or 32 bytes, got: ${r} bytes`);const a=k(e),n=new Uint8Array(r),s=new Uint8Array(16),o=(0,i.u32)(t);let l=0,c=o[0],d=o[1],u=o[2],h=0;for(const e of[s,n].map(i.u32)){const t=(0,i.u32)(e);for(let e=0;e<t.length;e+=2){const{s0:r,s1:i}=b(a,l,c,d,u);t[e+0]=r,t[e+1]=i,l=++h}}return a.fill(0),{authKey:s,encKey:k(n)}}function u(e,n,s){const o=x(a.polyval,!0,n,s,r);for(let e=0;e<12;e++)o[e]^=t[e];o[15]&=127;const l=(0,i.u32)(o);let c=l[0],d=l[1],u=l[2],h=l[3];return({s0:c,s1:d,s2:u,s3:h}=b(e,c,d,u,h)),l[0]=c,l[1]=d,l[2]=u,l[3]=h,o}function h(e,t,r){let i=t.slice();return i[15]|=128,C(e,!0,i,r)}return(0,n.bytes)(t),l(t.length),r&&((0,n.bytes)(r),s(r.length)),{encrypt:e=>{(0,n.bytes)(e),o(e.length);const{encKey:t,authKey:r}=d(),i=u(t,r,e),a=new Uint8Array(e.length+16);return a.set(i,e.length),a.set(h(t,i,e)),t.fill(0),r.fill(0),a},decrypt:e=>{(0,n.bytes)(e),c(e.length);const t=e.subarray(-16),{encKey:r,authKey:a}=d(),s=h(r,t,e.subarray(0,-16)),o=u(r,a,s);if(r.fill(0),a.fill(0),!(0,i.equalBytes)(t,o))throw new Error("invalid polyval tag");return s}}})),r.unsafe={expandKeyLE:k,expandKeyDecLE:y,encrypt:b,decrypt:E,encryptBlock:function(e,t){if((0,n.bytes)(t,16),!O(e))throw new Error("_encryptBlock accepts result of expandKeyLE");const r=(0,i.u32)(t);let{s0:a,s1:s,s2:o,s3:l}=b(e,r[0],r[1],r[2],r[3]);return r[0]=a,r[1]=s,r[2]=o,r[3]=l,t},decryptBlock:function(e,t){if((0,n.bytes)(t,16),!O(e))throw new Error("_decryptBlock accepts result of expandKeyLE");const r=(0,i.u32)(t);let{s0:a,s1:s,s2:o,s3:l}=E(e,r[0],r[1],r[2],r[3]);return r[0]=a,r[1]=s,r[2]=o,r[3]=l,t},ctrCounter:P,ctr32:C}}}},{package:"@noble/ciphers",file:"node_modules/@noble/ciphers/aes.js"}],[2271,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getWebcryptoSubtle=r.randomBytes=void 0;const i="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:undefined;r.randomBytes=function(e=32){if(i&&"function"==typeof i.getRandomValues)return i.getRandomValues(new Uint8Array(e));throw new Error("crypto.getRandomValues must be defined")},r.getWebcryptoSubtle=function(){if(i&&"object"==typeof i.subtle&&null!=i.subtle)return i.subtle;throw new Error("crypto.subtle must be defined")}}}},{package:"@noble/ciphers",file:"node_modules/@noble/ciphers/crypto.js"}],[2272,{"./_assert.js":2268},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.u64Lengths=r.setBigUint64=r.wrapCipher=r.Hash=r.equalBytes=r.checkOpts=r.concatBytes=r.toBytes=r.bytesToUtf8=r.utf8ToBytes=r.asyncLoop=r.nextTick=r.numberToBytesBE=r.bytesToNumberBE=r.hexToNumber=r.hexToBytes=r.bytesToHex=r.isLE=r.createView=r.u32=r.u16=r.u8=void 0;
/*! noble-ciphers - MIT License (c) 2023 Paul Miller (paulmillr.com) */
const i=e("./_assert.js");r.u8=e=>new Uint8Array(e.buffer,e.byteOffset,e.byteLength);r.u16=e=>new Uint16Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/2));r.u32=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4));if(r.createView=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),r.isLE=68===new Uint8Array(new Uint32Array([287454020]).buffer)[0],!r.isLE)throw new Error("Non little-endian hardware is not supported");const a=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function n(e){(0,i.bytes)(e);let t="";for(let r=0;r<e.length;r++)t+=a[e[r]];return t}r.bytesToHex=n;const s={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function o(e){return e>=s._0&&e<=s._9?e-s._0:e>=s._A&&e<=s._F?e-(s._A-10):e>=s._a&&e<=s._f?e-(s._a-10):void 0}function l(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);const t=e.length,r=t/2;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const i=new Uint8Array(r);for(let t=0,a=0;t<r;t++,a+=2){const r=o(e.charCodeAt(a)),n=o(e.charCodeAt(a+1));if(r===undefined||n===undefined){const t=e[a]+e[a+1];throw new Error('hex string expected, got non-hex character "'+t+'" at index '+a)}i[t]=16*r+n}return i}function c(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);return BigInt(""===e?"0":`0x${e}`)}r.hexToBytes=l,r.hexToNumber=c,r.bytesToNumberBE=function(e){return c(n(e))},r.numberToBytesBE=function(e,t){return l(e.toString(16).padStart(2*t,"0"))};function d(e){if("string"!=typeof e)throw new Error("string expected, got "+typeof e);return new Uint8Array((new TextEncoder).encode(e))}r.nextTick=async()=>{},r.asyncLoop=async function(e,t,i){let a=Date.now();for(let n=0;n<e;n++){i(n);const e=Date.now()-a;e>=0&&e<t||(await(0,r.nextTick)(),a+=e)}},r.utf8ToBytes=d,r.bytesToUtf8=function(e){return(new TextDecoder).decode(e)},r.toBytes=function(e){if("string"==typeof e)e=d(e);else{if(!(0,i.isBytes)(e))throw new Error("Uint8Array expected, got "+typeof e);e=e.slice()}return e},r.concatBytes=function(...e){let t=0;for(let r=0;r<e.length;r++){const a=e[r];(0,i.bytes)(a),t+=a.length}const r=new Uint8Array(t);for(let t=0,i=0;t<e.length;t++){const a=e[t];r.set(a,i),i+=a.length}return r},r.checkOpts=function(e,t){if(null==t||"object"!=typeof t)throw new Error("options must be defined");return Object.assign(e,t)},r.equalBytes=function(e,t){if(e.length!==t.length)return!1;let r=0;for(let i=0;i<e.length;i++)r|=e[i]^t[i];return 0===r};r.Hash=class{};function u(e,t,r,i){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,r,i);const a=BigInt(32),n=BigInt(4294967295),s=Number(r>>a&n),o=Number(r&n),l=i?4:0,c=i?0:4;e.setUint32(t+l,s,i),e.setUint32(t+c,o,i)}r.wrapCipher=(e,t)=>(Object.assign(t,e),t),r.setBigUint64=u,r.u64Lengths=function(e,t){const i=new Uint8Array(16),a=(0,r.createView)(i);return u(a,0,BigInt(t?t.length:0),!0),u(a,8,BigInt(e.length),!0),i}}}},{package:"@noble/ciphers",file:"node_modules/@noble/ciphers/utils.js"}],[2273,{"./_assert.js":2268,"./utils.js":2272,"@noble/ciphers/crypto":2271},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.gcm=r.ctr=r.cbc=r.utils=r.managedNonce=r.getWebcryptoSubtle=r.randomBytes=void 0;const i=e("@noble/ciphers/crypto");Object.defineProperty(r,"randomBytes",{enumerable:!0,get:function(){return i.randomBytes}}),Object.defineProperty(r,"getWebcryptoSubtle",{enumerable:!0,get:function(){return i.getWebcryptoSubtle}});const a=e("./utils.js"),n=e("./_assert.js");r.managedNonce=function(e){return(0,n.number)(e.nonceLength),(t,...r)=>({encrypt:(n,...s)=>{const{nonceLength:o}=e,l=(0,i.randomBytes)(o),c=e(t,l,...r).encrypt(n,...s),d=(0,a.concatBytes)(l,c);return c.fill(0),d},decrypt:(i,...a)=>{const{nonceLength:n}=e,s=i.subarray(0,n),o=i.subarray(n);return e(t,s,...r).decrypt(o,...a)}})},r.utils={async encrypt(e,t,r,a){const n=(0,i.getWebcryptoSubtle)(),s=await n.importKey("raw",e,t,!0,["encrypt"]),o=await n.encrypt(r,s,a);return new Uint8Array(o)},async decrypt(e,t,r,a){const n=(0,i.getWebcryptoSubtle)(),s=await n.importKey("raw",e,t,!0,["decrypt"]),o=await n.decrypt(r,s,a);return new Uint8Array(o)}};const s={CBC:"AES-CBC",CTR:"AES-CTR",GCM:"AES-GCM"};function o(e){return(t,i,a)=>{(0,n.bytes)(t),(0,n.bytes)(i);const o={name:e,length:8*t.length},l=function(e,t,r){if(e===s.CBC)return{name:s.CBC,iv:t};if(e===s.CTR)return{name:s.CTR,counter:t,length:64};if(e===s.GCM)return{name:s.GCM,iv:t,additionalData:r};throw new Error("unknown aes block mode")}(e,i,a);return{encrypt:e=>((0,n.bytes)(e),r.utils.encrypt(t,o,l,e)),decrypt:e=>((0,n.bytes)(e),r.utils.decrypt(t,o,l,e))}}}r.cbc=o(s.CBC),r.ctr=o(s.CTR),r.gcm=o(s.GCM)}}},{package:"@noble/ciphers",file:"node_modules/@noble/ciphers/webcrypto.js"}],[228,{lodash:3770},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.migrate=async function(e){const t=(0,i.cloneDeep)(e);return t.meta.version=a,function(e){const t=null==e?void 0:e.TransactionController;if(!t)return;const r=(null==t?void 0:t.transactions)||{},i=Object.values(r).sort(((e,t)=>e.time>t.time?-1:1));e.TransactionController={...t,transactions:i}}(t.data),t},r.version=void 0;var i=e("lodash");const a=r.version=104}}},{package:"$root$",file:"app/scripts/migrations/104.ts"}],[229,{"../../../shared/constants/eth-methods":4414,"@metamask/keyring-api":1397,"ethereumjs-util":3223,lodash:3770,uuid:4341},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.migrate=async function(e){const t=(0,s.cloneDeep)(e);return t.meta.version=l,function(e){(function(e){e.AccountsController={internalAccounts:{accounts:{},selectedAccount:""}}})(e),function(e){var t;const r=(null===(t=e.PreferencesController)||void 0===t?void 0:t.identities)||{};if(0===Object.keys(r).length)return;const s={};Object.values(r).forEach((e=>{const t=(0,n.v4)({random:(0,a.sha256FromString)(e.address).slice(0,16)});s[t]={address:e.address,id:t,options:{},metadata:{name:e.name,lastSelected:e.lastSelected??undefined,keyring:{type:"HD Key Tree"}},methods:o.ETH_EOA_METHODS,type:i.EthAccountType.Eoa}})),e.AccountsController.internalAccounts.accounts=s}(e),function(e){var t;let r=null===(t=e.PreferencesController)||void 0===t?void 0:t.selectedAddress;if("string"!=typeof r){var i,a;null===(i=global.sentry)||void 0===i||null===(a=i.captureException)||void 0===a||a.call(i,new Error(`state.PreferencesController?.selectedAddress is ${r}`)),r=function(e){var t;const[r]=Object.keys((null===(t=e.PreferencesController)||void 0===t?void 0:t.identities)||{});return r}(e)}const n=function(e,t){return Object.values(e.AccountsController.internalAccounts.accounts).find((e=>e.address.toLowerCase()===t.toLowerCase()))}(e,r);n&&(e.PreferencesController.selectedAddress=n.address,e.AccountsController.internalAccounts={...e.AccountsController.internalAccounts,selectedAccount:n.id})}(e)}(t.data),t},r.version=void 0;var i=e("@metamask/keyring-api"),a=e("ethereumjs-util"),n=e("uuid"),s=e("lodash"),o=e("../../../shared/constants/eth-methods");const l=r.version=105}}},{package:"$root$",file:"app/scripts/migrations/105.ts"}],[2291,{"./_assert.js":2284,"./pbkdf2.js":2289,"./sha256.js":2292,"./utils.js":2295},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.scryptAsync=r.scrypt=void 0;const i=e("./_assert.js"),a=e("./sha256.js"),n=e("./pbkdf2.js"),s=e("./utils.js");function o(e,t,r,i,a,n){let o=e[t++]^r[i++],l=e[t++]^r[i++],c=e[t++]^r[i++],d=e[t++]^r[i++],u=e[t++]^r[i++],h=e[t++]^r[i++],p=e[t++]^r[i++],m=e[t++]^r[i++],f=e[t++]^r[i++],v=e[t++]^r[i++],g=e[t++]^r[i++],_=e[t++]^r[i++],k=e[t++]^r[i++],y=e[t++]^r[i++],w=e[t++]^r[i++],T=e[t++]^r[i++],b=o,E=l,S=c,P=d,C=u,A=h,I=p,j=m,M=f,x=v,N=g,O=_,R=k,G=y,L=w,B=T;for(let e=0;e<8;e+=2)C^=(0,s.rotl)(b+R|0,7),M^=(0,s.rotl)(C+b|0,9),R^=(0,s.rotl)(M+C|0,13),b^=(0,s.rotl)(R+M|0,18),x^=(0,s.rotl)(A+E|0,7),G^=(0,s.rotl)(x+A|0,9),E^=(0,s.rotl)(G+x|0,13),A^=(0,s.rotl)(E+G|0,18),L^=(0,s.rotl)(N+I|0,7),S^=(0,s.rotl)(L+N|0,9),I^=(0,s.rotl)(S+L|0,13),N^=(0,s.rotl)(I+S|0,18),P^=(0,s.rotl)(B+O|0,7),j^=(0,s.rotl)(P+B|0,9),O^=(0,s.rotl)(j+P|0,13),B^=(0,s.rotl)(O+j|0,18),E^=(0,s.rotl)(b+P|0,7),S^=(0,s.rotl)(E+b|0,9),P^=(0,s.rotl)(S+E|0,13),b^=(0,s.rotl)(P+S|0,18),I^=(0,s.rotl)(A+C|0,7),j^=(0,s.rotl)(I+A|0,9),C^=(0,s.rotl)(j+I|0,13),A^=(0,s.rotl)(C+j|0,18),O^=(0,s.rotl)(N+x|0,7),M^=(0,s.rotl)(O+N|0,9),x^=(0,s.rotl)(M+O|0,13),N^=(0,s.rotl)(x+M|0,18),R^=(0,s.rotl)(B+L|0,7),G^=(0,s.rotl)(R+B|0,9),L^=(0,s.rotl)(G+R|0,13),B^=(0,s.rotl)(L+G|0,18);a[n++]=o+b|0,a[n++]=l+E|0,a[n++]=c+S|0,a[n++]=d+P|0,a[n++]=u+C|0,a[n++]=h+A|0,a[n++]=p+I|0,a[n++]=m+j|0,a[n++]=f+M|0,a[n++]=v+x|0,a[n++]=g+N|0,a[n++]=_+O|0,a[n++]=k+R|0,a[n++]=y+G|0,a[n++]=w+L|0,a[n++]=T+B|0}function l(e,t,r,i,a){let n=i+0,s=i+16*a;for(let i=0;i<16;i++)r[s+i]=e[t+16*(2*a-1)+i];for(let i=0;i<a;i++,n+=16,t+=16)o(r,s,e,t,r,n),i>0&&(s+=16),o(r,n,e,t+=16,r,s)}function c(e,t,r){const o=(0,s.checkOpts)({dkLen:32,asyncTick:10,maxmem:1073742848},r),{N:l,r:c,p:d,dkLen:u,asyncTick:h,maxmem:p,onProgress:m}=o;if((0,i.number)(l),(0,i.number)(c),(0,i.number)(d),(0,i.number)(u),(0,i.number)(h),(0,i.number)(p),m!==undefined&&"function"!=typeof m)throw new Error("progressCb should be function");const f=128*c,v=f/4;if(l<=1||l&l-1||l>=2**(f/8)||l>2**32)throw new Error("Scrypt: N must be larger than 1, a power of 2, less than 2^(128 * r / 8) and less than 2^32");if(d<0||d>137438953440/f)throw new Error("Scrypt: p must be a positive integer less than or equal to ((2^32 - 1) * 32) / (128 * r)");if(u<0||u>137438953440)throw new Error("Scrypt: dkLen should be positive integer less than or equal to (2^32 - 1) * 32");const g=f*(l+d);if(g>p)throw new Error(`Scrypt: parameters too large, ${g} (128 * r * (N + p)) > ${p} (maxmem)`);const _=(0,n.pbkdf2)(a.sha256,e,t,{c:1,dkLen:f*d}),k=(0,s.u32)(_),y=(0,s.u32)(new Uint8Array(f*l)),w=(0,s.u32)(new Uint8Array(f));let T=()=>{};if(m){const e=2*l*d,t=Math.max(Math.floor(e/1e4),1);let r=0;T=()=>{r++,!m||r%t&&r!==e||m(r/e)}}return{N:l,r:c,p:d,dkLen:u,blockSize32:v,V:y,B32:k,B:_,tmp:w,blockMixCb:T,asyncTick:h}}function d(e,t,r,i,s){const o=(0,n.pbkdf2)(a.sha256,e,r,{c:1,dkLen:t});return r.fill(0),i.fill(0),s.fill(0),o}r.scrypt=function(e,t,r){const{N:i,r:a,p:n,dkLen:o,blockSize32:u,V:h,B32:p,B:m,tmp:f,blockMixCb:v}=c(e,t,r);s.isLE||(0,s.byteSwap32)(p);for(let e=0;e<n;e++){const t=u*e;for(let e=0;e<u;e++)h[e]=p[t+e];for(let e=0,t=0;e<i-1;e++)l(h,t,h,t+=u,a),v();l(h,(i-1)*u,p,t,a),v();for(let e=0;e<i;e++){const e=p[t+u-16]%i;for(let r=0;r<u;r++)f[r]=p[t+r]^h[e*u+r];l(f,0,p,t,a),v()}}return s.isLE||(0,s.byteSwap32)(p),d(e,o,m,h,f)},r.scryptAsync=async function(e,t,r){const{N:i,r:a,p:n,dkLen:o,blockSize32:u,V:h,B32:p,B:m,tmp:f,blockMixCb:v,asyncTick:g}=c(e,t,r);s.isLE||(0,s.byteSwap32)(p);for(let e=0;e<n;e++){const t=u*e;for(let e=0;e<u;e++)h[e]=p[t+e];let r=0;await(0,s.asyncLoop)(i-1,g,(()=>{l(h,r,h,r+=u,a),v()})),l(h,(i-1)*u,p,t,a),v(),await(0,s.asyncLoop)(i,g,(()=>{const e=p[t+u-16]%i;for(let r=0;r<u;r++)f[r]=p[t+r]^h[e*u+r];l(f,0,p,t,a),v()}))}return s.isLE||(0,s.byteSwap32)(p),d(e,o,m,h,f)}}}},{package:"@noble/hashes",file:"node_modules/@noble/hashes/scrypt.js"}],[23,{"../../user-storage/encryption":44,"../utils/utils":24,loglevel:3776},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.TRIGGER_API_BATCH_ENDPOINT=r.TRIGGER_API=r.NOTIFICATION_API_MARK_ALL_AS_READ_ENDPOINT=r.NOTIFICATION_API_LIST_ENDPOINT_PAGE_QUERY=r.NOTIFICATION_API_LIST_ENDPOINT=r.NOTIFICATION_API=void 0,r.createOnChainTriggers=async function(e,t,r,i){const o=i.map((e=>({id:e.id,token:(0,s.createSHA256Hash)(e.id+t),config:{kind:e.kind,chain_id:Number(e.chainId),address:e.address}})));if(0===o.length)return;const l=await(0,n.makeApiCall)(r,c,"POST",o);if(!l.ok){const e=await l.json().catch((()=>undefined));throw a.default.error("Error creating triggers:",e),new Error("OnChain Notifications - unable to create triggers")}for(const t of o)(0,n.toggleUserStorageTriggerStatus)(e,t.config.address,String(t.config.chain_id),t.id,!0)},r.deleteOnChainTriggers=async function(e,t,r,i){const o=i.map((e=>({id:e,token:(0,s.createSHA256Hash)(e+t)})));try{if(!(await(0,n.makeApiCall)(r,c,"DELETE",o)).ok)throw new Error(`Failed to delete on-chain notifications for uuids ${i.join(", ")}`);for(const t of i)for(const r in e)if(Object.hasOwn(e,r))for(const i in e[r]){var l;null!=e&&null!==(l=e[r])&&void 0!==l&&null!==(l=l[i])&&void 0!==l&&l[t]&&delete e[r][i][t]}const t=(e={})=>0===Object.keys(e).length;for(const r in e)if(Object.hasOwn(e,r)){for(const i in e[r]){var d;t(null==e||null===(d=e[r])||void 0===d?void 0:d[i])&&delete e[r][i]}t(null==e?void 0:e[r])&&delete e[r]}}catch(e){throw a.default.error(`Error deleting on-chain notifications for uuids ${i.join(", ")}:`,e),e}return e},r.getOnChainNotifications=async function(e,t){const r=(0,n.traverseUserStorageTriggers)(e,{mapTrigger:e=>e.enabled?e.id:undefined});if(0===r.length)return[];const i=[];for(let e=1;e<=2;e++)try{const a=await(0,n.makeApiCall)(t,u(e),"POST",{trigger_ids:r}),s=await a.json(),o=s.map((e=>{var t;return null!==(t=e.data)&&void 0!==t&&t.kind?{...e,type:e.data.kind}:undefined})).filter((e=>Boolean(e)));if(i.push(...o),s.length<100){e=3;break}}catch(e){a.default.error(`Error fetching on-chain notifications for trigger IDs ${r.join(", ")}:`,e)}return i},r.markNotificationsAsRead=async function(e,t){if(0===t.length)return;try{const r=await(0,n.makeApiCall)(e,h,"POST",{ids:t});if(200!==r.status){const e=await r.json().catch((()=>undefined));throw new Error(`Error marking notifications as read: ${null==e?void 0:e.message}`)}}catch(e){throw a.default.error("Error marking notifications as read:",e),e}};var i,a=(i=e("loglevel"))&&i.__esModule?i:{default:i},n=e("../utils/utils"),s=e("../../user-storage/encryption");const o=r.TRIGGER_API="https://trigger.api.cx.metamask.io",l=r.NOTIFICATION_API="https://notification.api.cx.metamask.io",c=r.TRIGGER_API_BATCH_ENDPOINT=`${o}/api/v1/triggers/batch`,d=r.NOTIFICATION_API_LIST_ENDPOINT=`${l}/api/v1/notifications`,u=e=>`${d}?page=${e}&per_page=100`;r.NOTIFICATION_API_LIST_ENDPOINT_PAGE_QUERY=u;const h=r.NOTIFICATION_API_MARK_ALL_AS_READ_ENDPOINT=`${l}/api/v1/notifications/mark-as-read`}}},{package:"$root$",file:"app/scripts/controllers/metamask-notifications/services/onchain-notifications.ts"}],[230,{lodash:3770},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.migrate=async function(e){const t=(0,i.cloneDeep)(e);t.meta.version=a;const r=function(e){const t=(null==e?void 0:e.PreferencesController)||{};return{...e,PreferencesController:{...t,securityAlertsEnabled:!0!==t.transactionSecurityCheckEnabled}}}(t.data);return t.data=r,t},r.version=void 0;var i=e("lodash");const a=r.version=106}}},{package:"$root$",file:"app/scripts/migrations/106.js"}],[231,{"@metamask/utils":2253,lodash:3770},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.migrate=async function(e){const t=(0,i.cloneDeep)(e);return t.meta.version=n,t.data=function(e){if(!((0,a.hasProperty)(e,"CachedBalancesController")&&(0,a.isObject)(e.CachedBalancesController)&&(0,a.hasProperty)(e.CachedBalancesController,"cachedBalances")&&(0,a.isObject)(e.CachedBalancesController.cachedBalances)&&(0,a.hasProperty)(e,"AccountTracker")&&(0,a.isObject)(e.AccountTracker)))return e;e.AccountTracker.accountsByChainId||(e.AccountTracker.accountsByChainId={});const t=e.AccountTracker,r=e.CachedBalancesController.cachedBalances;return Object.keys(r).forEach((e=>{t.accountsByChainId[e]||(t.accountsByChainId[e]={}),Object.keys(r[e]).forEach((i=>{if(t.accountsByChainId[e][i]===undefined){const a=r[e][i];t.accountsByChainId[e][i]={address:i,balance:a}}}))})),delete e.CachedBalancesController,e.AccountTracker=t,e}(t.data),t},r.version=void 0;var i=e("lodash"),a=e("@metamask/utils");const n=r.version=107}}},{package:"$root$",file:"app/scripts/migrations/107.ts"}],[232,{lodash:3770},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.migrate=async function(e){const t=(0,i.cloneDeep)(e);return t.meta.version=a,function(e){var t,r;const a=(null==e||null===(t=e.AddressBookController)||void 0===t?void 0:t.addressBook)??{},n=(null==e||null===(r=e.NameController)||void 0===r||null===(r=r.names)||void 0===r?void 0:r.ethereumAddress)??{};if((0,i.isEmpty)(Object.keys(a)))return;for(const e of Object.keys(a)){const t=a[e];for(const r of Object.keys(t)){var s,o;const i=t[r],a=r.toLowerCase(),l=n[a]??{};null!==(s=(l[e]??{}).name)&&void 0!==s&&s.length||null===(o=i.name)||void 0===o||!o.length||null==a||!a.length||(n[a]=l,l[e]={name:i.name,sourceId:i.isEns?"ens":null,proposedNames:{}})}}e.NameController={...e.NameController,names:{ethereumAddress:n}}}(t.data),t},r.version=void 0;var i=e("lodash");const a=r.version=108}}},{package:"$root$",file:"app/scripts/migrations/108.ts"}]],[],{});